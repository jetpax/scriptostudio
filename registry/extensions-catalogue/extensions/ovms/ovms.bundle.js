// === EXTENSION_BUNDLE ===
// Generated by bundle_extensions.js
// Do not edit - regenerated on each build
// BUILD_ID: 2026-02-12T18-23-52

console.log('%c[OVMS] BUILD 2026-02-12T18-23-52', 'color: #ff8c00; font-weight: bold');

export const __EXTENSION_META__ = {
  "name": "OVMS",
  "id": "ovms",
  "version": [
    0,
    9,
    0
  ],
  "author": "JetPax",
  "description": "Pushes vehicle metrics to an OVMS v2 server for remote monitoring.",
  "icon": "cloud",
  "iconSvg": "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-car\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" /><path d=\"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0\" /><path d=\"M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5\" /></svg>",
  "menu": [
    {
      "id": "config",
      "label": "Configuration"
    },
    {
      "id": "metrics",
      "label": "Metrics"
    },
    {
      "id": "status",
      "label": "Status"
    }
  ],
  "styles": ".ovms-section { margin-bottom: 24px; } .ovms-section h3 { font-size: 18px; font-weight: 600; color: var(--scheme-primary); margin-bottom: 12px; } .ovms-field { display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; } .ovms-field label { font-size: 14px; font-weight: 600; color: var(--text-primary); } .ovms-field input, .ovms-field select { padding: 10px 12px; border: 2px solid var(--border-color); border-radius: 6px; background: var(--input-bg); color: var(--text-primary); font-size: 14px; } .ovms-field input:focus, .ovms-field select:focus { outline: none; border-color: var(--scheme-primary); box-shadow: 0 0 0 3px rgba(0, 129, 132, 0.2); } .ovms-button { text-transform: uppercase; letter-spacing: 0.5px; width: auto; padding: 10px 20px; border: none; border-radius: 6px; background: var(--scheme-primary); color: white; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; } .ovms-button:hover { opacity: 0.9; transform: translateY(-1px); } .ovms-button:disabled { opacity: 0.5; cursor: not-allowed; } .ovms-button.secondary { background: var(--bg-tertiary); color: var(--text-primary); } .ovms-button.connect { background: #4caf50; color: white; } .ovms-button.connect:hover { background: #45a049; } .ovms-button.disconnect { background: #f44336; color: white; } .ovms-button.disconnect:hover { background: #da190b; } .ovms-metrics-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; padding: 20px; } .ovms-metric-card { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; } .ovms-metric-name { font-weight: 600; color: var(--scheme-primary); font-size: 13px; margin-bottom: 8px; } .ovms-metric-value { font-size: 24px; font-weight: 700; font-family: 'Menlo', Monaco, 'Courier New', monospace; color: var(--text-primary); } .ovms-metric-unit { font-size: 12px; color: var(--text-secondary); margin-top: 4px; } .ovms-status-panel { padding: 20px; } .ovms-status-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border-color); } .ovms-status-item:last-child { border-bottom: none; } .ovms-status-label { font-weight: 600; color: var(--text-primary); } .ovms-status-value { color: var(--text-secondary); } .ovms-status-value.connected { color: #4caf50; } .ovms-status-value.error { color: #f44336; }",
  "devicePaths": {
    "lib/ovms/__init__.py": "/lib/ext/ovms/__init__.py",
    "lib/ovms/OVMS_helpers.py": "/lib/ext/ovms/OVMS_helpers.py",
    "lib/ovms/vehicle.py": "/lib/ext/ovms/vehicle.py",
    "lib/ovms/base64.py": "/lib/ext/ovms/base64.py",
    "lib/ovms/binascii.py": "/lib/ext/ovms/binascii.py",
    "lib/ovms/hmac.py": "/lib/ext/ovms/hmac.py",
    "lib/ovms/vehicles/__init__.py": "/lib/ext/ovms/vehicles/__init__.py",
    "lib/ovms/vehicles/zombie_vcu/__init__.py": "/lib/ext/ovms/vehicles/zombie_vcu/__init__.py",
    "lib/ovms/vehicles/zombie_vcu/zombie_vcu.py": "/lib/ext/ovms/vehicles/zombie_vcu/zombie_vcu.py",
    "lib/ovms/vehicles/obdii/__init__.py": "/lib/ext/ovms/vehicles/obdii/__init__.py",
    "lib/ovms/vehicles/obdii/obdii.py": "/lib/ext/ovms/vehicles/obdii/obdii.py",
    "lib/ovms/vehicles/tesla_model3/__init__.py": "/lib/ext/ovms/vehicles/tesla_model3/__init__.py",
    "lib/ovms/vehicles/tesla_model3/tesla_model3.py": "/lib/ext/ovms/vehicles/tesla_model3/tesla_model3.py",
    "lib/ovms/vehicles/headless_zombie/__init__.py": "/lib/ext/ovms/vehicles/headless_zombie/__init__.py",
    "lib/ovms/vehicles/headless_zombie/headless_zombie.py": "/lib/ext/ovms/vehicles/headless_zombie/headless_zombie.py"
  }
};

export const __DEVICE_FILES__ = {
  "/lib/ext/ovms/__init__.py": "IyBPVk1TIEV4dGVuc2lvbiAtIERldmljZS1zaWRlIFB5dGhvbiBwYWNrYWdlCg==",
  "/lib/ext/ovms/OVMS_helpers.py": "IiIiCk9WTVMgSGVscGVyIEZ1bmN0aW9ucwo9PT09PT09PT09PT09PT09PT09PT0KClRoaXMgbW9kdWxlIHByb3ZpZGVzIE9WTVMgdjIgc2VydmVyIGNsaWVudCBmdW5jdGlvbmFsaXR5IGZvciBzZW5kaW5nCk9wZW5JbnZlcnRlciBtZXRyaWNzIHRvIGFuIE9WTVMgc2VydmVyLgoKQ2xpZW50LWNhbGxhYmxlIGZ1bmN0aW9uczoKLSBnZXRPVk1TTWV0cmljcygpICAgICAgICAgIC0gR2V0IGN1cnJlbnQgbWV0cmljcyBzdG9yZQotIHN0YXJ0T1ZNUygpICAgICAgICAgICAgICAtIFN0YXJ0IE9WTVMgY2xpZW50Ci0gc3RvcE9WTVMoKSAgICAgICAgICAgICAgIC0gU3RvcCBPVk1TIGNsaWVudAotIGdldE9WTVNTdGF0dXMoKSAgICAgICAgICAtIEdldCBjb25uZWN0aW9uIHN0YXR1cwotIHRlc3RPVk1TQ29ubmVjdGl2aXR5KCkgICAtIFRlc3QgY29ubmVjdGlvbiB0byBPVk1TIHNlcnZlciB3aXRob3V0IHN0YXJ0aW5nIHNlcnZpY2UKLSBsaXN0VmVoaWNsZXMoKSAgICAgICAgICAgLSBMaXN0IGF2YWlsYWJsZSB2ZWhpY2xlIHR5cGVzCgpVcGRhdGUgYmVoYXZpb3IgKG1hdGNoZXMgT1ZNUyB2Myk6Ci0gV2hlbiBhcHBzIGNvbm5lY3RlZCAocGVlcnMgPiAwKTogVXBkYXRlcyBldmVyeSA2MCBzZWNvbmRzIChjb25maWd1cmFibGUpCi0gV2hlbiBpZGxlIChwZWVycyA9PSAwKTogVXBkYXRlcyBldmVyeSA2MDAgc2Vjb25kcyAoY29uZmlndXJhYmxlKQotIEltbWVkaWF0ZSB1cGRhdGUgc2VudCB3aGVuIGFwcCBmaXJzdCBjb25uZWN0cyAoYmFuZHdpZHRoIG9wdGltaXphdGlvbikKIiIiCgp0cnk6CiAgICAjIFNpbGVudCAtIG1vZHVsZSBpbml0aWFsaXphdGlvbiBzaG91bGQgbm90IHByb2R1Y2Ugb3V0cHV0CiAgICBpbXBvcnQganNvbgogICAgaW1wb3J0IGxvZ2dpbmcKICAgIGltcG9ydCB0aW1lCiAgICBpbXBvcnQgc29ja2V0CiAgICBpbXBvcnQgc3RydWN0CiAgICBpbXBvcnQgaGFzaGxpYgogICAgaW1wb3J0IGJhc2U2NAogICAgaW1wb3J0IHN5cwogICAgIyBTaWxlbnQgLSBtb2R1bGUgaW5pdGlhbGl6YXRpb24gc2hvdWxkIG5vdCBwcm9kdWNlIG91dHB1dAogICAgaW1wb3J0IHdlYnJlcGxfYmluYXJ5IGFzIHdlYnJlcGwKICAgICMgSW1wb3J0IHNldHRpbmdzIG1vZHVsZSBmb3IgY29uZmlndXJhdGlvbiBtYW5hZ2VtZW50CiAgICBmcm9tIGxpYi5zeXMgaW1wb3J0IHNldHRpbmdzCiAgICAjIFNpbGVudCAtIG1vZHVsZSBpbml0aWFsaXphdGlvbiBzaG91bGQgbm90IHByb2R1Y2Ugb3V0cHV0CmV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICMgU2lsZW50IC0gaW1wb3J0IGVycm9ycyBzaG91bGQgZmFpbCBmYXN0LCBub3QgcHJvZHVjZSBvdXRwdXQKICAgIHJhaXNlICAjIFJlLXJhaXNlIHRvIGZhaWwgZmFzdAoKIyBJbXBvcnQgaG1hYyBtb2R1bGUgZnJvbSBweURpcmVjdCBjb3JlIGxpYgppbXBvcnQgaG1hYwoKIyBDcmVhdGUgYSBsb2dnZXIgZm9yIE9WTVMKbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoIk9WTVMiKQpoYW5kbGVyID0gd2VicmVwbC5sb2dIYW5kbGVyKGxvZ2dpbmcuSU5GTykKbG9nZ2VyLmFkZEhhbmRsZXIoaGFuZGxlcikKbG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuREVCVUcpCgojIENBTiBhbmQgVURTIGltcG9ydHMgLSB3aWxsIGJlIGltcG9ydGVkIHdoZW4gbmVlZGVkCiMgTm90ZTogVURTIGxpYnJhcnkgcHJvdmlkZXMgT0JEMkNsaWVudC9PQkQyVGltZW91dEVycm9yL09CRDJBYm9ydEVycm9yIGFzIGNvbXBhdGliaWxpdHkgYWxpYXNlcwpDQU5fQVZBSUxBQkxFID0gTm9uZQpDQU4gPSBOb25lClVEU0NsaWVudCA9IE5vbmUgICMgVXNlZCBhcyBPQkQyQ2xpZW50IGFsaWFzClVEU1RpbWVvdXRFcnJvciA9IE5vbmUKVURTTmVnYXRpdmVSZXNwb25zZUVycm9yID0gTm9uZQoKIyBPVk1TIENBTiBjb25uZWN0aW9uIHN0YXRlCl9vdm1zX2Nhbl9kZXYgPSBOb25lCl9vdm1zX3Vkc19jbGllbnQgPSBOb25lCl9vdm1zX2Nhbl9jb25uZWN0ZWQgPSBGYWxzZQpfdmVoaWNsZV9jb25maWcgPSBOb25lICAjIExvYWRlZCBmcm9tIHZlaGljbGUucHkKCgojIENvbmZpZ3VyYXRpb24gaXMgbm93IG1hbmFnZWQgZW50aXJlbHkgdmlhIHNldHRpbmdzIG1vZHVsZSAobm8gbG9jYWwgY2FjaGUgbmVlZGVkKQoKIyBNZXRyaWNzIHN0b3JlCl9tZXRyaWNzID0ge30KCiMgT1ZNUyBjbGllbnQgc3RhdGUKX292bXNfc29ja2V0ID0gTm9uZQpfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZQpfb3Ztc19zdGF0ZSA9ICdkaXNjb25uZWN0ZWQnICAjIGRpc2Nvbm5lY3RlZCwgY29ubmVjdGluZywgY29ubmVjdGVkLCBlcnJvcgpfb3Ztc19zdGF0dXMgPSAnJwpfb3Ztc190b2tlbiA9ICcnCl9vdm1zX2NyeXB0b19yeCA9IE5vbmUKX292bXNfY3J5cHRvX3R4ID0gTm9uZQpfb3Ztc19wZWVycyA9IDAgICMgTnVtYmVyIG9mIGNvbm5lY3RlZCBhcHBzL3BlZXJzCl9wb2xsX3Rhc2sgPSBOb25lCl9yZWFkZXJfdGFzayA9IE5vbmUgICMgQmFja2dyb3VuZCB0YXNrIGZvciByZWFkaW5nIHNlcnZlciBtZXNzYWdlcwpfbGFzdF9wb2xsX3RpbWUgPSAwCl9zdG9wX3JlYWRlciA9IEZhbHNlICAjIEZsYWcgdG8gc3RvcCByZWFkZXIgdGFzawoKIyBWZWhpY2xlIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBsb2FkZWQgZnJvbSB2ZWhpY2xlLnB5IG1vZHVsZQojIFRoaXMgYWxsb3dzIHN1cHBvcnQgZm9yIG11bHRpcGxlIHZlaGljbGUgdHlwZXMgKFpvbWJpZVZlcnRlciwgVGVzbGEsIGV0Yy4pCgoKZGVmIF9zZW5kX3Jlc3BvbnNlKG1zZ190eXBlLCBkYXRhKToKICAgICIiIkludGVybmFsIGhlbHBlciB0byBzZW5kIG5vdGlmaWNhdGlvbiB0byBXZWJSRVBMIGNsaWVudAogICAgCiAgICBVc2VzIHdlYnJlcGwubm90aWZ5KCkgdG8gc2VuZCBzdHJ1Y3R1cmVkIGRhdGEgdmlhIElORk8gZXZlbnQuCiAgICBNZXNzYWdlIGZvcm1hdDogeyJvdm1zIjogeyJ0eXBlIjogbXNnX3R5cGUsICJkYXRhIjogZGF0YX19CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEVuc3VyZSBkYXRhIGlzIEpTT04tc2VyaWFsaXphYmxlIChyZWN1cnNpdmVseSBoYW5kbGUgbmVzdGVkIGRpY3RzL2xpc3RzKQogICAgICAgIGRlZiBtYWtlX3NlcmlhbGl6YWJsZShvYmopOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKG9iaiwgZGljdCk6CiAgICAgICAgICAgICAgICByZXR1cm4ge2s6IG1ha2Vfc2VyaWFsaXphYmxlKHYpIGZvciBrLCB2IGluIG9iai5pdGVtcygpfQogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCAobGlzdCwgdHVwbGUpKToKICAgICAgICAgICAgICAgIHJldHVybiBbbWFrZV9zZXJpYWxpemFibGUoaXRlbSkgZm9yIGl0ZW0gaW4gb2JqXQogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2Uob2JqLCAoc3RyLCBpbnQsIGZsb2F0LCBib29sLCB0eXBlKE5vbmUpKSk6CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXR1cm4gc3RyKG9iaikgICMgQ29udmVydCB0byBzdHJpbmcgYXMgZmFsbGJhY2sKICAgICAgICAKICAgICAgICBkYXRhID0gbWFrZV9zZXJpYWxpemFibGUoZGF0YSkKICAgICAgICAKICAgICAgICAjIFNlbmQgdmlhIG5vdGlmeSAoSU5GTyBldmVudCkKICAgICAgICBpZiBoYXNhdHRyKHdlYnJlcGwsICdub3RpZnknKToKICAgICAgICAgICAgd2VicmVwbC5ub3RpZnkoanNvbi5kdW1wcyh7Im92bXMiOiB7InR5cGUiOiBtc2dfdHlwZSwgImRhdGEiOiBkYXRhfX0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgRmFsbGJhY2sgZm9yIG9sZGVyIGZpcm13YXJlIC0gdXNlIGxvZwogICAgICAgICAgICB3ZWJyZXBsLmxvZyhmIltPVk1TXSB7bXNnX3R5cGV9OiB7anNvbi5kdW1wcyhkYXRhKX0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgU2VuZCBlcnJvciB2aWEgbG9nCiAgICAgICAgdHJ5OgogICAgICAgICAgICB3ZWJyZXBsLmxvZyhmIltPVk1TXSBFcnJvciBzZW5kaW5nIHJlc3BvbnNlOiB7ZX0sIHR5cGU6IHttc2dfdHlwZX0iLCBsZXZlbD0yKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcyAgIyBTaWxlbnQgZmFpbHVyZQoKCmRlZiBfc2VuZF9lcnJvcihtZXNzYWdlLCBtc2dfdHlwZT0nZXJyb3InKToKICAgICIiIkludGVybmFsIGhlbHBlciB0byBzZW5kIGVycm9yIHJlc3BvbnNlIiIiCiAgICBfc2VuZF9yZXNwb25zZShtc2dfdHlwZSwgeydlcnJvcic6IG1lc3NhZ2V9KQoKZGVmIGxpc3RWZWhpY2xlcygpOgogICAgIiIiTGlzdCBhdmFpbGFibGUgdmVoaWNsZXMgKGNvbW1hbmQgaGFuZGxlciBmb3IgdGVzdGluZykiIiIKICAgIHRyeToKICAgICAgICBmcm9tIGxpYi5leHQub3Ztcy52ZWhpY2xlIGltcG9ydCBsaXN0X3ZlaGljbGVzCiAgICAgICAgdmVoaWNsZXMgPSBsaXN0X3ZlaGljbGVzKCkKICAgICAgICBfc2VuZF9yZXNwb25zZSgndmVoaWNsZXNfbGlzdCcsIHZlaGljbGVzKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIF9zZW5kX2Vycm9yKGYnRmFpbGVkIHRvIGxpc3QgdmVoaWNsZXM6IHtlfScpCgpkZWYgZ2V0T1ZNU0NvbmZpZygpOgogICAgIiIiR2V0IGN1cnJlbnQgT1ZNUyBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MiIiIKICAgIGNvbmZpZyA9IHsKICAgICAgICAnZW5hYmxlZCc6IHNldHRpbmdzLmdldCgnb3Ztcy5lbmFibGVkJywgRmFsc2UpLAogICAgICAgICdzZXJ2ZXInOiBzZXR0aW5ncy5nZXQoJ292bXMuc2VydmVyJywgJycpLAogICAgICAgICdwb3J0Jzogc2V0dGluZ3MuZ2V0KCdvdm1zLnBvcnQnLCA2ODY3KSwKICAgICAgICAndmVoaWNsZWlkJzogc2V0dGluZ3MuZ2V0KCdvdm1zLnZlaGljbGVpZCcsICcnKSwKICAgICAgICAncGFzc3dvcmQnOiBzZXR0aW5ncy5nZXQoJ292bXMucGFzc3dvcmQnLCAnJyksCiAgICAgICAgJ3Rscyc6IHNldHRpbmdzLmdldCgnb3Ztcy50bHMnLCBGYWxzZSksCiAgICAgICAgJ3VwZGF0ZXRpbWVfY29ubmVjdGVkJzogc2V0dGluZ3MuZ2V0KCdvdm1zLnVwZGF0ZXRpbWVfY29ubmVjdGVkJywgNjApLAogICAgICAgICd1cGRhdGV0aW1lX2lkbGUnOiBzZXR0aW5ncy5nZXQoJ292bXMudXBkYXRldGltZV9pZGxlJywgNjAwKSwKICAgICAgICAndmVoaWNsZV90eXBlJzogc2V0dGluZ3MuZ2V0KCdvdm1zLnZlaGljbGVfdHlwZScsICd6b21iaWVfdmN1JykKICAgIH0KICAgIHByaW50KGpzb24uZHVtcHMoY29uZmlnKSkKCmRlZiBzZXRPVk1TQ29uZmlnKGNvbmZpZ19kaWN0KToKICAgICIiIlNldCBPVk1TIGNvbmZpZ3VyYXRpb24gdmlhIHNldHRpbmdzIG1vZHVsZQogICAgCiAgICBBcmdzOgogICAgICAgIGNvbmZpZ19kaWN0OiBEaWN0aW9uYXJ5IHdpdGggY29uZmlndXJhdGlvbiB2YWx1ZXMKICAgIAogICAgUmV0dXJuczoKICAgICAgICBKU09OIHJlc3BvbnNlIHdpdGggc3VjY2VzcyBzdGF0dXMKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgVXBkYXRlIHNldHRpbmdzCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gY29uZmlnX2RpY3QuaXRlbXMoKToKICAgICAgICAgICAgc2V0dGluZ3Muc2V0KGYnb3Ztcy57a2V5fScsIHZhbHVlKQogICAgICAgIAogICAgICAgICMgU2F2ZSB0byBkaXNrCiAgICAgICAgaWYgc2V0dGluZ3Muc2F2ZSgpOgogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWV9KSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiAnRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MnfSkpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogc3RyKGUpfSkpCgpkZWYgZ2V0T1ZNU01ldHJpY3MoKToKICAgICIiIkdldCBjdXJyZW50IG1ldHJpY3Mgc3RvcmUiIiIKICAgIHByaW50KGpzb24uZHVtcHMoX21ldHJpY3MuY29weSgpKSkKCgpkZWYgX2xvYWRfdmVoaWNsZV9jb25maWcoKToKICAgICIiIkxvYWQgdmVoaWNsZSBjb25maWd1cmF0aW9uIGJhc2VkIG9uIGNvbmZpZ3VyZWQgdmVoaWNsZSB0eXBlIiIiCiAgICBnbG9iYWwgX3ZlaGljbGVfY29uZmlnCiAgICAKICAgIGlmIF92ZWhpY2xlX2NvbmZpZyBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gX3ZlaGljbGVfY29uZmlnCiAgICAKICAgIHRyeToKICAgICAgICBmcm9tIGxpYi5leHQub3Ztcy52ZWhpY2xlIGltcG9ydCBnZXRfdmVoaWNsZV9jb25maWcsIGxpc3RfdmVoaWNsZXMKICAgICAgICB2ZWhpY2xlX3R5cGUgPSBzZXR0aW5ncy5nZXQoJ292bXMudmVoaWNsZV90eXBlJywgJ3pvbWJpZV92Y3UnKQogICAgICAgIF92ZWhpY2xlX2NvbmZpZyA9IGdldF92ZWhpY2xlX2NvbmZpZyh2ZWhpY2xlX3R5cGUpCiAgICAgICAgaWYgX3ZlaGljbGVfY29uZmlnIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIF92ZWhpY2xlX2NvbmZpZyA9IGdldF92ZWhpY2xlX2NvbmZpZygnem9tYmllX3ZjdScpCiAgICAgICAgcmV0dXJuIF92ZWhpY2xlX2NvbmZpZwogICAgZXhjZXB0IEltcG9ydEVycm9yIGFzIGU6CiAgICAgICAgIyBTaWxlbnQgLSBlcnJvcnMgaGFuZGxlZCBieSByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBOb25lCgoKZGVmIF9pbml0X2Nhbl9mb3Jfb3ZtcygpOgogICAgIiIiSW5pdGlhbGl6ZSBDQU4gYnVzIGZvciBPVk1TIGJhc2VkIG9uIHZlaGljbGUgY29uZmlndXJhdGlvbiIiIgogICAgZ2xvYmFsIF9vdm1zX2Nhbl9kZXYsIF9vdm1zX3Vkc19jbGllbnQsIF9vdm1zX2Nhbl9jb25uZWN0ZWQsIENBTiwgQ0FOX0FWQUlMQUJMRQogICAgZ2xvYmFsIFVEU0NsaWVudCwgVURTVGltZW91dEVycm9yLCBVRFNOZWdhdGl2ZVJlc3BvbnNlRXJyb3IsIF92ZWhpY2xlX2NvbmZpZwogICAgCiAgICBpZiBfb3Ztc19jYW5fY29ubmVjdGVkOgogICAgICAgIHJldHVybiBUcnVlCiAgICAKICAgICMgTG9hZCB2ZWhpY2xlIGNvbmZpZ3VyYXRpb24KICAgIF92ZWhpY2xlX2NvbmZpZyA9IF9sb2FkX3ZlaGljbGVfY29uZmlnKCkKICAgIGlmIF92ZWhpY2xlX2NvbmZpZyBpcyBOb25lOgogICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgcmV0dXJuIEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgSW1wb3J0IENBTiBtb2R1bGUKICAgIHRyeToKICAgICAgICBpbXBvcnQgQ0FOIGFzIENBTl9NT0RVTEUKICAgICAgICBDQU4gPSBDQU5fTU9EVUxFCiAgICAgICAgQ0FOX0FWQUlMQUJMRSA9IFRydWUKICAgIGV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgICAgICAjIFNpbGVudCAtIGVycm9ycyBoYW5kbGVkIGJ5IHJldHVybiBGYWxzZQogICAgICAgIENBTl9BVkFJTEFCTEUgPSBGYWxzZQogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICAjIEltcG9ydCBVRFMgY2xpZW50IGZyb20gcHlEaXJlY3QgY29yZSBsaWJyYXJ5IChwcm92aWRlcyBPQkQyIGNvbXBhdGliaWxpdHkpCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIudWRzX2NsaWVudCBpbXBvcnQgVURTQ2xpZW50LCBVRFNUaW1lb3V0RXJyb3IsIFVEU05lZ2F0aXZlUmVzcG9uc2VFcnJvcgogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgcmV0dXJuIEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgTm90ZTogR1ZSRVQgYW5kIENBTiBtb2R1bGUgbm93IHVzZSB1bmlmaWVkIENBTiBtYW5hZ2VyIC0gbm8gbmVlZCB0byBzdG9wIEdWUkVUCiAgICAjIFRoZSBtYW5hZ2VyIGhhbmRsZXMgY29vcmRpbmF0aW9uIGJldHdlZW4gbXVsdGlwbGUgQ0FOIGNsaWVudHMKICAgIAogICAgIyBHZXQgQ0FOIHBpbiBjb25maWd1cmF0aW9uIGZyb20gYm9hcmQgQVBJIChoYXJkd2FyZSBkZWZpbml0aW9uKQogICAgdHJ5OgogICAgICAgIGZyb20gbGliIGltcG9ydCBib2FyZAogICAgICAgIGlmIG5vdCBib2FyZC5oYXMoImNhbiIpOgogICAgICAgICAgICAjIEJvYXJkIGRvZXNuJ3QgaGF2ZSBDQU4gYnVzCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIGNhbl9idXMgPSBib2FyZC5jYW4oInR3YWkiKQogICAgICAgIHR4X3BpbiA9IGNhbl9idXMudHgKICAgICAgICByeF9waW4gPSBjYW5fYnVzLnJ4CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgIyBCb2FyZCBBUEkgbm90IGF2YWlsYWJsZSBvciBubyBDQU4gYnVzIGRlZmluZWQKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgIyBHZXQgQ0FOIHJ1bnRpbWUgY29uZmlndXJhdGlvbiBmcm9tIHNldHRpbmdzICh1c2VyIHByZWZlcmVuY2VzKQogICAgYml0cmF0ZSA9IHNldHRpbmdzLmdldCgnY2FuLmJpdHJhdGUnLCA1MDAwMDApCiAgICAKICAgICMgSW5pdGlhbGl6ZSBDQU4gZGV2aWNlCiAgICB0cnk6CiAgICAgICAgX292bXNfY2FuX2RldiA9IENBTigwLCBleHRmcmFtZT1GYWxzZSwgdHg9dHhfcGluLCByeD1yeF9waW4sIG1vZGU9Q0FOLk5PUk1BTCwgYml0cmF0ZT1iaXRyYXRlLCBhdXRvX3Jlc3RhcnQ9RmFsc2UpCiAgICAgICAgCiAgICAgICAgIyBJbml0aWFsaXplIE9CRDIgY2xpZW50IGJhc2VkIG9uIHZlaGljbGUgY29uZmlnCiAgICAgICAgdHhfaWQgPSBfdmVoaWNsZV9jb25maWcuZ2V0KCdjYW5fdHhfaWQnLCAweDdERikKICAgICAgICByeF9pZCA9IF92ZWhpY2xlX2NvbmZpZy5nZXQoJ2Nhbl9yeF9pZCcsIDB4N0U4KQogICAgICAgIF9vdm1zX3Vkc19jbGllbnQgPSBVRFNDbGllbnQoX292bXNfY2FuX2RldiwgdHhfaWQ9dHhfaWQsIHJ4X2lkPXJ4X2lkLCBwMl90aW1lb3V0PTEwMDApCiAgICAgICAgCiAgICAgICAgX292bXNfY2FuX2Nvbm5lY3RlZCA9IFRydWUKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgcmV0dXJuIEZhbHNlCiAgICAgICAgX292bXNfY2FuX2Nvbm5lY3RlZCA9IEZhbHNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIF9nZXRfc3BvdF92YWx1ZXNfZGlyZWN0KCk6CgogICAgZ2xvYmFsIF9vdm1zX2Nhbl9jb25uZWN0ZWQsIF9vdm1zX3Vkc19jbGllbnQsIF92ZWhpY2xlX2NvbmZpZwogICAgZ2xvYmFsIFVEU1RpbWVvdXRFcnJvciwgVURTTmVnYXRpdmVSZXNwb25zZUVycm9yCiAgICAKICAgICMgTG9hZCB2ZWhpY2xlIGNvbmZpZwogICAgaWYgX3ZlaGljbGVfY29uZmlnIGlzIE5vbmU6CiAgICAgICAgX3ZlaGljbGVfY29uZmlnID0gX2xvYWRfdmVoaWNsZV9jb25maWcoKQogICAgICAgIGlmIF92ZWhpY2xlX2NvbmZpZyBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4ge30KICAgIAogICAgIyBDaGVjayBwcm90b2NvbCBhbmQgZGlzcGF0Y2ggYWNjb3JkaW5nbHkKICAgIHByb3RvY29sID0gX3ZlaGljbGVfY29uZmlnLmdldCgncHJvdG9jb2wnLCAnb2JkMicpCiAgICAKICAgICMgUmVhbCB2ZWhpY2xlIHdpdGggT0JEMiBwcm90b2NvbCAtIGluaXRpYWxpemUgQ0FOCiAgICBpZiBub3QgX2luaXRfY2FuX2Zvcl9vdm1zKCk6CiAgICAgICAgcmV0dXJuIHt9CiAgICAKICAgIHNwb3RfbGlzdCA9IHt9CiAgICBwcm90b2NvbCA9IF92ZWhpY2xlX2NvbmZpZy5nZXQoJ3Byb3RvY29sJywgJ29iZDInKQogICAgbWV0cmljcyA9IF92ZWhpY2xlX2NvbmZpZy5nZXQoJ21ldHJpY3MnLCB7fSkKICAgIHBvbGxfdHlwZSA9IF92ZWhpY2xlX2NvbmZpZy5nZXQoJ3BvbGxfdHlwZScsIDB4MkEpCiAgICAKICAgIHRyeToKICAgICAgICAjIEltcG9ydCBwYXJzZSBmdW5jdGlvbnMgZnJvbSB2ZWhpY2xlcyBtb2R1bGUKICAgICAgICBmcm9tIGxpYi5leHQub3Ztcy52ZWhpY2xlIGltcG9ydCBQQVJTRV9GVU5DVElPTlMKICAgICAgICAKICAgICAgICAjIFJlYWQgZWFjaCBtZXRyaWMgdmlhIE9CRDIKICAgICAgICBmb3IgbmFtZSwgbWV0cmljX2NvbmZpZyBpbiBtZXRyaWNzLml0ZW1zKCk6CiAgICAgICAgICAgIHBpZCA9IG1ldHJpY19jb25maWcuZ2V0KCdwaWQnKQogICAgICAgICAgICBwYXJzZV9mdW5jX25hbWUgPSBtZXRyaWNfY29uZmlnLmdldCgncGFyc2VfZnVuYycpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBwaWQgaXMgbm90IE5vbmUgYW5kIHBhcnNlX2Z1bmNfbmFtZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHBhcnNlX2Z1bmMgPSBQQVJTRV9GVU5DVElPTlMuZ2V0KHBhcnNlX2Z1bmNfbmFtZSkKICAgICAgICAgICAgICAgIGlmIHBhcnNlX2Z1bmMgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgIyBTZW5kIE9CRDIgcmVxdWVzdAogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlX2RhdGEgPSBfb3Ztc191ZHNfY2xpZW50LnJlYWRfb2JkMl9waWQocG9sbF90eXBlLCBwaWQpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBQYXJzZSByZXNwb25zZSB1c2luZyB2ZWhpY2xlLXNwZWNpZmljIHBhcnNlIGZ1bmN0aW9uCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZV9mdW5jKHJlc3BvbnNlX2RhdGEpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3BvdF9saXN0W25hbWVdID0gewogICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3VuaXQnOiBtZXRyaWNfY29uZmlnLmdldCgndW5pdCcsICcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3RpbWVzdGFtcCc6IHRpbWUudGltZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZXhjZXB0IChVRFNUaW1lb3V0RXJyb3IsIFVEU05lZ2F0aXZlUmVzcG9uc2VFcnJvcikgYXMgZToKICAgICAgICAgICAgICAgICAgICAjIFNraXAgdGhpcyB2YWx1ZQogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAjIFNraXAgdGhpcyB2YWx1ZQogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgcmV0dXJuIGVtcHR5IGRpY3QKICAgICAgICBwYXNzCiAgICAKICAgIHJldHVybiBzcG90X2xpc3QKCgpkZWYgX3VwZGF0ZV9tZXRyaWNzX2Zyb21fc3BvdF92YWx1ZXMoKToKICAgICIiIlVwZGF0ZSBtZXRyaWNzIHN0b3JlIGZyb20gT3BlbkludmVydGVyIHNwb3QgdmFsdWVzIiIiCiAgICBnbG9iYWwgX21ldHJpY3MsIF9sYXN0X3BvbGxfdGltZQogICAgCiAgICB0cnk6CiAgICAgICAgc3BvdF92YWx1ZXMgPSBfZ2V0X3Nwb3RfdmFsdWVzX2RpcmVjdCgpCiAgICAgICAgY3VycmVudF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICBfbGFzdF9wb2xsX3RpbWUgPSBjdXJyZW50X3RpbWUKICAgICAgICAKICAgICAgICAjIE1hcCBPcGVuSW52ZXJ0ZXIgc3BvdCB2YWx1ZXMgdG8gbWV0cmljcwogICAgICAgIGZvciBuYW1lLCB2YWx1ZV9kYXRhIGluIHNwb3RfdmFsdWVzLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWVfZGF0YSwgZGljdCkgYW5kICd2YWx1ZScgaW4gdmFsdWVfZGF0YToKICAgICAgICAgICAgICAgIF9tZXRyaWNzW25hbWVdID0gewogICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZhbHVlX2RhdGFbJ3ZhbHVlJ10sCiAgICAgICAgICAgICAgICAgICAgJ3VuaXQnOiB2YWx1ZV9kYXRhLmdldCgndW5pdCcsICcnKSwKICAgICAgICAgICAgICAgICAgICAndGltZXN0YW1wJzogY3VycmVudF90aW1lCiAgICAgICAgICAgICAgICB9CiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgIyBTaWxlbnQgLSBlcnJvcnMgaGFuZGxlZCBieSByZXR1cm4gZW1wdHkgZGljdAogICAgICAgIHBhc3MKCgpkZWYgX3BvbGxfbG9vcCgpOgogICAgIiIiUGVyaW9kaWMgcG9sbGluZyBsb29wIGZvciBtZXRyaWNzIC0gY2FsbGVkIHBlcmlvZGljYWxseSIiIgogICAgZ2xvYmFsIF9wb2xsX3Rhc2sKICAgIAogICAgaWYgbm90IHNldHRpbmdzLmdldCgnb3Ztcy5lbmFibGVkJywgRmFsc2UpOgogICAgICAgIF9wb2xsX3Rhc2sgPSBOb25lCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHRyeToKICAgICAgICBfdXBkYXRlX21ldHJpY3NfZnJvbV9zcG90X3ZhbHVlcygpCiAgICAgICAgCiAgICAgICAgIyBTZW5kIG1ldHJpY3MgdG8gc2VydmVyIGlmIGNvbm5lY3RlZAogICAgICAgIGlmIF9vdm1zX2Nvbm5lY3RlZDoKICAgICAgICAgICAgX3NlbmRfbWV0cmljc190b19zZXJ2ZXIoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgcmV0dXJuCiAgICAgICAgcGFzcwogICAgCiAgICAjIE5vdGU6IEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBiZSBjYWxsZWQgYnkgYSB0aW1lciBvciBhc3luYyB0YXNrCiAgICAjIEZvciBub3csIHRoZSBmcm9udGVuZCBjYW4gdHJpZ2dlciBwb2xsaW5nIGJ5IGNhbGxpbmcgZ2V0T1ZNU01ldHJpY3MoKQoKCmNsYXNzIFJDNDoKICAgICIiIlNpbXBsZSBSQzQgY2lwaGVyIGltcGxlbWVudGF0aW9uIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5KToKICAgICAgICBzZWxmLlMgPSBsaXN0KHJhbmdlKDI1NikpCiAgICAgICAgaiA9IDAKICAgICAgICBmb3IgaSBpbiByYW5nZSgyNTYpOgogICAgICAgICAgICBqID0gKGogKyBzZWxmLlNbaV0gKyBrZXlbaSAlIGxlbihrZXkpXSkgJSAyNTYKICAgICAgICAgICAgc2VsZi5TW2ldLCBzZWxmLlNbal0gPSBzZWxmLlNbal0sIHNlbGYuU1tpXQogICAgICAgIHNlbGYuaSA9IDAKICAgICAgICBzZWxmLmogPSAwCiAgICAKICAgIGRlZiBjcnlwdChzZWxmLCBkYXRhKToKICAgICAgICAiIiJFbmNyeXB0L2RlY3J5cHQgZGF0YSIiIgogICAgICAgIHJlc3VsdCA9IGJ5dGVhcnJheSgpCiAgICAgICAgZm9yIGJ5dGUgaW4gZGF0YToKICAgICAgICAgICAgc2VsZi5pID0gKHNlbGYuaSArIDEpICUgMjU2CiAgICAgICAgICAgIHNlbGYuaiA9IChzZWxmLmogKyBzZWxmLlNbc2VsZi5pXSkgJSAyNTYKICAgICAgICAgICAgc2VsZi5TW3NlbGYuaV0sIHNlbGYuU1tzZWxmLmpdID0gc2VsZi5TW3NlbGYual0sIHNlbGYuU1tzZWxmLmldCiAgICAgICAgICAgIEsgPSBzZWxmLlNbKHNlbGYuU1tzZWxmLmldICsgc2VsZi5TW3NlbGYual0pICUgMjU2XQogICAgICAgICAgICByZXN1bHQuYXBwZW5kKGJ5dGUgXiBLKQogICAgICAgIHJldHVybiBieXRlcyhyZXN1bHQpCgoKZGVmIF9yYzRfc2V0dXAoa2V5KToKICAgICIiIlNldHVwIFJDNCBjaXBoZXIgc3RhdGUiIiIKICAgIHJldHVybiBSQzQoa2V5KQoKCmRlZiBfcmM0X2NyeXB0KHN0YXRlLCBkYXRhKToKICAgICIiIkVuY3J5cHQvZGVjcnlwdCBkYXRhIHdpdGggUkM0IiIiCiAgICBpZiBpc2luc3RhbmNlKHN0YXRlLCBSQzQpOgogICAgICAgIHJldHVybiBzdGF0ZS5jcnlwdChkYXRhKQogICAgcmV0dXJuIGRhdGEKCgpkZWYgX3NlbmRfbG9naW4oKToKICAgICIiIlNlbmQgbG9naW4gbWVzc2FnZSB0byBPVk1TIHNlcnZlciIiIgogICAgZ2xvYmFsIF9vdm1zX3Rva2VuLCBfb3Ztc19zdGF0ZSwgX292bXNfc3RhdHVzCiAgICAKICAgIGlmIG5vdCBfb3Ztc19zb2NrZXQ6CiAgICAgICAgcmV0dXJuCiAgICAKICAgIHRyeToKICAgICAgICAjIEdlbmVyYXRlIHJhbmRvbSB0b2tlbgogICAgICAgIGltcG9ydCBvcwogICAgICAgIHRva2VuX2J5dGVzID0gb3MudXJhbmRvbSgyMikKICAgICAgICBfb3Ztc190b2tlbiA9IGJhc2U2NC5iNjRlbmNvZGUodG9rZW5fYnl0ZXMpLmRlY29kZSgnYXNjaWknKVs6MjJdCiAgICAgICAgCiAgICAgICAgIyBHZW5lcmF0ZSBjbGllbnQgZGlnZXN0IChITUFDLU1ENSBvZiB0b2tlbiB3aXRoIHBhc3N3b3JkKQogICAgICAgIHBhc3N3b3JkID0gc2V0dGluZ3MuZ2V0KCdvdm1zLnBhc3N3b3JkJywgJycpCiAgICAgICAgaCA9IGhtYWMubmV3KHBhc3N3b3JkLmVuY29kZSgnYXNjaWknKSwgCiAgICAgICAgICAgICAgICAgICBfb3Ztc190b2tlbi5lbmNvZGUoJ2FzY2lpJyksIAogICAgICAgICAgICAgICAgICAgaGFzaGxpYi5tZDUpCiAgICAgICAgY2xpZW50X2RpZ2VzdCA9IGJhc2U2NC5iNjRlbmNvZGUoaC5kaWdlc3QoKSkuZGVjb2RlKCdhc2NpaScpCiAgICAgICAgCiAgICAgICAgIyBTZW5kIGxvZ2luOiBNUC1DIDAgPHRva2VuPiA8ZGlnZXN0PiA8dmVoaWNsZWlkPgogICAgICAgIHZlaGljbGVpZCA9IHNldHRpbmdzLmdldCgnb3Ztcy52ZWhpY2xlaWQnLCAnJykKICAgICAgICBsb2dpbl9tc2cgPSBmIk1QLUMgMCB7X292bXNfdG9rZW59IHtjbGllbnRfZGlnZXN0fSB7dmVoaWNsZWlkfVxyXG4iCiAgICAgICAgX292bXNfc29ja2V0LnNlbmQobG9naW5fbXNnLmVuY29kZSgnYXNjaWknKSkKICAgICAgICAKICAgICAgICBfb3Ztc19zdGF0ZSA9ICdjb25uZWN0aW5nJwogICAgICAgIF9vdm1zX3N0YXR1cyA9ICdTZW5kaW5nIGxvZ2luLi4uJwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIF9vdm1zX3N0YXRlID0gJ2Vycm9yJwogICAgICAgIF9vdm1zX3N0YXR1cyA9IGYnTG9naW4gZXJyb3I6IHtlfScKICAgICAgICAjIFNpbGVudCAtIGVycm9ycyBoYW5kbGVkIGJ5IHN0YXRlL3N0YXR1cwoKCmRlZiBfaGFuZGxlX3NlcnZlcl9yZXNwb25zZShkYXRhKToKICAgICIiIkhhbmRsZSByZXNwb25zZSBmcm9tIE9WTVMgc2VydmVyIiIiCiAgICBnbG9iYWwgX292bXNfY29ubmVjdGVkLCBfb3Ztc19zdGF0ZSwgX292bXNfc3RhdHVzLCBfb3Ztc19jcnlwdG9fcngsIF9vdm1zX2NyeXB0b190eAogICAgCiAgICB0cnk6CiAgICAgICAgbGluZXMgPSBkYXRhLmRlY29kZSgnYXNjaWknKS5zdHJpcCgpLnNwbGl0KCdcbicpCiAgICAgICAgZm9yIGxpbmUgaW4gbGluZXM6CiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN0cmlwKCkKICAgICAgICAgICAgaWYgbm90IGxpbmU6CiAgICAgICAgICAgICAgICBjb250aW51ZSAgICAgICAgICAgIAogICAgICAgICAgICBpZiBsaW5lLnN0YXJ0c3dpdGgoJ01QLVMgMCAnKToKICAgICAgICAgICAgICAgICMgU2VydmVyIGF1dGhlbnRpY2F0aW9uIHJlc3BvbnNlIChwbGFpbiB0ZXh0KQogICAgICAgICAgICAgICAgcGFydHMgPSBsaW5lWzc6XS5zcGxpdCgnICcsIDEpCiAgICAgICAgICAgICAgICBpZiBsZW4ocGFydHMpID09IDI6CiAgICAgICAgICAgICAgICAgICAgc2VydmVyX3Rva2VuID0gcGFydHNbMF0KICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJfZGlnZXN0ID0gcGFydHNbMV0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjIFZlcmlmeSBkaWdlc3QKICAgICAgICAgICAgICAgICAgICAjIEhNQUMtTUQ1IG9mIHRva2VuIHdpdGggcGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHNldHRpbmdzLmdldCgnb3Ztcy5wYXNzd29yZCcsICcnKQogICAgICAgICAgICAgICAgICAgIGggPSBobWFjLm5ldyhwYXNzd29yZC5lbmNvZGUoJ2FzY2lpJyksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX3Rva2VuLmVuY29kZSgnYXNjaWknKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNobGliLm1kNSkKICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9kaWdlc3QgPSBiYXNlNjQuYjY0ZW5jb2RlKGguZGlnZXN0KCkpLmRlY29kZSgnYXNjaWknKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGV4cGVjdGVkX2RpZ2VzdCA9PSBzZXJ2ZXJfZGlnZXN0OgogICAgICAgICAgICAgICAgICAgICAgICAjIFNldHVwIGVuY3J5cHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgIyBDUklUSUNBTDogU2VydmVyIHRva2VuIFRIRU4gY2xpZW50IHRva2VuIChtYXRjaGVzIFBlcmwgZGVtbyBsaW5lIDE3OS0xODApCiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZF9rZXkgPSBzZXJ2ZXJfdG9rZW4gKyBfb3Ztc190b2tlbgogICAgICAgICAgICAgICAgICAgICAgICBoID0gaG1hYy5uZXcocGFzc3dvcmQuZW5jb2RlKCdhc2NpaScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZF9rZXkuZW5jb2RlKCdhc2NpaScpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hsaWIubWQ1KQogICAgICAgICAgICAgICAgICAgICAgICBjcnlwdG9fa2V5ID0gaC5kaWdlc3QoKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgX292bXNfY3J5cHRvX3J4ID0gX3JjNF9zZXR1cChjcnlwdG9fa2V5KQogICAgICAgICAgICAgICAgICAgICAgICBfb3Ztc19jcnlwdG9fdHggPSBfcmM0X3NldHVwKGNyeXB0b19rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFNraXAgMTAyNCBieXRlcyAoUkM0IGtleSBzY2hlZHVsaW5nKQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgxMDI0KToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yYzRfY3J5cHQoX292bXNfY3J5cHRvX3J4LCBiJ1x4MDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JjNF9jcnlwdChfb3Ztc19jcnlwdG9fdHgsIGInXHgwMCcpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgIF9vdm1zX3N0YXRlID0gJ2Nvbm5lY3RlZCcKICAgICAgICAgICAgICAgICAgICAgICAgX292bXNfc3RhdHVzID0gJ0Nvbm5lY3RlZCB0byBPVk1TIHNlcnZlcicKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICMgU2VuZCBpbml0aWFsIHN0YXR1cyBtZXNzYWdlcyB0byBtYWtlIHRoZSBhcHAgc2hvdyBhcyBjb25uZWN0ZWQKICAgICAgICAgICAgICAgICAgICAgICAgX3NlbmRfaW5pdGlhbF9tZXNzYWdlcygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgX292bXNfc3RhdGUgPSAnZXJyb3InCiAgICAgICAgICAgICAgICAgICAgICAgIF9vdm1zX3N0YXR1cyA9ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBBbGwgb3RoZXIgbWVzc2FnZXMgYXJlIGVuY3J5cHRlZCAoanVzdCBiYXNlNjQsIG5vIE1QLTAgcHJlZml4IG9uIHdpcmUpCiAgICAgICAgICAgICAgICBpZiBfb3Ztc19jcnlwdG9fcng6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWQgPSBiYXNlNjQuYjY0ZGVjb2RlKGxpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlY3J5cHRlZCA9IF9yYzRfY3J5cHQoX292bXNfY3J5cHRvX3J4LCBlbmNyeXB0ZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFRyeSB0byBkZWNvZGUgYXMgQVNDSUkKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gZGVjcnlwdGVkLmRlY29kZSgnYXNjaWknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGYiW09WTVNdIFJYOiB7bXNnfSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBVbmljb2RlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE5vdCB2YWxpZCBBU0NJSSAtIHNob3cgaGV4IGR1bXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhleF9kdW1wID0gJyAnLmpvaW4oZid7YjowMnh9JyBmb3IgYiBpbiBkZWNyeXB0ZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoZiJbT1ZNU10gRGVjcnlwdGVkIGJ5dGVzIChoZXgpOiB7aGV4X2R1bXB9IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBEZWNyeXB0ZWQgYnl0ZXMgKHJlcHIpOiB7ZGVjcnlwdGVkfSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIERvbid0IHByb2Nlc3MgZnVydGhlciBpZiBub3QgdmFsaWQgQVNDSUkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFBhcnNlIG1lc3NhZ2U6IE1QLTAgPGNvZGU+PGRhdGE+CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihtc2cpID49IDYgYW5kIG1zZy5zdGFydHN3aXRoKCdNUC0wICcpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IG1zZ1s1XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG1zZ1s2Ol0gaWYgbGVuKG1zZykgPiA2IGVsc2UgJycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBIYW5kbGUgcGluZyBtZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjb2RlID09ICdBJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFNlcnZlciBwaW5nIC0gcmVzcG9uZCB3aXRoIHBpbmcgYWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJHb3QgcGluZyBmcm9tIHNlcnZlciwgc2VuZGluZyBwb25nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdHJhbnNtaXRfZW5jcnlwdGVkKCdNUC0wIGEnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBjb2RlID09ICdaJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEFwcCBjb25uZWN0aW9uIGNvdW50IG5vdGlmaWNhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oYW5kbGVfcGVlcl9jb3VudChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoZiJbT1ZNU10gVW5oYW5kbGVkIHNlcnZlciBtZXNzYWdlIGNvZGU6IHtjb2RlfSwgZGF0YToge2RhdGF9IikKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBFcnJvciBkZWNyeXB0aW5nIHNlcnZlciBtZXNzYWdlOiB7ZX0iKQogIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBFcnJvciBoYW5kbGluZyBzZXJ2ZXIgcmVzcG9uc2U6IHtlfSIpCgoKZGVmIF9oYW5kbGVfcGVlcl9jb3VudChjb3VudF9zdHIpOgogICAgIiIiSGFuZGxlIHBlZXIgY29ubmVjdGlvbiBjb3VudCB1cGRhdGUgZnJvbSBzZXJ2ZXIKICAgIAogICAgV2hlbiBhbiBhcHAgY29ubmVjdHMgKHBlZXJzIGdvZXMgZnJvbSAwIHRvIDErKSwgaW1tZWRpYXRlbHkgc2VuZCBmcmVzaCBzdGF0dXMuCiAgICBUaGlzIGlzIGJhbmR3aWR0aC1lZmZpY2llbnQ6IG9ubHkgc2VuZCBmcmVxdWVudCB1cGRhdGVzIHdoZW4gc29tZW9uZSBpcyB3YXRjaGluZy4KICAgICIiIgogICAgZ2xvYmFsIF9vdm1zX3BlZXJzLCBfb3Ztc19zdGF0dXMsIF9sYXN0X3BvbGxfdGltZQogICAgCiAgICB0cnk6CiAgICAgICAgbmV3X2NvdW50ID0gaW50KGNvdW50X3N0cikgaWYgY291bnRfc3RyIGVsc2UgMAogICAgICAgIG9sZF9jb3VudCA9IF9vdm1zX3BlZXJzCiAgICAgICAgX292bXNfcGVlcnMgPSBuZXdfY291bnQgICAgICAgIAogICAgICAgICMgVXBkYXRlIHN0YXR1cyB0byByZWZsZWN0IGFwcCBjb25uZWN0aW9uIHN0YXRlCiAgICAgICAgaWYgbmV3X2NvdW50ID4gMDoKICAgICAgICAgICAgX292bXNfc3RhdHVzID0gZidDb25uZWN0ZWQgdG8gT1ZNUyBzZXJ2ZXIgKHtuZXdfY291bnR9IGFwcHsicyIgaWYgbmV3X2NvdW50ICE9IDEgZWxzZSAiIn0gY29ubmVjdGVkKScKICAgICAgICAgICAgaWYgb2xkX2NvdW50ID09IDA6CiAgICAgICAgICAgICAgICAjIEFwcCBqdXN0IGNvbm5lY3RlZCAtIGZvcmNlIGltbWVkaWF0ZSB0cmFuc21pc3Npb24gb2YgZnJlc2ggc3RhdHVzCiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoIkFwcCBjb25uZWN0ZWQgLSBzZW5kaW5nIGZyZXNoIHN0YXR1cyIpCiAgICAgICAgICAgICAgICBfbGFzdF9wb2xsX3RpbWUgPSAwICAjIFJlc2V0IHBvbGwgdGltZSB0byBmb3JjZSBpbW1lZGlhdGUgcG9sbAogICAgICAgICAgICAgICAgX3NlbmRfaW5pdGlhbF9tZXNzYWdlcygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgX292bXNfc3RhdHVzID0gJ0Nvbm5lY3RlZCB0byBPVk1TIHNlcnZlciAobm8gYXBwcyBjb25uZWN0ZWQpJwogICAgICAgICAgICBpZiBvbGRfY291bnQgPiAwOgogICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJBbGwgYXBwcyBkaXNjb25uZWN0ZWQiKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBFcnJvciBoYW5kbGluZyBwZWVyIGNvdW50OiB7ZX0iKQoKCmRlZiBfc2VuZF9pbml0aWFsX21lc3NhZ2VzKCk6CiAgICAiIiJTZW5kIGluaXRpYWwgc3RhdHVzIG1lc3NhZ2VzIGFmdGVyIGF1dGhlbnRpY2F0aW9uIHRvIHNob3cgZGV2aWNlIGFzIGNvbm5lY3RlZCIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY3J5cHRvX3R4LCBfbWV0cmljcwogICAgCiAgICBpZiBub3QgX292bXNfY29ubmVjdGVkIG9yIG5vdCBfb3Ztc19zb2NrZXQ6CiAgICAgICAgcmV0dXJuCiAgICAKICAgIHRyeToKICAgICAgICAjIENSSVRJQ0FMOiBQb2xsIGZha2Vfem9tYmlldmVydGVyIEZJUlNUIHRvIGVuc3VyZSB3ZSBoYXZlIGZyZXNoIG1ldHJpY3MKICAgICAgICBfdXBkYXRlX21ldHJpY3NfZnJvbV9zcG90X3ZhbHVlcygpCiAgICAgICAgCiAgICAgICAgIyBHZXQgbGl2ZSBtZXRyaWNzIGZyb20gZmFrZV96b21iaWV2ZXJ0ZXIgKHVzaW5nIHVwcGVyY2FzZSBrZXkgbmFtZXMpCiAgICAgICAgIyBOb3RlOiBmYWtlX3pvbWJpZXZlcnRlciB1c2VzICdTT0MnLCAnVmVoX1NwZWVkJywgZXRjLiAoc2VlIGZha2Vfem9tYmlldmVydGVyLnB5IGxpbmUgMTEwKQogICAgICAgICMgTk8gRkFMTEJBQ0tTIC0gaWYgbWV0cmljcyBhcmVuJ3QgcHJlc2VudCwgd2Ugd2FudCBpdCB0byBmYWlsIGxvdWRseSEKICAgICAgICBzb2MgPSBpbnQoX21ldHJpY3NbJ1NPQyddWyd2YWx1ZSddKQogICAgICAgIHNwZWVkX2twaCA9IGludChfbWV0cmljc1snVmVoX1NwZWVkJ11bJ3ZhbHVlJ10pCiAgICAgICAgdGVtcF9tb3RvciA9IGludChfbWV0cmljc1sndG1wbSddWyd2YWx1ZSddKQogICAgICAgIHRlbXBfaW52ZXJ0ZXIgPSBpbnQoX21ldHJpY3NbJ3RtcGhzJ11bJ3ZhbHVlJ10pCiAgICAgICAgdGVtcF9iYXR0ZXJ5ID0gaW50KF9tZXRyaWNzWyd0bXBhdXgnXVsndmFsdWUnXSkKICAgICAgICB2b2x0YWdlID0gaW50KF9tZXRyaWNzWyd1ZGMnXVsndmFsdWUnXSkKICAgICAgICBjdXJyZW50ID0gaW50KF9tZXRyaWNzWydpZGMnXVsndmFsdWUnXSkKICAgICAgICBwb3dlcl9rdyA9IF9tZXRyaWNzWydwb3dlciddWyd2YWx1ZSddCiAgICAgICAgdm9sdGFnZV8xMnYgPSBfbWV0cmljc1snVTEyViddWyd2YWx1ZSddICAjIDEyViBiYXR0ZXJ5IHZvbHRhZ2UgZnJvbSBab21iaWVWZXJ0ZXIKICAgICAgICAKICAgICAgICAjIERldGVybWluZSBjaGFyZ2Ugc3RhdGUgZnJvbSBjdXJyZW50L3Bvd2VyCiAgICAgICAgaWYgcG93ZXJfa3cgPCAtMC41OiAgIyBDaGFyZ2luZyAobmVnYXRpdmUgcG93ZXIpCiAgICAgICAgICAgIGNoYXJnZXN0YXRlID0gJ2NoYXJnaW5nJwogICAgICAgIGVsaWYgc3BlZWRfa3BoID4gNToKICAgICAgICAgICAgY2hhcmdlc3RhdGUgPSAnZHJpdmluZycKICAgICAgICBlbHNlOgogICAgICAgICAgICBjaGFyZ2VzdGF0ZSA9ICdzdG9wcGVkJwogICAgICAgIAogICAgICAgICMgU2VuZCBGaXJtd2FyZSBtZXNzYWdlIChGKSAtIGZvcm1hdDogTVAtMCBGPHZlcnNpb24+LDx2aW4+LDxzaWduYWw+LDxjYW53cml0ZT4sPHZ0eXBlPiw8cHJvdmlkZXI+LDxzZXJ2aWNlX3JhbmdlPiw8c2VydmljZV90aW1lPiw8aGFyZHdhcmU+LDxtZG1fbW9kZT4KICAgICAgICAjIE5vdGU6IE5vIHNwYWNlIGFmdGVyIEYsIGFuZCBtcF9lbmNvZGUgZm9yIHN0cmluZyBmaWVsZHMKICAgICAgICBtc2cgPSAiTVAtMCBGLCwsMCwsLCwsLTEsLTEsLCIKICAgICAgICBfdHJhbnNtaXRfZW5jcnlwdGVkKG1zZykKICAgICAgICAKICAgICAgICAjIFNlbmQgRW52aXJvbm1lbnQgbWVzc2FnZSAoRCkgLSBmb3JtYXQ6IE1QLTAgRDxkb29yczE+LDxkb29yczI+LDxsb2NrdW5sb2NrPiw8dGVtcF9wZW0+LDx0ZW1wX21vdG9yPiw8dGVtcF9iYXR0ZXJ5Piw8dHJpcD4sPG9kb21ldGVyPiw8c3BlZWQ+LDxwYXJrX3RpbWU+LDxhbWJpZW50X3RlbXA+LDxkb29yczM+LDxzdGFsZV90ZW1wcz4sPHN0YWxlX2FtYmllbnQ+LDx2ZWhpY2xlMTJ2Piw8ZG9vcnM0Piw8YWxhcm1fc291bmRpbmc+LDxhbGFybV9kdXJhdGlvbj4sPHRwbXNfaGVhbHRoPiw8dHBtc19hbGVydD4KICAgICAgICAjIFVzZSByZWFsIHRlbXBzLCBzcGVlZCwgYW5kIDEyViB2b2x0YWdlIGZyb20gbWV0cmljcwogICAgICAgIG1zZyA9IGYiTVAtMCBEMCwwLDUse3RlbXBfaW52ZXJ0ZXJ9LHt0ZW1wX21vdG9yfSx7dGVtcF9iYXR0ZXJ5fSwwLDAse3NwZWVkX2twaH0sMCwyNSwwLDAsMCx7dm9sdGFnZV8xMnZ9LDAsMCwwLDAsMCIKICAgICAgICBfdHJhbnNtaXRfZW5jcnlwdGVkKG1zZykKICAgICAgICAKICAgICAgICAjIFNlbmQgU3RhdHMgbWVzc2FnZSAoUykgLSBmb3JtYXQ6IE1QLTAgUzxzb2M+LDx1bml0cz4sPGxpbmV2b2x0YWdlPiw8Y2hhcmdlY3VycmVudD4sPGNoYXJnZXN0YXRlPiw8Y2hhcmdlbW9kZT4sPGlkZWFscmFuZ2U+LDxlc3RpbXJhbmdlPiw8c29oPiw8Y2FjPiwuLi4KICAgICAgICAjIFVzZSBsaXZlIFNvQyBhbmQgb3RoZXIgbWV0cmljcyBmcm9tIGZha2Vfem9tYmlldmVydGVyCiAgICAgICAgIyBVbml0czogSz1raWxvbWV0ZXJzLCBNPW1pbGVzCiAgICAgICAgIyBDYWxjdWxhdGUgcmFuZ2UgYmFzZWQgb24gbGl2ZSBTb0MgKGFzc3VtaW5nIDM1MGttIG1heCByYW5nZSBsaWtlIGRlbW8gY2FyKQogICAgICAgIGlkZWFsX3JhbmdlID0gaW50KChzb2MgLyAxMDAuMCkgKiAzNTApCiAgICAgICAgZXN0X3JhbmdlID0gaW50KGlkZWFsX3JhbmdlICogMC45KSAgIyBFc3RpbWF0ZWQgcmFuZ2UgaXMgdHlwaWNhbGx5IDkwJSBvZiBpZGVhbAogICAgICAgIAogICAgICAgIG1zZyA9IGYiTVAtMCBTe3NvY30sSyx7dm9sdGFnZX0se2FicyhjdXJyZW50KX0se2NoYXJnZXN0YXRlfSxzdGFuZGFyZCx7aWRlYWxfcmFuZ2V9LHtlc3RfcmFuZ2V9LDEwMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAiCiAgICAgICAgX3RyYW5zbWl0X2VuY3J5cHRlZChtc2cpCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgIyBTaWxlbnQgLSBlcnJvcnMgaGFuZGxlZCBieSBzdGF0ZS9zdGF0dXMKICAgICAgICBwYXNzCgoKZGVmIF90cmFuc21pdF9lbmNyeXB0ZWQobXNnKToKICAgICIiIkVuY3J5cHQgYW5kIHRyYW5zbWl0IGEgbWVzc2FnZSB0byBPVk1TIHNlcnZlciIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY3J5cHRvX3R4CiAgICAKICAgIGlmIG5vdCBfb3Ztc19jb25uZWN0ZWQgb3Igbm90IF9vdm1zX3NvY2tldCBvciBub3QgX292bXNfY3J5cHRvX3R4OgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgbG9nZ2VyLmRlYnVnKGYiW09WTVNdIFNlbmRpbmc6IHttc2d9IikKICAgICAgICAKICAgICAgICAjIEVuY3J5cHQgbWVzc2FnZSB3aXRoIFJDNAogICAgICAgIG1zZ19ieXRlcyA9IG1zZy5lbmNvZGUoJ2FzY2lpJykKICAgICAgICBlbmNyeXB0ZWQgPSBfcmM0X2NyeXB0KF9vdm1zX2NyeXB0b190eCwgbXNnX2J5dGVzKQogICAgICAgIAogICAgICAgICMgQmFzZTY0IGVuY29kZQogICAgICAgIGVuY29kZWQgPSBiYXNlNjQuYjY0ZW5jb2RlKGVuY3J5cHRlZCkuZGVjb2RlKCdhc2NpaScpICAgICAgICAKICAgICAgICAjIFNlbmQgd2l0aCBDUkxGCiAgICAgICAgZmluYWxfbXNnID0gZW5jb2RlZCArICdcclxuJwogICAgICAgIF9vdm1zX3NvY2tldC5zZW5kKGZpbmFsX21zZy5lbmNvZGUoJ2FzY2lpJykpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnZXIuZGVidWcoZiJbT1ZNU10gVHJhbnNtaXQgZXJyb3I6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIF9zZW5kX21ldHJpY3NfdG9fc2VydmVyKCk6CiAgICAiIiJGb3JtYXQgYW5kIHNlbmQgbWV0cmljcyB0byBPVk1TIHNlcnZlciIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY3J5cHRvX3R4CiAgICAKICAgIGlmIG5vdCBfb3Ztc19jb25uZWN0ZWQgb3Igbm90IF9vdm1zX3NvY2tldDoKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgICMgRm9ybWF0IG1ldHJpY3MgYXMgT1ZNUyB2MiBkYXRhIG1lc3NhZ2UKICAgICAgICAjIEZvcm1hdDogTVAtMCBEIDxtZXRyaWMxPj08dmFsdWUxPiw8bWV0cmljMj49PHZhbHVlMj4sLi4uCiAgICAgICAgIyBGb3IgT3BlbkludmVydGVyLCB3ZSdsbCBzZW5kIGtleSBtZXRyaWNzCiAgICAgICAgbWV0cmljX3BhcnRzID0gW10KICAgICAgICAKICAgICAgICAjIE1hcCBjb21tb24gT3BlbkludmVydGVyIG1ldHJpY3MgdG8gT1ZNUyBmb3JtYXQKICAgICAgICAjIHVkYyA9IERDIHZvbHRhZ2UsIGlkYyA9IERDIGN1cnJlbnQsIHRtcG0gPSBtb3RvciB0ZW1wLCBmb3V0ID0gZnJlcXVlbmN5CiAgICAgICAgZm9yIG5hbWUsIGRhdGEgaW4gX21ldHJpY3MuaXRlbXMoKToKICAgICAgICAgICAgdmFsdWUgPSBkYXRhLmdldCgndmFsdWUnLCAwKQogICAgICAgICAgICAjIEZvcm1hdCB2YWx1ZSBhcHByb3ByaWF0ZWx5CiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIGZsb2F0KToKICAgICAgICAgICAgICAgIHZhbHVlX3N0ciA9IGYie3ZhbHVlOi4yZn0iCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB2YWx1ZV9zdHIgPSBzdHIodmFsdWUpCiAgICAgICAgICAgIG1ldHJpY19wYXJ0cy5hcHBlbmQoZiJ7bmFtZX09e3ZhbHVlX3N0cn0iKQogICAgICAgIAogICAgICAgIGlmIG1ldHJpY19wYXJ0czoKICAgICAgICAgICAgbXNnID0gIk1QLTAgRCAiICsgIiwiLmpvaW4obWV0cmljX3BhcnRzKSArICJcbiIKICAgICAgICAgICAgCiAgICAgICAgICAgICMgRW5jcnlwdCBtZXNzYWdlIGlmIGNyeXB0byBpcyBzZXQgdXAKICAgICAgICAgICAgaWYgX292bXNfY3J5cHRvX3R4OgogICAgICAgICAgICAgICAgZW5jcnlwdGVkID0gX3JjNF9jcnlwdChfb3Ztc19jcnlwdG9fdHgsIG1zZy5lbmNvZGUoJ2FzY2lpJykpCiAgICAgICAgICAgICAgICBlbmNvZGVkID0gYmFzZTY0LmI2NGVuY29kZShlbmNyeXB0ZWQpLmRlY29kZSgnYXNjaWknKQogICAgICAgICAgICAgICAgZmluYWxfbXNnID0gIk1QLTAgIiArIGVuY29kZWQgKyAiXG4iCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIE5vdCBlbmNyeXB0ZWQgeWV0IChzaG91bGRuJ3QgaGFwcGVuIHdoZW4gY29ubmVjdGVkLCBidXQgaGFuZGxlIGdyYWNlZnVsbHkpCiAgICAgICAgICAgICAgICBmaW5hbF9tc2cgPSBtc2cKICAgICAgICAgICAgCiAgICAgICAgICAgIF9vdm1zX3NvY2tldC5zZW5kKGZpbmFsX21zZy5lbmNvZGUoJ2FzY2lpJykpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgIyBTaWxlbnQgLSBlcnJvcnMgaGFuZGxlZCBieSBzdGF0ZS9zdGF0dXMKICAgICAgICBwYXNzCgoKZGVmIGNoZWNrU2VydmVyTWVzc2FnZXMoKToKICAgICIiIkNoZWNrIGZvciBpbmNvbWluZyBzZXJ2ZXIgbWVzc2FnZXMgKG5vbi1ibG9ja2luZykKICAgIAogICAgTk9URTogVGhpcyBpcyBub3cgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiB0aGUgYmFja2dyb3VuZCByZWFkZXIgdGFzay4KICAgIEtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGJ1dCB0aGUgcmVhZGVyIHRhc2sgaXMgcHJlZmVycmVkLgogICAgIiIiCiAgICBnbG9iYWwgX292bXNfc29ja2V0LCBfb3Ztc19jb25uZWN0ZWQsIF9vdm1zX3N0YXRlLCBfb3Ztc19zdGF0dXMKICAgIAogICAgaWYgbm90IF9vdm1zX2Nvbm5lY3RlZCBvciBub3QgX292bXNfc29ja2V0OgogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgZGF0YSA9IF9vdm1zX3NvY2tldC5yZWN2KDQwOTYpCiAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgICMgQ29ubmVjdGlvbiBjbG9zZWQKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJTZXJ2ZXIgY2xvc2VkIGNvbm5lY3Rpb24gKHJlY3YgcmV0dXJuZWQgZW1wdHkpIikKICAgICAgICAgICAgX292bXNfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICAgICAgX292bXNfc3RhdGUgPSAnZGlzY29ubmVjdGVkJwogICAgICAgICAgICBfb3Ztc19zdGF0dXMgPSAnQ29ubmVjdGlvbiBjbG9zZWQnCiAgICAgICAgICAgIGlmIF9vdm1zX3NvY2tldDoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zb2NrZXQuY2xvc2UoKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgX292bXNfc29ja2V0ID0gTm9uZQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBsb2dnZXIuZGVidWcoZiJbT1ZNU10gUmVjZWl2ZWQge2xlbihkYXRhKX0gYnl0ZXMgZnJvbSBzZXJ2ZXIiKQogICAgICAgIF9oYW5kbGVfc2VydmVyX3Jlc3BvbnNlKGRhdGEpCiAgICBleGNlcHQgT1NFcnJvciBhcyBlOgogICAgICAgICMgTm9uLWJsb2NraW5nIHNvY2tldCB3b3VsZCByYWlzZSBFQUdBSU4vRVdPVUxEQkxPQ0sgd2hlbiBubyBkYXRhIGF2YWlsYWJsZQogICAgICAgICMgVGhpcyBpcyBleHBlY3RlZCBhbmQgbm90IGFuIGVycm9yCiAgICAgICAgaWYgZS5lcnJubyAhPSAxMTogICMgRUFHQUlOL0VXT1VMREJMT0NLCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBTb2NrZXQgZXJyb3I6IHtlfSIpCiAgICAgICAgICAgIGlmIF9vdm1zX2Nvbm5lY3RlZDoKICAgICAgICAgICAgICAgICMgU2lsZW50IC0gZXJyb3JzIGhhbmRsZWQgYnkgc3RhdGUvc3RhdHVzCiAgICAgICAgICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgICAgICAgICAgX292bXNfc3RhdGUgPSAnZGlzY29ubmVjdGVkJwogICAgICAgICAgICAgICAgX292bXNfc3RhdHVzID0gZidDb25uZWN0aW9uIGVycm9yOiB7ZX0nCiAgICAgICAgICAgIGlmIF9vdm1zX3NvY2tldDoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zb2NrZXQuY2xvc2UoKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIF9vdm1zX3NvY2tldCA9IE5vbmUKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnZXIuZGVidWcoZiJbT1ZNU10gRXhjZXB0aW9uIGluIGNoZWNrU2VydmVyTWVzc2FnZXM6IHtlfSIpCiAgICAgICAgaWYgX292bXNfY29ubmVjdGVkOgogICAgICAgICAgICAjIFNpbGVudCAtIGVycm9ycyBoYW5kbGVkIGJ5IHN0YXRlL3N0YXR1cwogICAgICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgICAgICBfb3Ztc19zdGF0ZSA9ICdkaXNjb25uZWN0ZWQnCiAgICAgICAgICAgIF9vdm1zX3N0YXR1cyA9IGYnQ29ubmVjdGlvbiBlcnJvcjoge2V9JwogICAgICAgIGlmIF9vdm1zX3NvY2tldDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgX292bXNfc29ja2V0LmNsb3NlKCkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBfb3Ztc19zb2NrZXQgPSBOb25lCgoKZGVmIF9yZWFkZXJfbG9vcCgpOgogICAgIiIiQmFja2dyb3VuZCB0YXNrIHRoYXQgY29udGludW91c2x5IHJlYWRzIGZyb20gT1ZNUyBzZXJ2ZXIgc29ja2V0CiAgICAKICAgIFRoaXMgcnVucyBpbiBhIGxvb3AgY2hlY2tpbmcgZm9yIGluY29taW5nIG1lc3NhZ2VzLgogICAgSGFuZGxlcyBsaW5lLWJhc2VkIHByb3RvY29sIChtZXNzYWdlcyBlbmQgd2l0aCBcclxuKS4KICAgICIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY29ubmVjdGVkLCBfb3Ztc19zdGF0ZSwgX292bXNfc3RhdHVzLCBfc3RvcF9yZWFkZXIKICAgIAogICAgbG9nZ2VyLmRlYnVnKCJSZWFkZXIgdGFzayBzdGFydGVkIikKICAgIAogICAgIyBCdWZmZXIgZm9yIGluY29tcGxldGUgbGluZXMKICAgIGxpbmVfYnVmZmVyID0gYicnCiAgICAKICAgIHdoaWxlIG5vdCBfc3RvcF9yZWFkZXI6CiAgICAgICAgdHJ5OiAgICAgICAgCiAgICAgICAgICAgICMgQ2hlY2sgaWYgc29ja2V0IGV4aXN0cyAoZXZlbiBpZiBub3QgZnVsbHkgY29ubmVjdGVkIHlldCAtIHdlIG5lZWQgdG8gcHJvY2VzcyBhdXRoISkKICAgICAgICAgICAgaWYgbm90IF9vdm1zX3NvY2tldDoKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4xKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTm9uLWJsb2NraW5nIHJlY2VpdmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGF0YSA9IF9vdm1zX3NvY2tldC5yZWN2KDQwOTYpCiAgICAgICAgICAgICAgICBpZiBkYXRhOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBSZWFkZXI6IEdvdCB7bGVuKGRhdGEpfSBieXRlcyIpCiAgICAgICAgICAgICAgICAgICAgIyBBZGQgdG8gYnVmZmVyCiAgICAgICAgICAgICAgICAgICAgbGluZV9idWZmZXIgKz0gZGF0YQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgUHJvY2VzcyBjb21wbGV0ZSBsaW5lcyAoZW5kaW5nIHdpdGggXHJcbikKICAgICAgICAgICAgICAgICAgICB3aGlsZSBiJ1xyXG4nIGluIGxpbmVfYnVmZmVyIG9yIGInXG4nIGluIGxpbmVfYnVmZmVyOgogICAgICAgICAgICAgICAgICAgICAgICAjIEZpbmQgbGluZSBlbmRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYidcclxuJyBpbiBsaW5lX2J1ZmZlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVfZW5kID0gbGluZV9idWZmZXIuaW5kZXgoYidcclxuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lX2J1ZmZlcls6bGluZV9lbmRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lX2J1ZmZlciA9IGxpbmVfYnVmZmVyW2xpbmVfZW5kKzI6XQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZV9lbmQgPSBsaW5lX2J1ZmZlci5pbmRleChiJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lX2J1ZmZlcls6bGluZV9lbmRdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lX2J1ZmZlciA9IGxpbmVfYnVmZmVyW2xpbmVfZW5kKzE6XQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGluZTogICMgU2tpcCBlbXB0eSBsaW5lcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hhbmRsZV9zZXJ2ZXJfcmVzcG9uc2UobGluZSArIGInXG4nKSAgIyBQYXNzIHNpbmdsZSBsaW5lCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgRW1wdHkgZGF0YSA9IGNvbm5lY3Rpb24gY2xvc2VkCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZWFkZXI6IFNlcnZlciBjbG9zZWQgY29ubmVjdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgX292bXNfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zdGF0ZSA9ICdkaXNjb25uZWN0ZWQnCiAgICAgICAgICAgICAgICAgICAgX292bXNfc3RhdHVzID0gJ0Nvbm5lY3Rpb24gY2xvc2VkIGJ5IHNlcnZlcicKICAgICAgICAgICAgICAgICAgICBpZiBfb3Ztc19zb2NrZXQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vdm1zX3NvY2tldC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zb2NrZXQgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgICMgRUFHQUlOL0VXT1VMREJMT0NLIChlcnJubyAxMSkgPSBubyBkYXRhIGF2YWlsYWJsZSwgdGhpcyBpcyBub3JtYWwKICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gIT0gMTE6CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGYiW09WTVNdIFJlYWRlcjogU29ja2V0IGVycm9yIGVycm5vPXtlLmVycm5vfToge2V9IikKICAgICAgICAgICAgICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgICAgICAgICAgICAgIF9vdm1zX3N0YXRlID0gJ2Rpc2Nvbm5lY3RlZCcKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zdGF0dXMgPSBmJ0Nvbm5lY3Rpb24gZXJyb3I6IHtlfScKICAgICAgICAgICAgICAgICAgICBpZiBfb3Ztc19zb2NrZXQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vdm1zX3NvY2tldC5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgICAgICBfb3Ztc19zb2NrZXQgPSBOb25lCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIltPVk1TXSBSZWFkZXI6IFVuZXhwZWN0ZWQgZXJyb3I6IHtlfSIpCiAgICAgICAgCiAgICAgICAgIyBDaGVjayBldmVyeSAxMDBtcyBmb3IgbWVzc2FnZXMKICAgICAgICB0aW1lLnNsZWVwKDAuMSkKICAgIAogICAgbG9nZ2VyLmRlYnVnKCJSZWFkZXIgdGFzayBzdG9wcGVkIikKCgpkZWYgcG9sbE1ldHJpY3MoKToKICAgICIiIk1hbnVhbGx5IHRyaWdnZXIgbWV0cmljcyBwb2xsaW5nIGFuZCBzZW5kIHRvIHNlcnZlciIiIgogICAgZ2xvYmFsIF9wb2xsX3Rhc2sKICAgIAogICAgaWYgbm90IHNldHRpbmdzLmdldCgnb3Ztcy5lbmFibGVkJywgRmFsc2UpOgogICAgICAgIF9zZW5kX2Vycm9yKCdPVk1TIGlzIG5vdCBlbmFibGVkJykKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgIF9wb2xsX2xvb3AoKQogICAgICAgIF9zZW5kX3Jlc3BvbnNlKCdwb2xsZWQnLCB7J3N1Y2Nlc3MnOiBUcnVlLCAnbWV0cmljc19jb3VudCc6IGxlbihfbWV0cmljcyl9KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIF9zZW5kX2Vycm9yKGYnUG9sbCBlcnJvcjoge2V9JykKCgpkZWYgdGVzdE9WTVNDb25uZWN0aXZpdHkoKToKICAgICIiIlRlc3QgY29ubmVjdGl2aXR5IHRvIE9WTVMgc2VydmVyIHdpdGhvdXQgc3RhcnRpbmcgdGhlIHNlcnZpY2UKICAgIAogICAgUmV0dXJucyBKU09OIHdpdGggc3VjY2VzcyBzdGF0dXMgYW5kIG1lc3NhZ2UKICAgICIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY29ubmVjdGVkLCBfb3Ztc19zdGF0ZSwgX292bXNfc3RhdHVzCiAgICAKICAgICMgU2F2ZSBjdXJyZW50IHN0YXRlIHRvIHJlc3RvcmUgYWZ0ZXIgdGVzdAogICAgc2F2ZWRfc3RhdGUgPSBfb3Ztc19zdGF0ZQogICAgc2F2ZWRfc3RhdHVzID0gX292bXNfc3RhdHVzCiAgICBzYXZlZF9jb25uZWN0ZWQgPSBfb3Ztc19jb25uZWN0ZWQKICAgIAogICAgIyBJZiB0aGVyZSdzIGFuIGV4aXN0aW5nIGNvbm5lY3Rpb24gZnJvbSBhIHByZXZpb3VzIHRlc3QsIGNsZWFuIGl0IHVwCiAgICBpZiBfb3Ztc19zb2NrZXQ6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfb3Ztc19zb2NrZXQuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIF9vdm1zX3NvY2tldCA9IE5vbmUKICAgIAogICAgIyBSZXNldCBjb25uZWN0aW9uIHN0YXRlIGZvciB0ZXN0CiAgICBfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZQogICAgX292bXNfc3RhdGUgPSAnZGlzY29ubmVjdGVkJwogICAgX292bXNfc3RhdHVzID0gJycKICAgIAogICAgIyBHZXQgY29uZmlnIGZyb20gc2V0dGluZ3MKICAgIHNlcnZlciA9IHNldHRpbmdzLmdldCgnb3Ztcy5zZXJ2ZXInLCAnJykKICAgIHBvcnQgPSBzZXR0aW5ncy5nZXQoJ292bXMucG9ydCcsIDY4NjcpCiAgICB2ZWhpY2xlaWQgPSBzZXR0aW5ncy5nZXQoJ292bXMudmVoaWNsZWlkJywgJycpCiAgICBwYXNzd29yZCA9IHNldHRpbmdzLmdldCgnb3Ztcy5wYXNzd29yZCcsICcnKQogICAgCiAgICBpZiBub3Qgc2VydmVyOgogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdTZXJ2ZXIgYWRkcmVzcyBub3QgY29uZmlndXJlZCd9KSkKICAgICAgICAjIFJlc3RvcmUgc3RhdGUKICAgICAgICBfb3Ztc19zdGF0ZSA9IHNhdmVkX3N0YXRlCiAgICAgICAgX292bXNfc3RhdHVzID0gc2F2ZWRfc3RhdHVzCiAgICAgICAgX292bXNfY29ubmVjdGVkID0gc2F2ZWRfY29ubmVjdGVkCiAgICAgICAgcmV0dXJuCiAgICAKICAgIGlmIG5vdCB2ZWhpY2xlaWQ6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ1ZlaGljbGUgSUQgbm90IGNvbmZpZ3VyZWQnfSkpCiAgICAgICAgIyBSZXN0b3JlIHN0YXRlCiAgICAgICAgX292bXNfc3RhdGUgPSBzYXZlZF9zdGF0ZQogICAgICAgIF9vdm1zX3N0YXR1cyA9IHNhdmVkX3N0YXR1cwogICAgICAgIF9vdm1zX2Nvbm5lY3RlZCA9IHNhdmVkX2Nvbm5lY3RlZAogICAgICAgIHJldHVybgogICAgCiAgICBpZiBub3QgcGFzc3dvcmQ6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ1Bhc3N3b3JkIG5vdCBjb25maWd1cmVkJ30pKQogICAgICAgICMgUmVzdG9yZSBzdGF0ZQogICAgICAgIF9vdm1zX3N0YXRlID0gc2F2ZWRfc3RhdGUKICAgICAgICBfb3Ztc19zdGF0dXMgPSBzYXZlZF9zdGF0dXMKICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBzYXZlZF9jb25uZWN0ZWQKICAgICAgICByZXR1cm4KICAgIAogICAgdGVzdF9zb2NrZXQgPSBOb25lCiAgICB0cnk6CiAgICAgICAgIyBSZXNvbHZlIHNlcnZlciBhZGRyZXNzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBhZGRyID0gc29ja2V0LmdldGFkZHJpbmZvKHNlcnZlciwgcG9ydClbMF1bLTFdCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBmJ0ZhaWxlZCB0byByZXNvbHZlIHNlcnZlciBhZGRyZXNzOiB7ZX0nfSkpCiAgICAgICAgICAgICMgUmVzdG9yZSBzdGF0ZQogICAgICAgICAgICBfb3Ztc19zdGF0ZSA9IHNhdmVkX3N0YXRlCiAgICAgICAgICAgIF9vdm1zX3N0YXR1cyA9IHNhdmVkX3N0YXR1cwogICAgICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBzYXZlZF9jb25uZWN0ZWQKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgIyBDcmVhdGUgc29ja2V0IGFuZCBjb25uZWN0CiAgICAgICAgdGVzdF9zb2NrZXQgPSBzb2NrZXQuc29ja2V0KCkKICAgICAgICB0ZXN0X3NvY2tldC5zZXR0aW1lb3V0KDEwLjApICAjIDEwIHNlY29uZCB0aW1lb3V0IGZvciB0ZXN0CiAgICAgICAgCiAgICAgICAgIyBEZWJ1ZzogbG9nIGNvbm5lY3Rpb24gYXR0ZW1wdAogICAgICAgIHRyeToKICAgICAgICAgICAgd2VicmVwbC5sb2coZiJbT1ZNU10gQ29ubmVjdGluZyB0byB7YWRkclswXX06e2FkZHJbMV19IiwgbGV2ZWw9MSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgCiAgICAgICAgdGVzdF9zb2NrZXQuY29ubmVjdChhZGRyKQogICAgICAgIAogICAgICAgICMgRGVidWc6IGxvZyBzdWNjZXNzZnVsIGNvbm5lY3Rpb24KICAgICAgICB0cnk6CiAgICAgICAgICAgIHdlYnJlcGwubG9nKGYiW09WTVNdIENvbm5lY3RlZCBzdWNjZXNzZnVsbHkiLCBsZXZlbD0xKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIAogICAgICAgICMgR2VuZXJhdGUgdGVzdCB0b2tlbgogICAgICAgIGltcG9ydCBvcwogICAgICAgIHRva2VuX2J5dGVzID0gb3MudXJhbmRvbSgyMikKICAgICAgICB0ZXN0X3Rva2VuID0gYmFzZTY0LmI2NGVuY29kZSh0b2tlbl9ieXRlcykuZGVjb2RlKCdhc2NpaScpWzoyMl0KICAgICAgICAKICAgICAgICAjIEdlbmVyYXRlIGNsaWVudCBkaWdlc3QgKEhNQUMtTUQ1IG9mIHRva2VuIHdpdGggcGFzc3dvcmQpCiAgICAgICAgaCA9IGhtYWMubmV3KHBhc3N3b3JkLmVuY29kZSgnYXNjaWknKSwgCiAgICAgICAgICAgICAgICAgICB0ZXN0X3Rva2VuLmVuY29kZSgnYXNjaWknKSwgCiAgICAgICAgICAgICAgICAgICBoYXNobGliLm1kNSkKICAgICAgICBjbGllbnRfZGlnZXN0ID0gYmFzZTY0LmI2NGVuY29kZShoLmRpZ2VzdCgpKS5kZWNvZGUoJ2FzY2lpJykKICAgICAgICAKICAgICAgICAjIFNlbmQgbG9naW4gbWVzc2FnZTogTVAtQyAwIDx0b2tlbj4gPGRpZ2VzdD4gPHZlaGljbGVpZD4KICAgICAgICBsb2dpbl9tc2cgPSBmIk1QLUMgMCB7dGVzdF90b2tlbn0ge2NsaWVudF9kaWdlc3R9IHt2ZWhpY2xlaWR9XHJcbiIKICAgICAgICB0ZXN0X3NvY2tldC5zZW5kKGxvZ2luX21zZy5lbmNvZGUoJ2FzY2lpJykpCiAgICAgICAgCiAgICAgICAgIyBEZWJ1ZzogbG9nIHdoYXQgd2Ugc2VudAogICAgICAgIHRyeToKICAgICAgICAgICAgd2VicmVwbC5sb2coZiJbT1ZNU10gU2VudDoge2xvZ2luX21zZy5zdHJpcCgpfSIsIGxldmVsPTEpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgIyBXYWl0IGZvciBzZXJ2ZXIgcmVzcG9uc2UKICAgICAgICB0cnk6CiAgICAgICAgICAgIGRhdGEgPSB0ZXN0X3NvY2tldC5yZWN2KDQwOTYpCiAgICAgICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgICAgICAjIERlYnVnOiBsb2cgd2hhdCB3ZSByZWNlaXZlZAogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHdlYnJlcGwubG9nKGYiW09WTVNdIFJlY2VpdmVkOiB7ZGF0YVs6MTAwXX0iLCBsZXZlbD0xKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZGF0YS5kZWNvZGUoJ2FzY2lpJykuc3RyaXAoKQogICAgICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhcnRzd2l0aCgnTVAtUyAwICcpOgogICAgICAgICAgICAgICAgICAgICMgU2VydmVyIHJlc3BvbmRlZCB3aXRoIGF1dGhlbnRpY2F0aW9uIGNoYWxsZW5nZQogICAgICAgICAgICAgICAgICAgIHBhcnRzID0gcmVzcG9uc2VbNzpdLnNwbGl0KCcgJywgMSkKICAgICAgICAgICAgICAgICAgICBpZiBsZW4ocGFydHMpID09IDI6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl90b2tlbiA9IHBhcnRzWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl9kaWdlc3QgPSBwYXJ0c1sxXQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyBWZXJpZnkgZGlnZXN0CiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBobWFjLm5ldyhwYXNzd29yZC5lbmNvZGUoJ2FzY2lpJyksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcl90b2tlbi5lbmNvZGUoJ2FzY2lpJyksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hsaWIubWQ1KQogICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZF9kaWdlc3QgPSBiYXNlNjQuYjY0ZW5jb2RlKGguZGlnZXN0KCkpLmRlY29kZSgnYXNjaWknKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXhwZWN0ZWRfZGlnZXN0ID09IHNlcnZlcl9kaWdlc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZidTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIHtzZXJ2ZXJ9Ontwb3J0fSBhbmQgYXV0aGVudGljYXRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCAtIHBhc3N3b3JkIG1heSBiZSBpbmNvcnJlY3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogJ0ludmFsaWQgc2VydmVyIHJlc3BvbnNlIGZvcm1hdCcKICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoewogICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLCAKICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogZidVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZToge3Jlc3BvbnNlWzoxMDBdfScKICAgICAgICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoewogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsIAogICAgICAgICAgICAgICAgICAgICdlcnJvcic6ICdObyByZXNwb25zZSBmcm9tIHNlcnZlcicKICAgICAgICAgICAgICAgIH0pKQogICAgICAgIGV4Y2VwdCBzb2NrZXQudGltZW91dDoKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7CiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLCAKICAgICAgICAgICAgICAgICdlcnJvcic6ICdDb25uZWN0aW9uIHRpbWVvdXQgLSBzZXJ2ZXIgZGlkIG5vdCByZXNwb25kJwogICAgICAgICAgICB9KSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoewogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwgCiAgICAgICAgICAgICAgICAnZXJyb3InOiBmJ0Vycm9yIHJlYWRpbmcgc2VydmVyIHJlc3BvbnNlOiB7ZX0nCiAgICAgICAgICAgIH0pKQogICAgCiAgICBleGNlcHQgT1NFcnJvciBhcyBlOgogICAgICAgIGlmIGUuZXJybm8gPT0gMTEzOiAgIyBFSE9TVFVOUkVBQ0gKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7CiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLCAKICAgICAgICAgICAgICAgICdlcnJvcic6IGYnQ2Fubm90IHJlYWNoIHNlcnZlciB7c2VydmVyfTp7cG9ydH0gLSBjaGVjayBuZXR3b3JrIGNvbm5lY3Rpdml0eScKICAgICAgICAgICAgfSkpCiAgICAgICAgZWxpZiBlLmVycm5vID09IDExMTogICMgRUNPTk5SRUZVU0VECiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoewogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwgCiAgICAgICAgICAgICAgICAnZXJyb3InOiBmJ0Nvbm5lY3Rpb24gcmVmdXNlZCBieSB7c2VydmVyfTp7cG9ydH0gLSBzZXJ2ZXIgbWF5IGJlIGRvd24gb3IgcG9ydCBpbmNvcnJlY3QnCiAgICAgICAgICAgIH0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoewogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwgCiAgICAgICAgICAgICAgICAnZXJyb3InOiBmJ0Nvbm5lY3Rpb24gZXJyb3I6IHtlfScKICAgICAgICAgICAgfSkpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7CiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsIAogICAgICAgICAgICAnZXJyb3InOiBmJ1Rlc3QgZmFpbGVkOiB7ZX0nCiAgICAgICAgfSkpCiAgICBmaW5hbGx5OgogICAgICAgICMgQ1JJVElDQUw6IEFsd2F5cyBjbG9zZSB0ZXN0IHNvY2tldCBhbmQgcmVzdG9yZSBnbG9iYWwgc3RhdGUKICAgICAgICBpZiB0ZXN0X3NvY2tldDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGVzdF9zb2NrZXQuY2xvc2UoKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgCiAgICAgICAgIyBSZXN0b3JlIG9yaWdpbmFsIHN0YXRlICh0ZXN0IHNob3VsZCBub3QgYWZmZWN0IG1haW4gY29ubmVjdGlvbiBzdGF0ZSkKICAgICAgICBfb3Ztc19zdGF0ZSA9IHNhdmVkX3N0YXRlCiAgICAgICAgX292bXNfc3RhdHVzID0gc2F2ZWRfc3RhdHVzCiAgICAgICAgX292bXNfY29ubmVjdGVkID0gc2F2ZWRfY29ubmVjdGVkCgoKZGVmIHN0YXJ0T1ZNUygpOgogICAgIiIiU3RhcnQgT1ZNUyBjbGllbnQgY29ubmVjdGlvbiIiIgogICAgZ2xvYmFsIF9vdm1zX3NvY2tldCwgX292bXNfY29ubmVjdGVkLCBfb3Ztc19zdGF0ZSwgX292bXNfc3RhdHVzLCBfcG9sbF90YXNrLCBfcmVhZGVyX3Rhc2ssIF9zdG9wX3JlYWRlcgogICAgCiAgICBpZiBfb3Ztc19jb25uZWN0ZWQ6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N0YXR1cyc6ICdhbHJlYWR5X2Nvbm5lY3RlZCd9KSkKICAgICAgICByZXR1cm4KICAgIAogICAgIyBHZXQgY29uZmlnIGZyb20gc2V0dGluZ3MKICAgIGVuYWJsZWQgPSBzZXR0aW5ncy5nZXQoJ292bXMuZW5hYmxlZCcsIEZhbHNlKQogICAgc2VydmVyID0gc2V0dGluZ3MuZ2V0KCdvdm1zLnNlcnZlcicsICcnKQogICAgcG9ydCA9IHNldHRpbmdzLmdldCgnb3Ztcy5wb3J0JywgNjg2NykKICAgIHZlaGljbGVpZCA9IHNldHRpbmdzLmdldCgnb3Ztcy52ZWhpY2xlaWQnLCAnJykKICAgIHBhc3N3b3JkID0gc2V0dGluZ3MuZ2V0KCdvdm1zLnBhc3N3b3JkJywgJycpCiAgICAKICAgIGlmIG5vdCBlbmFibGVkOgogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdPVk1TIGlzIG5vdCBlbmFibGVkIGluIGNvbmZpZ3VyYXRpb24nfSkpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIGlmIG5vdCBzZXJ2ZXIgb3Igbm90IHZlaGljbGVpZCBvciBub3QgcGFzc3dvcmQ6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ1NlcnZlciwgdmVoaWNsZSBJRCwgYW5kIHBhc3N3b3JkIG11c3QgYmUgY29uZmlndXJlZCd9KSkKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgIF9vdm1zX3N0YXRlID0gJ2Nvbm5lY3RpbmcnCiAgICAgICAgX292bXNfc3RhdHVzID0gZiJDb25uZWN0aW5nIHRvIHtzZXJ2ZXJ9Ontwb3J0fS4uLiIKICAgICAgICBfb3Ztc19jb25uZWN0ZWQgPSBGYWxzZSAgIyBDUklUSUNBTDogRG9uJ3Qgc2V0IGNvbm5lY3RlZCB1bnRpbCBhdXRoZW50aWNhdGVkIQogICAgICAgIAogICAgICAgICMgQ3JlYXRlIHNvY2tldCBjb25uZWN0aW9uCiAgICAgICAgYWRkciA9IHNvY2tldC5nZXRhZGRyaW5mbyhzZXJ2ZXIsIHBvcnQpWzBdWy0xXQogICAgICAgIF9vdm1zX3NvY2tldCA9IHNvY2tldC5zb2NrZXQoKQogICAgICAgIF9vdm1zX3NvY2tldC5jb25uZWN0KGFkZHIpCiAgICAgICAgCiAgICAgICAgIyBTZW5kIGxvZ2luIGltbWVkaWF0ZWx5IChkb24ndCB3YWl0IGZvciBzZXJ2ZXIgaGVsbG8pCiAgICAgICAgX3NlbmRfbG9naW4oKQogICAgICAgIAogICAgICAgICMgU2V0IG5vbi1ibG9ja2luZyBpbW1lZGlhdGVseSAtIGxldCByZWFkZXIgdGhyZWFkIGhhbmRsZSBBTEwgcmVzcG9uc2VzCiAgICAgICAgX292bXNfc29ja2V0LnNldGJsb2NraW5nKEZhbHNlKQogICAgICAgIAogICAgICAgICMgU3RhcnQgYmFja2dyb3VuZCByZWFkZXIgdGFzayBpbW1lZGlhdGVseSBmb3IgZXZlbnQtZHJpdmVuIG1lc3NhZ2UgaGFuZGxpbmcKICAgICAgICAjIFRoZSByZWFkZXIgd2lsbCBoYW5kbGUgYXV0aGVudGljYXRpb24gcmVzcG9uc2UgYW5kIGFsbCBzdWJzZXF1ZW50IG1lc3NhZ2VzCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJTdGFydGluZyBiYWNrZ3JvdW5kIHJlYWRlciB0YXNrIikKICAgICAgICBfc3RvcF9yZWFkZXIgPSBGYWxzZQogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IF90aHJlYWQKICAgICAgICAgICAgX3JlYWRlcl90YXNrID0gX3RocmVhZC5zdGFydF9uZXdfdGhyZWFkKF9yZWFkZXJfbG9vcCwgKCkpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEdpdmUgcmVhZGVyIGEgbW9tZW50IHRvIHN0YXJ0IGFuZCBwcm9jZXNzIGF1dGgKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGYiW09WTVNdIFdhcm5pbmc6IENvdWxkIG5vdCBzdGFydCByZWFkZXIgdGFzazoge2V9IikKICAgICAgICAgICAgX292bXNfc3RhdGUgPSAnZXJyb3InCiAgICAgICAgICAgIF9vdm1zX3N0YXR1cyA9ICdGYWlsZWQgdG8gc3RhcnQgcmVhZGVyIHRocmVhZCcKICAgICAgICAKICAgICAgICAjIFJlcG9ydCBjdXJyZW50IHN0YXRlIChyZWFkZXIgdGhyZWFkIHdpbGwgdXBkYXRlIF9vdm1zX2Nvbm5lY3RlZCB3aGVuIGF1dGggc3VjY2VlZHMpCiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N0YXR1cyc6IF9vdm1zX3N0YXRlLCAnY29ubmVjdGVkJzogX292bXNfY29ubmVjdGVkfSkpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgX292bXNfc3RhdGUgPSAnZXJyb3InCiAgICAgICAgX292bXNfc3RhdHVzID0gZidDb25uZWN0aW9uIGVycm9yOiB7ZX0nCiAgICAgICAgX292bXNfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICBpZiBfb3Ztc19zb2NrZXQ6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIF9vdm1zX3NvY2tldC5jbG9zZSgpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgX292bXNfc29ja2V0ID0gTm9uZQogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6IGYnRmFpbGVkIHRvIHN0YXJ0OiB7ZX0nfSkpCgoKZGVmIHN0b3BPVk1TKCk6CiAgICAiIiJTdG9wIE9WTVMgY2xpZW50IGNvbm5lY3Rpb24iIiIKICAgIGdsb2JhbCBfb3Ztc19zb2NrZXQsIF9vdm1zX2Nvbm5lY3RlZCwgX292bXNfc3RhdGUsIF9vdm1zX3N0YXR1cywgX3BvbGxfdGFzaywgX3JlYWRlcl90YXNrLCBfc3RvcF9yZWFkZXIKICAgIGdsb2JhbCBfb3Ztc19jYW5fZGV2LCBfb3Ztc19zZG9fY2xpZW50LCBfb3Ztc19jYW5fY29ubmVjdGVkLCBfb3Ztc19wZWVycwogICAgCiAgICAjIFN0b3AgYmFja2dyb3VuZCByZWFkZXIgdGFzawogICAgaWYgX3JlYWRlcl90YXNrOgogICAgICAgIGxvZ2dlci5kZWJ1ZygiU3RvcHBpbmcgYmFja2dyb3VuZCByZWFkZXIgdGFzayIpCiAgICAgICAgX3N0b3BfcmVhZGVyID0gVHJ1ZQogICAgICAgIHRpbWUuc2xlZXAoMC4zKSAgIyBHaXZlIHJlYWRlciB0YXNrIHRpbWUgdG8gZXhpdAogICAgICAgIF9yZWFkZXJfdGFzayA9IE5vbmUKICAgIAogICAgaWYgX3BvbGxfdGFzazoKICAgICAgICAjIFN0b3AgcG9sbGluZyB0YXNrIGlmIHJ1bm5pbmcKICAgICAgICBfcG9sbF90YXNrID0gTm9uZQogICAgCiAgICBpZiBfb3Ztc19zb2NrZXQ6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBfb3Ztc19zb2NrZXQuY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIF9vdm1zX3NvY2tldCA9IE5vbmUKICAgIAogICAgIyBDbGVhbiB1cCBDQU4gY29ubmVjdGlvbgogICAgaWYgX292bXNfY2FuX2RldjoKICAgICAgICB0cnk6CiAgICAgICAgICAgIF9vdm1zX2Nhbl9kZXYuZGVpbml0KCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBfb3Ztc19jYW5fZGV2ID0gTm9uZQogICAgICAgIF9vdm1zX3Vkc19jbGllbnQgPSBOb25lCiAgICAgICAgX292bXNfY2FuX2Nvbm5lY3RlZCA9IEZhbHNlCiAgICAKICAgIF9vdm1zX2Nvbm5lY3RlZCA9IEZhbHNlCiAgICBfb3Ztc19zdGF0ZSA9ICdkaXNjb25uZWN0ZWQnCiAgICBfb3Ztc19zdGF0dXMgPSAnRGlzY29ubmVjdGVkJwogICAgX292bXNfdG9rZW4gPSAnJwogICAgX292bXNfY3J5cHRvX3J4ID0gTm9uZQogICAgX292bXNfY3J5cHRvX3R4ID0gTm9uZQogICAgX292bXNfcGVlcnMgPSAwCiAgICBfc3RvcF9yZWFkZXIgPSBGYWxzZQogICAgCiAgICBwcmludChqc29uLmR1bXBzKHsnc3RhdHVzJzogJ3N0b3BwZWQnfSkpCgoKZGVmIGdldE9WTVNTdGF0dXMoKToKICAgICIiIkdldCBPVk1TIGNvbm5lY3Rpb24gc3RhdHVzIiIiCiAgICB0cnk6CiAgICAgICAgIyBDaGVjayBmb3Igc2VydmVyIG1lc3NhZ2VzIGlmIGNvbm5lY3RlZAogICAgICAgIGlmIF9vdm1zX2Nvbm5lY3RlZDoKICAgICAgICAgICAgY2hlY2tTZXJ2ZXJNZXNzYWdlcygpCiAgICAgICAgCiAgICAgICAgIyBUcmlnZ2VyIHBvbGwvdHJhbnNtaXNzaW9uIGlmIGVuYWJsZWQgYW5kIGNvbm5lY3RlZAogICAgICAgICMgVXNlIHBlZXItYmFzZWQgdXBkYXRlIGludGVydmFscyBsaWtlIE9WTVMgdjM6CiAgICAgICAgIyAtIDYwcyB3aGVuIGFwcHMgY29ubmVjdGVkIChwZWVycyA+IDApCiAgICAgICAgIyAtIDYwMHMgd2hlbiBpZGxlIChwZWVycyA9PSAwKQogICAgICAgIGlmIHNldHRpbmdzLmdldCgnb3Ztcy5lbmFibGVkJywgRmFsc2UpIGFuZCBfb3Ztc19jb25uZWN0ZWQ6CiAgICAgICAgICAgIGN1cnJlbnRfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgICMgQ2hvb3NlIGludGVydmFsIGJhc2VkIG9uIHBlZXIgY291bnQKICAgICAgICAgICAgdXBkYXRlX2ludGVydmFsID0gc2V0dGluZ3MuZ2V0KCdvdm1zLnVwZGF0ZXRpbWVfY29ubmVjdGVkJywgNjApIGlmIF9vdm1zX3BlZXJzID4gMCBlbHNlIHNldHRpbmdzLmdldCgnb3Ztcy51cGRhdGV0aW1lX2lkbGUnLCA2MDApCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBfbGFzdF9wb2xsX3RpbWUgPT0gMCBvciAoY3VycmVudF90aW1lIC0gX2xhc3RfcG9sbF90aW1lKSA+PSB1cGRhdGVfaW50ZXJ2YWw6CiAgICAgICAgICAgICAgICBfcG9sbF9sb29wKCkKICAgICAgICAKICAgICAgICBzdGF0dXMgPSB7CiAgICAgICAgICAgICdzdGF0ZSc6IF9vdm1zX3N0YXRlLAogICAgICAgICAgICAnc3RhdHVzJzogX292bXNfc3RhdHVzLAogICAgICAgICAgICAnY29ubmVjdGVkJzogX292bXNfY29ubmVjdGVkLAogICAgICAgICAgICAncGVlcnMnOiBfb3Ztc19wZWVycywKICAgICAgICAgICAgJ21ldHJpY3NfY291bnQnOiBsZW4oX21ldHJpY3MpLAogICAgICAgICAgICAnbGFzdF9wb2xsJzogX2xhc3RfcG9sbF90aW1lCiAgICAgICAgfQogICAgICAgIHByaW50KGpzb24uZHVtcHMoc3RhdHVzKSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIENhdGNoIGFueSB1bmV4cGVjdGVkIGV4Y2VwdGlvbnMgYW5kIHNlbmQgZXJyb3IgcmVzcG9uc2UKICAgICAgICAjIFNlbmQgZXJyb3IgdmlhIE0yTV9MT0cgKG9wY29kZSAweDAzKSBpbnN0ZWFkIG9mIHByaW50KCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdlYnJlcGwuc2VuZF9tMm0oZiJbT1ZNU10gRVJST1IgaW4gZ2V0T1ZNU1N0YXR1czoge3R5cGUoZSkuX19uYW1lX199OiB7ZX0iLCAweDAzKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIHRyeToKICAgICAgICAgICAgX3NlbmRfZXJyb3IoZidTdGF0dXMgZXJyb3I6IHtlfScpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBzZW5kX2VycjoKICAgICAgICAgICAgIyBTaWxlbnQgLSBlcnJvciBhbHJlYWR5IG9jY3VycmVkCiAgICAgICAgICAgIHBhc3MKCgojIENvbmZpZyBpcyBub3cgbG9hZGVkIG9uLWRlbWFuZCBmcm9tIHNldHRpbmdzIG1vZHVsZSAobm8gaW5pdGlhbGl6YXRpb24gbmVlZGVkKQo=",
  "/lib/ext/ovms/vehicle.py": "IiIiCk9WTVMgVmVoaWNsZSBGcmFtZXdvcmsKPT09PT09PT09PT09PT09PT09PT09PT0KCkJhc2UgZnJhbWV3b3JrIGZvciBPVk1TIHZlaGljbGUgbW9kdWxlcyAoYW5hbG9nb3VzIHRvIHZlaGljbGUuaC92ZWhpY2xlLmNwcCBpbiBPVk1TIHYzKS4KClRoaXMgbW9kdWxlIHByb3ZpZGVzOgotIFByb3RvY29sIHR5cGUgZGVmaW5pdGlvbnMKLSBDb21tb24gcGFyc2luZyBmdW5jdGlvbnMKLSBWZWhpY2xlIGRpc2NvdmVyeSBhbmQgcmVnaXN0cmF0aW9uIHN5c3RlbQoKVmVoaWNsZS1zcGVjaWZpYyBjb25maWd1cmF0aW9ucyBzaG91bGQgYmUgaW4gc2VwYXJhdGUgZmlsZXMgaW4gdGhlIHZlaGljbGVzLyBzdWJkaXJlY3RvcnkKKGUuZy4sIHZlaGljbGVzL3pvbWJpZV92Y3Uvem9tYmllX3ZjdS5weSwgdmVoaWNsZXMvb2JkaWkvb2JkaWkucHkpIHRvIG1hdGNoIE9WTVMgdjMncyBtb2R1bGFyIHN0cnVjdHVyZS4KCkVhY2ggdmVoaWNsZSBtb2R1bGUgc2hvdWxkIGRlZmluZToKLSBWRUhJQ0xFX0NPTkZJRyBkaWN0IHdpdGggcHJvdG9jb2wsIENBTiBJRHMsIG1ldHJpY3MsIGV0Yy4KLSBQQVJTRV9GVU5DVElPTlMgZGljdCB3aXRoIGN1c3RvbSBwYXJzaW5nIGZ1bmN0aW9ucyAoaWYgbmVlZGVkKQoKQmFzZWQgb24gT1ZNUyB2MyB2ZWhpY2xlIGZyYW1ld29yayAodmVoaWNsZS5oLCB2ZWhpY2xlLmNwcCwgZXRjLikKIiIiCgojIFZlaGljbGUgcHJvdG9jb2wgdHlwZXMKUFJPVE9DT0xfT0JEMiA9ICdvYmQyJwpQUk9UT0NPTF9DQU5PUEVOX1NETyA9ICdjYW5vcGVuX3NkbycKUFJPVE9DT0xfQ0FOX1JBVyA9ICdjYW5fcmF3JwpQUk9UT0NPTF9GQUtFID0gJ2Zha2UnICAjIEZvciBzaW11bGF0ZWQgdmVoaWNsZXMgKG5vIENBTiBoYXJkd2FyZSByZXF1aXJlZCkKCiMgT0JEMiBNb2RlIGRlZmluaXRpb25zCk9CRDJfTU9ERV9DVVJSRU5UX0RBVEEgPSAweDAxCk9CRDJfTU9ERV9SRUFEX1BBUkFNID0gMHgyQSAgIyBPcGVuSW52ZXJ0ZXIgY3VzdG9tIG1vZGUKT0JEMl9NT0RFX1JFU1BPTlNFX1BBUkFNID0gMHg2QQoKIyBQYXJzaW5nIGZ1bmN0aW9ucyBmb3IgT0JEMiByZXNwb25zZXMKIyBPcGVuSW52ZXJ0ZXIgcmVzcG9uc2UgZm9ybWF0OiBbbGVuZ3RoLCBtb2RlKDB4NkEpLCBwaWRfaGlnaCwgcGlkX2xvdywgdmFsX2J5dGUzLCB2YWxfYnl0ZTIsIHZhbF9ieXRlMSwgdmFsX2J5dGUwXQojIFRoZSAzMi1iaXQgZml4ZWQtcG9pbnQgdmFsdWUgaXMgaW4gYnl0ZXMgNC03IChsaXR0bGUtZW5kaWFuKQpkZWYgcGFyc2VfMTZiaXRfaGlnaChkYXRhKToKICAgICIiIlBhcnNlIDE2LWJpdCB2YWx1ZSBmcm9tIGJ5dGVzIDItMyAoaGlnaCBieXRlcykiIiIKICAgIGlmIGxlbihkYXRhKSA8IDQ6CiAgICAgICAgcmV0dXJuIDAuMAogICAgcmV0dXJuICgoZGF0YVsyXSA8PCA4KSArIGRhdGFbM10pIC8gMzIuMAoKZGVmIHBhcnNlXzMyYml0KGRhdGEpOgogICAgIiIiUGFyc2UgMzItYml0IHZhbHVlIGZyb20gYnl0ZXMgNC03IChsaXR0bGUtZW5kaWFuKSIiIgogICAgaWYgbGVuKGRhdGEpIDwgODoKICAgICAgICByZXR1cm4gMC4wCiAgICB2YWwgPSAoZGF0YVs0XSA8PCAyNCkgKyAoZGF0YVs1XSA8PCAxNikgKyAoZGF0YVs2XSA8PCA4KSArIGRhdGFbN10KICAgICMgQ29udmVydCB0byBzaWduZWQKICAgIGlmIHZhbCA+PSAweDgwMDAwMDAwOgogICAgICAgIHZhbCAtPSAweDEwMDAwMDAwMAogICAgcmV0dXJuIHZhbCAvIDMyLjAKCmRlZiBwYXJzZV8zMmJpdF9uZWdhdGl2ZShkYXRhKToKICAgICIiIlBhcnNlIDMyLWJpdCB2YWx1ZSBhbmQgbmVnYXRlIChmb3IgT1ZNUyBjdXJyZW50IGNvbnZlbnRpb24pIiIiCiAgICByZXR1cm4gLXBhcnNlXzMyYml0KGRhdGEpCgpkZWYgcGFyc2VfOGJpdF9vcG1vZGUoZGF0YSk6CiAgICAiIiJQYXJzZSBvcG1vZGUgZnJvbSBieXRlIDMiIiIKICAgIGlmIGxlbihkYXRhKSA8IDQ6CiAgICAgICAgcmV0dXJuIDAKICAgIHJldHVybiBpbnQoZGF0YVszXSAvIDMyKQoKZGVmIHBhcnNlX29iZDJfdGVtcChkYXRhKToKICAgICIiIlBhcnNlIE9CRDIgc3RhbmRhcmQgdGVtcGVyYXR1cmUgKGJ5dGUgMCAtIDB4MjgpIiIiCiAgICBpZiBsZW4oZGF0YSkgPCAxOgogICAgICAgIHJldHVybiAwLjAKICAgIHJldHVybiBmbG9hdChkYXRhWzBdIC0gMHgyOCkKCmRlZiBwYXJzZV8yNGJpdF9taWxsaXZvbHQoZGF0YSk6CiAgICAiIiJQYXJzZSAyNC1iaXQgbWlsbGl2b2x0IHZhbHVlIGZyb20gYnl0ZXMgMS0zLCBjb252ZXJ0IHRvIHZvbHRzIiIiCiAgICBpZiBsZW4oZGF0YSkgPCA0OgogICAgICAgIHJldHVybiAwLjAKICAgIG1pbGxpVm9sdCA9ICgoZGF0YVsxXSA8PCAxNikgKyAoZGF0YVsyXSA8PCA4KSArIGRhdGFbM10pIC8gMzIKICAgIHJldHVybiBmbG9hdChtaWxsaVZvbHQpIC8gMTAwMC4wCgojIFZlaGljbGUgZGVmaW5pdGlvbnMKIyBCdWlsdC1pbiB2ZWhpY2xlcyBjYW4gYmUgZGVmaW5lZCBoZXJlLCBidXQgaXQncyByZWNvbW1lbmRlZCB0byB1c2UKIyBzZXBhcmF0ZSB2ZWhpY2xlXyoucHkgZmlsZXMgZm9yIGJldHRlciBvcmdhbml6YXRpb24gKG1hdGNoZXMgT1ZNUyB2MyBzdHJ1Y3R1cmUpClZFSElDTEVTID0gewogICAgIyBObyBidWlsdC1pbiB2ZWhpY2xlcyAtIGFsbCB2ZWhpY2xlcyBzaG91bGQgYmUgaW4gc2VwYXJhdGUgZmlsZXMKICAgICMgVGhpcyBtYXRjaGVzIE9WTVMgdjMncyBtb2R1bGFyIHN0cnVjdHVyZSB3aGVyZSBlYWNoIHZlaGljbGUgaXMgYSBzZXBhcmF0ZSBjb21wb25lbnQKfQoKIyBQYXJzZSBmdW5jdGlvbiBsb29rdXAKUEFSU0VfRlVOQ1RJT05TID0gewogICAgJ3BhcnNlXzE2Yml0X2hpZ2gnOiBwYXJzZV8xNmJpdF9oaWdoLAogICAgJ3BhcnNlXzMyYml0JzogcGFyc2VfMzJiaXQsCiAgICAncGFyc2VfMzJiaXRfbmVnYXRpdmUnOiBwYXJzZV8zMmJpdF9uZWdhdGl2ZSwKICAgICdwYXJzZV84Yml0X29wbW9kZSc6IHBhcnNlXzhiaXRfb3Btb2RlLAogICAgJ3BhcnNlX29iZDJfdGVtcCc6IHBhcnNlX29iZDJfdGVtcCwKICAgICdwYXJzZV8yNGJpdF9taWxsaXZvbHQnOiBwYXJzZV8yNGJpdF9taWxsaXZvbHQsCn0KCgpkZWYgZ2V0X3ZlaGljbGVfY29uZmlnKHZlaGljbGVfdHlwZSk6CiAgICAiIiJHZXQgdmVoaWNsZSBjb25maWd1cmF0aW9uIGJ5IHR5cGUKICAgIAogICAgU3VwcG9ydHMgYm90aCBidWlsdC1pbiB2ZWhpY2xlcyAoaW4gVkVISUNMRVMgZGljdCkgYW5kCiAgICBleHRlcm5hbCB2ZWhpY2xlIG1vZHVsZXMgaW4gdmVoaWNsZXMvIHN1YmRpcmVjdG9yeSAoZS5nLiwgdmVoaWNsZXMvem9tYmllX3ZjdS96b21iaWVfdmN1LnB5KS4KICAgICIiIgogICAgIyBGaXJzdCBjaGVjayBidWlsdC1pbiB2ZWhpY2xlcwogICAgaWYgdmVoaWNsZV90eXBlIGluIFZFSElDTEVTOgogICAgICAgIHJldHVybiBWRUhJQ0xFU1t2ZWhpY2xlX3R5cGVdCiAgICAKICAgICMgVHJ5IHRvIGxvYWQgZXh0ZXJuYWwgdmVoaWNsZSBtb2R1bGUgZnJvbSB2ZWhpY2xlcy8gc3ViZGlyZWN0b3J5CiAgICB0cnk6CiAgICAgICAgaW1wb3J0IG9zCiAgICAgICAgCiAgICAgICAgIyBNaWNyb1B5dGhvbiBkb2Vzbid0IGhhdmUgb3MucGF0aCwgc28gdXNlIGRpcmVjdCBzdHJpbmcgbWFuaXB1bGF0aW9uCiAgICAgICAgdmVoaWNsZV9maWxlID0gZicvbGliL3ZlaGljbGVzL3t2ZWhpY2xlX3R5cGV9L3t2ZWhpY2xlX3R5cGV9LnB5JwogICAgICAgIAogICAgICAgICMgQ2hlY2sgaWYgZmlsZSBleGlzdHMgYnkgdHJ5aW5nIHRvIG9wZW4gaXQKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgUmVhZCBhbmQgZXhlY3V0ZSB0aGUgdmVoaWNsZSBmaWxlIGRpcmVjdGx5CiAgICAgICAgICAgIHdpdGggb3Blbih2ZWhpY2xlX2ZpbGUsICdyJykgYXMgZjoKICAgICAgICAgICAgICAgIHZlaGljbGVfY29kZSA9IGYucmVhZCgpCiAgICAgICAgICAgICMgQ3JlYXRlIGEgbmFtZXNwYWNlIGZvciB0aGUgdmVoaWNsZSBtb2R1bGUKICAgICAgICAgICAgIyBQYXNzIHRoZSBjb25zdGFudHMgZGlyZWN0bHkgaW5zdGVhZCBvZiBpbXBvcnRpbmcgdmVoaWNsZSBtb2R1bGUKICAgICAgICAgICAgIyB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnQgaXNzdWVzCiAgICAgICAgICAgIHZlaGljbGVfZ2xvYmFscyA9IHsKICAgICAgICAgICAgICAgICdQUk9UT0NPTF9PQkQyJzogUFJPVE9DT0xfT0JEMiwKICAgICAgICAgICAgICAgICdQUk9UT0NPTF9DQU5PUEVOX1NETyc6IFBST1RPQ09MX0NBTk9QRU5fU0RPLAogICAgICAgICAgICAgICAgJ1BST1RPQ09MX0NBTl9SQVcnOiBQUk9UT0NPTF9DQU5fUkFXLAogICAgICAgICAgICAgICAgJ1BST1RPQ09MX0ZBS0UnOiBQUk9UT0NPTF9GQUtFLAogICAgICAgICAgICAgICAgJ09CRDJfTU9ERV9DVVJSRU5UX0RBVEEnOiBPQkQyX01PREVfQ1VSUkVOVF9EQVRBLAogICAgICAgICAgICAgICAgJ09CRDJfTU9ERV9SRUFEX1BBUkFNJzogT0JEMl9NT0RFX1JFQURfUEFSQU0sCiAgICAgICAgICAgICAgICAnT0JEMl9NT0RFX1JFU1BPTlNFX1BBUkFNJzogT0JEMl9NT0RFX1JFU1BPTlNFX1BBUkFNLAogICAgICAgICAgICB9CiAgICAgICAgICAgICMgQWxzbyBhZGQgYSBtb2NrIHZlaGljbGUgbW9kdWxlIGZvciAnZnJvbSB2ZWhpY2xlIGltcG9ydCAuLi4nIHN5bnRheAogICAgICAgICAgICBjbGFzcyBWZWhpY2xlTW9kdWxlOgogICAgICAgICAgICAgICAgUFJPVE9DT0xfT0JEMiA9IFBST1RPQ09MX09CRDIKICAgICAgICAgICAgICAgIFBST1RPQ09MX0NBTk9QRU5fU0RPID0gUFJPVE9DT0xfQ0FOT1BFTl9TRE8KICAgICAgICAgICAgICAgIFBST1RPQ09MX0NBTl9SQVcgPSBQUk9UT0NPTF9DQU5fUkFXCiAgICAgICAgICAgICAgICBQUk9UT0NPTF9GQUtFID0gUFJPVE9DT0xfRkFLRQogICAgICAgICAgICAgICAgT0JEMl9NT0RFX0NVUlJFTlRfREFUQSA9IE9CRDJfTU9ERV9DVVJSRU5UX0RBVEEKICAgICAgICAgICAgICAgIE9CRDJfTU9ERV9SRUFEX1BBUkFNID0gT0JEMl9NT0RFX1JFQURfUEFSQU0KICAgICAgICAgICAgICAgIE9CRDJfTU9ERV9SRVNQT05TRV9QQVJBTSA9IE9CRDJfTU9ERV9SRVNQT05TRV9QQVJBTQogICAgICAgICAgICB2ZWhpY2xlX2dsb2JhbHNbJ3ZlaGljbGUnXSA9IFZlaGljbGVNb2R1bGUoKQogICAgICAgICAgICBleGVjKHZlaGljbGVfY29kZSwgdmVoaWNsZV9nbG9iYWxzKQogICAgICAgICAgICBjb25maWcgPSB2ZWhpY2xlX2dsb2JhbHMuZ2V0KCdWRUhJQ0xFX0NPTkZJRycsIE5vbmUpCiAgICAgICAgICAgIGlmIGNvbmZpZzoKICAgICAgICAgICAgICAgICMgTWVyZ2UgcGFyc2UgZnVuY3Rpb25zIGZyb20gZXh0ZXJuYWwgbW9kdWxlCiAgICAgICAgICAgICAgICBleHRlcm5hbF9wYXJzZV9mdW5jcyA9IHZlaGljbGVfZ2xvYmFscy5nZXQoJ1BBUlNFX0ZVTkNUSU9OUycsIHt9KQogICAgICAgICAgICAgICAgUEFSU0VfRlVOQ1RJT05TLnVwZGF0ZShleHRlcm5hbF9wYXJzZV9mdW5jcykKICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgIyBGaWxlIGRvZXNuJ3QgZXhpc3QsIHJldHVybiBOb25lCiAgICAgICAgICAgIHBhc3MKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIExvZyBlcnJvciBidXQgZG9uJ3QgcHJpbnQgdG8gYXZvaWQgbm9pc2UKICAgICAgICAjIFNlbmQgZXJyb3IgdmlhIE0yTV9MT0cgKG9wY29kZSAweDAzKSBpZiB3ZWJyZXBsIGlzIGF2YWlsYWJsZQogICAgICAgIHRyeToKICAgICAgICAgICAgaW1wb3J0IHdlYnJlcGwKICAgICAgICAgICAgd2VicmVwbC5zZW5kX20ybShmIltPVk1TXSBFcnJvciBsb2FkaW5nIHZlaGljbGUgY29uZmlnIGZvciB7dmVoaWNsZV90eXBlfToge2V9IiwgMHgwMykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MgICMgU2lsZW50IGlmIHdlYnJlcGwgbm90IGF2YWlsYWJsZQogICAgCiAgICByZXR1cm4gTm9uZQoKCmRlZiBsaXN0X3ZlaGljbGVzKCk6CiAgICAiIiJMaXN0IGFsbCBhdmFpbGFibGUgdmVoaWNsZSB0eXBlcyAoYnVpbHQtaW4gKyBleHRlcm5hbCBtb2R1bGVzIGluIHZlaGljbGVzLyBzdWJkaXJlY3RvcnkpIiIiCiAgICB2ZWhpY2xlX2xpc3QgPSB7azogdlsnbmFtZSddIGZvciBrLCB2IGluIFZFSElDTEVTLml0ZW1zKCl9CiAgICAKICAgICMgVHJ5IHRvIGRpc2NvdmVyIGV4dGVybmFsIHZlaGljbGUgbW9kdWxlcyBpbiB2ZWhpY2xlcy8gc3ViZGlyZWN0b3J5CiAgICB0cnk6CiAgICAgICAgaW1wb3J0IG9zCiAgICAgICAgaW1wb3J0IHN5cwogICAgICAgIAogICAgICAgICMgTWljcm9QeXRob24gZG9lc24ndCBoYXZlIG9zLnBhdGgsIHNvIHVzZSBkaXJlY3Qgc3RyaW5nIG1hbmlwdWxhdGlvbgogICAgICAgIHZlaGljbGVzX2RpciA9ICcvbGliL3ZlaGljbGVzJwogICAgICAgIAogICAgICAgICMgQ2hlY2sgaWYgdmVoaWNsZXMgZGlyZWN0b3J5IGV4aXN0cyBieSB0cnlpbmcgdG8gbGlzdCBpdAogICAgICAgIHRyeToKICAgICAgICAgICAgaXRlbXMgPSBvcy5saXN0ZGlyKHZlaGljbGVzX2RpcikKICAgICAgICAgICAgIyBMb29rIGZvciBzdWJkaXJlY3RvcmllcyAoZS5nLiwgem9tYmllX3ZjdS8sIG9iZGlpLykKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgICAgICAgICAjIEJ1aWxkIHBhdGggbWFudWFsbHkgKG5vIG9zLnBhdGguam9pbikKICAgICAgICAgICAgICAgIGl0ZW1fcGF0aCA9IGYne3ZlaGljbGVzX2Rpcn0ve2l0ZW19JwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIENoZWNrIGlmIGl0J3MgYSBkaXJlY3RvcnkgYnkgdHJ5aW5nIHRvIGxpc3QgaXQKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBvcy5saXN0ZGlyKGl0ZW1fcGF0aCkKICAgICAgICAgICAgICAgICAgICAjIElmIHdlIGNhbiBsaXN0IGl0LCBpdCdzIGEgZGlyZWN0b3J5CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGl0ZW0uc3RhcnRzd2l0aCgnXycpOgogICAgICAgICAgICAgICAgICAgICAgICAjIEJ1aWxkIHZlaGljbGUgZmlsZSBwYXRoIG1hbnVhbGx5CiAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVfZmlsZSA9IGYne2l0ZW1fcGF0aH0ve2l0ZW19LnB5JwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyBDaGVjayBpZiBmaWxlIGV4aXN0cyBieSB0cnlpbmcgdG8gb3BlbiBpdAogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4odmVoaWNsZV9maWxlLCAncicpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZV9pZCA9IGl0ZW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2ZWhpY2xlX2lkIG5vdCBpbiB2ZWhpY2xlX2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgUmVhZCBhbmQgZXhlY3V0ZSB0aGUgdmVoaWNsZSBmaWxlIGRpcmVjdGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlX2NvZGUgPSBmLnJlYWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDcmVhdGUgYSBuYW1lc3BhY2UgZm9yIHRoZSB2ZWhpY2xlIG1vZHVsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBQYXNzIHRoZSBjb25zdGFudHMgZGlyZWN0bHkgaW5zdGVhZCBvZiBpbXBvcnRpbmcgdmVoaWNsZSBtb2R1bGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdG8gYXZvaWQgY2lyY3VsYXIgaW1wb3J0IGlzc3VlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZV9nbG9iYWxzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdQUk9UT0NPTF9PQkQyJzogUFJPVE9DT0xfT0JEMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUFJPVE9DT0xfQ0FOT1BFTl9TRE8nOiBQUk9UT0NPTF9DQU5PUEVOX1NETywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUFJPVE9DT0xfQ0FOX1JBVyc6IFBST1RPQ09MX0NBTl9SQVcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1BST1RPQ09MX0ZBS0UnOiBQUk9UT0NPTF9GQUtFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPQkQyX01PREVfQ1VSUkVOVF9EQVRBJzogT0JEMl9NT0RFX0NVUlJFTlRfREFUQSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT0JEMl9NT0RFX1JFQURfUEFSQU0nOiBPQkQyX01PREVfUkVBRF9QQVJBTSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT0JEMl9NT0RFX1JFU1BPTlNFX1BBUkFNJzogT0JEMl9NT0RFX1JFU1BPTlNFX1BBUkFNLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBBbHNvIGFkZCBhIG1vY2sgdmVoaWNsZSBtb2R1bGUgZm9yICdmcm9tIHZlaGljbGUgaW1wb3J0IC4uLicgc3ludGF4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcyBWZWhpY2xlTW9kdWxlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBST1RPQ09MX09CRDIgPSBQUk9UT0NPTF9PQkQyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJPVE9DT0xfQ0FOT1BFTl9TRE8gPSBQUk9UT0NPTF9DQU5PUEVOX1NETwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBST1RPQ09MX0NBTl9SQVcgPSBQUk9UT0NPTF9DQU5fUkFXCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJPVE9DT0xfRkFLRSA9IFBST1RPQ09MX0ZBS0UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPQkQyX01PREVfQ1VSUkVOVF9EQVRBID0gT0JEMl9NT0RFX0NVUlJFTlRfREFUQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9CRDJfTU9ERV9SRUFEX1BBUkFNID0gT0JEMl9NT0RFX1JFQURfUEFSQU0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPQkQyX01PREVfUkVTUE9OU0VfUEFSQU0gPSBPQkQyX01PREVfUkVTUE9OU0VfUEFSQU0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVfZ2xvYmFsc1sndmVoaWNsZSddID0gVmVoaWNsZU1vZHVsZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjKHZlaGljbGVfY29kZSwgdmVoaWNsZV9nbG9iYWxzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gdmVoaWNsZV9nbG9iYWxzLmdldCgnVkVISUNMRV9DT05GSUcnLCBOb25lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29uZmlnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTWljcm9QeXRob24gZG9lc24ndCBoYXZlIC50aXRsZSgpLCBzbyB1c2UgY29uZmlnIG5hbWUgb3IgZm9ybWF0IG1hbnVhbGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZV9uYW1lID0gY29uZmlnLmdldCgnbmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHZlaGljbGVfbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTaW1wbGUgdGl0bGUgY2FzZTogY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgZWFjaCB3b3JkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gdmVoaWNsZV9pZC5yZXBsYWNlKCdfJywgJyAnKS5zcGxpdCgnICcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlX3BhcnRzID0gW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHAgaW4gcGFydHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4ocCkgPiAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlX3BhcnRzLmFwcGVuZChwWzBdLnVwcGVyKCkgKyBwWzE6XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVfcGFydHMuYXBwZW5kKHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVfbmFtZSA9ICcgJy5qb2luKHRpdGxlX3BhcnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVfbGlzdFt2ZWhpY2xlX2lkXSA9IHZlaGljbGVfbmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIExvZyBlcnJvciBidXQgY29udGludWUgd2l0aCBvdGhlciB2ZWhpY2xlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBTZW5kIGVycm9yIHZpYSBNMk1fTE9HIChvcGNvZGUgMHgwMykgaWYgd2VicmVwbCBpcyBhdmFpbGFibGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnQgd2VicmVwbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYnJlcGwuc2VuZF9tMm0oZiJbT1ZNU10gRXJyb3IgbG9hZGluZyB2ZWhpY2xlIHt2ZWhpY2xlX2lkfToge2V9IiwgMHgwMykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzICAjIFNpbGVudCBpZiB3ZWJyZXBsIG5vdCBhdmFpbGFibGUKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIEZpbGUgZG9lc24ndCBleGlzdCwgc2tpcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgIyBOb3QgYSBkaXJlY3Rvcnkgb3IgZG9lc24ndCBleGlzdCwgc2tpcAogICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgIyBWZWhpY2xlcyBkaXJlY3RvcnkgZG9lc24ndCBleGlzdCwgcmV0dXJuIGVtcHR5IGxpc3QKICAgICAgICAgICAgcGFzcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgTG9nIGVycm9yIGluc3RlYWQgb2Ygc2lsZW50bHkgZmFpbGluZwogICAgICAgICMgU2VuZCBlcnJvciB2aWEgTTJNX0xPRyAob3Bjb2RlIDB4MDMpIGlmIHdlYnJlcGwgaXMgYXZhaWxhYmxlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpbXBvcnQgd2VicmVwbAogICAgICAgICAgICB3ZWJyZXBsLnNlbmRfbTJtKGYiW09WTVNdIEVycm9yIGxpc3RpbmcgdmVoaWNsZXM6IHtlfSIsIDB4MDMpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzICAjIFNpbGVudCBpZiB3ZWJyZXBsIG5vdCBhdmFpbGFibGUKICAgIAogICAgcmV0dXJuIHZlaGljbGVfbGlzdAo=",
  "/lib/ext/ovms/base64.py": "IyEgL3Vzci9iaW4vZW52IHB5dGhvbjMKCiIiIlJGQyAzNTQ4OiBCYXNlMTYsIEJhc2UzMiwgQmFzZTY0IERhdGEgRW5jb2RpbmdzIiIiCgojIE1vZGlmaWVkIDA0LU9jdC0xOTk1IGJ5IEphY2sgSmFuc2VuIHRvIHVzZSBiaW5hc2NpaSBtb2R1bGUKIyBNb2RpZmllZCAzMC1EZWMtMjAwMyBieSBCYXJyeSBXYXJzYXcgdG8gYWRkIGZ1bGwgUkZDIDM1NDggc3VwcG9ydAojIE1vZGlmaWVkIDIyLU1heS0yMDA3IGJ5IEd1aWRvIHZhbiBSb3NzdW0gdG8gdXNlIGJ5dGVzIGV2ZXJ5d2hlcmUKCmltcG9ydCByZQppbXBvcnQgc3RydWN0CmltcG9ydCBiaW5hc2NpaQoKCl9fYWxsX18gPSBbCiAgICAjIExlZ2FjeSBpbnRlcmZhY2UgZXhwb3J0cyB0cmFkaXRpb25hbCBSRkMgMTUyMSBCYXNlNjQgZW5jb2RpbmdzCiAgICAiZW5jb2RlIiwKICAgICJkZWNvZGUiLAogICAgImVuY29kZWJ5dGVzIiwKICAgICJkZWNvZGVieXRlcyIsCiAgICAjIEdlbmVyYWxpemVkIGludGVyZmFjZSBmb3Igb3RoZXIgZW5jb2RpbmdzCiAgICAiYjY0ZW5jb2RlIiwKICAgICJiNjRkZWNvZGUiLAogICAgImIzMmVuY29kZSIsCiAgICAiYjMyZGVjb2RlIiwKICAgICJiMTZlbmNvZGUiLAogICAgImIxNmRlY29kZSIsCiAgICAjIFN0YW5kYXJkIEJhc2U2NCBlbmNvZGluZwogICAgInN0YW5kYXJkX2I2NGVuY29kZSIsCiAgICAic3RhbmRhcmRfYjY0ZGVjb2RlIiwKICAgICMgU29tZSBjb21tb24gQmFzZTY0IGFsdGVybmF0aXZlcy4gIEFzIHJlZmVyZW5jZWQgYnkgUkZDIDM0NTgsIHNlZSB0aHJlYWQKICAgICMgc3RhcnRpbmcgYXQ6CiAgICAjCiAgICAjIGh0dHA6Ly96Z3Aub3JnL3BpcGVybWFpbC9wMnAtaGFja2Vycy8yMDAxLVNlcHRlbWJlci8wMDAzMTYuaHRtbAogICAgInVybHNhZmVfYjY0ZW5jb2RlIiwKICAgICJ1cmxzYWZlX2I2NGRlY29kZSIsCl0KCgpieXRlc190eXBlcyA9IChieXRlcywgYnl0ZWFycmF5KSAgIyBUeXBlcyBhY2NlcHRhYmxlIGFzIGJpbmFyeSBkYXRhCgoKZGVmIF9ieXRlc19mcm9tX2RlY29kZV9kYXRhKHMpOgogICAgaWYgaXNpbnN0YW5jZShzLCBzdHIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHMuZW5jb2RlKCJhc2NpaSIpCiAgICAgICAgIyAgICAgICAgZXhjZXB0IFVuaWNvZGVFbmNvZGVFcnJvcjoKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInN0cmluZyBhcmd1bWVudCBzaG91bGQgY29udGFpbiBvbmx5IEFTQ0lJIGNoYXJhY3RlcnMiKQogICAgZWxpZiBpc2luc3RhbmNlKHMsIGJ5dGVzX3R5cGVzKToKICAgICAgICByZXR1cm4gcwogICAgZWxzZToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImFyZ3VtZW50IHNob3VsZCBiZSBieXRlcyBvciBBU0NJSSBzdHJpbmcsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKCgpkZWYgX21ha2V0cmFucyhmLCB0KToKICAgICIiIlJlLWltcGxlbWVudCBieXRlcy5tYWtldHJhbnMoKSBhcyB0aGVyZSBpcyBubyBzdWNoIGZ1bmN0aW9uIGluIG1pY3JvcHl0aG9uIiIiCiAgICBpZiBsZW4oZikgIT0gbGVuKHQpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIm1ha2V0cmFucyBhcmd1bWVudHMgbXVzdCBoYXZlIHNhbWUgbGVuZ3RoIikKICAgIHRyYW5zbGF0aW9uX3RhYmxlID0gZGljdCh6aXAoZiwgdCkpCiAgICByZXR1cm4gdHJhbnNsYXRpb25fdGFibGUKCgpkZWYgX3RyYW5zbGF0ZShpbnB1dF9ieXRlcywgdHJhbnNfdGFibGUpOgogICAgIiIiUmUtaW1wbGVtZW50IGJ5dGVzLnRyYW5zbGF0ZSgpIGFzIHRoZXJlIGlzIG5vIHN1Y2ggZnVuY3Rpb24gaW4gbWljcm9weXRob24iIiIKICAgIHJlc3VsdCA9IGJ5dGVhcnJheSgpCgogICAgZm9yIGJ5dGUgaW4gaW5wdXRfYnl0ZXM6CiAgICAgICAgdHJhbnNsYXRlZF9ieXRlID0gdHJhbnNfdGFibGUuZ2V0KGJ5dGUsIGJ5dGUpCiAgICAgICAgcmVzdWx0LmFwcGVuZCh0cmFuc2xhdGVkX2J5dGUpCgogICAgcmV0dXJuIGJ5dGVzKHJlc3VsdCkKCgojIEJhc2U2NCBlbmNvZGluZy9kZWNvZGluZyB1c2VzIGJpbmFzY2lpCgoKZGVmIGI2NGVuY29kZShzLCBhbHRjaGFycz1Ob25lKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2U2NC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBPcHRpb25hbCBhbHRjaGFycyBtdXN0IGJlIGEgYnl0ZQogICAgc3RyaW5nIG9mIGxlbmd0aCAyIHdoaWNoIHNwZWNpZmllcyBhbiBhbHRlcm5hdGl2ZSBhbHBoYWJldCBmb3IgdGhlCiAgICAnKycgYW5kICcvJyBjaGFyYWN0ZXJzLiAgVGhpcyBhbGxvd3MgYW4gYXBwbGljYXRpb24gdG8KICAgIGUuZy4gZ2VuZXJhdGUgdXJsIG9yIGZpbGVzeXN0ZW0gc2FmZSBCYXNlNjQgc3RyaW5ncy4KCiAgICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgICMgU3RyaXAgb2ZmIHRoZSB0cmFpbGluZyBuZXdsaW5lCiAgICBlbmNvZGVkID0gYmluYXNjaWkuYjJhX2Jhc2U2NChzKVs6LTFdCiAgICBpZiBhbHRjaGFycyBpcyBub3QgTm9uZToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShhbHRjaGFycywgYnl0ZXNfdHlwZXMpOgogICAgICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4cGVjdGVkIGJ5dGVzLCBub3QgJXMiICUgYWx0Y2hhcnMuX19jbGFzc19fLl9fbmFtZV9fKQogICAgICAgIGFzc2VydCBsZW4oYWx0Y2hhcnMpID09IDIsIHJlcHIoYWx0Y2hhcnMpCiAgICAgICAgZW5jb2RlZCA9IF90cmFuc2xhdGUoZW5jb2RlZCwgX21ha2V0cmFucyhiIisvIiwgYWx0Y2hhcnMpKQogICAgcmV0dXJuIGVuY29kZWQKCgpkZWYgYjY0ZGVjb2RlKHMsIGFsdGNoYXJzPU5vbmUsIHZhbGlkYXRlPUZhbHNlKToKICAgICIiIkRlY29kZSBhIEJhc2U2NCBlbmNvZGVkIGJ5dGUgc3RyaW5nLgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIE9wdGlvbmFsIGFsdGNoYXJzIG11c3QgYmUgYQogICAgc3RyaW5nIG9mIGxlbmd0aCAyIHdoaWNoIHNwZWNpZmllcyB0aGUgYWx0ZXJuYXRpdmUgYWxwaGFiZXQgdXNlZAogICAgaW5zdGVhZCBvZiB0aGUgJysnIGFuZCAnLycgY2hhcmFjdGVycy4KCiAgICBUaGUgZGVjb2RlZCBzdHJpbmcgaXMgcmV0dXJuZWQuICBBIGJpbmFzY2lpLkVycm9yIGlzIHJhaXNlZCBpZiBzIGlzCiAgICBpbmNvcnJlY3RseSBwYWRkZWQuCgogICAgSWYgdmFsaWRhdGUgaXMgRmFsc2UgKHRoZSBkZWZhdWx0KSwgbm9uLWJhc2U2NC1hbHBoYWJldCBjaGFyYWN0ZXJzIGFyZQogICAgZGlzY2FyZGVkIHByaW9yIHRvIHRoZSBwYWRkaW5nIGNoZWNrLiAgSWYgdmFsaWRhdGUgaXMgVHJ1ZSwKICAgIG5vbi1iYXNlNjQtYWxwaGFiZXQgY2hhcmFjdGVycyBpbiB0aGUgaW5wdXQgcmVzdWx0IGluIGEgYmluYXNjaWkuRXJyb3IuCiAgICAiIiIKICAgIHMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKQogICAgaWYgYWx0Y2hhcnMgaXMgbm90IE5vbmU6CiAgICAgICAgYWx0Y2hhcnMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShhbHRjaGFycykKICAgICAgICBhc3NlcnQgbGVuKGFsdGNoYXJzKSA9PSAyLCByZXByKGFsdGNoYXJzKQogICAgICAgIHMgPSBfdHJhbnNsYXRlKHMsIF9tYWtldHJhbnMoYWx0Y2hhcnMsIGIiKy8iKSkKICAgIGlmIHZhbGlkYXRlIGFuZCBub3QgcmUubWF0Y2goYiJeW0EtWmEtejAtOSsvXSo9KiQiLCBzKToKICAgICAgICByYWlzZSBiaW5hc2NpaS5FcnJvcigiTm9uLWJhc2U2NCBkaWdpdCBmb3VuZCIpCiAgICByZXR1cm4gYmluYXNjaWkuYTJiX2Jhc2U2NChzKQoKCmRlZiBzdGFuZGFyZF9iNjRlbmNvZGUocyk6CiAgICAiIiJFbmNvZGUgYSBieXRlIHN0cmluZyB1c2luZyB0aGUgc3RhbmRhcmQgQmFzZTY0IGFscGhhYmV0LgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGVuY29kZS4gIFRoZSBlbmNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLgogICAgIiIiCiAgICByZXR1cm4gYjY0ZW5jb2RlKHMpCgoKZGVmIHN0YW5kYXJkX2I2NGRlY29kZShzKToKICAgICIiIkRlY29kZSBhIGJ5dGUgc3RyaW5nIGVuY29kZWQgd2l0aCB0aGUgc3RhbmRhcmQgQmFzZTY0IGFscGhhYmV0LgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzCiAgICByZXR1cm5lZC4gIGJpbmFzY2lpLkVycm9yIGlzIHJhaXNlZCBpZiB0aGUgaW5wdXQgaXMgaW5jb3JyZWN0bHkKICAgIHBhZGRlZCBvciBpZiB0aGVyZSBhcmUgbm9uLWFscGhhYmV0IGNoYXJhY3RlcnMgcHJlc2VudCBpbiB0aGUKICAgIGlucHV0LgogICAgIiIiCiAgICByZXR1cm4gYjY0ZGVjb2RlKHMpCgoKIyBfdXJsc2FmZV9lbmNvZGVfdHJhbnNsYXRpb24gPSBfbWFrZXRyYW5zKGInKy8nLCBiJy1fJykKIyBfdXJsc2FmZV9kZWNvZGVfdHJhbnNsYXRpb24gPSBfbWFrZXRyYW5zKGInLV8nLCBiJysvJykKCgpkZWYgdXJsc2FmZV9iNjRlbmNvZGUocyk6CiAgICAiIiJFbmNvZGUgYSBieXRlIHN0cmluZyB1c2luZyBhIHVybC1zYWZlIEJhc2U2NCBhbHBoYWJldC4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcwogICAgcmV0dXJuZWQuICBUaGUgYWxwaGFiZXQgdXNlcyAnLScgaW5zdGVhZCBvZiAnKycgYW5kICdfJyBpbnN0ZWFkIG9mCiAgICAnLycuCiAgICAiIiIKICAgICMgICAgcmV0dXJuIGI2NGVuY29kZShzKS50cmFuc2xhdGUoX3VybHNhZmVfZW5jb2RlX3RyYW5zbGF0aW9uKQogICAgcmV0dXJuIGI2NGVuY29kZShzLCBiIi1fIikucnN0cmlwKGIiXG4iKQoKCmRlZiB1cmxzYWZlX2I2NGRlY29kZShzKToKICAgICIiIkRlY29kZSBhIGJ5dGUgc3RyaW5nIGVuY29kZWQgd2l0aCB0aGUgc3RhbmRhcmQgQmFzZTY0IGFscGhhYmV0LgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzCiAgICByZXR1cm5lZC4gIGJpbmFzY2lpLkVycm9yIGlzIHJhaXNlZCBpZiB0aGUgaW5wdXQgaXMgaW5jb3JyZWN0bHkKICAgIHBhZGRlZCBvciBpZiB0aGVyZSBhcmUgbm9uLWFscGhhYmV0IGNoYXJhY3RlcnMgcHJlc2VudCBpbiB0aGUKICAgIGlucHV0LgoKICAgIFRoZSBhbHBoYWJldCB1c2VzICctJyBpbnN0ZWFkIG9mICcrJyBhbmQgJ18nIGluc3RlYWQgb2YgJy8nLgogICAgIiIiCiAgICAjICAgIHMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKQogICAgIyAgICBzID0gcy50cmFuc2xhdGUoX3VybHNhZmVfZGVjb2RlX3RyYW5zbGF0aW9uKQogICAgIyAgICByZXR1cm4gYjY0ZGVjb2RlKHMpCiAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCkKCgojIEJhc2UzMiBlbmNvZGluZy9kZWNvZGluZyBtdXN0IGJlIGRvbmUgaW4gUHl0aG9uCl9iMzJhbHBoYWJldCA9IHsKICAgIDA6IGIiQSIsCiAgICA5OiBiIkoiLAogICAgMTg6IGIiUyIsCiAgICAyNzogYiIzIiwKICAgIDE6IGIiQiIsCiAgICAxMDogYiJLIiwKICAgIDE5OiBiIlQiLAogICAgMjg6IGIiNCIsCiAgICAyOiBiIkMiLAogICAgMTE6IGIiTCIsCiAgICAyMDogYiJVIiwKICAgIDI5OiBiIjUiLAogICAgMzogYiJEIiwKICAgIDEyOiBiIk0iLAogICAgMjE6IGIiViIsCiAgICAzMDogYiI2IiwKICAgIDQ6IGIiRSIsCiAgICAxMzogYiJOIiwKICAgIDIyOiBiIlciLAogICAgMzE6IGIiNyIsCiAgICA1OiBiIkYiLAogICAgMTQ6IGIiTyIsCiAgICAyMzogYiJYIiwKICAgIDY6IGIiRyIsCiAgICAxNTogYiJQIiwKICAgIDI0OiBiIlkiLAogICAgNzogYiJIIiwKICAgIDE2OiBiIlEiLAogICAgMjU6IGIiWiIsCiAgICA4OiBiIkkiLAogICAgMTc6IGIiUiIsCiAgICAyNjogYiIyIiwKfQoKX2IzMnRhYiA9IFt2WzBdIGZvciBrLCB2IGluIHNvcnRlZChfYjMyYWxwaGFiZXQuaXRlbXMoKSldCl9iMzJyZXYgPSBkaWN0KFsodlswXSwgaykgZm9yIGssIHYgaW4gX2IzMmFscGhhYmV0Lml0ZW1zKCldKQoKCmRlZiBiMzJlbmNvZGUocyk6CiAgICAiIiJFbmNvZGUgYSBieXRlIHN0cmluZyB1c2luZyBCYXNlMzIuCgogICAgcyBpcyB0aGUgYnl0ZSBzdHJpbmcgdG8gZW5jb2RlLiAgVGhlIGVuY29kZWQgYnl0ZSBzdHJpbmcgaXMgcmV0dXJuZWQuCiAgICAiIiIKICAgIGlmIG5vdCBpc2luc3RhbmNlKHMsIGJ5dGVzX3R5cGVzKToKICAgICAgICByYWlzZSBUeXBlRXJyb3IoImV4cGVjdGVkIGJ5dGVzLCBub3QgJXMiICUgcy5fX2NsYXNzX18uX19uYW1lX18pCiAgICBxdWFudGEsIGxlZnRvdmVyID0gZGl2bW9kKGxlbihzKSwgNSkKICAgICMgUGFkIHRoZSBsYXN0IHF1YW50dW0gd2l0aCB6ZXJvIGJpdHMgaWYgbmVjZXNzYXJ5CiAgICBpZiBsZWZ0b3ZlcjoKICAgICAgICBzID0gcyArIGJ5dGVzKDUgLSBsZWZ0b3ZlcikgICMgRG9uJ3QgdXNlICs9ICEKICAgICAgICBxdWFudGEgKz0gMQogICAgZW5jb2RlZCA9IGJ5dGVhcnJheSgpCiAgICBmb3IgaSBpbiByYW5nZShxdWFudGEpOgogICAgICAgICMgYzEgYW5kIGMyIGFyZSAxNiBiaXRzIHdpZGUsIGMzIGlzIDggYml0cyB3aWRlLiAgVGhlIGludGVudCBvZiB0aGlzCiAgICAgICAgIyBjb2RlIGlzIHRvIHByb2Nlc3MgdGhlIDQwIGJpdHMgaW4gdW5pdHMgb2YgNSBiaXRzLiAgU28gd2UgdGFrZSB0aGUgMQogICAgICAgICMgbGVmdG92ZXIgYml0IG9mIGMxIGFuZCB0YWNrIGl0IG9udG8gYzIuICBUaGVuIHdlIHRha2UgdGhlIDIgbGVmdG92ZXIKICAgICAgICAjIGJpdHMgb2YgYzIgYW5kIHRhY2sgdGhlbSBvbnRvIGMzLiAgVGhlIHNoaWZ0cyBhbmQgbWFza3MgYXJlIGludGVuZGVkCiAgICAgICAgIyB0byBnaXZlIHVzIHZhbHVlcyBvZiBleGFjdGx5IDUgYml0cyBpbiB3aWR0aC4KICAgICAgICBjMSwgYzIsIGMzID0gc3RydWN0LnVucGFjaygiIUhIQiIsIHNbaSAqIDUgOiAoaSArIDEpICogNV0pCiAgICAgICAgYzIgKz0gKGMxICYgMSkgPDwgMTYgICMgMTcgYml0cyB3aWRlCiAgICAgICAgYzMgKz0gKGMyICYgMykgPDwgOCAgIyAxMCBiaXRzIHdpZGUKICAgICAgICBlbmNvZGVkICs9IGJ5dGVzKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICBfYjMydGFiW2MxID4+IDExXSwgICMgYml0cyAxIC0gNQogICAgICAgICAgICAgICAgX2IzMnRhYlsoYzEgPj4gNikgJiAweDFGXSwgICMgYml0cyA2IC0gMTAKICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMxID4+IDEpICYgMHgxRl0sICAjIGJpdHMgMTEgLSAxNQogICAgICAgICAgICAgICAgX2IzMnRhYltjMiA+PiAxMl0sICAjIGJpdHMgMTYgLSAyMCAoMSAtIDUpCiAgICAgICAgICAgICAgICBfYjMydGFiWyhjMiA+PiA3KSAmIDB4MUZdLCAgIyBiaXRzIDIxIC0gMjUgKDYgLSAxMCkKICAgICAgICAgICAgICAgIF9iMzJ0YWJbKGMyID4+IDIpICYgMHgxRl0sICAjIGJpdHMgMjYgLSAzMCAoMTEgLSAxNSkKICAgICAgICAgICAgICAgIF9iMzJ0YWJbYzMgPj4gNV0sICAjIGJpdHMgMzEgLSAzNSAoMSAtIDUpCiAgICAgICAgICAgICAgICBfYjMydGFiW2MzICYgMHgxRl0sICAjIGJpdHMgMzYgLSA0MCAoMSAtIDUpCiAgICAgICAgICAgIF0KICAgICAgICApCiAgICAjIEFkanVzdCBmb3IgYW55IGxlZnRvdmVyIHBhcnRpYWwgcXVhbnRhCiAgICBpZiBsZWZ0b3ZlciA9PSAxOgogICAgICAgIGVuY29kZWQgPSBlbmNvZGVkWzotNl0gKyBiIj09PT09PSIKICAgIGVsaWYgbGVmdG92ZXIgPT0gMjoKICAgICAgICBlbmNvZGVkID0gZW5jb2RlZFs6LTRdICsgYiI9PT09IgogICAgZWxpZiBsZWZ0b3ZlciA9PSAzOgogICAgICAgIGVuY29kZWQgPSBlbmNvZGVkWzotM10gKyBiIj09PSIKICAgIGVsaWYgbGVmdG92ZXIgPT0gNDoKICAgICAgICBlbmNvZGVkID0gZW5jb2RlZFs6LTFdICsgYiI9IgogICAgcmV0dXJuIGJ5dGVzKGVuY29kZWQpCgoKZGVmIGIzMmRlY29kZShzLCBjYXNlZm9sZD1GYWxzZSwgbWFwMDE9Tm9uZSk6CiAgICAiIiJEZWNvZGUgYSBCYXNlMzIgZW5jb2RlZCBieXRlIHN0cmluZy4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBkZWNvZGUuICBPcHRpb25hbCBjYXNlZm9sZCBpcyBhIGZsYWcKICAgIHNwZWNpZnlpbmcgd2hldGhlciBhIGxvd2VyY2FzZSBhbHBoYWJldCBpcyBhY2NlcHRhYmxlIGFzIGlucHV0LgogICAgRm9yIHNlY3VyaXR5IHB1cnBvc2VzLCB0aGUgZGVmYXVsdCBpcyBGYWxzZS4KCiAgICBSRkMgMzU0OCBhbGxvd3MgZm9yIG9wdGlvbmFsIG1hcHBpbmcgb2YgdGhlIGRpZ2l0IDAgKHplcm8pIHRvIHRoZQogICAgbGV0dGVyIE8gKG9oKSwgYW5kIGZvciBvcHRpb25hbCBtYXBwaW5nIG9mIHRoZSBkaWdpdCAxIChvbmUpIHRvCiAgICBlaXRoZXIgdGhlIGxldHRlciBJIChleWUpIG9yIGxldHRlciBMIChlbCkuICBUaGUgb3B0aW9uYWwgYXJndW1lbnQKICAgIG1hcDAxIHdoZW4gbm90IE5vbmUsIHNwZWNpZmllcyB3aGljaCBsZXR0ZXIgdGhlIGRpZ2l0IDEgc2hvdWxkIGJlCiAgICBtYXBwZWQgdG8gKHdoZW4gbWFwMDEgaXMgbm90IE5vbmUsIHRoZSBkaWdpdCAwIGlzIGFsd2F5cyBtYXBwZWQgdG8KICAgIHRoZSBsZXR0ZXIgTykuICBGb3Igc2VjdXJpdHkgcHVycG9zZXMgdGhlIGRlZmF1bHQgaXMgTm9uZSwgc28gdGhhdAogICAgMCBhbmQgMSBhcmUgbm90IGFsbG93ZWQgaW4gdGhlIGlucHV0LgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICB0aGUgaW5wdXQgaXMgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQKICAgIGNoYXJhY3RlcnMgcHJlc2VudCBpbiB0aGUgaW5wdXQuCiAgICAiIiIKICAgIHMgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShzKQogICAgcXVhbnRhLCBsZWZ0b3ZlciA9IGRpdm1vZChsZW4ocyksIDgpCiAgICBpZiBsZWZ0b3ZlcjoKICAgICAgICByYWlzZSBiaW5hc2NpaS5FcnJvcigiSW5jb3JyZWN0IHBhZGRpbmciKQogICAgIyBIYW5kbGUgc2VjdGlvbiAyLjQgemVybyBhbmQgb25lIG1hcHBpbmcuICBUaGUgZmxhZyBtYXAwMSB3aWxsIGJlIGVpdGhlcgogICAgIyBGYWxzZSwgb3IgdGhlIGNoYXJhY3RlciB0byBtYXAgdGhlIGRpZ2l0IDEgKG9uZSkgdG8uICBJdCBzaG91bGQgYmUKICAgICMgZWl0aGVyIEwgKGVsKSBvciBJIChleWUpLgogICAgaWYgbWFwMDEgaXMgbm90IE5vbmU6CiAgICAgICAgbWFwMDEgPSBfYnl0ZXNfZnJvbV9kZWNvZGVfZGF0YShtYXAwMSkKICAgICAgICBhc3NlcnQgbGVuKG1hcDAxKSA9PSAxLCByZXByKG1hcDAxKQogICAgICAgIHMgPSBfdHJhbnNsYXRlKHMsIF9tYWtldHJhbnMoYiIwMSIsIGIiTyIgKyBtYXAwMSkpCiAgICBpZiBjYXNlZm9sZDoKICAgICAgICBzID0gcy51cHBlcigpCiAgICAjIFN0cmlwIG9mZiBwYWQgY2hhcmFjdGVycyBmcm9tIHRoZSByaWdodC4gIFdlIG5lZWQgdG8gY291bnQgdGhlIHBhZAogICAgIyBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhpcyB3aWxsIHRlbGwgdXMgaG93IG1hbnkgbnVsbCBieXRlcyB0byByZW1vdmUgZnJvbQogICAgIyB0aGUgZW5kIG9mIHRoZSBkZWNvZGVkIHN0cmluZy4KICAgIHBhZGNoYXJzID0gcy5maW5kKGIiPSIpCiAgICBpZiBwYWRjaGFycyA+IDA6CiAgICAgICAgcGFkY2hhcnMgPSBsZW4ocykgLSBwYWRjaGFycwogICAgICAgIHMgPSBzWzotcGFkY2hhcnNdCiAgICBlbHNlOgogICAgICAgIHBhZGNoYXJzID0gMAoKICAgICMgTm93IGRlY29kZSB0aGUgZnVsbCBxdWFudGEKICAgIHBhcnRzID0gW10KICAgIGFjYyA9IDAKICAgIHNoaWZ0ID0gMzUKICAgIGZvciBjIGluIHM6CiAgICAgICAgdmFsID0gX2IzMnJldi5nZXQoYykKICAgICAgICBpZiB2YWwgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgYmluYXNjaWkuRXJyb3IoIk5vbi1iYXNlMzIgZGlnaXQgZm91bmQiKQogICAgICAgIGFjYyArPSBfYjMycmV2W2NdIDw8IHNoaWZ0CiAgICAgICAgc2hpZnQgLT0gNQogICAgICAgIGlmIHNoaWZ0IDwgMDoKICAgICAgICAgICAgcGFydHMuYXBwZW5kKGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygiJTAxMHgiICUgYWNjLCAiYXNjaWkiKSkpCiAgICAgICAgICAgIGFjYyA9IDAKICAgICAgICAgICAgc2hpZnQgPSAzNQogICAgIyBQcm9jZXNzIHRoZSBsYXN0LCBwYXJ0aWFsIHF1YW50YQogICAgbGFzdCA9IGJpbmFzY2lpLnVuaGV4bGlmeShieXRlcygiJTAxMHgiICUgYWNjLCAiYXNjaWkiKSkKICAgIGlmIHBhZGNoYXJzID09IDA6CiAgICAgICAgbGFzdCA9IGIiIiAgIyBObyBjaGFyYWN0ZXJzCiAgICBlbGlmIHBhZGNoYXJzID09IDE6CiAgICAgICAgbGFzdCA9IGxhc3RbOi0xXQogICAgZWxpZiBwYWRjaGFycyA9PSAzOgogICAgICAgIGxhc3QgPSBsYXN0WzotMl0KICAgIGVsaWYgcGFkY2hhcnMgPT0gNDoKICAgICAgICBsYXN0ID0gbGFzdFs6LTNdCiAgICBlbGlmIHBhZGNoYXJzID09IDY6CiAgICAgICAgbGFzdCA9IGxhc3RbOi00XQogICAgZWxzZToKICAgICAgICByYWlzZSBiaW5hc2NpaS5FcnJvcigiSW5jb3JyZWN0IHBhZGRpbmciKQogICAgcGFydHMuYXBwZW5kKGxhc3QpCiAgICByZXR1cm4gYiIiLmpvaW4ocGFydHMpCgoKIyBSRkMgMzU0OCwgQmFzZSAxNiBBbHBoYWJldCBzcGVjaWZpZXMgdXBwZXJjYXNlLCBidXQgaGV4bGlmeSgpIHJldHVybnMKIyBsb3dlcmNhc2UuICBUaGUgUkZDIGFsc28gcmVjb21tZW5kcyBhZ2FpbnN0IGFjY2VwdGluZyBpbnB1dCBjYXNlCiMgaW5zZW5zaXRpdmVseS4KZGVmIGIxNmVuY29kZShzKToKICAgICIiIkVuY29kZSBhIGJ5dGUgc3RyaW5nIHVzaW5nIEJhc2UxNi4KCiAgICBzIGlzIHRoZSBieXRlIHN0cmluZyB0byBlbmNvZGUuICBUaGUgZW5jb2RlZCBieXRlIHN0cmluZyBpcyByZXR1cm5lZC4KICAgICIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5oZXhsaWZ5KHMpLnVwcGVyKCkKCgpkZWYgYjE2ZGVjb2RlKHMsIGNhc2Vmb2xkPUZhbHNlKToKICAgICIiIkRlY29kZSBhIEJhc2UxNiBlbmNvZGVkIGJ5dGUgc3RyaW5nLgoKICAgIHMgaXMgdGhlIGJ5dGUgc3RyaW5nIHRvIGRlY29kZS4gIE9wdGlvbmFsIGNhc2Vmb2xkIGlzIGEgZmxhZwogICAgc3BlY2lmeWluZyB3aGV0aGVyIGEgbG93ZXJjYXNlIGFscGhhYmV0IGlzIGFjY2VwdGFibGUgYXMgaW5wdXQuCiAgICBGb3Igc2VjdXJpdHkgcHVycG9zZXMsIHRoZSBkZWZhdWx0IGlzIEZhbHNlLgoKICAgIFRoZSBkZWNvZGVkIGJ5dGUgc3RyaW5nIGlzIHJldHVybmVkLiAgYmluYXNjaWkuRXJyb3IgaXMgcmFpc2VkIGlmCiAgICBzIHdlcmUgaW5jb3JyZWN0bHkgcGFkZGVkIG9yIGlmIHRoZXJlIGFyZSBub24tYWxwaGFiZXQgY2hhcmFjdGVycwogICAgcHJlc2VudCBpbiB0aGUgc3RyaW5nLgogICAgIiIiCiAgICBzID0gX2J5dGVzX2Zyb21fZGVjb2RlX2RhdGEocykKICAgIGlmIGNhc2Vmb2xkOgogICAgICAgIHMgPSBzLnVwcGVyKCkKICAgIGlmIHJlLnNlYXJjaChiIlteMC05QS1GXSIsIHMpOgogICAgICAgIHJhaXNlIGJpbmFzY2lpLkVycm9yKCJOb24tYmFzZTE2IGRpZ2l0IGZvdW5kIikKICAgIHJldHVybiBiaW5hc2NpaS51bmhleGxpZnkocykKCgojIExlZ2FjeSBpbnRlcmZhY2UuICBUaGlzIGNvZGUgY291bGQgYmUgY2xlYW5lZCB1cCBzaW5jZSBJIGRvbid0IGJlbGlldmUKIyBiaW5hc2NpaSBoYXMgYW55IGxpbmUgbGVuZ3RoIGxpbWl0YXRpb25zLiAgSXQganVzdCBkb2Vzbid0IHNlZW0gd29ydGggaXQKIyB0aG91Z2guICBUaGUgZmlsZXMgc2hvdWxkIGJlIG9wZW5lZCBpbiBiaW5hcnkgbW9kZS4KCk1BWExJTkVTSVpFID0gNzYgICMgRXhjbHVkaW5nIHRoZSBDUkxGCk1BWEJJTlNJWkUgPSAoTUFYTElORVNJWkUgLy8gNCkgKiAzCgoKZGVmIGVuY29kZShpbnB1dCwgb3V0cHV0KToKICAgICIiIkVuY29kZSBhIGZpbGU7IGlucHV0IGFuZCBvdXRwdXQgYXJlIGJpbmFyeSBmaWxlcy4iIiIKICAgIHdoaWxlIFRydWU6CiAgICAgICAgcyA9IGlucHV0LnJlYWQoTUFYQklOU0laRSkKICAgICAgICBpZiBub3QgczoKICAgICAgICAgICAgYnJlYWsKICAgICAgICB3aGlsZSBsZW4ocykgPCBNQVhCSU5TSVpFOgogICAgICAgICAgICBucyA9IGlucHV0LnJlYWQoTUFYQklOU0laRSAtIGxlbihzKSkKICAgICAgICAgICAgaWYgbm90IG5zOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgcyArPSBucwogICAgICAgIGxpbmUgPSBiaW5hc2NpaS5iMmFfYmFzZTY0KHMpCiAgICAgICAgb3V0cHV0LndyaXRlKGxpbmUpCgoKZGVmIGRlY29kZShpbnB1dCwgb3V0cHV0KToKICAgICIiIkRlY29kZSBhIGZpbGU7IGlucHV0IGFuZCBvdXRwdXQgYXJlIGJpbmFyeSBmaWxlcy4iIiIKICAgIHdoaWxlIFRydWU6CiAgICAgICAgbGluZSA9IGlucHV0LnJlYWRsaW5lKCkKICAgICAgICBpZiBub3QgbGluZToKICAgICAgICAgICAgYnJlYWsKICAgICAgICBzID0gYmluYXNjaWkuYTJiX2Jhc2U2NChsaW5lKQogICAgICAgIG91dHB1dC53cml0ZShzKQoKCmRlZiBlbmNvZGVieXRlcyhzKToKICAgICIiIkVuY29kZSBhIGJ5dGVzdHJpbmcgaW50byBhIGJ5dGVzdHJpbmcgY29udGFpbmluZyBtdWx0aXBsZSBsaW5lcwogICAgb2YgYmFzZS02NCBkYXRhLiIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHBpZWNlcyA9IFtdCiAgICBmb3IgaSBpbiByYW5nZSgwLCBsZW4ocyksIE1BWEJJTlNJWkUpOgogICAgICAgIGNodW5rID0gc1tpIDogaSArIE1BWEJJTlNJWkVdCiAgICAgICAgcGllY2VzLmFwcGVuZChiaW5hc2NpaS5iMmFfYmFzZTY0KGNodW5rKSkKICAgIHJldHVybiBiIiIuam9pbihwaWVjZXMpCgoKZGVmIGVuY29kZXN0cmluZyhzKToKICAgICIiIkxlZ2FjeSBhbGlhcyBvZiBlbmNvZGVieXRlcygpLiIiIgogICAgaW1wb3J0IHdhcm5pbmdzCgogICAgd2FybmluZ3Mud2FybigiZW5jb2Rlc3RyaW5nKCkgaXMgYSBkZXByZWNhdGVkIGFsaWFzLCB1c2UgZW5jb2RlYnl0ZXMoKSIsIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIHJldHVybiBlbmNvZGVieXRlcyhzKQoKCmRlZiBkZWNvZGVieXRlcyhzKToKICAgICIiIkRlY29kZSBhIGJ5dGVzdHJpbmcgb2YgYmFzZS02NCBkYXRhIGludG8gYSBieXRlc3RyaW5nLiIiIgogICAgaWYgbm90IGlzaW5zdGFuY2UocywgYnl0ZXNfdHlwZXMpOgogICAgICAgIHJhaXNlIFR5cGVFcnJvcigiZXhwZWN0ZWQgYnl0ZXMsIG5vdCAlcyIgJSBzLl9fY2xhc3NfXy5fX25hbWVfXykKICAgIHJldHVybiBiaW5hc2NpaS5hMmJfYmFzZTY0KHMpCgoKZGVmIGRlY29kZXN0cmluZyhzKToKICAgICIiIkxlZ2FjeSBhbGlhcyBvZiBkZWNvZGVieXRlcygpLiIiIgogICAgaW1wb3J0IHdhcm5pbmdzCgogICAgd2FybmluZ3Mud2FybigiZGVjb2Rlc3RyaW5nKCkgaXMgYSBkZXByZWNhdGVkIGFsaWFzLCB1c2UgZGVjb2RlYnl0ZXMoKSIsIERlcHJlY2F0aW9uV2FybmluZywgMikKICAgIHJldHVybiBkZWNvZGVieXRlcyhzKQoKCiMgVXNhYmxlIGFzIGEgc2NyaXB0Li4uCmRlZiBtYWluKCk6CiAgICAiIiJTbWFsbCBtYWluIHByb2dyYW0iIiIKICAgIGltcG9ydCBzeXMsIGdldG9wdAoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChzeXMuYXJndlsxOl0sICJkZXV0IikKICAgIGV4Y2VwdCBnZXRvcHQuZXJyb3IgYXMgbXNnOgogICAgICAgIHN5cy5zdGRvdXQgPSBzeXMuc3RkZXJyCiAgICAgICAgcHJpbnQobXNnKQogICAgICAgIHByaW50KAogICAgICAgICAgICAiIiJ1c2FnZTogJXMgWy1kfC1lfC11fC10XSBbZmlsZXwtXQogICAgICAgIC1kLCAtdTogZGVjb2RlCiAgICAgICAgLWU6IGVuY29kZSAoZGVmYXVsdCkKICAgICAgICAtdDogZW5jb2RlIGFuZCBkZWNvZGUgc3RyaW5nICdBbGFkZGluOm9wZW4gc2VzYW1lJyIiIgogICAgICAgICAgICAlIHN5cy5hcmd2WzBdCiAgICAgICAgKQogICAgICAgIHN5cy5leGl0KDIpCiAgICBmdW5jID0gZW5jb2RlCiAgICBmb3IgbywgYSBpbiBvcHRzOgogICAgICAgIGlmIG8gPT0gIi1lIjoKICAgICAgICAgICAgZnVuYyA9IGVuY29kZQogICAgICAgIGlmIG8gPT0gIi1kIjoKICAgICAgICAgICAgZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gIi11IjoKICAgICAgICAgICAgZnVuYyA9IGRlY29kZQogICAgICAgIGlmIG8gPT0gIi10IjoKICAgICAgICAgICAgdGVzdCgpCiAgICAgICAgICAgIHJldHVybgogICAgaWYgYXJncyBhbmQgYXJnc1swXSAhPSAiLSI6CiAgICAgICAgd2l0aCBvcGVuKGFyZ3NbMF0sICJyYiIpIGFzIGY6CiAgICAgICAgICAgIGZ1bmMoZiwgc3lzLnN0ZG91dC5idWZmZXIpCiAgICBlbHNlOgogICAgICAgIGZ1bmMoc3lzLnN0ZGluLmJ1ZmZlciwgc3lzLnN0ZG91dC5idWZmZXIpCgoKZGVmIHRlc3QoKToKICAgIHMwID0gYiJBbGFkZGluOm9wZW4gc2VzYW1lIgogICAgcHJpbnQocmVwcihzMCkpCiAgICBzMSA9IGVuY29kZWJ5dGVzKHMwKQogICAgcHJpbnQocmVwcihzMSkpCiAgICBzMiA9IGRlY29kZWJ5dGVzKHMxKQogICAgcHJpbnQocmVwcihzMikpCiAgICBhc3NlcnQgczAgPT0gczIKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigpCg==",
  "/lib/ext/ovms/binascii.py": "ZnJvbSB1YmluYXNjaWkgaW1wb3J0ICoKCmlmIG5vdCAidW5oZXhsaWZ5IiBpbiBnbG9iYWxzKCk6CgogICAgZGVmIHVuaGV4bGlmeShkYXRhKToKICAgICAgICBpZiBsZW4oZGF0YSkgJSAyICE9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk9kZC1sZW5ndGggc3RyaW5nIikKCiAgICAgICAgcmV0dXJuIGJ5dGVzKFtpbnQoZGF0YVtpIDogaSArIDJdLCAxNikgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGRhdGEpLCAyKV0pCgoKYjJhX2hleCA9IGhleGxpZnkKYTJiX2hleCA9IHVuaGV4bGlmeQoKIyBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KClBBRCA9ICI9IgoKdGFibGVfYTJiX2Jhc2U2NCA9IFsKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgNjIsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICA2MywKICAgIDUyLAogICAgNTMsCiAgICA1NCwKICAgIDU1LAogICAgNTYsCiAgICA1NywKICAgIDU4LAogICAgNTksCiAgICA2MCwKICAgIDYxLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLCAgIyBOb3RlIFBBRC0+LTEgaGVyZQogICAgLTEsCiAgICAwLAogICAgMSwKICAgIDIsCiAgICAzLAogICAgNCwKICAgIDUsCiAgICA2LAogICAgNywKICAgIDgsCiAgICA5LAogICAgMTAsCiAgICAxMSwKICAgIDEyLAogICAgMTMsCiAgICAxNCwKICAgIDE1LAogICAgMTYsCiAgICAxNywKICAgIDE4LAogICAgMTksCiAgICAyMCwKICAgIDIxLAogICAgMjIsCiAgICAyMywKICAgIDI0LAogICAgMjUsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAyNiwKICAgIDI3LAogICAgMjgsCiAgICAyOSwKICAgIDMwLAogICAgMzEsCiAgICAzMiwKICAgIDMzLAogICAgMzQsCiAgICAzNSwKICAgIDM2LAogICAgMzcsCiAgICAzOCwKICAgIDM5LAogICAgNDAsCiAgICA0MSwKICAgIDQyLAogICAgNDMsCiAgICA0NCwKICAgIDQ1LAogICAgNDYsCiAgICA0NywKICAgIDQ4LAogICAgNDksCiAgICA1MCwKICAgIDUxLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCiAgICAtMSwKICAgIC0xLAogICAgLTEsCl0KCgpkZWYgX3RyYW5zZm9ybShuKToKICAgIGlmIG4gPT0gLTE6CiAgICAgICAgcmV0dXJuICJceGZmIgogICAgZWxzZToKICAgICAgICByZXR1cm4gY2hyKG4pCgoKdGFibGVfYTJiX2Jhc2U2NCA9ICIiLmpvaW4obWFwKF90cmFuc2Zvcm0sIHRhYmxlX2EyYl9iYXNlNjQpKQphc3NlcnQgbGVuKHRhYmxlX2EyYl9iYXNlNjQpID09IDI1NgoKCmRlZiBhMmJfYmFzZTY0KGFzY2lpKToKICAgICJEZWNvZGUgYSBsaW5lIG9mIGJhc2U2NCBkYXRhLiIKCiAgICByZXMgPSBbXQogICAgcXVhZF9wb3MgPSAwCiAgICBsZWZ0Y2hhciA9IDAKICAgIGxlZnRiaXRzID0gMAogICAgbGFzdF9jaGFyX3dhc19hX3BhZCA9IEZhbHNlCgogICAgZm9yIGMgaW4gYXNjaWk6CiAgICAgICAgYyA9IGNocihjKQogICAgICAgIGlmIGMgPT0gUEFEOgogICAgICAgICAgICBpZiBxdWFkX3BvcyA+IDIgb3IgKHF1YWRfcG9zID09IDIgYW5kIGxhc3RfY2hhcl93YXNfYV9wYWQpOgogICAgICAgICAgICAgICAgYnJlYWsgICMgc3RvcCBvbiAneHh4PScgb3Igb24gJ3h4PT0nCiAgICAgICAgICAgIGxhc3RfY2hhcl93YXNfYV9wYWQgPSBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbiA9IG9yZCh0YWJsZV9hMmJfYmFzZTY0W29yZChjKV0pCiAgICAgICAgICAgIGlmIG4gPT0gMHhGRjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlICAjIGlnbm9yZSBzdHJhbmdlIGNoYXJhY3RlcnMKICAgICAgICAgICAgIwogICAgICAgICAgICAjIFNoaWZ0IGl0IGluIG9uIHRoZSBsb3cgZW5kLCBhbmQgc2VlIGlmIHRoZXJlJ3MKICAgICAgICAgICAgIyBhIGJ5dGUgcmVhZHkgZm9yIG91dHB1dC4KICAgICAgICAgICAgcXVhZF9wb3MgPSAocXVhZF9wb3MgKyAxKSAmIDMKICAgICAgICAgICAgbGVmdGNoYXIgPSAobGVmdGNoYXIgPDwgNikgfCBuCiAgICAgICAgICAgIGxlZnRiaXRzICs9IDYKICAgICAgICAgICAgIwogICAgICAgICAgICBpZiBsZWZ0Yml0cyA+PSA4OgogICAgICAgICAgICAgICAgbGVmdGJpdHMgLT0gOAogICAgICAgICAgICAgICAgcmVzLmFwcGVuZCgobGVmdGNoYXIgPj4gbGVmdGJpdHMpLnRvX2J5dGVzKDEsICJiaWciKSkKICAgICAgICAgICAgICAgIGxlZnRjaGFyICY9ICgxIDw8IGxlZnRiaXRzKSAtIDEKICAgICAgICAgICAgIwogICAgICAgICAgICBsYXN0X2NoYXJfd2FzX2FfcGFkID0gRmFsc2UKICAgIGVsc2U6CiAgICAgICAgaWYgbGVmdGJpdHMgIT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJJbmNvcnJlY3QgcGFkZGluZyIpCgogICAgcmV0dXJuIGIiIi5qb2luKHJlcykKCgojIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwoKdGFibGVfYjJhX2Jhc2U2NCA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIgoKCmRlZiBiMmFfYmFzZTY0KGJpbiwgbmV3bGluZT1UcnVlKToKICAgICJCYXNlNjQtY29kZSBsaW5lIG9mIGRhdGEuIgoKICAgIG5ld2xlbmd0aCA9IChsZW4oYmluKSArIDIpIC8vIDMKICAgIG5ld2xlbmd0aCA9IG5ld2xlbmd0aCAqIDQgKyAxCiAgICByZXMgPSBbXQoKICAgIGxlZnRjaGFyID0gMAogICAgbGVmdGJpdHMgPSAwCiAgICBmb3IgYyBpbiBiaW46CiAgICAgICAgIyBTaGlmdCBpbnRvIG91ciBidWZmZXIsIGFuZCBvdXRwdXQgYW55IDZiaXRzIHJlYWR5CiAgICAgICAgbGVmdGNoYXIgPSAobGVmdGNoYXIgPDwgOCkgfCBjCiAgICAgICAgbGVmdGJpdHMgKz0gOAogICAgICAgIHJlcy5hcHBlbmQodGFibGVfYjJhX2Jhc2U2NFsobGVmdGNoYXIgPj4gKGxlZnRiaXRzIC0gNikpICYgMHgzRl0pCiAgICAgICAgbGVmdGJpdHMgLT0gNgogICAgICAgIGlmIGxlZnRiaXRzID49IDY6CiAgICAgICAgICAgIHJlcy5hcHBlbmQodGFibGVfYjJhX2Jhc2U2NFsobGVmdGNoYXIgPj4gKGxlZnRiaXRzIC0gNikpICYgMHgzRl0pCiAgICAgICAgICAgIGxlZnRiaXRzIC09IDYKICAgICMKICAgIGlmIGxlZnRiaXRzID09IDI6CiAgICAgICAgcmVzLmFwcGVuZCh0YWJsZV9iMmFfYmFzZTY0WyhsZWZ0Y2hhciAmIDMpIDw8IDRdKQogICAgICAgIHJlcy5hcHBlbmQoUEFEKQogICAgICAgIHJlcy5hcHBlbmQoUEFEKQogICAgZWxpZiBsZWZ0Yml0cyA9PSA0OgogICAgICAgIHJlcy5hcHBlbmQodGFibGVfYjJhX2Jhc2U2NFsobGVmdGNoYXIgJiAweEYpIDw8IDJdKQogICAgICAgIHJlcy5hcHBlbmQoUEFEKQogICAgaWYgbmV3bGluZToKICAgICAgICByZXMuYXBwZW5kKCJcbiIpCiAgICByZXR1cm4gIiIuam9pbihyZXMpLmVuY29kZSgiYXNjaWkiKQo=",
  "/lib/ext/ovms/hmac.py": "IyBJbXBsZW1lbnRzIHRoZSBobWFjIG1vZHVsZSBmcm9tIHRoZSBQeXRob24gc3RhbmRhcmQgbGlicmFyeS4KCgpjbGFzcyBITUFDOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGtleSwgbXNnPU5vbmUsIGRpZ2VzdG1vZD1Ob25lKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShrZXksIChieXRlcywgYnl0ZWFycmF5KSk6CiAgICAgICAgICAgIHJhaXNlIFR5cGVFcnJvcigia2V5OiBleHBlY3RlZCBieXRlcy9ieXRlYXJyYXkiKQoKICAgICAgICBpbXBvcnQgaGFzaGxpYgoKICAgICAgICBpZiBkaWdlc3Rtb2QgaXMgTm9uZToKICAgICAgICAgICAgIyBUT0RPOiBEZWZhdWx0IGhhc2ggYWxnb3JpdGhtIGlzIG5vdyBkZXByZWNhdGVkLgogICAgICAgICAgICBkaWdlc3Rtb2QgPSBoYXNobGliLm1kNQoKICAgICAgICBpZiBjYWxsYWJsZShkaWdlc3Rtb2QpOgogICAgICAgICAgICAjIEEgaGFzaGxpYiBjb25zdHJ1Y3RvciByZXR1cm5pbmcgYSBuZXcgaGFzaCBvYmplY3QuCiAgICAgICAgICAgIG1ha2VfaGFzaCA9IGRpZ2VzdG1vZCAgIyBBCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKGRpZ2VzdG1vZCwgc3RyKToKICAgICAgICAgICAgIyBBIGhhc2ggbmFtZSBzdWl0YWJsZSBmb3IgaGFzaGxpYi5uZXcoKS4KICAgICAgICAgICAgbWFrZV9oYXNoID0gbGFtYmRhIGQ9YiIiOiBnZXRhdHRyKGhhc2hsaWIsIGRpZ2VzdG1vZCkoZCkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEEgbW9kdWxlIHN1cHBvcnRpbmcgUEVQIDI0Ny4KICAgICAgICAgICAgbWFrZV9oYXNoID0gZGlnZXN0bW9kLm5ldyAgIyBDCgogICAgICAgIHNlbGYuX291dGVyID0gbWFrZV9oYXNoKCkKICAgICAgICBzZWxmLl9pbm5lciA9IG1ha2VfaGFzaCgpCgogICAgICAgIHNlbGYuZGlnZXN0X3NpemUgPSBnZXRhdHRyKHNlbGYuX2lubmVyLCAiZGlnZXN0X3NpemUiLCBOb25lKQogICAgICAgICMgSWYgdGhlIHByb3ZpZGVkIGhhc2ggZG9lc24ndCBzdXBwb3J0IGJsb2NrX3NpemUgKGUuZy4gYnVpbHQtaW4KICAgICAgICAjIGhhc2hsaWIpLCA2NCBpcyB0aGUgY29ycmVjdCBkZWZhdWx0IGZvciBhbGwgYnVpbHQtaW4gaGFzaAogICAgICAgICMgZnVuY3Rpb25zIChtZDUsIHNoYTEsIHNoYTI1NikuCiAgICAgICAgc2VsZi5ibG9ja19zaXplID0gZ2V0YXR0cihzZWxmLl9pbm5lciwgImJsb2NrX3NpemUiLCA2NCkKCiAgICAgICAgIyBUcnVuY2F0ZSB0byBkaWdlc3Rfc2l6ZSBpZiBncmVhdGVyIHRoYW4gYmxvY2tfc2l6ZS4KICAgICAgICBpZiBsZW4oa2V5KSA+IHNlbGYuYmxvY2tfc2l6ZToKICAgICAgICAgICAga2V5ID0gbWFrZV9oYXNoKGtleSkuZGlnZXN0KCkKCiAgICAgICAgIyBQYWQgdG8gYmxvY2sgc2l6ZS4KICAgICAgICBrZXkgPSBrZXkgKyBieXRlcyhzZWxmLmJsb2NrX3NpemUgLSBsZW4oa2V5KSkKCiAgICAgICAgc2VsZi5fb3V0ZXIudXBkYXRlKGJ5dGVzKHggXiAweDVDIGZvciB4IGluIGtleSkpCiAgICAgICAgc2VsZi5faW5uZXIudXBkYXRlKGJ5dGVzKHggXiAweDM2IGZvciB4IGluIGtleSkpCgogICAgICAgIGlmIG1zZyBpcyBub3QgTm9uZToKICAgICAgICAgICAgc2VsZi51cGRhdGUobXNnKQoKICAgIEBwcm9wZXJ0eQogICAgZGVmIG5hbWUoc2VsZik6CiAgICAgICAgcmV0dXJuICJobWFjLSIgKyBnZXRhdHRyKHNlbGYuX2lubmVyLCAibmFtZSIsIHR5cGUoc2VsZi5faW5uZXIpLl9fbmFtZV9fKQoKICAgIGRlZiB1cGRhdGUoc2VsZiwgbXNnKToKICAgICAgICBzZWxmLl9pbm5lci51cGRhdGUobXNnKQoKICAgIGRlZiBjb3B5KHNlbGYpOgogICAgICAgIGlmIG5vdCBoYXNhdHRyKHNlbGYuX2lubmVyLCAiY29weSIpOgogICAgICAgICAgICAjIE5vdCBzdXBwb3J0ZWQgZm9yIGJ1aWx0LWluIGhhc2ggZnVuY3Rpb25zLgogICAgICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCkKICAgICAgICAjIENhbGwgX19uZXdfXyBkaXJlY3RseSB0byBhdm9pZCB0aGUgZXhwZW5zaXZlIF9faW5pdF9fLgogICAgICAgIG90aGVyID0gc2VsZi5fX2NsYXNzX18uX19uZXdfXyhzZWxmLl9fY2xhc3NfXykKICAgICAgICBvdGhlci5ibG9ja19zaXplID0gc2VsZi5ibG9ja19zaXplCiAgICAgICAgb3RoZXIuZGlnZXN0X3NpemUgPSBzZWxmLmRpZ2VzdF9zaXplCiAgICAgICAgb3RoZXIuX2lubmVyID0gc2VsZi5faW5uZXIuY29weSgpCiAgICAgICAgb3RoZXIuX291dGVyID0gc2VsZi5fb3V0ZXIuY29weSgpCiAgICAgICAgcmV0dXJuIG90aGVyCgogICAgZGVmIF9jdXJyZW50KHNlbGYpOgogICAgICAgIGggPSBzZWxmLl9vdXRlcgogICAgICAgIGlmIGhhc2F0dHIoaCwgImNvcHkiKToKICAgICAgICAgICAgIyBidWlsdC1pbiBoYXNoIGZ1bmN0aW9ucyBkb24ndCBzdXBwb3J0IHRoaXMsIGFuZCBhcyBhIHJlc3VsdCwKICAgICAgICAgICAgIyBkaWdlc3QoKSB3aWxsIGZpbmFsaXNlIHRoZSBobWFjIGFuZCBmdXJ0aGVyIGNhbGxzIHRvCiAgICAgICAgICAgICMgdXBkYXRlL2RpZ2VzdCB3aWxsIGZhaWwuCiAgICAgICAgICAgIGggPSBoLmNvcHkoKQogICAgICAgIGgudXBkYXRlKHNlbGYuX2lubmVyLmRpZ2VzdCgpKQogICAgICAgIHJldHVybiBoCgogICAgZGVmIGRpZ2VzdChzZWxmKToKICAgICAgICBoID0gc2VsZi5fY3VycmVudCgpCiAgICAgICAgcmV0dXJuIGguZGlnZXN0KCkKCiAgICBkZWYgaGV4ZGlnZXN0KHNlbGYpOgogICAgICAgIGltcG9ydCBiaW5hc2NpaQoKICAgICAgICByZXR1cm4gc3RyKGJpbmFzY2lpLmhleGxpZnkoc2VsZi5kaWdlc3QoKSksICJ1dGYtOCIpCgoKZGVmIG5ldyhrZXksIG1zZz1Ob25lLCBkaWdlc3Rtb2Q9Tm9uZSk6CiAgICByZXR1cm4gSE1BQyhrZXksIG1zZywgZGlnZXN0bW9kKQoK",
  "/lib/ext/ovms/vehicles/__init__.py": "IyBPVk1TIFZlaGljbGVzIHBhY2thZ2UK",
  "/lib/ext/ovms/vehicles/zombie_vcu/__init__.py": "IyBab21iaWVWZXJ0ZXIgVkNVIFZlaGljbGUKZnJvbSAuem9tYmllX3ZjdSBpbXBvcnQgVkVISUNMRV9DT05GSUcsIFBBUlNFX0ZVTkNUSU9OUwo=",
  "/lib/ext/ovms/vehicles/zombie_vcu/zombie_vcu.py": "IiIiClpvbWJpZVZlcnRlciBWQ1UgVmVoaWNsZSBNb2R1bGUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KClZlaGljbGUtc3BlY2lmaWMgY29uZmlndXJhdGlvbiBmb3IgWm9tYmllVmVydGVyIFZDVS4KVXNlcyBPQkQyIE1vZGUgMHgyQSBwcm90b2NvbCB0byByZWFkIE9wZW5JbnZlcnRlciBwYXJhbWV0ZXJzLgoKQmFzZWQgb24gT1ZNUyB2MyB2ZWhpY2xlX3pvbWJpZV92Y3UgbW9kdWxlLgoiIiIKCmZyb20gbGliLmV4dC5vdm1zLnZlaGljbGUgaW1wb3J0IFBST1RPQ09MX09CRDIKCiMgWm9tYmllVmVydGVyIFZDVSBjb25maWd1cmF0aW9uClZFSElDTEVfQ09ORklHID0gewogICAgJ25hbWUnOiAnWm9tYmllVmVydGVyIFZDVScsCiAgICAncHJvdG9jb2wnOiBQUk9UT0NPTF9PQkQyLAogICAgJ2Nhbl90eF9pZCc6IDB4N0RGLCAgIyBCcm9hZGNhc3QKICAgICdjYW5fcnhfaWQnOiAweDdFOCwgICMgUmVzcG9uc2UgKG5vZGUgMCkKICAgICdub2RlX2lkJzogMCwKICAgICdwb2xsX3R5cGUnOiAweDJBLCAgIyBPQkQyIE1vZGUgMHgyQSAoT3BlbkludmVydGVyIGN1c3RvbSkKICAgICdtZXRyaWNzJzogewogICAgICAgICdzb2MnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDA3REYsCiAgICAgICAgICAgICd1bml0JzogJyUnLAogICAgICAgICAgICAncG9sbF9pbnRlcnZhbCc6IDE1LAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV8xNmJpdF9oaWdoJwogICAgICAgIH0sCiAgICAgICAgJ3VkYyc6IHsKICAgICAgICAgICAgJ3BpZCc6IDB4MDdENiwKICAgICAgICAgICAgJ3VuaXQnOiAnVicsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMzAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzE2Yml0X2hpZ2gnCiAgICAgICAgfSwKICAgICAgICAnaWRjJzogewogICAgICAgICAgICAncGlkJzogMHgwN0RDLAogICAgICAgICAgICAndW5pdCc6ICdBJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiAxLAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV8zMmJpdF9uZWdhdGl2ZScgICMgTmVnYXRpdmUgZm9yIE9WTVMgY29udmVudGlvbgogICAgICAgIH0sCiAgICAgICAgJ29wbW9kZSc6IHsKICAgICAgICAgICAgJ3BpZCc6IDB4MDdEMiwKICAgICAgICAgICAgJ3VuaXQnOiAnJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiAxLAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV84Yml0X29wbW9kZScKICAgICAgICB9LAogICAgICAgICd0bXBpJzogewogICAgICAgICAgICAncGlkJzogMHgwN0VDLAogICAgICAgICAgICAndW5pdCc6ICdDJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiA1LAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV8xNmJpdF9oaWdoJwogICAgICAgIH0sCiAgICAgICAgJ3RtcG0nOiB7CiAgICAgICAgICAgICdwaWQnOiAweDA1LCAgIyBPQkQyIHN0YW5kYXJkIFBJRAogICAgICAgICAgICAndW5pdCc6ICdDJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiA1LAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV9vYmQyX3RlbXAnCiAgICAgICAgfSwKICAgICAgICAndG1heCc6IHsKICAgICAgICAgICAgJ3BpZCc6IDB4MDgyNywKICAgICAgICAgICAgJ3VuaXQnOiAnQycsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMzAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzE2Yml0X2hpZ2gnCiAgICAgICAgfSwKICAgICAgICAndG1pbic6IHsKICAgICAgICAgICAgJ3BpZCc6IDB4MDgyNiwKICAgICAgICAgICAgJ3VuaXQnOiAnQycsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMzAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzE2Yml0X2hpZ2gnCiAgICAgICAgfSwKICAgICAgICAndm1pbic6IHsKICAgICAgICAgICAgJ3BpZCc6IDB4MDgyNCwKICAgICAgICAgICAgJ3VuaXQnOiAnVicsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMzAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzI0Yml0X21pbGxpdm9sdCcKICAgICAgICB9LAogICAgICAgICd2bWF4JzogewogICAgICAgICAgICAncGlkJzogMHgwODI1LAogICAgICAgICAgICAndW5pdCc6ICdWJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiAzMCwKICAgICAgICAgICAgJ3BhcnNlX2Z1bmMnOiAncGFyc2VfMjRiaXRfbWlsbGl2b2x0JwogICAgICAgIH0sCiAgICAgICAgJ3RtcGMnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDgxRSwKICAgICAgICAgICAgJ3VuaXQnOiAnQycsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMzAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzE2Yml0X2hpZ2gnCiAgICAgICAgfSwKICAgICAgICAnYWN2JzogewogICAgICAgICAgICAncGlkJzogMHg4MUYsCiAgICAgICAgICAgICd1bml0JzogJ1YnLAogICAgICAgICAgICAncG9sbF9pbnRlcnZhbCc6IDMwLAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV8zMmJpdCcKICAgICAgICB9LAogICAgICAgICdhY2EnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDgyOSwKICAgICAgICAgICAgJ3VuaXQnOiAnQScsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogMTAsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlXzMyYml0JwogICAgICAgIH0sCiAgICB9Cn0KCiMgTm8gY3VzdG9tIHBhcnNlIGZ1bmN0aW9ucyBuZWVkZWQgLSB1c2VzIHN0YW5kYXJkIG9uZXMgZnJvbSB2ZWhpY2xlLnB5ClBBUlNFX0ZVTkNUSU9OUyA9IHt9Cg==",
  "/lib/ext/ovms/vehicles/obdii/__init__.py": "IyBPQkRJSSBWZWhpY2xlCmZyb20gLm9iZGlpIGltcG9ydCBWRUhJQ0xFX0NPTkZJRywgUEFSU0VfRlVOQ1RJT05TCg==",
  "/lib/ext/ovms/vehicles/obdii/obdii.py": "IiIiCkdlbmVyaWMgT0JESUkgVmVoaWNsZSBNb2R1bGUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KClZlaGljbGUtc3BlY2lmaWMgY29uZmlndXJhdGlvbiBmb3IgZ2VuZXJpYyBPQkRJSSB2ZWhpY2xlcy4KVXNlcyBzdGFuZGFyZCBPQkQtSUkgUElEcyBvdmVyIENBTiBidXMuCgpCYXNlZCBvbiBPVk1TIHYzIHZlaGljbGVfb2JkaWkgbW9kdWxlLgoiIiIKCmZyb20gbGliLmV4dC5vdm1zLnZlaGljbGUgaW1wb3J0IFBST1RPQ09MX09CRDIKCiMgR2VuZXJpYyBPQkRJSSBjb25maWd1cmF0aW9uClZFSElDTEVfQ09ORklHID0gewogICAgJ25hbWUnOiAnT0JESUkgR2VuZXJpYycsCiAgICAncHJvdG9jb2wnOiBQUk9UT0NPTF9PQkQyLAogICAgJ2Nhbl90eF9pZCc6IDB4N0RGLCAgIyBCcm9hZGNhc3QKICAgICdjYW5fcnhfaWQnOiAweDdFOCwgICMgUmVzcG9uc2UgKHR5cGljYWxseSAweDdFOC0weDdFRikKICAgICdub2RlX2lkJzogMCwKICAgICdwb2xsX3R5cGUnOiAweDAxLCAgIyBPQkQyIE1vZGUgMHgwMSAoY3VycmVudCBkYXRhKQogICAgJ21ldHJpY3MnOiB7CiAgICAgICAgIyBTdGFuZGFyZCBPQkQtSUkgUElEcwogICAgICAgICdjb29sYW50X3RlbXAnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDA1LCAgIyBFbmdpbmUgY29vbGFudCB0ZW1wZXJhdHVyZQogICAgICAgICAgICAndW5pdCc6ICdDJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiA1LAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV9vYmQyX3RlbXAnCiAgICAgICAgfSwKICAgICAgICAncnBtJzogewogICAgICAgICAgICAncGlkJzogMHgwQywgICMgRW5naW5lIFJQTQogICAgICAgICAgICAndW5pdCc6ICdycG0nLAogICAgICAgICAgICAncG9sbF9pbnRlcnZhbCc6IDEsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlX29iZDJfcnBtJwogICAgICAgIH0sCiAgICAgICAgJ3NwZWVkJzogewogICAgICAgICAgICAncGlkJzogMHgwRCwgICMgVmVoaWNsZSBzcGVlZAogICAgICAgICAgICAndW5pdCc6ICdrbS9oJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiAxLAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV9vYmQyX3NwZWVkJwogICAgICAgIH0sCiAgICAgICAgJ2Z1ZWxfbGV2ZWwnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDJGLCAgIyBGdWVsIHRhbmsgbGV2ZWwKICAgICAgICAgICAgJ3VuaXQnOiAnJScsCiAgICAgICAgICAgICdwb2xsX2ludGVydmFsJzogNSwKICAgICAgICAgICAgJ3BhcnNlX2Z1bmMnOiAncGFyc2Vfb2JkMl9wZXJjZW50JwogICAgICAgIH0sCiAgICAgICAgJ3ZvbHRhZ2UnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDQyLCAgIyBDb250cm9sIG1vZHVsZSB2b2x0YWdlCiAgICAgICAgICAgICd1bml0JzogJ1YnLAogICAgICAgICAgICAncG9sbF9pbnRlcnZhbCc6IDUsCiAgICAgICAgICAgICdwYXJzZV9mdW5jJzogJ3BhcnNlX29iZDJfdm9sdGFnZScKICAgICAgICB9LAogICAgICAgICdhbWJpZW50X3RlbXAnOiB7CiAgICAgICAgICAgICdwaWQnOiAweDQ2LCAgIyBBbWJpZW50IGFpciB0ZW1wZXJhdHVyZQogICAgICAgICAgICAndW5pdCc6ICdDJywKICAgICAgICAgICAgJ3BvbGxfaW50ZXJ2YWwnOiAxMCwKICAgICAgICAgICAgJ3BhcnNlX2Z1bmMnOiAncGFyc2Vfb2JkMl90ZW1wJwogICAgICAgIH0sCiAgICB9Cn0KCiMgQ3VzdG9tIHBhcnNlIGZ1bmN0aW9ucyBmb3Igc3RhbmRhcmQgT0JELUlJIFBJRHMKZGVmIHBhcnNlX29iZDJfcnBtKGRhdGEpOgogICAgIiIiUGFyc2UgT0JEMiBSUE06IChBICogMjU2ICsgQikgLyA0IiIiCiAgICBpZiBsZW4oZGF0YSkgPCAzOgogICAgICAgIHJldHVybiAwLjAKICAgIHJldHVybiBmbG9hdCgoZGF0YVsxXSAqIDI1NiArIGRhdGFbMl0pIC8gNC4wKQoKZGVmIHBhcnNlX29iZDJfc3BlZWQoZGF0YSk6CiAgICAiIiJQYXJzZSBPQkQyIHNwZWVkOiBBIChrbS9oKSIiIgogICAgaWYgbGVuKGRhdGEpIDwgMjoKICAgICAgICByZXR1cm4gMC4wCiAgICByZXR1cm4gZmxvYXQoZGF0YVsxXSkKCmRlZiBwYXJzZV9vYmQyX3BlcmNlbnQoZGF0YSk6CiAgICAiIiJQYXJzZSBPQkQyIHBlcmNlbnRhZ2U6IEEgKiAxMDAgLyAyNTUiIiIKICAgIGlmIGxlbihkYXRhKSA8IDI6CiAgICAgICAgcmV0dXJuIDAuMAogICAgcmV0dXJuIGZsb2F0KGRhdGFbMV0gKiAxMDAgLyAyNTUuMCkKCmRlZiBwYXJzZV9vYmQyX3ZvbHRhZ2UoZGF0YSk6CiAgICAiIiJQYXJzZSBPQkQyIHZvbHRhZ2U6IChBICogMjU2ICsgQikgLyAxMDAwIiIiCiAgICBpZiBsZW4oZGF0YSkgPCAzOgogICAgICAgIHJldHVybiAwLjAKICAgIHJldHVybiBmbG9hdCgoZGF0YVsxXSAqIDI1NiArIGRhdGFbMl0pIC8gMTAwMC4wKQoKUEFSU0VfRlVOQ1RJT05TID0gewogICAgJ3BhcnNlX29iZDJfcnBtJzogcGFyc2Vfb2JkMl9ycG0sCiAgICAncGFyc2Vfb2JkMl9zcGVlZCc6IHBhcnNlX29iZDJfc3BlZWQsCiAgICAncGFyc2Vfb2JkMl9wZXJjZW50JzogcGFyc2Vfb2JkMl9wZXJjZW50LAogICAgJ3BhcnNlX29iZDJfdm9sdGFnZSc6IHBhcnNlX29iZDJfdm9sdGFnZSwKfQoK",
  "/lib/ext/ovms/vehicles/tesla_model3/__init__.py": "IyBUZXNsYSBNb2RlbCAzIFZlaGljbGUKZnJvbSAudGVzbGFfbW9kZWwzIGltcG9ydCBWRUhJQ0xFX0NPTkZJRywgUEFSU0VfRlVOQ1RJT05TCg==",
  "/lib/ext/ovms/vehicles/tesla_model3/tesla_model3.py": "IiIiClRlc2xhIE1vZGVsIDMgVmVoaWNsZSBNb2R1bGUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKVmVoaWNsZS1zcGVjaWZpYyBjb25maWd1cmF0aW9uIGZvciBUZXNsYSBNb2RlbCAzLgpVc2VzIHJhdyBDQU4gZnJhbWVzIChub3QgT0JEMikgLSBsaXN0ZW5zIHRvIENBTiBidXMgbWVzc2FnZXMgZGlyZWN0bHkuCiIiIgoKZnJvbSBsaWIuZXh0Lm92bXMudmVoaWNsZSBpbXBvcnQgUFJPVE9DT0xfQ0FOX1JBVwoKIyBUZXNsYSBNb2RlbCAzIHVzZXMgcmF3IENBTiBmcmFtZXMsIG5vdCBPQkQyIHBvbGxpbmcKIyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgLSBhY3R1YWwgaW1wbGVtZW50YXRpb24gd291bGQgbmVlZCBDQU4gZnJhbWUgaGFuZGxlcnMKVkVISUNMRV9DT05GSUcgPSB7CiAgICAnbmFtZSc6ICdUZXNsYSBNb2RlbCAzJywKICAgICdwcm90b2NvbCc6IFBST1RPQ09MX0NBTl9SQVcsCiAgICAnY2FuX2J1c2VzJzogWzEsIDIsIDNdLCAgIyBNb2RlbCAzIHVzZXMgbXVsdGlwbGUgQ0FOIGJ1c2VzCiAgICAnbWV0cmljcyc6IHsKICAgICAgICAjIFRlc2xhIE1vZGVsIDMgbWV0cmljcyB3b3VsZCBiZSBleHRyYWN0ZWQgZnJvbSBDQU4gZnJhbWVzCiAgICAgICAgIyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgc3RydWN0dXJlCiAgICAgICAgJ3NvYyc6IHsKICAgICAgICAgICAgJ2Nhbl9pZCc6IDB4MTAyLCAgIyBFeGFtcGxlIENBTiBJRAogICAgICAgICAgICAnY2FuX2J1cyc6IDEsCiAgICAgICAgICAgICd1bml0JzogJyUnLAogICAgICAgICAgICAncGFyc2VfZnVuYyc6ICdwYXJzZV90ZXNsYV9zb2MnCiAgICAgICAgfSwKICAgICAgICAnc3BlZWQnOiB7CiAgICAgICAgICAgICdjYW5faWQnOiAweDJCOSwgICMgRXhhbXBsZSBDQU4gSUQKICAgICAgICAgICAgJ2Nhbl9idXMnOiAxLAogICAgICAgICAgICAndW5pdCc6ICdrbS9oJywKICAgICAgICAgICAgJ3BhcnNlX2Z1bmMnOiAncGFyc2VfdGVzbGFfc3BlZWQnCiAgICAgICAgfSwKICAgICAgICAjIC4uLiBtb3JlIG1ldHJpY3MKICAgIH0KfQoKCmRlZiBwYXJzZV90ZXNsYV9zb2MoY2FuX2ZyYW1lX2RhdGEpOgogICAgIiIiUGFyc2UgU09DIGZyb20gVGVzbGEgTW9kZWwgMyBDQU4gZnJhbWUiIiIKICAgICMgUGxhY2Vob2xkZXIgLSBhY3R1YWwgcGFyc2luZyB3b3VsZCBkZXBlbmQgb24gQ0FOIGZyYW1lIGZvcm1hdAogICAgaWYgbGVuKGNhbl9mcmFtZV9kYXRhKSA+PSAyOgogICAgICAgIHJldHVybiBmbG9hdChjYW5fZnJhbWVfZGF0YVswXSArIChjYW5fZnJhbWVfZGF0YVsxXSA8PCA4KSkgLyAxMDAuMAogICAgcmV0dXJuIDAuMAoKCmRlZiBwYXJzZV90ZXNsYV9zcGVlZChjYW5fZnJhbWVfZGF0YSk6CiAgICAiIiJQYXJzZSBzcGVlZCBmcm9tIFRlc2xhIE1vZGVsIDMgQ0FOIGZyYW1lIiIiCiAgICAjIFBsYWNlaG9sZGVyIC0gYWN0dWFsIHBhcnNpbmcgd291bGQgZGVwZW5kIG9uIENBTiBmcmFtZSBmb3JtYXQKICAgIGlmIGxlbihjYW5fZnJhbWVfZGF0YSkgPj0gMjoKICAgICAgICByZXR1cm4gZmxvYXQoY2FuX2ZyYW1lX2RhdGFbMF0gKyAoY2FuX2ZyYW1lX2RhdGFbMV0gPDwgOCkpIC8gMTAwLjAKICAgIHJldHVybiAwLjAKCgojIFJlZ2lzdGVyIHBhcnNlIGZ1bmN0aW9ucyAod291bGQgYmUgaW1wb3J0ZWQgYnkgdmVoaWNsZS5weSkKUEFSU0VfRlVOQ1RJT05TID0gewogICAgJ3BhcnNlX3Rlc2xhX3NvYyc6IHBhcnNlX3Rlc2xhX3NvYywKICAgICdwYXJzZV90ZXNsYV9zcGVlZCc6IHBhcnNlX3Rlc2xhX3NwZWVkLAp9Cg==",
  "/lib/ext/ovms/vehicles/headless_zombie/__init__.py": "IyBIZWFkbGVzcyBab21iaWUgVmVoaWNsZQpmcm9tIC5oZWFkbGVzc196b21iaWUgaW1wb3J0IFZFSElDTEVfQ09ORklHLCBQQVJTRV9GVU5DVElPTlMK",
  "/lib/ext/ovms/vehicles/headless_zombie/headless_zombie.py": "IiIiCkhlYWRsZXNzIFpvbWJpZVZlcnRlciBWZWhpY2xlIE1vZHVsZQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpBIHNpbXVsYXRlZCBab21iaWVWZXJ0ZXIgVkNVIGZvciB0ZXN0aW5nIHdpdGhvdXQgQ0FOIGhhcmR3YXJlLgpVc2VzIHRoZSBmYWtlX3pvbWJpZXZlcnRlciBzaW11bGF0b3IgdG8gcHJvdmlkZSByZWFsaXN0aWMgbWV0cmljcy4KClBlcmZlY3QgZm9yIGRldmVsb3BtZW50IGFuZCB0ZXN0aW5nIE9WTVMgZXh0ZW5zaW9ucyB3aXRob3V0IG5lZWRpbmcKYWN0dWFsIFRXQUkvQ0FOIGJ1cyBoYXJkd2FyZS4KIiIiCgojIFNwZWNpYWwgcHJvdG9jb2wgaWRlbnRpZmllciBmb3IgZmFrZSBzaW11bGF0b3IKUFJPVE9DT0xfRkFLRSA9ICdmYWtlJwoKIyBIZWFkbGVzcyBab21iaWUgY29uZmlndXJhdGlvbgpWRUhJQ0xFX0NPTkZJRyA9IHsKICAgICduYW1lJzogJ0hlYWRsZXNzIFpvbWJpZVZlcnRlciAoU2ltdWxhdGVkKScsCiAgICAncHJvdG9jb2wnOiBQUk9UT0NPTF9GQUtFLCAgIyBVc2VzIGZha2Ugc2ltdWxhdG9yLCBub3QgcmVhbCBDQU4KICAgICdjYW5fdHhfaWQnOiBOb25lLCAgIyBOb3QgdXNlZAogICAgJ2Nhbl9yeF9pZCc6IE5vbmUsICAjIE5vdCB1c2VkCiAgICAnbm9kZV9pZCc6IE5vbmUsCiAgICAncG9sbF90eXBlJzogTm9uZSwKICAgICdtZXRyaWNzJzoge30gICMgTWV0cmljcyBhcmUgZ2VuZXJhdGVkIGJ5IGZha2Vfem9tYmlldmVydGVyLnB5Cn0KCiMgTm8gcGFyc2UgZnVuY3Rpb25zIG5lZWRlZCAtIGZha2Ugc2ltdWxhdG9yIHByb3ZpZGVzIHJlYWR5LXRvLXVzZSBkYXRhClBBUlNFX0ZVTkNUSU9OUyA9IHt9Cgo="
};

// Bundled extension code
var o=class{constructor(t,e,i,a){this.device=t,this.emit=e,this.state=i,this.html=a,i.ovms||(i.ovms={config:{enabled:!1,server:"",port:6867,vehicleid:"",password:"",tls:!1,pollinterval:5},metrics:{},status:{state:"disconnected",status:"",connected:!1,metrics_count:0,last_poll:0},isLoading:!1,configLoaded:!1})}async onInstall(){if(!this.state.isConnected)return!1;console.log("[OVMS] Installing device files...");try{await this.device.mkdir("/lib/ext"),await this.device.saveFile("/lib/ext/__init__.py",`# Extension packages
`),await this.device.mkdir("/lib/ext/ovms"),await this.device.mkdir("/lib/ext/ovms/vehicles"),await this.device.mkdir("/lib/ext/ovms/vehicles/zombie_vcu"),await this.device.mkdir("/lib/ext/ovms/vehicles/obdii"),await this.device.mkdir("/lib/ext/ovms/vehicles/tesla_model3"),await this.device.mkdir("/lib/ext/ovms/vehicles/headless_zombie");for(let[t,e]of Object.entries(this.deviceFiles)){let i=t.split("/").pop();console.log(`[OVMS] Writing ${i}...`),await this.device.saveFile(t,e)}return console.log("[OVMS] Installation complete! Device may need restart to use extension."),!0}catch(t){return console.error("[OVMS] Installation failed:",t),!1}}async getOVMSConfig(){if(this.state.ovms.isLoading)return console.log("[OVMS] Config already loading, skipping"),this.state.ovms.config||{};try{this.state.ovms.isLoading=!0;try{let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import getOVMSConfig; getOVMSConfig()"),e=this.device.parseJSON(t);e&&typeof e=="object"&&(this.state.ovms.config=e)}catch{console.log("[OVMS] Config not available, using defaults")}try{let t=await this.device.execute("from lib.ext.ovms.vehicle import list_vehicles; import json; print(json.dumps(list_vehicles()))"),e=this.device.parseJSON(t);this.state.ovms.config.available_vehicles=e}catch{this.state.ovms.config.available_vehicles={zombie_vcu:"ZombieVerter VCU"}}return this.state.ovms.configLoaded=!0,this.state.ovms.isLoading=!1,this.emit("render"),this.state.ovms.config||{}}catch(t){return console.error("[OVMS] Error getting config:",t),this.state.ovms.isLoading=!1,this.state.ovms.configLoaded=!0,this.state.ovms.config||{}}}async setOVMSConfig(t){try{let e=await this.device.execute(`from lib.ext.ovms.OVMS_helpers import setOVMSConfig; setOVMSConfig(${JSON.stringify(t)})`),i=this.device.parseJSON(e);return this.state.ovms.config=t,this.emit("render"),i||{success:!0}}catch(e){return console.error("[OVMS] Error setting config:",e),{error:e.message}}}async getOVMSMetrics(){try{let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import getOVMSMetrics; getOVMSMetrics()"),e=this.device.parseJSON(t);return e&&typeof e=="object"&&(this.state.ovms.metrics=e,this.emit("render")),e||{}}catch(t){return console.error("[OVMS] Error getting metrics:",t),{}}}async getOVMSStatus(){try{let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import getOVMSStatus; getOVMSStatus()"),e=this.device.parseJSON(t);return e&&typeof e=="object"&&(this.state.ovms.status=e,this.emit("render")),e||{}}catch(t){return console.error("[OVMS] Error getting status:",t),{}}}async startOVMS(){try{this.state.ovms.isLoading=!0,this.emit("render");let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import startOVMS; startOVMS()"),e=this.device.parseJSON(t);return await this.getOVMSStatus(),this.state.ovms.isLoading=!1,this.emit("render"),e||{}}catch(t){return console.error("[OVMS] Error starting:",t),this.state.ovms.isLoading=!1,this.emit("render"),{error:t.message}}}async stopOVMS(){try{this.state.ovms.isLoading=!0,this.emit("render");let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import stopOVMS; stopOVMS()"),e=this.device.parseJSON(t);return await this.getOVMSStatus(),this.state.ovms.isLoading=!1,this.emit("render"),e||{}}catch(t){return console.error("[OVMS] Error stopping:",t),this.state.ovms.isLoading=!1,this.emit("render"),{error:t.message}}}async testOVMSConnectivity(){try{this.state.ovms.isLoading=!0,this.emit("render"),await this.setOVMSConfig(this.state.ovms.config);let t=await this.device.execute("from lib.ext.ovms.OVMS_helpers import testOVMSConnectivity; testOVMSConnectivity()"),e=this.device.parseJSON(t);return this.state.ovms.isLoading=!1,this.emit("render"),e&&e.success?alert(`\u2713 ${e.message||"Connection test successful"}`):alert(`\u2717 ${e.error||"Connection test failed"}`),e||{}}catch(t){return console.error("[OVMS] Error testing connectivity:",t),this.state.ovms.isLoading=!1,this.emit("render"),alert(`\u2717 Connection test error: ${t.message}`),{error:t.message}}}renderConfig(){if(!this.state.ovms.config.server&&!this.state.ovms.isLoading&&this.state.isConnected&&setTimeout(()=>{this.getOVMSConfig().catch(s=>{console.error("[OVMS] getOVMSConfig() error:",s)})},0),this.state.isConnected&&!this.state.ovms.isLoading){let s=Date.now();(!this.state.ovms.lastStatusRefresh||s-this.state.ovms.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getOVMSStatus(),this.state.ovms.lastStatusRefresh=Date.now()},0)}let e=this.state.ovms.config,a=(this.state.ovms.status||{}).state==="connected";return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>OVMS Configuration</h2>
          <div style="display: flex; gap: 8px;">
            <button 
              class="ovms-button ${a?"disconnect":"connect"}"
              onclick=${()=>a?this.stopOVMS():this.startOVMS()}
              disabled=${!this.state.isConnected||this.state.ovms.isLoading||!e.enabled}
              style="min-width: 120px;"
            >
              ${a?"Disconnect":"Connect"}
            </button>
            <button 
              class="ovms-button"
              onclick=${()=>this.saveConfig()}
              disabled=${!this.state.isConnected||this.state.ovms.isLoading}
              style="min-width: 120px;"
            >
              Save
            </button>
            <button 
              class="ovms-button secondary"
              onclick=${()=>this.testOVMSConnectivity()}
              disabled=${!this.state.isConnected||this.state.ovms.isLoading||!e.server||!e.vehicleid||!e.password}
              title="Test connection to OVMS server"
            >
              Test Connection
            </button>
          </div>
        </div>
        <div class="ovms-section" style="padding: 20px;">
          <div class="ovms-field">
            <label>
              <input 
                type="checkbox" 
                checked=${e.enabled}
                onchange=${s=>this.handleConfigChange("enabled",s.target.checked)}
              />
              Enable OVMS
            </label>
          </div>

          <div class="ovms-field">
            <label>Server Address</label>
            <input 
              type="text" 
              value="${e.server||""}"
              placeholder="ovms.example.com"
              oninput=${s=>this.handleConfigChange("server",s.target.value)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div class="ovms-field">
            <label>Port</label>
            <input 
              type="number" 
              value="${e.port||6867}"
              placeholder="6867"
              oninput=${s=>this.handleConfigChange("port",parseInt(s.target.value)||6867)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div class="ovms-field">
            <label>Vehicle ID</label>
            <input 
              type="text" 
              value="${e.vehicleid||""}"
              placeholder="MYVEHICLE"
              oninput=${s=>this.handleConfigChange("vehicleid",s.target.value)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div class="ovms-field">
            <label>Password</label>
            <input 
              type="password" 
              value="${e.password||""}"
              placeholder="Server password"
              oninput=${s=>this.handleConfigChange("password",s.target.value)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div class="ovms-field">
            <label>
              <input 
                type="checkbox" 
                checked=${e.tls||!1}
                onchange=${s=>this.handleConfigChange("tls",s.target.checked)}
                disabled=${!this.state.isConnected}
              />
              Use TLS/SSL
            </label>
          </div>

          <div class="ovms-field">
            <label>Poll Interval (seconds)</label>
            <input 
              type="number" 
              value="${e.pollinterval||5}"
              placeholder="5"
              min="1"
              max="60"
              oninput=${s=>this.handleConfigChange("pollinterval",parseInt(s.target.value)||5)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div class="ovms-field">
            <label>Vehicle Type</label>
            <select 
              value="${e.vehicle_type||"zombie_vcu"}"
              onchange=${s=>this.handleConfigChange("vehicle_type",s.target.value)}
              disabled=${!this.state.isConnected}
            >
              ${e.available_vehicles?Object.entries(e.available_vehicles).map(([s,n])=>this.html`
                <option value="${s}" ${e.vehicle_type===s?"selected":""}>${n}</option>
              `):this.html`
                <option value="zombie_vcu" ${e.vehicle_type==="zombie_vcu"?"selected":""}>ZombieVerter VCU</option>
              `}
            </select>
          </div>
        </div>
      </div>
    `}renderMetrics(){if(this.state.isConnected&&!this.state.ovms.isLoading){let e=Date.now();(!this.state.ovms.lastMetricsRefresh||e-this.state.ovms.lastMetricsRefresh>2e3)&&setTimeout(()=>{this.getOVMSMetrics(),this.state.ovms.lastMetricsRefresh=Date.now()},0)}let t=this.state.ovms.metrics||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Metrics</h2>
        </div>
        <div class="ovms-metrics-grid">
          ${Object.keys(t).length===0?this.html`
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-secondary);">
              ${this.state.isConnected?"No metrics available yet. Make sure OpenInverter is connected and OVMS is started.":"Not connected to device."}
            </div>
          `:Object.entries(t).map(([e,i])=>this.html`
            <div class="ovms-metric-card">
              <div class="ovms-metric-name">${e}</div>
              <div class="ovms-metric-value">${typeof i.value=="number"?i.value.toFixed(2):i.value}</div>
              ${i.unit?this.html`<div class="ovms-metric-unit">${i.unit}</div>`:""}
            </div>
          `)}
        </div>
      </div>
    `}renderStatus(){if(this.state.isConnected&&!this.state.ovms.isLoading){let i=Date.now();(!this.state.ovms.lastStatusRefresh||i-this.state.ovms.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getOVMSStatus(),this.state.ovms.lastStatusRefresh=Date.now()},0)}let t=this.state.ovms.status||{},e=this.state.ovms.config||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Status</h2>
        </div>
        <div class="ovms-status-panel">
          <div class="ovms-status-item">
            <span class="ovms-status-label">Connection State</span>
            <span class="ovms-status-value ${t.connected?"connected":t.state==="error"?"error":""}">
              ${t.state||"disconnected"}
            </span>
          </div>

          <div class="ovms-status-item">
            <span class="ovms-status-label">Status Message</span>
            <span class="ovms-status-value">${t.status||"-"}</span>
          </div>

          <div class="ovms-status-item">
            <span class="ovms-status-label">Metrics Count</span>
            <span class="ovms-status-value">${t.metrics_count||0}</span>
          </div>

          <div class="ovms-status-item">
            <span class="ovms-status-label">Last Poll</span>
            <span class="ovms-status-value">
              ${t.last_poll?new Date(t.last_poll*1e3).toLocaleTimeString():"Never"}
            </span>
          </div>

          <div style="margin-top: 24px; display: flex; gap: 12px;">
            <button 
              class="ovms-button"
              onclick=${()=>this.startOVMS()}
              disabled=${!this.state.isConnected||!e.enabled||t.connected||this.state.ovms.isLoading}
            >
              Start OVMS
            </button>
            <button 
              class="ovms-button secondary"
              onclick=${()=>this.stopOVMS()}
              disabled=${!this.state.isConnected||!t.connected||this.state.ovms.isLoading}
            >
              Stop OVMS
            </button>
            <button 
              class="ovms-button secondary"
              onclick=${()=>this.getOVMSStatus()}
              disabled=${!this.state.isConnected||this.state.ovms.isLoading}
            >
              Refresh Status
            </button>
          </div>
        </div>
      </div>
    `}handleConfigChange(t,e){this.state.ovms.config[t]=e,this.emit("render")}async saveConfig(){try{if(this.state.ovms.isLoading=!0,this.emit("render"),!this.state.ovms.config.enabled)try{await this.stopOVMS()}catch(e){console.warn("[OVMS] Error stopping service:",e)}let t=await this.setOVMSConfig(this.state.ovms.config);this.state.ovms.isLoading=!1,t.success?alert("\u2713 Configuration saved successfully!"):alert("\u2717 Failed to save configuration: "+(t.error||"Unknown error")),this.emit("render")}catch(t){this.state.ovms.isLoading=!1,alert("\u2717 Failed to save configuration: "+t.message),this.emit("render")}}render(t){switch(t){case"config":return this.renderConfig();case"metrics":return this.renderMetrics();case"status":return this.renderStatus();default:return this.renderConfig()}}};export{o as default};

