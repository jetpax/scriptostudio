// === EXTENSION_BUNDLE ===
// Generated by bundle_extensions.js
// Do not edit - regenerated on each build
// BUILD_ID: 2026-02-04T05-49-10

console.log('%c[DBE] BUILD 2026-02-04T05-49-10', 'color: #ff8c00; font-weight: bold');

export const __EXTENSION_META__ = {
  "name": "DBE",
  "id": "dbe",
  "version": [
    0,
    2,
    2
  ],
  "author": "JetPax",
  "description": "Dala The Great's Battery Emulator - CAN-to-RS485 bridge for battery management systems. Bridges EV battery packs to solar inverters.",
  "icon": "battery-charging",
  "iconSvg": "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-battery-charging\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16 7h1a2 2 0 0 1 2 2v.5a.5 .5 0 0 0 .5 .5a.5 .5 0 0 1 .5 .5v3a.5 .5 0 0 1 -.5 .5a.5 .5 0 0 0 -.5 .5v.5a2 2 0 0 1 -2 2h-2\" /><path d=\"M8 7h-2a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h1\" /><path d=\"M12 8l-2 4h3l-2 4\" /></svg>",
  "menu": [
    {
      "id": "config",
      "label": "Configuration"
    },
    {
      "id": "status",
      "label": "Status"
    },
    {
      "id": "metrics",
      "label": "Metrics"
    },
    {
      "id": "mqtt",
      "label": "MQTT"
    }
  ],
  "styles": ".dbe-section h3 { font-size: 18px; font-weight: 600; color: var(--scheme-primary); margin-bottom: 12px; } .dbe-field { display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; } .dbe-field label { font-size: 14px; font-weight: 600; color: var(--text-primary); } .dbe-field input, .dbe-field select { padding: 10px 12px; border: 2px solid var(--border-color); border-radius: 6px; background: var(--input-bg); color: var(--text-primary); font-size: 14px; } .dbe-field input:focus, .dbe-field select:focus { outline: none; border-color: var(--scheme-primary); box-shadow: 0 0 0 3px var(--scheme-primary-light); opacity: 0.2; } .dbe-button { text-transform: uppercase; letter-spacing: 0.5px; width: auto; padding: 10px 20px; border: none; border-radius: 6px; background: var(--scheme-primary); color: white; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; } .dbe-button:hover:not(:disabled) { background: var(--scheme-primary-dark); transform: translateY(-1px); } .dbe-button:disabled { opacity: 0.5; cursor: not-allowed; } .dbe-button.secondary { background: var(--button-bg); color: var(--text-primary); border: 1px solid var(--border-color); } .dbe-button.secondary:hover:not(:disabled) { background: var(--button-hover); } .dbe-button.start { background: #4caf50; color: white; } .dbe-button.start:hover:not(:disabled) { background: #45a049; } .dbe-button.stop { background: #f44336; color: white; } .dbe-button.stop:hover:not(:disabled) { background: #da190b; } .dbe-metrics-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; padding: 20px; } .dbe-metric-card { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; } .dbe-metric-name { font-weight: 600; color: var(--scheme-primary); font-size: 13px; margin-bottom: 8px; } .dbe-metric-value { font-size: 24px; font-weight: 700; font-family: 'Menlo', Monaco, 'Courier New', monospace; color: var(--text-primary); } .dbe-metric-unit { font-size: 12px; color: var(--text-secondary); margin-top: 4px; } .dbe-status-panel { padding: 20px; } .dbe-status-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border-color); } .dbe-status-item:last-child { border-bottom: none; } .dbe-status-label { font-weight: 600; color: var(--text-primary); } .dbe-status-value { color: var(--text-secondary); } .dbe-status-value.running { color: #4caf50; font-weight: 600; } .dbe-status-value.error { color: #f44336; font-weight: 600; } .dbe-soc-gauge { width: 100%; height: 40px; background: var(--bg-tertiary); border: 2px solid var(--border-color); border-radius: 20px; overflow: hidden; position: relative; margin: 16px 0; } .dbe-soc-fill { height: 100%; background: linear-gradient(90deg, #4caf50, var(--scheme-primary)); transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; } .dbe-alarm-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin: 4px; } .dbe-alarm-badge.warning { background: #ff9800; color: white; } .dbe-alarm-badge.error { background: #f44336; color: white; }",
  "devicePaths": {
    "lib/DBE/__init__.py": "/lib/ext/dbe/__init__.py",
    "lib/DBE/DBE_helpers.py": "/lib/ext/dbe/DBE_helpers.py",
    "lib/DBE/mqtt_client.py": "/lib/ext/dbe/mqtt_client.py",
    "lib/DBE/mqtt_commands.py": "/lib/ext/dbe/mqtt_commands.py",
    "lib/DBE/mqtt_ha_discovery.py": "/lib/ext/dbe/mqtt_ha_discovery.py",
    "lib/DBE/mqtt_publisher.py": "/lib/ext/dbe/mqtt_publisher.py",
    "lib/DBE/battery/__init__.py": "/lib/ext/dbe/battery/__init__.py",
    "lib/DBE/battery/battery_base.py": "/lib/ext/dbe/battery/battery_base.py",
    "lib/DBE/battery/nissan_leaf.py": "/lib/ext/dbe/battery/nissan_leaf.py",
    "lib/DBE/charger/__init__.py": "/lib/ext/dbe/charger/__init__.py",
    "lib/DBE/inverter/__init__.py": "/lib/ext/dbe/inverter/__init__.py",
    "lib/DBE/inverter/inverter_base.py": "/lib/ext/dbe/inverter/inverter_base.py",
    "lib/DBE/inverter/pylon_can.py": "/lib/ext/dbe/inverter/pylon_can.py"
  }
};

export const __DEVICE_FILES__ = {
  "/lib/ext/dbe/__init__.py": "IiIiCkRCRSAoRGFsYSBUaGUgR3JlYXQncyBCYXR0ZXJ5IEVtdWxhdG9yKSBNb2R1bGUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgQmF0dGVyeSBFbXVsYXRvciBmb3IgU2NyaXB0byBTdHVkaW8uCgpQcm92aWRlcyBiaWRpcmVjdGlvbmFsIENBTi10by1SUzQ4NSBicmlkZ2UgZm9yIGJhdHRlcnkgbWFuYWdlbWVudCBzeXN0ZW1zLgoiIiIKCl9fdmVyc2lvbl9fID0gJzAuMS4wJwo=",
  "/lib/ext/dbe/DBE_helpers.py": "IiIiCkRCRSBIZWxwZXIgRnVuY3Rpb25zCj09PT09PT09PT09PT09PT09PT09CgpNYWluIGNvbnRyb2wgZnVuY3Rpb25zIGZvciBEQkUgKERhbGEgVGhlIEdyZWF0J3MgQmF0dGVyeSBFbXVsYXRvcikgZXh0ZW5zaW9uLgoKQ2xpZW50LWNhbGxhYmxlIGZ1bmN0aW9uczoKLSBnZXREQkVDb25maWcoKSAgICAgICAgICAtIEdldCBjdXJyZW50IGNvbmZpZ3VyYXRpb24KLSBzZXREQkVDb25maWcoY29uZmlnKSAgICAtIFNldCBjb25maWd1cmF0aW9uCi0gc3RhcnREQkUoKSAgICAgICAgICAgICAgLSBTdGFydCBDQU4tdG8tUlM0ODUgYnJpZGdlCi0gc3RvcERCRSgpICAgICAgICAgICAgICAgLSBTdG9wIGJyaWRnZQotIGdldERCRVN0YXR1cygpICAgICAgICAgIC0gR2V0IGNvbm5lY3Rpb24gc3RhdHVzCi0gZ2V0REJFTWV0cmljcygpICAgICAgICAgLSBHZXQgY3VycmVudCBiYXR0ZXJ5IG1ldHJpY3MKLSBnZXRNcXR0Q29uZmlnKCkgICAgICAgICAtIEdldCBNUVRUIGNvbmZpZ3VyYXRpb24KLSBzZXRNcXR0Q29uZmlnKGNvbmZpZykgICAtIFNldCBNUVRUIGNvbmZpZ3VyYXRpb24KLSBnZXRNcXR0U3RhdHVzKCkgICAgICAgICAtIEdldCBNUVRUIGNvbm5lY3Rpb24gc3RhdHVzCi0gdGVzdE1xdHQoKSAgICAgICAgICAgICAgLSBUZXN0IE1RVFQgY29ubmVjdGlvbgoiIiIKCmltcG9ydCBqc29uCmltcG9ydCB0aW1lCmltcG9ydCBDQU4KZnJvbSBsaWIuc3lzIGltcG9ydCBzZXR0aW5ncwoKIyBHbG9iYWwgc3RhdGUKX2RiZV9ydW5uaW5nID0gRmFsc2UKX2RiZV9wYXVzZWQgPSBGYWxzZQpfZGJlX2Nhbl9oYW5kbGUgPSBOb25lCl9kYmVfYmF0dGVyeSA9IE5vbmUKX2RiZV9pbnZlcnRlciA9IE5vbmUKX2RiZV9sb29wX3Rhc2sgPSBOb25lCl9kYmVfc3RhdHVzID0gewogICAgJ3N0YXRlJzogJ3N0b3BwZWQnLAogICAgJ3J1bm5pbmcnOiBGYWxzZSwKICAgICdwYXVzZWQnOiBGYWxzZSwKICAgICdlcnJvcic6ICcnLAogICAgJ2JhdHRlcnlfdHlwZSc6ICcnLAogICAgJ2ludmVydGVyX3Byb3RvY29sJzogJycsCiAgICAnZnJhbWVzX3J4JzogMCwKICAgICdmcmFtZXNfdHgnOiAwLAogICAgJ2xhc3RfdXBkYXRlX21zJzogMAp9CgojIE1RVFQgc3RhdGUKX21xdHRfZW5hYmxlZCA9IEZhbHNlCl9tcXR0X2xhc3RfcHVibGlzaF9tcyA9IDAKX21xdHRfcHVibGlzaF9pbnRlcnZhbF9tcyA9IDUwMDAKX21xdHRfcmVjb25uZWN0X2xhc3RfYXR0ZW1wdF9tcyA9IDAKX21xdHRfcmVjb25uZWN0X2ludGVydmFsX21zID0gNTAwMAoKCmRlZiBnZXREQkVDb25maWcoKToKICAgICIiIkdldCBjdXJyZW50IERCRSBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIGNvbmZpZ3VyYXRpb24KICAgICIiIgogICAgY29uZmlnID0gewogICAgICAgICdlbmFibGVkJzogc2V0dGluZ3MuZ2V0KCdkYmUuZW5hYmxlZCcsIEZhbHNlKSwKICAgICAgICAnYmF0dGVyeV90eXBlJzogc2V0dGluZ3MuZ2V0KCdkYmUuYmF0dGVyeV90eXBlJywgJ25pc3Nhbl9sZWFmJyksCiAgICAgICAgJ3JzNDg1X2JhdWRyYXRlJzogc2V0dGluZ3MuZ2V0KCdkYmUucnM0ODVfYmF1ZHJhdGUnLCA5NjAwKSwKICAgICAgICAnaW52ZXJ0ZXJfcHJvdG9jb2wnOiBzZXR0aW5ncy5nZXQoJ2RiZS5pbnZlcnRlcl9wcm90b2NvbCcsICdweWxvbl9jYW4nKSwKICAgICAgICAncG9sbF9pbnRlcnZhbCc6IHNldHRpbmdzLmdldCgnZGJlLnBvbGxfaW50ZXJ2YWwnLCAxMDAwKSwKICAgICAgICAnYXZhaWxhYmxlX2JhdHRlcmllcyc6IHsKICAgICAgICAgICAgJ25pc3Nhbl9sZWFmJzogJ05pc3NhbiBMRUFGIChaRTAvQVpFMC9aRTEpJywKICAgICAgICAgICAgIyBGdXR1cmUgYmF0dGVyaWVzIHdpbGwgYmUgYWRkZWQgaGVyZQogICAgICAgIH0sCiAgICAgICAgJ2F2YWlsYWJsZV9pbnZlcnRlcnMnOiB7CiAgICAgICAgICAgICdweWxvbl9jYW4nOiAnUHlsb24gQ0FOIFByb3RvY29sJywKICAgICAgICAgICAgIyBGdXR1cmUgaW52ZXJ0ZXIgcHJvdG9jb2xzIHdpbGwgYmUgYWRkZWQgaGVyZQogICAgICAgIH0KICAgIH0KICAgIHByaW50KGpzb24uZHVtcHMoY29uZmlnKSkKCgpkZWYgc2V0REJFQ29uZmlnKGNvbmZpZ19kaWN0KToKICAgICIiIlNldCBEQkUgY29uZmlndXJhdGlvbiB2aWEgc2V0dGluZ3MgbW9kdWxlCiAgICAKICAgIEFyZ3M6CiAgICAgICAgY29uZmlnX2RpY3Q6IERpY3Rpb25hcnkgd2l0aCBjb25maWd1cmF0aW9uIHZhbHVlcwogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggc3VjY2VzcyBzdGF0dXMKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgVXBkYXRlIHNldHRpbmdzCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gY29uZmlnX2RpY3QuaXRlbXMoKToKICAgICAgICAgICAgc2V0dGluZ3Muc2V0KGYnZGJlLntrZXl9JywgdmFsdWUpCiAgICAgICAgCiAgICAgICAgIyBTYXZlIHRvIGRpc2sKICAgICAgICBpZiBzZXR0aW5ncy5zYXZlKCk6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogVHJ1ZX0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyd9KSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KSkKCgpkZWYgc3RhcnREQkUoKToKICAgICIiIlN0YXJ0IERCRSBicmlkZ2UgdXNpbmcgQ0FOIG1hbmFnZXIKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIHN1Y2Nlc3Mgc3RhdHVzCiAgICAiIiIKICAgIGdsb2JhbCBfZGJlX3J1bm5pbmcsIF9kYmVfY2FuX2hhbmRsZSwgX2RiZV9iYXR0ZXJ5LCBfZGJlX2ludmVydGVyLCBfZGJlX2xvb3BfdGFzaywgX2RiZV9zdGF0dXMKICAgIAogICAgaWYgX2RiZV9ydW5uaW5nOgogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdBbHJlYWR5IHJ1bm5pbmcnfSkpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHRyeToKICAgICAgICAjIEdldCBjb25maWd1cmF0aW9uCiAgICAgICAgYmF0dGVyeV90eXBlID0gc2V0dGluZ3MuZ2V0KCdkYmUuYmF0dGVyeV90eXBlJywgJ25pc3Nhbl9sZWFmJykKICAgICAgICBpbnZlcnRlcl9wcm90b2NvbCA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX3Byb3RvY29sJywgJ3B5bG9uX2NhbicpCiAgICAgICAgCiAgICAgICAgIyA9PT0gQ0FOIE1hbmFnZXIgSW50ZWdyYXRpb24gPT09CiAgICAgICAgCiAgICAgICAgIyBTdGFnZSAxOiBSZWdpc3RlciB3aXRoIENBTiBtYW5hZ2VyIChidXMgc3RheXMgU1RPUFBFRCkKICAgICAgICBfZGJlX2Nhbl9oYW5kbGUgPSBDQU4ucmVnaXN0ZXIoQ0FOLlRYX0VOQUJMRUQpCiAgICAgICAgCiAgICAgICAgIyBJbml0aWFsaXplIGJhdHRlcnkgcHJvdG9jb2wKICAgICAgICBpZiBiYXR0ZXJ5X3R5cGUgPT0gJ25pc3Nhbl9sZWFmJzoKICAgICAgICAgICAgZnJvbSBsaWIuZXh0LmRiZS5iYXR0ZXJ5Lm5pc3Nhbl9sZWFmIGltcG9ydCBOaXNzYW5MZWFmQmF0dGVyeQogICAgICAgICAgICBfZGJlX2JhdHRlcnkgPSBOaXNzYW5MZWFmQmF0dGVyeShfZGJlX2Nhbl9oYW5kbGUpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlVuc3VwcG9ydGVkIGJhdHRlcnkgdHlwZToge2JhdHRlcnlfdHlwZX0iKQogICAgICAgIAogICAgICAgIF9kYmVfYmF0dGVyeS5zZXR1cCgpCiAgICAgICAgCiAgICAgICAgIyBTZXQgUlggY2FsbGJhY2sgZm9yIGJhdHRlcnkgZnJhbWVzCiAgICAgICAgZGVmIGJhdHRlcnlfcnhfY2FsbGJhY2soZnJhbWUpOgogICAgICAgICAgICAiIiJDQU4gbWFuYWdlciBSWCBjYWxsYmFjayAtIGRpc3BhdGNoZXMgdG8gYmF0dGVyeSBwcm90b2NvbCIiIgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjYW5faWQgPSBmcmFtZVsnaWQnXQogICAgICAgICAgICAgICAgZGF0YSA9IGZyYW1lWydkYXRhJ10KICAgICAgICAgICAgICAgIF9kYmVfYmF0dGVyeS5oYW5kbGVfaW5jb21pbmdfY2FuX2ZyYW1lKGNhbl9pZCwgZGF0YSkKICAgICAgICAgICAgICAgIF9kYmVfc3RhdHVzWydmcmFtZXNfcngnXSArPSAxCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIF9kYmVfc3RhdHVzWydlcnJvciddID0gZiJSWCBlcnJvcjoge2V9IgogICAgICAgIAogICAgICAgIENBTi5zZXRfcnhfY2FsbGJhY2soX2RiZV9jYW5faGFuZGxlLCBiYXR0ZXJ5X3J4X2NhbGxiYWNrKQogICAgICAgIAogICAgICAgICMgU3RhZ2UgMjogQWN0aXZhdGUgY2xpZW50IChidXMgc3RhcnRzIGluIE5PUk1BTCBtb2RlKQogICAgICAgIENBTi5hY3RpdmF0ZShfZGJlX2Nhbl9oYW5kbGUpCiAgICAgICAgCiAgICAgICAgIyBJbml0aWFsaXplIGludmVydGVyIHByb3RvY29sCiAgICAgICAgaWYgaW52ZXJ0ZXJfcHJvdG9jb2wgPT0gJ3B5bG9uX2Nhbic6CiAgICAgICAgICAgIGZyb20gbGliLmV4dC5kYmUuaW52ZXJ0ZXIucHlsb25fY2FuIGltcG9ydCBQeWxvbkNBTlByb3RvY29sCiAgICAgICAgICAgIF9kYmVfaW52ZXJ0ZXIgPSBQeWxvbkNBTlByb3RvY29sKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5zdXBwb3J0ZWQgaW52ZXJ0ZXIgcHJvdG9jb2w6IHtpbnZlcnRlcl9wcm90b2NvbH0iKQogICAgICAgIAogICAgICAgICMgVXBkYXRlIHN0YXR1cwogICAgICAgIF9kYmVfc3RhdHVzWydzdGF0ZSddID0gJ3J1bm5pbmcnCiAgICAgICAgX2RiZV9zdGF0dXNbJ3J1bm5pbmcnXSA9IFRydWUKICAgICAgICBfZGJlX3N0YXR1c1snYmF0dGVyeV90eXBlJ10gPSBiYXR0ZXJ5X3R5cGUKICAgICAgICBfZGJlX3N0YXR1c1snaW52ZXJ0ZXJfcHJvdG9jb2wnXSA9IGludmVydGVyX3Byb3RvY29sCiAgICAgICAgX2RiZV9zdGF0dXNbJ2Vycm9yJ10gPSAnJwogICAgICAgIAogICAgICAgICMgSW5pdGlhbGl6ZSBNUVRUIGNvbW1hbmQgaGFuZGxlcnMKICAgICAgICBfaW5pdF9tcXR0X2NvbW1hbmRzKCkKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgTVFUVCBpZiBlbmFibGVkCiAgICAgICAgZ2xvYmFsIF9tcXR0X2VuYWJsZWQsIF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXMKICAgICAgICBfbXF0dF9lbmFibGVkID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9lbmFibGVkJywgRmFsc2UpCiAgICAgICAgX21xdHRfcHVibGlzaF9pbnRlcnZhbF9tcyA9IHNldHRpbmdzLmdldCgnZGJlLm1xdHRfcHVibGlzaF9pbnRlcnZhbCcsIDUpICogMTAwMAogICAgICAgIAogICAgICAgIGlmIF9tcXR0X2VuYWJsZWQ6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gbGliLmV4dC5kYmUgaW1wb3J0IG1xdHRfY2xpZW50LCBtcXR0X2NvbW1hbmRzLCBtcXR0X2hhX2Rpc2NvdmVyeQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBtcXR0X2NsaWVudC5pbml0X21xdHQoKToKICAgICAgICAgICAgICAgICAgICBpZiBtcXR0X2NsaWVudC5jb25uZWN0KCk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbREJFXSBNUVRUIGNvbm5lY3RlZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFN1YnNjcmliZSB0byBjb21tYW5kcwogICAgICAgICAgICAgICAgICAgICAgICBtcXR0X2NvbW1hbmRzLnN1YnNjcmliZV90b19jb21tYW5kcygpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFB1Ymxpc2ggSG9tZSBBc3Npc3RhbnQgZGlzY292ZXJ5IChpZiBlbmFibGVkKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X2hhX2F1dG9kaXNjb3ZlcnknLCBUcnVlKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jZWxscyA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9kYmVfYmF0dGVyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5X2RhdGEgPSBfZGJlX2JhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxfdm9sdGFnZXMgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX3ZvbHRhZ2VzX21WJywgW10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtX2NlbGxzID0gbGVuKGNlbGxfdm9sdGFnZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1xdHRfaGFfZGlzY292ZXJ5LnB1Ymxpc2hfZGlzY292ZXJ5KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jZWxscz1udW1fY2VsbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzPXNldHRpbmdzLmdldCgnZGJlLm1xdHRfcHVibGlzaF9jZWxsX3ZvbHRhZ2VzJywgVHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0RCRV0gTVFUVCBjb25uZWN0aW9uIGZhaWxlZCwgd2lsbCByZXRyeSBpbiBiYWNrZ3JvdW5kIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltEQkVdIE1RVFQgaW5pdGlhbGl6YXRpb24gZmFpbGVkIikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJbREJFXSBNUVRUIHNldHVwIGVycm9yOiB7ZX0iKQogICAgICAgIAogICAgICAgICMgU3RhcnQgYmFja2dyb3VuZCBsb29wCiAgICAgICAgX2RiZV9ydW5uaW5nID0gVHJ1ZQogICAgICAgIGltcG9ydCBfdGhyZWFkCiAgICAgICAgX2RiZV9sb29wX3Rhc2sgPSBfdGhyZWFkLnN0YXJ0X25ld190aHJlYWQoX2RiZV9sb29wLCAoKSkKICAgICAgICAKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWUsICdzdGF0dXMnOiAnc3RhcnRlZCd9KSkKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIENsZWFudXAgb24gZXJyb3IKICAgICAgICBfZGJlX3N0YXR1c1snc3RhdGUnXSA9ICdlcnJvcicKICAgICAgICBfZGJlX3N0YXR1c1snZXJyb3InXSA9IHN0cihlKQogICAgICAgIF9kYmVfcnVubmluZyA9IEZhbHNlCiAgICAgICAgCiAgICAgICAgaWYgX2RiZV9jYW5faGFuZGxlIGlzIG5vdCBOb25lOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBDQU4uZGVhY3RpdmF0ZShfZGJlX2Nhbl9oYW5kbGUpCiAgICAgICAgICAgICAgICBDQU4udW5yZWdpc3RlcihfZGJlX2Nhbl9oYW5kbGUpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgX2RiZV9jYW5faGFuZGxlID0gTm9uZQogICAgICAgIAogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6IHN0cihlKX0pKQoKCmRlZiBfZGJlX2xvb3AoKToKICAgICIiIk1haW4gcHJvY2Vzc2luZyBsb29wIChydW5zIGluIGJhY2tncm91bmQgdGhyZWFkKQogICAgCiAgICBCSURJUkVDVElPTkFMIEJSSURHRToKICAgIC0gQmF0dGVyeSDihpIgSW52ZXJ0ZXI6IEZvcndhcmQgYmF0dGVyeSBkYXRhICh2b2x0YWdlLCBTT0MsIGxpbWl0cywgYWxhcm1zKQogICAgLSBJbnZlcnRlciDihpIgQmF0dGVyeTogRm9yd2FyZCBjb250cm9sIG1lc3NhZ2VzIChlbmFibGUgY2hhcmdlL2Rpc2NoYXJnZSwgbGltaXRzKQogICAgLSBNUVRUOiBQdWJsaXNoIHRlbGVtZXRyeSBhbmQgaGFuZGxlIGNvbW1hbmRzCiAgICAKICAgIE5PVEU6IENBTiBSWCBoYW5kbGVkIGJ5IENBTiBtYW5hZ2VyIGNhbGxiYWNrIChiYXR0ZXJ5X3J4X2NhbGxiYWNrKQogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9ydW5uaW5nLCBfZGJlX3BhdXNlZCwgX2RiZV9iYXR0ZXJ5LCBfZGJlX2ludmVydGVyLCBfZGJlX2Nhbl9oYW5kbGUsIF9kYmVfc3RhdHVzCiAgICBnbG9iYWwgX21xdHRfZW5hYmxlZCwgX21xdHRfbGFzdF9wdWJsaXNoX21zLCBfbXF0dF9wdWJsaXNoX2ludGVydmFsX21zCiAgICBnbG9iYWwgX21xdHRfcmVjb25uZWN0X2xhc3RfYXR0ZW1wdF9tcywgX21xdHRfcmVjb25uZWN0X2ludGVydmFsX21zCiAgICAKICAgIHdoaWxlIF9kYmVfcnVubmluZzoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGN1cnJlbnRfdGltZV9tcyA9IHRpbWUudGlja3NfbXMoKQogICAgICAgICAgICAKICAgICAgICAgICAgIyA9PT0gTVFUVCBDb25uZWN0aW9uIE1hbmFnZW1lbnQgPT09CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBfbXF0dF9lbmFibGVkOgogICAgICAgICAgICAgICAgZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9jbGllbnQKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBDaGVjayBpZiBjb25uZWN0ZWQsIGF0dGVtcHQgcmVjb25uZWN0IGlmIG5lZWRlZAogICAgICAgICAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50LmlzX2Nvbm5lY3RlZCgpOgogICAgICAgICAgICAgICAgICAgICMgT25seSBhdHRlbXB0IHJlY29ubmVjdCBldmVyeSA1IHNlY29uZHMKICAgICAgICAgICAgICAgICAgICBpZiB0aW1lLnRpY2tzX2RpZmYoY3VycmVudF90aW1lX21zLCBfbXF0dF9yZWNvbm5lY3RfbGFzdF9hdHRlbXB0X21zKSA+IF9tcXR0X3JlY29ubmVjdF9pbnRlcnZhbF9tczoKICAgICAgICAgICAgICAgICAgICAgICAgX21xdHRfcmVjb25uZWN0X2xhc3RfYXR0ZW1wdF9tcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICAgICAgICAgICAgICBtcXR0X2NsaWVudC5jb25uZWN0KCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBDaGVjayBmb3IgaW5jb21pbmcgTVFUVCBjb21tYW5kcyAobm9uLWJsb2NraW5nKQogICAgICAgICAgICAgICAgICAgIG1xdHRfY2xpZW50LmNoZWNrX21zZygpCiAgICAgICAgICAgIAogICAgICAgICAgICAjID09PSBCYXR0ZXJ5IOKGkiBJbnZlcnRlciBQYXRoID09PQogICAgICAgICAgICAKICAgICAgICAgICAgIyAxLiBDQU4gUlggaGFuZGxlZCBieSBDQU4gbWFuYWdlciBjYWxsYmFjayAobm8gcG9sbGluZyBuZWVkZWQhKQogICAgICAgICAgICAKICAgICAgICAgICAgIyAyLiBTZW5kIGtlZXAtYWxpdmUgdG8gYmF0dGVyeSAoaWYgbmVlZGVkIGJ5IHByb3RvY29sIGFuZCBub3QgcGF1c2VkKQogICAgICAgICAgICAjICAgIEJhdHRlcnkgcHJvdG9jb2wgdXNlcyBDQU4udHJhbnNtaXQoaGFuZGxlLCBmcmFtZV9kaWN0KQogICAgICAgICAgICBpZiBub3QgX2RiZV9wYXVzZWQ6CiAgICAgICAgICAgICAgICBfZGJlX2JhdHRlcnkudHJhbnNtaXRfY2FuKGN1cnJlbnRfdGltZV9tcykKICAgICAgICAgICAgCiAgICAgICAgICAgICMgMy4gVXBkYXRlIGRlcml2ZWQgdmFsdWVzIChwb3dlciwgZXRjLikKICAgICAgICAgICAgX2RiZV9iYXR0ZXJ5LnVwZGF0ZV92YWx1ZXMoKQogICAgICAgICAgICAKICAgICAgICAgICAgIyA0LiBGb3J3YXJkIGJhdHRlcnkgZGF0YSB0byBpbnZlcnRlciB2aWEgUlM0ODUgKGlmIG5vdCBwYXVzZWQpCiAgICAgICAgICAgIGJhdHRlcnlfZGF0YSA9IF9kYmVfYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAgICAgICAgIGlmIG5vdCBfZGJlX3BhdXNlZDoKICAgICAgICAgICAgICAgIF9kYmVfaW52ZXJ0ZXIudHJhbnNtaXQoYmF0dGVyeV9kYXRhLCBjdXJyZW50X3RpbWVfbXMpCiAgICAgICAgICAgIAogICAgICAgICAgICAjID09PSBJbnZlcnRlciDihpIgQmF0dGVyeSBQYXRoID09PQogICAgICAgICAgICAKICAgICAgICAgICAgIyA1LiBDaGVjayBmb3IgaW5jb21pbmcgUlM0ODUgbWVzc2FnZXMgZnJvbSBpbnZlcnRlciAoaWYgbm90IHBhdXNlZCkKICAgICAgICAgICAgaWYgbm90IF9kYmVfcGF1c2VkOgogICAgICAgICAgICAgICAgaW52ZXJ0ZXJfY29tbWFuZHMgPSBfZGJlX2ludmVydGVyLnJlY2VpdmUoKQogICAgICAgICAgICAgICAgaWYgaW52ZXJ0ZXJfY29tbWFuZHM6CiAgICAgICAgICAgICAgICAgICAgIyBGb3J3YXJkIGNvbnRyb2wgbWVzc2FnZXMgdG8gYmF0dGVyeSAoaWYgc3VwcG9ydGVkKQogICAgICAgICAgICAgICAgICAgIF9kYmVfYmF0dGVyeS5oYW5kbGVfaW52ZXJ0ZXJfY29tbWFuZHMoaW52ZXJ0ZXJfY29tbWFuZHMpCiAgICAgICAgICAgIAogICAgICAgICAgICAjID09PSBNUVRUIFB1Ymxpc2hpbmcgPT09CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBfbXF0dF9lbmFibGVkIGFuZCBtcXR0X2NsaWVudC5pc19jb25uZWN0ZWQoKToKICAgICAgICAgICAgICAgICMgUHVibGlzaCB0ZWxlbWV0cnkgYXQgY29uZmlndXJlZCBpbnRlcnZhbAogICAgICAgICAgICAgICAgaWYgdGltZS50aWNrc19kaWZmKGN1cnJlbnRfdGltZV9tcywgX21xdHRfbGFzdF9wdWJsaXNoX21zKSA+IF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXM6CiAgICAgICAgICAgICAgICAgICAgZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9wdWJsaXNoZXIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjIEdldCBwdWJsaXNoIHNldHRpbmdzCiAgICAgICAgICAgICAgICAgICAgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2NlbGxfdm9sdGFnZXMnLCBUcnVlKQogICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hfYmFsYW5jaW5nID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2JhbGFuY2luZycsIFRydWUpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBQdWJsaXNoIGFsbCBkYXRhCiAgICAgICAgICAgICAgICAgICAgbXF0dF9wdWJsaXNoZXIucHVibGlzaF9hbGwoYmF0dGVyeV9kYXRhLCBwdWJsaXNoX2NlbGxfdm9sdGFnZXMsIHB1Ymxpc2hfYmFsYW5jaW5nKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIF9tcXR0X2xhc3RfcHVibGlzaF9tcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICAKICAgICAgICAgICAgIyBVcGRhdGUgc3RhdHVzCiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydsYXN0X3VwZGF0ZV9tcyddID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydwYXVzZWQnXSA9IF9kYmVfcGF1c2VkCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFNsZWVwIHRvIGF2b2lkIGJ1c3ktd2FpdAogICAgICAgICAgICB0aW1lLnNsZWVwX21zKDEwKQogICAgICAgICAgICAKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydlcnJvciddID0gZiJMb29wIGVycm9yOiB7ZX0iCiAgICAgICAgICAgICMgQ29udGludWUgcnVubmluZyBkZXNwaXRlIGVycm9ycwoKCmRlZiBzdG9wREJFKCk6CiAgICAiIiJTdG9wIERCRSBicmlkZ2UgYW5kIGNsZWFuIHVwIENBTiBtYW5hZ2VyIHJlZ2lzdHJhdGlvbgogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggc3VjY2VzcyBzdGF0dXMKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfcnVubmluZywgX2RiZV9jYW5faGFuZGxlLCBfZGJlX2JhdHRlcnksIF9kYmVfaW52ZXJ0ZXIsIF9kYmVfbG9vcF90YXNrLCBfZGJlX3N0YXR1cwogICAgZ2xvYmFsIF9tcXR0X2VuYWJsZWQKICAgIAogICAgdHJ5OgogICAgICAgICMgU3RvcCBiYWNrZ3JvdW5kIGxvb3AKICAgICAgICBpZiBfZGJlX2xvb3BfdGFzazoKICAgICAgICAgICAgX2RiZV9ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjMpICAjIEdpdmUgbG9vcCB0aW1lIHRvIGV4aXQKICAgICAgICAgICAgX2RiZV9sb29wX3Rhc2sgPSBOb25lCiAgICAgICAgCiAgICAgICAgIyA9PT0gTVFUVCBDbGVhbnVwID09PQogICAgICAgIAogICAgICAgIGlmIF9tcXR0X2VuYWJsZWQ6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gbGliLmV4dC5kYmUgaW1wb3J0IG1xdHRfY2xpZW50CiAgICAgICAgICAgICAgICBtcXR0X2NsaWVudC5kaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIHByaW50KCJbREJFXSBNUVRUIGRpc2Nvbm5lY3RlZCIpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KGYiW0RCRV0gTVFUVCBkaXNjb25uZWN0IGVycm9yOiB7ZX0iKQogICAgICAgIAogICAgICAgICMgPT09IENBTiBNYW5hZ2VyIENsZWFudXAgPT09CiAgICAgICAgCiAgICAgICAgaWYgX2RiZV9jYW5faGFuZGxlIGlzIG5vdCBOb25lOgogICAgICAgICAgICAjIERlYWN0aXZhdGUgY2xpZW50IChidXMgbWF5IGdvIHRvIExJU1RFTl9PTkxZIG9yIFNUT1BQRUQpCiAgICAgICAgICAgIENBTi5kZWFjdGl2YXRlKF9kYmVfY2FuX2hhbmRsZSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVW5yZWdpc3RlciBjbGllbnQgKHJlbW92ZXMgZnJvbSBtYW5hZ2VyKQogICAgICAgICAgICBDQU4udW5yZWdpc3RlcihfZGJlX2Nhbl9oYW5kbGUpCiAgICAgICAgICAgIAogICAgICAgICAgICBfZGJlX2Nhbl9oYW5kbGUgPSBOb25lCiAgICAgICAgCiAgICAgICAgIyBDbGVhbiB1cCBiYXR0ZXJ5L2ludmVydGVyCiAgICAgICAgX2RiZV9iYXR0ZXJ5ID0gTm9uZQogICAgICAgIF9kYmVfaW52ZXJ0ZXIgPSBOb25lCiAgICAgICAgCiAgICAgICAgIyBVcGRhdGUgc3RhdHVzCiAgICAgICAgX2RiZV9zdGF0dXNbJ3N0YXRlJ10gPSAnc3RvcHBlZCcKICAgICAgICBfZGJlX3N0YXR1c1sncnVubmluZyddID0gRmFsc2UKICAgICAgICBfZGJlX3N0YXR1c1sncGF1c2VkJ10gPSBGYWxzZQogICAgICAgIF9kYmVfc3RhdHVzWydlcnJvciddID0gJycKICAgICAgICAKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWUsICdzdGF0dXMnOiAnc3RvcHBlZCd9KSkKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KSkKCgpkZWYgZ2V0REJFU3RhdHVzKCk6CiAgICAiIiJHZXQgREJFIGNvbm5lY3Rpb24gc3RhdHVzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBzdGF0dXMgaW5mb3JtYXRpb24KICAgICIiIgogICAgZ2xvYmFsIF9kYmVfc3RhdHVzLCBfZGJlX2JhdHRlcnkKICAgIAogICAgdHJ5OgogICAgICAgICMgQWRkIGJhdHRlcnktc3BlY2lmaWMgc3RhdHVzIGlmIGF2YWlsYWJsZQogICAgICAgIGlmIF9kYmVfYmF0dGVyeToKICAgICAgICAgICAgYmF0dGVyeV9kYXRhID0gX2RiZV9iYXR0ZXJ5LmdldF9kYXRhKCkKICAgICAgICAgICAgX2RiZV9zdGF0dXNbJ2JhdHRlcnlfdm9sdGFnZV9WJ10gPSBiYXR0ZXJ5X2RhdGEuZ2V0KCd2b2x0YWdlX2RWJywgMCkgLyAxMC4wCiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydiYXR0ZXJ5X3NvY19wZXJjZW50J10gPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdzb2NfcGVyY2VudCcsIDApCiAgICAgICAgCiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyhfZGJlX3N0YXR1cykpCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J2Vycm9yJzogc3RyKGUpfSkpCgoKZGVmIGdldERCRU1ldHJpY3MoKToKICAgICIiIkdldCBjdXJyZW50IGJhdHRlcnkgbWV0cmljcwogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggYmF0dGVyeSBkYXRhCiAgICAiIiIKICAgIGdsb2JhbCBfZGJlX2JhdHRlcnkKICAgIAogICAgdHJ5OgogICAgICAgIGlmIF9kYmVfYmF0dGVyeToKICAgICAgICAgICAgYmF0dGVyeV9kYXRhID0gX2RiZV9iYXR0ZXJ5LmdldF9kYXRhKCkKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyhiYXR0ZXJ5X2RhdGEpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydlcnJvcic6ICdCYXR0ZXJ5IG5vdCBpbml0aWFsaXplZCd9KSkKICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J2Vycm9yJzogc3RyKGUpfSkpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgTVFUVCBGdW5jdGlvbnMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpkZWYgZ2V0TXF0dENvbmZpZygpOgogICAgIiIiR2V0IE1RVFQgY29uZmlndXJhdGlvbiBmcm9tIHNldHRpbmdzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBEQkUtc3BlY2lmaWMgTVFUVCBjb25maWd1cmF0aW9uLgogICAgTm90ZTogQnJva2VyIHNldHRpbmdzIChzZXJ2ZXIsIHBvcnQsIGNyZWRlbnRpYWxzKSBhcmUgbWFuYWdlZCBnbG9iYWxseQogICAgaW4gU3lzdGVtIOKGkiBOZXR3b3JrcyDihpIgTVFUVCBwYW5lbC4KICAgICIiIgogICAgY29uZmlnID0gewogICAgICAgICdlbmFibGVkJzogc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9lbmFibGVkJywgRmFsc2UpLAogICAgICAgICd0b3BpY19wcmVmaXgnOiBzZXR0aW5ncy5nZXQoJ21xdHQudG9waWNfcHJlZml4JywgJ0JFJyksCiAgICAgICAgJ3B1Ymxpc2hfaW50ZXJ2YWwnOiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfaW50ZXJ2YWwnLCA1KSwKICAgICAgICAncHVibGlzaF9jZWxsX3ZvbHRhZ2VzJzogc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2NlbGxfdm9sdGFnZXMnLCBUcnVlKSwKICAgICAgICAncHVibGlzaF9iYWxhbmNpbmcnOiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfYmFsYW5jaW5nJywgVHJ1ZSksCiAgICAgICAgJ2hhX2F1dG9kaXNjb3ZlcnknOiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X2hhX2F1dG9kaXNjb3ZlcnknLCBUcnVlKQogICAgfQogICAgcHJpbnQoanNvbi5kdW1wcyhjb25maWcpKQoKCmRlZiBzZXRNcXR0Q29uZmlnKGNvbmZpZ19kaWN0KToKICAgICIiIlNldCBNUVRUIGNvbmZpZ3VyYXRpb24gdmlhIHNldHRpbmdzIG1vZHVsZQogICAgCiAgICBBcmdzOgogICAgICAgIGNvbmZpZ19kaWN0OiBEaWN0aW9uYXJ5IHdpdGggREJFLXNwZWNpZmljIGNvbmZpZ3VyYXRpb24gdmFsdWVzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBzdWNjZXNzIHN0YXR1cwogICAgCiAgICBOb3RlOiBCcm9rZXIgc2V0dGluZ3MgKHNlcnZlciwgcG9ydCwgY3JlZGVudGlhbHMpIGFyZSBtYW5hZ2VkIGdsb2JhbGx5CiAgICBpbiBTeXN0ZW0g4oaSIE5ldHdvcmtzIOKGkiBNUVRUIHBhbmVsIGFuZCBzaG91bGQgbm90IGJlIHNldCBoZXJlLgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBVcGRhdGUgREJFIE1RVFQgc2V0dGluZ3MKICAgICAgICBpZiAnZW5hYmxlZCcgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIHNldHRpbmdzLnNldCgnZGJlLm1xdHRfZW5hYmxlZCcsIGNvbmZpZ19kaWN0WydlbmFibGVkJ10pCiAgICAgICAgaWYgJ3B1Ymxpc2hfaW50ZXJ2YWwnIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfaW50ZXJ2YWwnLCBjb25maWdfZGljdFsncHVibGlzaF9pbnRlcnZhbCddKQogICAgICAgIGlmICdwdWJsaXNoX2NlbGxfdm9sdGFnZXMnIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfY2VsbF92b2x0YWdlcycsIGNvbmZpZ19kaWN0WydwdWJsaXNoX2NlbGxfdm9sdGFnZXMnXSkKICAgICAgICBpZiAncHVibGlzaF9iYWxhbmNpbmcnIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfYmFsYW5jaW5nJywgY29uZmlnX2RpY3RbJ3B1Ymxpc2hfYmFsYW5jaW5nJ10pCiAgICAgICAgaWYgJ2hhX2F1dG9kaXNjb3ZlcnknIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ2RiZS5tcXR0X2hhX2F1dG9kaXNjb3ZlcnknLCBjb25maWdfZGljdFsnaGFfYXV0b2Rpc2NvdmVyeSddKQogICAgICAgIAogICAgICAgICMgVXBkYXRlIHRvcGljIHByZWZpeCAoc2hhcmVkIHNldHRpbmcsIGJ1dCBjb25maWd1cmFibGUgcGVyIGV4dGVuc2lvbikKICAgICAgICBpZiAndG9waWNfcHJlZml4JyBpbiBjb25maWdfZGljdDoKICAgICAgICAgICAgc2V0dGluZ3Muc2V0KCdtcXR0LnRvcGljX3ByZWZpeCcsIGNvbmZpZ19kaWN0Wyd0b3BpY19wcmVmaXgnXSkKICAgICAgICAKICAgICAgICAjIFNhdmUgdG8gZGlzawogICAgICAgIGlmIHNldHRpbmdzLnNhdmUoKToKICAgICAgICAgICAgIyBVcGRhdGUgcnVudGltZSB2YXJpYWJsZXMKICAgICAgICAgICAgZ2xvYmFsIF9tcXR0X2VuYWJsZWQsIF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXMKICAgICAgICAgICAgX21xdHRfZW5hYmxlZCA9IGNvbmZpZ19kaWN0LmdldCgnZW5hYmxlZCcsIEZhbHNlKQogICAgICAgICAgICBfbXF0dF9wdWJsaXNoX2ludGVydmFsX21zID0gY29uZmlnX2RpY3QuZ2V0KCdwdWJsaXNoX2ludGVydmFsJywgNSkgKiAxMDAwCiAgICAgICAgICAgIAogICAgICAgICAgICAjIElmIE1RVFQgaXMgYmVpbmcgZW5hYmxlZCwgaW5pdGlhbGl6ZSBpdAogICAgICAgICAgICBpZiBfbXF0dF9lbmFibGVkIGFuZCBfZGJlX3J1bm5pbmc6CiAgICAgICAgICAgICAgICBmcm9tIGxpYi5leHQuZGJlIGltcG9ydCBtcXR0X2NsaWVudCwgbXF0dF9jb21tYW5kcywgbXF0dF9oYV9kaXNjb3ZlcnkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgbXF0dF9jbGllbnQuaW5pdF9tcXR0KCk6CiAgICAgICAgICAgICAgICAgICAgaWYgbXF0dF9jbGllbnQuY29ubmVjdCgpOgogICAgICAgICAgICAgICAgICAgICAgICAjIFN1YnNjcmliZSB0byBjb21tYW5kcwogICAgICAgICAgICAgICAgICAgICAgICBtcXR0X2NvbW1hbmRzLnN1YnNjcmliZV90b19jb21tYW5kcygpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjIFB1Ymxpc2ggSG9tZSBBc3Npc3RhbnQgZGlzY292ZXJ5IChpZiBlbmFibGVkKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBjb25maWdfZGljdC5nZXQoJ2hhX2F1dG9kaXNjb3ZlcnknLCBUcnVlKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jZWxscyA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9kYmVfYmF0dGVyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5X2RhdGEgPSBfZGJlX2JhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxfdm9sdGFnZXMgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX3ZvbHRhZ2VzX21WJywgW10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtX2NlbGxzID0gbGVuKGNlbGxfdm9sdGFnZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1xdHRfaGFfZGlzY292ZXJ5LnB1Ymxpc2hfZGlzY292ZXJ5KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jZWxscz1udW1fY2VsbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzPWNvbmZpZ19kaWN0LmdldCgncHVibGlzaF9jZWxsX3ZvbHRhZ2VzJywgVHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogVHJ1ZX0pKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyd9KSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KSkKCgpkZWYgZ2V0TXF0dFN0YXR1cygpOgogICAgIiIiR2V0IE1RVFQgY29ubmVjdGlvbiBzdGF0dXMKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIHN0YXR1cyBpbmZvcm1hdGlvbgogICAgIiIiCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9jbGllbnQKICAgICAgICBzdGF0cyA9IG1xdHRfY2xpZW50LmdldF9zdGF0cygpCiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyhzdGF0cykpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J2Vycm9yJzogc3RyKGUpLCAnY29ubmVjdGVkJzogRmFsc2V9KSkKCgpkZWYgdGVzdE1xdHQoKToKICAgICIiIlRlc3QgTVFUVCBjb25uZWN0aW9uCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCB0ZXN0IHJlc3VsdAogICAgIiIiCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9jbGllbnQKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgaWYgbmVlZGVkCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50LmluaXRfbXF0dCgpOgogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgTVFUVCBjbGllbnQnfSkpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgICMgQXR0ZW1wdCBjb25uZWN0aW9uCiAgICAgICAgaWYgbXF0dF9jbGllbnQuY29ubmVjdCgpOgogICAgICAgICAgICAjIFB1Ymxpc2ggdGVzdCBtZXNzYWdlCiAgICAgICAgICAgIGlmIG1xdHRfY2xpZW50LnB1Ymxpc2goInRlc3QiLCAiQ29ubmVjdGlvbiB0ZXN0IHN1Y2Nlc3NmdWwiLCByZXRhaW49RmFsc2UsIHFvcz0wKToKICAgICAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogVHJ1ZSwgJ21lc3NhZ2UnOiAnTVFUVCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnfSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiAnRmFpbGVkIHRvIHB1Ymxpc2ggdGVzdCBtZXNzYWdlJ30pKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBEaXNjb25uZWN0CiAgICAgICAgICAgIG1xdHRfY2xpZW50LmRpc2Nvbm5lY3QoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdGYWlsZWQgdG8gY29ubmVjdCB0byBNUVRUIGJyb2tlcid9KSkKICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogc3RyKGUpfSkpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgUGF1c2UvUmVzdW1lIEZ1bmN0aW9ucyAoZm9yIE1RVFQgY29tbWFuZHMpCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZGVmIHBhdXNlREJFKCk6CiAgICAiIiJQYXVzZSBiYXR0ZXJ5IG9wZXJhdGlvbiAoc3RvcCBDQU4gVFgsIGtlZXAgbW9uaXRvcmluZykiIiIKICAgIGdsb2JhbCBfZGJlX3BhdXNlZAogICAgX2RiZV9wYXVzZWQgPSBUcnVlCiAgICBwcmludCgiW0RCRV0gUGF1c2VkIC0gQ0FOIFRYIHN0b3BwZWQsIG1vbml0b3JpbmcgY29udGludWVzIikKCgpkZWYgcmVzdW1lREJFKCk6CiAgICAiIiJSZXN1bWUgYmF0dGVyeSBvcGVyYXRpb24iIiIKICAgIGdsb2JhbCBfZGJlX3BhdXNlZAogICAgX2RiZV9wYXVzZWQgPSBGYWxzZQogICAgcHJpbnQoIltEQkVdIFJlc3VtZWQgLSBDQU4gVFggcmVzdGFydGVkIikKCgpkZWYgcmVzdGFydERCRSgpOgogICAgIiIiUmVzdGFydCBEQkUgYnJpZGdlIiIiCiAgICBwcmludCgiW0RCRV0gUmVzdGFydGluZy4uLiIpCiAgICBzdG9wREJFKCkKICAgIHRpbWUuc2xlZXAoMSkKICAgIHN0YXJ0REJFKCkKCgpkZWYgYm1zUmVzZXREQkUoKToKICAgICIiIlJlc2V0IEJNUyAoaWYgc3VwcG9ydGVkIGJ5IGJhdHRlcnkgcHJvdG9jb2wpIiIiCiAgICBnbG9iYWwgX2RiZV9iYXR0ZXJ5CiAgICBpZiBfZGJlX2JhdHRlcnkgYW5kIGhhc2F0dHIoX2RiZV9iYXR0ZXJ5LCAncmVzZXRfYm1zJyk6CiAgICAgICAgX2RiZV9iYXR0ZXJ5LnJlc2V0X2JtcygpCiAgICAgICAgcHJpbnQoIltEQkVdIEJNUyByZXNldCB0cmlnZ2VyZWQiKQogICAgZWxzZToKICAgICAgICBwcmludCgiW0RCRV0gQk1TIHJlc2V0IG5vdCBzdXBwb3J0ZWQgYnkgY3VycmVudCBiYXR0ZXJ5IHByb3RvY29sIikKCgpkZWYgc2V0TGltaXRzREJFKGxpbWl0cyk6CiAgICAiIiJTZXQgdGVtcG9yYXJ5IGNoYXJnZS9kaXNjaGFyZ2UgbGltaXRzCiAgICAKICAgIEFyZ3M6CiAgICAgICAgbGltaXRzIChkaWN0KTogRGljdGlvbmFyeSB3aXRoICdtYXhfY2hhcmdlJywgJ21heF9kaXNjaGFyZ2UnLCAndGltZW91dCcKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfYmF0dGVyeQogICAgaWYgX2RiZV9iYXR0ZXJ5IGFuZCBoYXNhdHRyKF9kYmVfYmF0dGVyeSwgJ3NldF9saW1pdHMnKToKICAgICAgICBfZGJlX2JhdHRlcnkuc2V0X2xpbWl0cyhsaW1pdHMpCiAgICAgICAgcHJpbnQoZiJbREJFXSBMaW1pdHMgc2V0OiB7bGltaXRzfSIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbREJFXSBTZXQgbGltaXRzIG5vdCBzdXBwb3J0ZWQgYnkgY3VycmVudCBiYXR0ZXJ5IHByb3RvY29sIikKCgojIEluaXRpYWxpemUgTVFUVCBjb21tYW5kIGhhbmRsZXJzCmRlZiBfaW5pdF9tcXR0X2NvbW1hbmRzKCk6CiAgICAiIiJJbml0aWFsaXplIE1RVFQgY29tbWFuZCBoYW5kbGVycyAoY2FsbGVkIGJ5IHN0YXJ0REJFKSIiIgogICAgdHJ5OgogICAgICAgIGZyb20gbGliLmV4dC5kYmUgaW1wb3J0IG1xdHRfY29tbWFuZHMKICAgICAgICAKICAgICAgICAjIFNldCBjb250cm9sIGZ1bmN0aW9ucyBmb3IgTVFUVCBjb21tYW5kcwogICAgICAgIGNvbnRyb2xfZnVuY3Rpb25zID0gewogICAgICAgICAgICAncGF1c2UnOiBwYXVzZURCRSwKICAgICAgICAgICAgJ3Jlc3VtZSc6IHJlc3VtZURCRSwKICAgICAgICAgICAgJ3Jlc3RhcnQnOiByZXN0YXJ0REJFLAogICAgICAgICAgICAnc3RvcCc6IHN0b3BEQkUsCiAgICAgICAgICAgICdibXNfcmVzZXQnOiBibXNSZXNldERCRSwKICAgICAgICAgICAgJ3NldF9saW1pdHMnOiBzZXRMaW1pdHNEQkUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbXF0dF9jb21tYW5kcy5zZXRfZGJlX2NvbnRyb2woY29udHJvbF9mdW5jdGlvbnMpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbREJFXSBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNUVRUIGNvbW1hbmRzOiB7ZX0iKQo=",
  "/lib/ext/dbe/mqtt_client.py": "IiIiCk1RVFQgQ2xpZW50IE1vZHVsZSBmb3IgREJFCj09PT09PT09PT09PT09PT09PT09PT09PT09PQoKQ29yZSBNUVRUIGNvbm5lY3Rpb24gbWFuYWdlbWVudCB1c2luZyB1bXF0dC5zaW1wbGUuCgpGZWF0dXJlczoKLSBDb25uZWN0L2Rpc2Nvbm5lY3QgdG8gTVFUVCBicm9rZXIKLSBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBzZXR0aW5ncyBtb2R1bGUKLSBIYW5kbGUgY29ubmVjdGlvbiBlcnJvcnMgYW5kIHJlY29ubmVjdGlvbgotIExhc3QgV2lsbCBhbmQgVGVzdGFtZW50IChMV1QpIGZvciBvbmxpbmUvb2ZmbGluZSBzdGF0dXMKLSBOb24tYmxvY2tpbmcgbWVzc2FnZSBjaGVja2luZwoKTWljcm9QeXRob24gQ29tcGF0aWJpbGl0eToKLSBVc2VzIHVtcXR0LnNpbXBsZSAobm90IHVtcXR0LnJvYnVzdCkKLSBNYW51YWwgcmVjb25uZWN0aW9uIGxvZ2ljCi0gTm8gYmxvY2tpbmcgb3BlcmF0aW9ucwotIEV4Y2VwdGlvbiBoYW5kbGluZyBmb3IgbmV0d29yayBlcnJvcnMKIiIiCgppbXBvcnQgdGltZQpmcm9tIGxpYiBpbXBvcnQgc2V0dGluZ3MKCiMgR2xvYmFsIE1RVFQgY2xpZW50IGluc3RhbmNlCl9tcXR0X2NsaWVudCA9IE5vbmUKX21xdHRfY29ubmVjdGVkID0gRmFsc2UKX21xdHRfY29uZmlnID0ge30KX21xdHRfc3RhdHMgPSB7CiAgICAnbWVzc2FnZXNfcHVibGlzaGVkJzogMCwKICAgICdjb21tYW5kc19yZWNlaXZlZCc6IDAsCiAgICAnbGFzdF9wdWJsaXNoX21zJzogMCwKICAgICdsYXN0X2Nvbm5lY3RfYXR0ZW1wdF9tcyc6IDAsCiAgICAnY29ubmVjdGlvbl9lcnJvcnMnOiAwCn0KCgpkZWYgaW5pdF9tcXR0KCk6CiAgICAiIiJJbml0aWFsaXplIE1RVFQgY2xpZW50IHdpdGggY29uZmlndXJhdGlvbiBmcm9tIHNldHRpbmdzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBpbml0aWFsaXphdGlvbiBzdWNjZXNzZnVsLCBGYWxzZSBvdGhlcndpc2UKICAgICIiIgogICAgZ2xvYmFsIF9tcXR0X2NsaWVudCwgX21xdHRfY29uZmlnCiAgICAKICAgIHRyeToKICAgICAgICAjIEltcG9ydCB1bXF0dC5zaW1wbGUgKG1heSBub3QgYmUgaW5zdGFsbGVkIHlldCkKICAgICAgICBmcm9tIHVtcXR0LnNpbXBsZSBpbXBvcnQgTVFUVENsaWVudAogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHByaW50KCJbTVFUVF0gdW1xdHQuc2ltcGxlIG5vdCBpbnN0YWxsZWQgLSBydW46IGltcG9ydCBtaXA7IG1pcC5pbnN0YWxsKCd1bXF0dC5zaW1wbGUnKSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgTG9hZCBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MKICAgIF9tcXR0X2NvbmZpZyA9IHsKICAgICAgICAnc2VydmVyJzogc2V0dGluZ3MuZ2V0KCdtcXR0LnNlcnZlcicsICcnKSwKICAgICAgICAncG9ydCc6IHNldHRpbmdzLmdldCgnbXF0dC5wb3J0JywgMTg4MyksCiAgICAgICAgJ3VzZXJuYW1lJzogc2V0dGluZ3MuZ2V0KCdtcXR0LnVzZXJuYW1lJywgJycpLAogICAgICAgICdwYXNzd29yZCc6IHNldHRpbmdzLmdldCgnbXF0dC5wYXNzd29yZCcsICcnKSwKICAgICAgICAnY2xpZW50X2lkJzogc2V0dGluZ3MuZ2V0KCdtcXR0LmNsaWVudF9pZCcsICdkYmVfY2xpZW50JyksCiAgICAgICAgJ3RvcGljX3ByZWZpeCc6IHNldHRpbmdzLmdldCgnbXF0dC50b3BpY19wcmVmaXgnLCAnQkUnKSwKICAgICAgICAna2VlcGFsaXZlJzogc2V0dGluZ3MuZ2V0KCdtcXR0LmtlZXBhbGl2ZScsIDYwKQogICAgfQogICAgCiAgICAjIFZhbGlkYXRlIGNvbmZpZ3VyYXRpb24KICAgIGlmIG5vdCBfbXF0dF9jb25maWdbJ3NlcnZlciddOgogICAgICAgIHByaW50KCJbTVFUVF0gTm8gTVFUVCBzZXJ2ZXIgY29uZmlndXJlZCIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgQ3JlYXRlIE1RVFQgY2xpZW50CiAgICB0cnk6CiAgICAgICAgIyBQcmVwYXJlIExXVCAoTGFzdCBXaWxsIGFuZCBUZXN0YW1lbnQpIGZvciBvbmxpbmUvb2ZmbGluZSBzdGF0dXMKICAgICAgICBsd3RfdG9waWMgPSBmIntfbXF0dF9jb25maWdbJ3RvcGljX3ByZWZpeCddfS9zdGF0dXMiCiAgICAgICAgCiAgICAgICAgX21xdHRfY2xpZW50ID0gTVFUVENsaWVudCgKICAgICAgICAgICAgY2xpZW50X2lkPV9tcXR0X2NvbmZpZ1snY2xpZW50X2lkJ10sCiAgICAgICAgICAgIHNlcnZlcj1fbXF0dF9jb25maWdbJ3NlcnZlciddLAogICAgICAgICAgICBwb3J0PV9tcXR0X2NvbmZpZ1sncG9ydCddLAogICAgICAgICAgICB1c2VyPV9tcXR0X2NvbmZpZ1sndXNlcm5hbWUnXSBpZiBfbXF0dF9jb25maWdbJ3VzZXJuYW1lJ10gZWxzZSBOb25lLAogICAgICAgICAgICBwYXNzd29yZD1fbXF0dF9jb25maWdbJ3Bhc3N3b3JkJ10gaWYgX21xdHRfY29uZmlnWydwYXNzd29yZCddIGVsc2UgTm9uZSwKICAgICAgICAgICAga2VlcGFsaXZlPV9tcXR0X2NvbmZpZ1sna2VlcGFsaXZlJ10KICAgICAgICApCiAgICAgICAgCiAgICAgICAgIyBTZXQgTFdUIChzZW50IGJ5IGJyb2tlciB3aGVuIGNsaWVudCBkaXNjb25uZWN0cyB1bmV4cGVjdGVkbHkpCiAgICAgICAgX21xdHRfY2xpZW50LnNldF9sYXN0X3dpbGwobHd0X3RvcGljLmVuY29kZSgpLCBiIm9mZmxpbmUiLCByZXRhaW49VHJ1ZSwgcW9zPTEpCiAgICAgICAgCiAgICAgICAgcHJpbnQoZiJbTVFUVF0gQ2xpZW50IGluaXRpYWxpemVkOiB7X21xdHRfY29uZmlnWydzZXJ2ZXInXX06e19tcXR0X2NvbmZpZ1sncG9ydCddfSIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBJbml0aWFsaXphdGlvbiBlcnJvcjoge2V9IikKICAgICAgICBfbXF0dF9jbGllbnQgPSBOb25lCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGNvbm5lY3QoKToKICAgICIiIkNvbm5lY3QgdG8gTVFUVCBicm9rZXIKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGNvbm5lY3RlZCwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZCwgX21xdHRfc3RhdHMKICAgIAogICAgaWYgX21xdHRfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgaWYgbm90IGluaXRfbXF0dCgpOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgaWYgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBUcnVlCiAgICAKICAgIHRyeToKICAgICAgICBfbXF0dF9zdGF0c1snbGFzdF9jb25uZWN0X2F0dGVtcHRfbXMnXSA9IHRpbWUudGlja3NfbXMoKQogICAgICAgIAogICAgICAgIHByaW50KGYiW01RVFRdIENvbm5lY3RpbmcgdG8ge19tcXR0X2NvbmZpZ1snc2VydmVyJ119OntfbXF0dF9jb25maWdbJ3BvcnQnXX0uLi4iKQogICAgICAgIF9tcXR0X2NsaWVudC5jb25uZWN0KCkKICAgICAgICAKICAgICAgICAjIFB1Ymxpc2ggb25saW5lIHN0YXR1cyAob3ZlcnJpZGVzIExXVCkKICAgICAgICBzdGF0dXNfdG9waWMgPSBmIntfbXF0dF9jb25maWdbJ3RvcGljX3ByZWZpeCddfS9zdGF0dXMiCiAgICAgICAgX21xdHRfY2xpZW50LnB1Ymxpc2goc3RhdHVzX3RvcGljLmVuY29kZSgpLCBiIm9ubGluZSIsIHJldGFpbj1UcnVlLCBxb3M9MSkKICAgICAgICAKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBUcnVlCiAgICAgICAgX21xdHRfc3RhdHNbJ2Nvbm5lY3Rpb25fZXJyb3JzJ10gPSAwCiAgICAgICAgcHJpbnQoIltNUVRUXSBDb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIAogICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIF9tcXR0X3N0YXRzWydjb25uZWN0aW9uX2Vycm9ycyddICs9IDEKICAgICAgICBwcmludChmIltNUVRUXSBDb25uZWN0aW9uIGZhaWxlZDoge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIF9tcXR0X3N0YXRzWydjb25uZWN0aW9uX2Vycm9ycyddICs9IDEKICAgICAgICBwcmludChmIltNUVRUXSBVbmV4cGVjdGVkIGVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBkaXNjb25uZWN0KCk6CiAgICAiIiJEaXNjb25uZWN0IGZyb20gTVFUVCBicm9rZXIiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgIyBQdWJsaXNoIG9mZmxpbmUgc3RhdHVzIGJlZm9yZSBkaXNjb25uZWN0aW5nCiAgICAgICAgc3RhdHVzX3RvcGljID0gZiJ7X21xdHRfY29uZmlnWyd0b3BpY19wcmVmaXgnXX0vc3RhdHVzIgogICAgICAgIF9tcXR0X2NsaWVudC5wdWJsaXNoKHN0YXR1c190b3BpYy5lbmNvZGUoKSwgYiJvZmZsaW5lIiwgcmV0YWluPVRydWUsIHFvcz0xKQogICAgICAgIAogICAgICAgIF9tcXR0X2NsaWVudC5kaXNjb25uZWN0KCkKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIHByaW50KCJbTVFUVF0gRGlzY29ubmVjdGVkIikKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBEaXNjb25uZWN0IGVycm9yOiB7ZX0iKQogICAgICAgIF9tcXR0X2Nvbm5lY3RlZCA9IEZhbHNlCgoKZGVmIHB1Ymxpc2godG9waWMsIHBheWxvYWQsIHJldGFpbj1GYWxzZSwgcW9zPTApOgogICAgIiIiUHVibGlzaCBtZXNzYWdlIHRvIE1RVFQgYnJva2VyCiAgICAKICAgIEFyZ3M6CiAgICAgICAgdG9waWMgKHN0cik6IFRvcGljIHRvIHB1Ymxpc2ggdG8gKHdpdGhvdXQgcHJlZml4KQogICAgICAgIHBheWxvYWQgKGJ5dGVzIG9yIHN0cik6IE1lc3NhZ2UgcGF5bG9hZAogICAgICAgIHJldGFpbiAoYm9vbCk6IFJldGFpbiBtZXNzYWdlIG9uIGJyb2tlcgogICAgICAgIHFvcyAoaW50KTogUXVhbGl0eSBvZiBTZXJ2aWNlICgwIG9yIDEpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5LCBGYWxzZSBvdGhlcndpc2UKICAgICIiIgogICAgZ2xvYmFsIF9tcXR0X2NsaWVudCwgX21xdHRfY29ubmVjdGVkLCBfbXF0dF9zdGF0cwogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgIyBBZGQgdG9waWMgcHJlZml4CiAgICAgICAgZnVsbF90b3BpYyA9IGYie19tcXR0X2NvbmZpZ1sndG9waWNfcHJlZml4J119L3t0b3BpY30iCiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHBheWxvYWQgdG8gYnl0ZXMgaWYgbmVlZGVkCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXlsb2FkLCBzdHIpOgogICAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZC5lbmNvZGUoKQogICAgICAgIAogICAgICAgIF9tcXR0X2NsaWVudC5wdWJsaXNoKGZ1bGxfdG9waWMuZW5jb2RlKCksIHBheWxvYWQsIHJldGFpbj1yZXRhaW4sIHFvcz1xb3MpCiAgICAgICAgCiAgICAgICAgX21xdHRfc3RhdHNbJ21lc3NhZ2VzX3B1Ymxpc2hlZCddICs9IDEKICAgICAgICBfbXF0dF9zdGF0c1snbGFzdF9wdWJsaXNoX21zJ10gPSB0aW1lLnRpY2tzX21zKCkKICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIAogICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICAjIE5ldHdvcmsgZXJyb3IgLSBjb25uZWN0aW9uIGxvc3QKICAgICAgICBwcmludChmIltNUVRUXSBQdWJsaXNoIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBQdWJsaXNoIGZhaWxlZCAodW5leHBlY3RlZCBlcnJvcik6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHN1YnNjcmliZSh0b3BpYywgY2FsbGJhY2spOgogICAgIiIiU3Vic2NyaWJlIHRvIE1RVFQgdG9waWMKICAgIAogICAgQXJnczoKICAgICAgICB0b3BpYyAoc3RyKTogVG9waWMgdG8gc3Vic2NyaWJlIHRvICh3aXRob3V0IHByZWZpeCwgc3VwcG9ydHMgd2lsZGNhcmRzKQogICAgICAgIGNhbGxiYWNrIChmdW5jdGlvbik6IENhbGxiYWNrIGZ1bmN0aW9uKHRvcGljLCBtc2cpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBzdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseSwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgIyBBZGQgdG9waWMgcHJlZml4CiAgICAgICAgZnVsbF90b3BpYyA9IGYie19tcXR0X2NvbmZpZ1sndG9waWNfcHJlZml4J119L3t0b3BpY30iCiAgICAgICAgCiAgICAgICAgIyBTZXQgY2FsbGJhY2sKICAgICAgICBfbXF0dF9jbGllbnQuc2V0X2NhbGxiYWNrKGNhbGxiYWNrKQogICAgICAgIAogICAgICAgICMgU3Vic2NyaWJlCiAgICAgICAgX21xdHRfY2xpZW50LnN1YnNjcmliZShmdWxsX3RvcGljLmVuY29kZSgpKQogICAgICAgIAogICAgICAgIHByaW50KGYiW01RVFRdIFN1YnNjcmliZWQgdG86IHtmdWxsX3RvcGljfSIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVF0gU3Vic2NyaWJlIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBTdWJzY3JpYmUgZmFpbGVkICh1bmV4cGVjdGVkIGVycm9yKToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgY2hlY2tfbXNnKCk6CiAgICAiIiJDaGVjayBmb3IgaW5jb21pbmcgTVFUVCBtZXNzYWdlcyAobm9uLWJsb2NraW5nKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgY2hlY2sgc3VjY2Vzc2Z1bCwgRmFsc2UgaWYgY29ubmVjdGlvbiBsb3N0CiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgX21xdHRfY2xpZW50LmNoZWNrX21zZygpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgIyBOZXR3b3JrIGVycm9yIC0gY29ubmVjdGlvbiBsb3N0CiAgICAgICAgcHJpbnQoZiJbTVFUVF0gY2hlY2tfbXNnIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBjaGVja19tc2cgZmFpbGVkICh1bmV4cGVjdGVkIGVycm9yKToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgaXNfY29ubmVjdGVkKCk6CiAgICAiIiJDaGVjayBpZiBNUVRUIGNsaWVudCBpcyBjb25uZWN0ZWQKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGNvbm5lY3RlZCwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIHJldHVybiBfbXF0dF9jb25uZWN0ZWQKCgpkZWYgZ2V0X3N0YXRzKCk6CiAgICAiIiJHZXQgTVFUVCBzdGF0aXN0aWNzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgZGljdDogU3RhdGlzdGljcyBkaWN0aW9uYXJ5CiAgICAiIiIKICAgIHJldHVybiB7CiAgICAgICAgJ2Nvbm5lY3RlZCc6IF9tcXR0X2Nvbm5lY3RlZCwKICAgICAgICAnbWVzc2FnZXNfcHVibGlzaGVkJzogX21xdHRfc3RhdHNbJ21lc3NhZ2VzX3B1Ymxpc2hlZCddLAogICAgICAgICdjb21tYW5kc19yZWNlaXZlZCc6IF9tcXR0X3N0YXRzWydjb21tYW5kc19yZWNlaXZlZCddLAogICAgICAgICdsYXN0X3B1Ymxpc2hfbXMnOiBfbXF0dF9zdGF0c1snbGFzdF9wdWJsaXNoX21zJ10sCiAgICAgICAgJ2Nvbm5lY3Rpb25fZXJyb3JzJzogX21xdHRfc3RhdHNbJ2Nvbm5lY3Rpb25fZXJyb3JzJ10sCiAgICAgICAgJ3NlcnZlcic6IF9tcXR0X2NvbmZpZy5nZXQoJ3NlcnZlcicsICcnKSwKICAgICAgICAncG9ydCc6IF9tcXR0X2NvbmZpZy5nZXQoJ3BvcnQnLCAxODgzKSwKICAgICAgICAndG9waWNfcHJlZml4JzogX21xdHRfY29uZmlnLmdldCgndG9waWNfcHJlZml4JywgJ0JFJykKICAgIH0KCgpkZWYgaW5jcmVtZW50X2NvbW1hbmRzX3JlY2VpdmVkKCk6CiAgICAiIiJJbmNyZW1lbnQgY29tbWFuZHMgcmVjZWl2ZWQgY291bnRlciAoY2FsbGVkIGJ5IG1xdHRfY29tbWFuZHMgbW9kdWxlKSIiIgogICAgZ2xvYmFsIF9tcXR0X3N0YXRzCiAgICBfbXF0dF9zdGF0c1snY29tbWFuZHNfcmVjZWl2ZWQnXSArPSAxCgoKZGVmIGdldF90b3BpY19wcmVmaXgoKToKICAgICIiIkdldCBjb25maWd1cmVkIHRvcGljIHByZWZpeAogICAgCiAgICBSZXR1cm5zOgogICAgICAgIHN0cjogVG9waWMgcHJlZml4IChlLmcuLCAnQkUnKQogICAgIiIiCiAgICByZXR1cm4gX21xdHRfY29uZmlnLmdldCgndG9waWNfcHJlZml4JywgJ0JFJykK",
  "/lib/ext/dbe/mqtt_commands.py": "IiIiCk1RVFQgQ29tbWFuZHMgTW9kdWxlIGZvciBEQkUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCkhhbmRsZSBpbmNvbWluZyBNUVRUIGNvbW1hbmRzIGZvciByZW1vdGUgY29udHJvbC4KCkNvbW1hbmQgVG9waWNzIChmb2xsb3dpbmcgQmF0dGVyeSBFbXVsYXRvciBwYXR0ZXJuKToKLSB7cHJlZml4fS9jb21tYW5kL1BBVVNFICAgICAgIC0gUGF1c2UgY2hhcmdlL2Rpc2NoYXJnZQotIHtwcmVmaXh9L2NvbW1hbmQvUkVTVU1FICAgICAgLSBSZXN1bWUgb3BlcmF0aW9uCi0ge3ByZWZpeH0vY29tbWFuZC9SRVNUQVJUICAgICAtIFJlc3RhcnQgREJFIGJyaWRnZQotIHtwcmVmaXh9L2NvbW1hbmQvU1RPUCAgICAgICAgLSBTdG9wIERCRSBicmlkZ2UKLSB7cHJlZml4fS9jb21tYW5kL0JNU1JFU0VUICAgIC0gUmVzZXQgQk1TIChpZiBzdXBwb3J0ZWQpCi0ge3ByZWZpeH0vY29tbWFuZC9TRVRfTElNSVRTICAtIFNldCB0ZW1wb3JhcnkgbGltaXRzIChKU09OIHBheWxvYWQpCgpJbnRlZ3JhdGlvbiB3aXRoIERCRV9oZWxwZXJzLnB5OgotIENvbW1hbmRzIGNhbGwgZXhpc3RpbmcgaGVscGVyIGZ1bmN0aW9ucyAoc3RhcnREQkUoKSwgc3RvcERCRSgpKQotIEFkZCBuZXcgcGF1c2UvcmVzdW1lIHN0YXRlIG1hbmFnZW1lbnQKLSBUZW1wb3JhcnkgbGltaXRzIHN0b3JlZCBpbiBiYXR0ZXJ5IGRhdGEgc3RydWN0dXJlCiIiIgoKaW1wb3J0IGpzb24KZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9jbGllbnQKCiMgR2xvYmFsIHJlZmVyZW5jZSB0byBEQkUgY29udHJvbCBmdW5jdGlvbnMgKHNldCBieSBEQkVfaGVscGVycy5weSkKX2RiZV9jb250cm9sID0gTm9uZQoKCmRlZiBzZXRfZGJlX2NvbnRyb2woY29udHJvbF9mdW5jdGlvbnMpOgogICAgIiIiU2V0IERCRSBjb250cm9sIGZ1bmN0aW9ucyByZWZlcmVuY2UKICAgIAogICAgQXJnczoKICAgICAgICBjb250cm9sX2Z1bmN0aW9ucyAoZGljdCk6IERpY3Rpb25hcnkgb2YgY29udHJvbCBmdW5jdGlvbnMKICAgICAgICAgICAgLSAncGF1c2UnOiBwYXVzZURCRSgpCiAgICAgICAgICAgIC0gJ3Jlc3VtZSc6IHJlc3VtZURCRSgpCiAgICAgICAgICAgIC0gJ3Jlc3RhcnQnOiByZXN0YXJ0REJFKCkKICAgICAgICAgICAgLSAnc3RvcCc6IHN0b3BEQkUoKQogICAgICAgICAgICAtICdibXNfcmVzZXQnOiBibXNSZXNldERCRSgpCiAgICAgICAgICAgIC0gJ3NldF9saW1pdHMnOiBzZXRMaW1pdHNEQkUobGltaXRzKQogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICBfZGJlX2NvbnRyb2wgPSBjb250cm9sX2Z1bmN0aW9ucwoKCmRlZiBoYW5kbGVfY29tbWFuZCh0b3BpYywgbXNnKToKICAgICIiIk1haW4gY29tbWFuZCBkaXNwYXRjaGVyIChjYWxsZWQgYnkgTVFUVCBjbGllbnQgY2FsbGJhY2spCiAgICAKICAgIEFyZ3M6CiAgICAgICAgdG9waWMgKGJ5dGVzKTogRnVsbCBNUVRUIHRvcGljIChlLmcuLCBiJ0JFL2NvbW1hbmQvUEFVU0UnKQogICAgICAgIG1zZyAoYnl0ZXMpOiBNZXNzYWdlIHBheWxvYWQKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfY29udHJvbAogICAgCiAgICAjIEluY3JlbWVudCBjb21tYW5kcyByZWNlaXZlZCBjb3VudGVyCiAgICBtcXR0X2NsaWVudC5pbmNyZW1lbnRfY29tbWFuZHNfcmVjZWl2ZWQoKQogICAgCiAgICAjIERlY29kZSB0b3BpYwogICAgdG9waWNfc3RyID0gdG9waWMuZGVjb2RlKCkgaWYgaXNpbnN0YW5jZSh0b3BpYywgYnl0ZXMpIGVsc2UgdG9waWMKICAgIG1zZ19zdHIgPSBtc2cuZGVjb2RlKCkgaWYgaXNpbnN0YW5jZShtc2csIGJ5dGVzKSBlbHNlIG1zZwogICAgCiAgICAjIEV4dHJhY3QgY29tbWFuZCBmcm9tIHRvcGljIChsYXN0IHBhcnQgYWZ0ZXIgLykKICAgIGNvbW1hbmQgPSB0b3BpY19zdHIuc3BsaXQoJy8nKVstMV0udXBwZXIoKQogICAgCiAgICBwcmludChmIltNUVRUIENvbW1hbmRzXSBSZWNlaXZlZCBjb21tYW5kOiB7Y29tbWFuZH0iKQogICAgCiAgICBpZiBfZGJlX2NvbnRyb2wgaXMgTm9uZToKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIEVycm9yOiBEQkUgY29udHJvbCBmdW5jdGlvbnMgbm90IHNldCIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgICMgRGlzcGF0Y2ggY29tbWFuZAogICAgdHJ5OgogICAgICAgIGlmIGNvbW1hbmQgPT0gJ1BBVVNFJzoKICAgICAgICAgICAgY21kX3BhdXNlKCkKICAgICAgICBlbGlmIGNvbW1hbmQgPT0gJ1JFU1VNRSc6CiAgICAgICAgICAgIGNtZF9yZXN1bWUoKQogICAgICAgIGVsaWYgY29tbWFuZCA9PSAnUkVTVEFSVCc6CiAgICAgICAgICAgIGNtZF9yZXN0YXJ0KCkKICAgICAgICBlbGlmIGNvbW1hbmQgPT0gJ1NUT1AnOgogICAgICAgICAgICBjbWRfc3RvcCgpCiAgICAgICAgZWxpZiBjb21tYW5kID09ICdCTVNSRVNFVCc6CiAgICAgICAgICAgIGNtZF9ibXNfcmVzZXQoKQogICAgICAgIGVsaWYgY29tbWFuZCA9PSAnU0VUX0xJTUlUUyc6CiAgICAgICAgICAgIGNtZF9zZXRfbGltaXRzKG1zZ19zdHIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJbTVFUVCBDb21tYW5kc10gVW5rbm93biBjb21tYW5kOiB7Y29tbWFuZH0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW01RVFQgQ29tbWFuZHNdIEVycm9yIGV4ZWN1dGluZyBjb21tYW5kIHtjb21tYW5kfToge2V9IikKCgpkZWYgY21kX3BhdXNlKCk6CiAgICAiIiJQYXVzZSBiYXR0ZXJ5IG9wZXJhdGlvbiAoc3RvcCBDQU4gVFgsIGtlZXAgbW9uaXRvcmluZykiIiIKICAgIGdsb2JhbCBfZGJlX2NvbnRyb2wKICAgIAogICAgaWYgX2RiZV9jb250cm9sIGFuZCAncGF1c2UnIGluIF9kYmVfY29udHJvbDoKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIEV4ZWN1dGluZyBQQVVTRSIpCiAgICAgICAgX2RiZV9jb250cm9sWydwYXVzZSddKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBQQVVTRSBub3QgYXZhaWxhYmxlIikKCgpkZWYgY21kX3Jlc3VtZSgpOgogICAgIiIiUmVzdW1lIGJhdHRlcnkgb3BlcmF0aW9uIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgIGlmIF9kYmVfY29udHJvbCBhbmQgJ3Jlc3VtZScgaW4gX2RiZV9jb250cm9sOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gRXhlY3V0aW5nIFJFU1VNRSIpCiAgICAgICAgX2RiZV9jb250cm9sWydyZXN1bWUnXSgpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gUkVTVU1FIG5vdCBhdmFpbGFibGUiKQoKCmRlZiBjbWRfcmVzdGFydCgpOgogICAgIiIiUmVzdGFydCBEQkUgYnJpZGdlIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgIGlmIF9kYmVfY29udHJvbCBhbmQgJ3Jlc3RhcnQnIGluIF9kYmVfY29udHJvbDoKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIEV4ZWN1dGluZyBSRVNUQVJUIikKICAgICAgICBfZGJlX2NvbnRyb2xbJ3Jlc3RhcnQnXSgpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gUkVTVEFSVCBub3QgYXZhaWxhYmxlIikKCgpkZWYgY21kX3N0b3AoKToKICAgICIiIlN0b3AgREJFIGJyaWRnZSIiIgogICAgZ2xvYmFsIF9kYmVfY29udHJvbAogICAgCiAgICBpZiBfZGJlX2NvbnRyb2wgYW5kICdzdG9wJyBpbiBfZGJlX2NvbnRyb2w6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBFeGVjdXRpbmcgU1RPUCIpCiAgICAgICAgX2RiZV9jb250cm9sWydzdG9wJ10oKQogICAgZWxzZToKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIFNUT1Agbm90IGF2YWlsYWJsZSIpCgoKZGVmIGNtZF9ibXNfcmVzZXQoKToKICAgICIiIlJlc2V0IEJNUyAoaWYgc3VwcG9ydGVkIGJ5IGJhdHRlcnkgcHJvdG9jb2wpIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgIGlmIF9kYmVfY29udHJvbCBhbmQgJ2Jtc19yZXNldCcgaW4gX2RiZV9jb250cm9sOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gRXhlY3V0aW5nIEJNU1JFU0VUIikKICAgICAgICBfZGJlX2NvbnRyb2xbJ2Jtc19yZXNldCddKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBCTVNSRVNFVCBub3QgYXZhaWxhYmxlIikKCgpkZWYgY21kX3NldF9saW1pdHMocGF5bG9hZF9zdHIpOgogICAgIiIiU2V0IHRlbXBvcmFyeSBjaGFyZ2UvZGlzY2hhcmdlIGxpbWl0cwogICAgCiAgICBQYXlsb2FkIGZvcm1hdCAoSlNPTik6CiAgICB7CiAgICAgICAgIm1heF9jaGFyZ2UiOiA1MCwgICAgICAvLyBNYXggY2hhcmdlIGN1cnJlbnQgKEEpCiAgICAgICAgIm1heF9kaXNjaGFyZ2UiOiAxMDAsICAvLyBNYXggZGlzY2hhcmdlIGN1cnJlbnQgKEEpCiAgICAgICAgInRpbWVvdXQiOiAzMCAgICAgICAgICAvLyBUaW1lb3V0IChzZWNvbmRzKQogICAgfQogICAgCiAgICBBcmdzOgogICAgICAgIHBheWxvYWRfc3RyIChzdHIpOiBKU09OIHBheWxvYWQKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfY29udHJvbAogICAgCiAgICBpZiBub3QgX2RiZV9jb250cm9sIG9yICdzZXRfbGltaXRzJyBub3QgaW4gX2RiZV9jb250cm9sOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gU0VUX0xJTUlUUyBub3QgYXZhaWxhYmxlIikKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgICMgUGFyc2UgSlNPTiBwYXlsb2FkCiAgICAgICAgbGltaXRzID0ganNvbi5sb2FkcyhwYXlsb2FkX3N0cikKICAgICAgICAKICAgICAgICAjIFZhbGlkYXRlIGxpbWl0cwogICAgICAgIG1heF9jaGFyZ2UgPSBsaW1pdHMuZ2V0KCdtYXhfY2hhcmdlJykKICAgICAgICBtYXhfZGlzY2hhcmdlID0gbGltaXRzLmdldCgnbWF4X2Rpc2NoYXJnZScpCiAgICAgICAgdGltZW91dCA9IGxpbWl0cy5nZXQoJ3RpbWVvdXQnLCAzMCkKICAgICAgICAKICAgICAgICBpZiBtYXhfY2hhcmdlIGlzIE5vbmUgYW5kIG1heF9kaXNjaGFyZ2UgaXMgTm9uZToKICAgICAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBTRVRfTElNSVRTOiBObyBsaW1pdHMgc3BlY2lmaWVkIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgcHJpbnQoZiJbTVFUVCBDb21tYW5kc10gRXhlY3V0aW5nIFNFVF9MSU1JVFM6IGNoYXJnZT17bWF4X2NoYXJnZX1BLCBkaXNjaGFyZ2U9e21heF9kaXNjaGFyZ2V9QSwgdGltZW91dD17dGltZW91dH1zIikKICAgICAgICAKICAgICAgICAjIENhbGwgY29udHJvbCBmdW5jdGlvbgogICAgICAgIF9kYmVfY29udHJvbFsnc2V0X2xpbWl0cyddKGxpbWl0cykKICAgICAgICAKICAgIGV4Y2VwdCBqc29uLkpTT05EZWNvZGVFcnJvciBhcyBlOgogICAgICAgIHByaW50KGYiW01RVFQgQ29tbWFuZHNdIFNFVF9MSU1JVFM6IEludmFsaWQgSlNPTjoge2V9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUIENvbW1hbmRzXSBTRVRfTElNSVRTIGVycm9yOiB7ZX0iKQoKCmRlZiBzdWJzY3JpYmVfdG9fY29tbWFuZHMoKToKICAgICIiIlN1YnNjcmliZSB0byBhbGwgY29tbWFuZCB0b3BpY3MKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIHN1YnNjcmliZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgICMgU3Vic2NyaWJlIHRvIGFsbCBjb21tYW5kcyB1c2luZyB3aWxkY2FyZAogICAgcmV0dXJuIG1xdHRfY2xpZW50LnN1YnNjcmliZSgiY29tbWFuZC8rIiwgaGFuZGxlX2NvbW1hbmQpCg==",
  "/lib/ext/dbe/mqtt_ha_discovery.py": "IiIiCkhvbWUgQXNzaXN0YW50IE1RVFQgQXV0b2Rpc2NvdmVyeSBNb2R1bGUgZm9yIERCRQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpQdWJsaXNoIEhvbWUgQXNzaXN0YW50IE1RVFQgZGlzY292ZXJ5IG1lc3NhZ2VzIGZvciBhdXRvbWF0aWMgZW50aXR5IGNyZWF0aW9uLgoKRGlzY292ZXJ5IFRvcGljcyAoZm9sbG93aW5nIEJhdHRlcnkgRW11bGF0b3IgcGF0dGVybik6Ci0gaG9tZWFzc2lzdGFudC9zZW5zb3Ive3ByZWZpeH0vU09DL2NvbmZpZwotIGhvbWVhc3Npc3RhbnQvc2Vuc29yL3twcmVmaXh9L2JhdHRlcnlfdm9sdGFnZS9jb25maWcKLSBob21lYXNzaXN0YW50L3NlbnNvci97cHJlZml4fS9jZWxsX3ZvbHRhZ2UxL2NvbmZpZwotIC4uLgotIGhvbWVhc3Npc3RhbnQvYnV0dG9uL3twcmVmaXh9L1BBVVNFL2NvbmZpZwotIGhvbWVhc3Npc3RhbnQvYnV0dG9uL3twcmVmaXh9L1JFU1VNRS9jb25maWcKClBlcmZvcm1hbmNlOgotIE9ubHkgcHVibGlzaCBkaXNjb3Zlcnkgb25jZSBvbiBzdGFydHVwIChvciB3aGVuIGNvbmZpZyBjaGFuZ2VzKQotIFVzZSByZXRhaW49VHJ1ZSBmb3IgZGlzY292ZXJ5IG1lc3NhZ2VzCi0gQmF0Y2ggcHVibGlzaCB3aXRoIHNtYWxsIGRlbGF5cyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgYnJva2VyCiIiIgoKaW1wb3J0IGpzb24KaW1wb3J0IHRpbWUKZnJvbSBsaWIuZXh0LmRiZSBpbXBvcnQgbXF0dF9jbGllbnQKCiMgRGlzY292ZXJ5IHB1Ymxpc2hlZCBmbGFnCl9kaXNjb3ZlcnlfcHVibGlzaGVkID0gRmFsc2UKCgojIFNlbnNvciBkZWZpbml0aW9ucyAoZnJvbSBCYXR0ZXJ5IEVtdWxhdG9yKQpTRU5TT1JfQ09ORklHUyA9IFsKICAgICMgU3RhdGUgb2YgQ2hhcmdlCiAgICB7ImlkIjogIlNPQyIsICJuYW1lIjogIkJhdHRlcnkgU09DIChTY2FsZWQpIiwgInVuaXQiOiAiJSIsICJkZXZpY2VfY2xhc3MiOiAiYmF0dGVyeSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJTT0NfcmVhbCIsICJuYW1lIjogIkJhdHRlcnkgU09DIChSZWFsKSIsICJ1bml0IjogIiUiLCAiZGV2aWNlX2NsYXNzIjogImJhdHRlcnkiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIAogICAgIyBTdGF0ZSBvZiBIZWFsdGgKICAgIHsiaWQiOiAic3RhdGVfb2ZfaGVhbHRoIiwgIm5hbWUiOiAiU3RhdGUgT2YgSGVhbHRoIiwgInVuaXQiOiAiJSIsICJkZXZpY2VfY2xhc3MiOiAiYmF0dGVyeSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgCiAgICAjIFRlbXBlcmF0dXJlCiAgICB7ImlkIjogInRlbXBlcmF0dXJlX21pbiIsICJuYW1lIjogIlRlbXBlcmF0dXJlIE1pbiIsICJ1bml0IjogIsKwQyIsICJkZXZpY2VfY2xhc3MiOiAidGVtcGVyYXR1cmUiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAidGVtcGVyYXR1cmVfbWF4IiwgIm5hbWUiOiAiVGVtcGVyYXR1cmUgTWF4IiwgInVuaXQiOiAiwrBDIiwgImRldmljZV9jbGFzcyI6ICJ0ZW1wZXJhdHVyZSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgCiAgICAjIEN1cnJlbnQgYW5kIFZvbHRhZ2UKICAgIHsiaWQiOiAiYmF0dGVyeV9jdXJyZW50IiwgIm5hbWUiOiAiQmF0dGVyeSBDdXJyZW50IiwgInVuaXQiOiAiQSIsICJkZXZpY2VfY2xhc3MiOiAiY3VycmVudCIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJiYXR0ZXJ5X3ZvbHRhZ2UiLCAibmFtZSI6ICJCYXR0ZXJ5IFZvbHRhZ2UiLCAidW5pdCI6ICJWIiwgImRldmljZV9jbGFzcyI6ICJ2b2x0YWdlIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICAKICAgICMgQ2VsbCBWb2x0YWdlcwogICAgeyJpZCI6ICJjZWxsX21heF92b2x0YWdlIiwgIm5hbWUiOiAiQ2VsbCBNYXggVm9sdGFnZSIsICJ1bml0IjogIlYiLCAiZGV2aWNlX2NsYXNzIjogInZvbHRhZ2UiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAiY2VsbF9taW5fdm9sdGFnZSIsICJuYW1lIjogIkNlbGwgTWluIFZvbHRhZ2UiLCAidW5pdCI6ICJWIiwgImRldmljZV9jbGFzcyI6ICJ2b2x0YWdlIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICB7ImlkIjogImNlbGxfdm9sdGFnZV9kZWx0YSIsICJuYW1lIjogIkNlbGwgVm9sdGFnZSBEZWx0YSIsICJ1bml0IjogIm1WIiwgImRldmljZV9jbGFzcyI6ICJ2b2x0YWdlIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICAKICAgICMgQ2FwYWNpdHkKICAgIHsiaWQiOiAidG90YWxfY2FwYWNpdHkiLCAibmFtZSI6ICJCYXR0ZXJ5IFRvdGFsIENhcGFjaXR5IiwgInVuaXQiOiAiV2giLCAiZGV2aWNlX2NsYXNzIjogImVuZXJneSIsICJzdGF0ZV9jbGFzcyI6ICJ0b3RhbCJ9LAogICAgeyJpZCI6ICJyZW1haW5pbmdfY2FwYWNpdHkiLCAibmFtZSI6ICJCYXR0ZXJ5IFJlbWFpbmluZyBDYXBhY2l0eSIsICJ1bml0IjogIldoIiwgImRldmljZV9jbGFzcyI6ICJlbmVyZ3kiLCAic3RhdGVfY2xhc3MiOiAidG90YWwifSwKICAgIAogICAgIyBQb3dlcgogICAgeyJpZCI6ICJtYXhfZGlzY2hhcmdlX3Bvd2VyIiwgIm5hbWUiOiAiQmF0dGVyeSBNYXggRGlzY2hhcmdlIFBvd2VyIiwgInVuaXQiOiAiVyIsICJkZXZpY2VfY2xhc3MiOiAicG93ZXIiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAibWF4X2NoYXJnZV9wb3dlciIsICJuYW1lIjogIkJhdHRlcnkgTWF4IENoYXJnZSBQb3dlciIsICJ1bml0IjogIlciLCAiZGV2aWNlX2NsYXNzIjogInBvd2VyIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICB7ImlkIjogInN0YXRfYmF0dF9wb3dlciIsICJuYW1lIjogIkJhdHRlcnkgUG93ZXIiLCAidW5pdCI6ICJXIiwgImRldmljZV9jbGFzcyI6ICJwb3dlciIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgCiAgICAjIEJhbGFuY2luZwogICAgeyJpZCI6ICJiYWxhbmNpbmdfYWN0aXZlX2NlbGxzIiwgIm5hbWUiOiAiQmFsYW5jaW5nIEFjdGl2ZSBDZWxscyIsICJ1bml0IjogIiIsICJkZXZpY2VfY2xhc3MiOiBOb25lLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAiYmFsYW5jaW5nX3N0YXR1cyIsICJuYW1lIjogIkJhbGFuY2luZyBTdGF0dXMiLCAidW5pdCI6ICIiLCAiZGV2aWNlX2NsYXNzIjogTm9uZSwgInN0YXRlX2NsYXNzIjogTm9uZX0sCiAgICAKICAgICMgU3RhdHVzCiAgICB7ImlkIjogImJtc19zdGF0dXMiLCAibmFtZSI6ICJCTVMgU3RhdHVzIiwgInVuaXQiOiAiIiwgImRldmljZV9jbGFzcyI6IE5vbmUsICJzdGF0ZV9jbGFzcyI6IE5vbmV9LAogICAgeyJpZCI6ICJlbXVsYXRvcl9zdGF0dXMiLCAibmFtZSI6ICJFbXVsYXRvciBTdGF0dXMiLCAidW5pdCI6ICIiLCAiZGV2aWNlX2NsYXNzIjogTm9uZSwgInN0YXRlX2NsYXNzIjogTm9uZX0sCl0KCgojIEJ1dHRvbiBkZWZpbml0aW9ucwpCVVRUT05fQ09ORklHUyA9IFsKICAgIHsiaWQiOiAiUEFVU0UiLCAibmFtZSI6ICJQYXVzZSBCYXR0ZXJ5In0sCiAgICB7ImlkIjogIlJFU1VNRSIsICJuYW1lIjogIlJlc3VtZSBCYXR0ZXJ5In0sCiAgICB7ImlkIjogIlJFU1RBUlQiLCAibmFtZSI6ICJSZXN0YXJ0IEVtdWxhdG9yIn0sCiAgICB7ImlkIjogIlNUT1AiLCAibmFtZSI6ICJTdG9wIEVtdWxhdG9yIn0sCiAgICB7ImlkIjogIkJNU1JFU0VUIiwgIm5hbWUiOiAiUmVzZXQgQk1TIn0sCl0KCgpkZWYgcHVibGlzaF9zZW5zb3JfZGlzY292ZXJ5KHNlbnNvcl9jb25maWcsIHRvcGljX3ByZWZpeCk6CiAgICAiIiJQdWJsaXNoIHNlbnNvciBkaXNjb3ZlcnkgbWVzc2FnZQogICAgCiAgICBBcmdzOgogICAgICAgIHNlbnNvcl9jb25maWcgKGRpY3QpOiBTZW5zb3IgY29uZmlndXJhdGlvbgogICAgICAgIHRvcGljX3ByZWZpeCAoc3RyKTogTVFUVCB0b3BpYyBwcmVmaXggKGUuZy4sICdCRScpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdlbmVyYXRlIGRpc2NvdmVyeSB0b3BpYwogICAgICAgIGRpc2NvdmVyeV90b3BpYyA9IGYiaG9tZWFzc2lzdGFudC9zZW5zb3Ive3RvcGljX3ByZWZpeH0ve3NlbnNvcl9jb25maWdbJ2lkJ119L2NvbmZpZyIKICAgICAgICAKICAgICAgICAjIENyZWF0ZSBkaXNjb3ZlcnkgcGF5bG9hZAogICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICJuYW1lIjogc2Vuc29yX2NvbmZpZ1snbmFtZSddLAogICAgICAgICAgICAic3RhdGVfdG9waWMiOiBmInt0b3BpY19wcmVmaXh9L2luZm8iLAogICAgICAgICAgICAidW5pcXVlX2lkIjogZiJ7dG9waWNfcHJlZml4fV97c2Vuc29yX2NvbmZpZ1snaWQnXX0iLAogICAgICAgICAgICAib2JqZWN0X2lkIjogZiJ7dG9waWNfcHJlZml4Lmxvd2VyKCl9X3tzZW5zb3JfY29uZmlnWydpZCddfSIsCiAgICAgICAgICAgICJ2YWx1ZV90ZW1wbGF0ZSI6IGYie3t7eyB2YWx1ZV9qc29uLntzZW5zb3JfY29uZmlnWydpZCddfSB9fX19IiwKICAgICAgICAgICAgImRldmljZSI6IHsKICAgICAgICAgICAgICAgICJpZGVudGlmaWVycyI6IFsiYmF0dGVyeS1lbXVsYXRvciJdLAogICAgICAgICAgICAgICAgIm1hbnVmYWN0dXJlciI6ICJEYWxhVGVjaCIsCiAgICAgICAgICAgICAgICAibW9kZWwiOiAiQmF0dGVyeUVtdWxhdG9yIiwKICAgICAgICAgICAgICAgICJuYW1lIjogIkJhdHRlcnkgRW11bGF0b3IiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICJhdmFpbGFiaWxpdHkiOiB7CiAgICAgICAgICAgICAgICAidG9waWMiOiBmInt0b3BpY19wcmVmaXh9L3N0YXR1cyIsCiAgICAgICAgICAgICAgICAicGF5bG9hZF9hdmFpbGFibGUiOiAib25saW5lIiwKICAgICAgICAgICAgICAgICJwYXlsb2FkX25vdF9hdmFpbGFibGUiOiAib2ZmbGluZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAjIEFkZCB1bml0IG9mIG1lYXN1cmVtZW50IGlmIHNwZWNpZmllZAogICAgICAgIGlmIHNlbnNvcl9jb25maWdbJ3VuaXQnXToKICAgICAgICAgICAgcGF5bG9hZFsidW5pdF9vZl9tZWFzdXJlbWVudCJdID0gc2Vuc29yX2NvbmZpZ1sndW5pdCddCiAgICAgICAgCiAgICAgICAgIyBBZGQgZGV2aWNlIGNsYXNzIGlmIHNwZWNpZmllZAogICAgICAgIGlmIHNlbnNvcl9jb25maWdbJ2RldmljZV9jbGFzcyddOgogICAgICAgICAgICBwYXlsb2FkWyJkZXZpY2VfY2xhc3MiXSA9IHNlbnNvcl9jb25maWdbJ2RldmljZV9jbGFzcyddCiAgICAgICAgCiAgICAgICAgIyBBZGQgc3RhdGUgY2xhc3MgaWYgc3BlY2lmaWVkCiAgICAgICAgaWYgc2Vuc29yX2NvbmZpZ1snc3RhdGVfY2xhc3MnXToKICAgICAgICAgICAgcGF5bG9hZFsic3RhdGVfY2xhc3MiXSA9IHNlbnNvcl9jb25maWdbJ3N0YXRlX2NsYXNzJ10KICAgICAgICAKICAgICAgICAjIENvbnZlcnQgdG8gSlNPTgogICAgICAgIHBheWxvYWRfanNvbiA9IGpzb24uZHVtcHMocGF5bG9hZCkKICAgICAgICAKICAgICAgICAjIFB1Ymxpc2ggZGlzY292ZXJ5IG1lc3NhZ2UgKHJldGFpbj1UcnVlIHNvIEhBIGNhbiBkaXNjb3ZlciBhZnRlciByZXN0YXJ0KQogICAgICAgICMgTm90ZTogV2UgbmVlZCB0byBwdWJsaXNoIHRvIHRoZSBmdWxsIHRvcGljLCBub3QgdXNpbmcgbXF0dF9jbGllbnQucHVibGlzaCgpCiAgICAgICAgIyBiZWNhdXNlIHRoYXQgYWRkcyB0aGUgcHJlZml4IGF1dG9tYXRpY2FsbHkKICAgICAgICBmcm9tIHVtcXR0LnNpbXBsZSBpbXBvcnQgTVFUVENsaWVudAogICAgICAgIAogICAgICAgICMgR2V0IE1RVFQgY2xpZW50IGZyb20gbXF0dF9jbGllbnQgbW9kdWxlIChpbnRlcm5hbCBhY2Nlc3MpCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudCBvciBub3QgbXF0dF9jbGllbnQuX21xdHRfY29ubmVjdGVkOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBtcXR0X2NsaWVudC5fbXF0dF9jbGllbnQucHVibGlzaChkaXNjb3ZlcnlfdG9waWMuZW5jb2RlKCksIHBheWxvYWRfanNvbi5lbmNvZGUoKSwgcmV0YWluPVRydWUsIHFvcz0wKQogICAgICAgIAogICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbSEEgRGlzY292ZXJ5XSBFcnJvciBwdWJsaXNoaW5nIHNlbnNvciB7c2Vuc29yX2NvbmZpZ1snaWQnXX06IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1Ymxpc2hfYnV0dG9uX2Rpc2NvdmVyeShidXR0b25fY29uZmlnLCB0b3BpY19wcmVmaXgpOgogICAgIiIiUHVibGlzaCBidXR0b24gZGlzY292ZXJ5IG1lc3NhZ2UKICAgIAogICAgQXJnczoKICAgICAgICBidXR0b25fY29uZmlnIChkaWN0KTogQnV0dG9uIGNvbmZpZ3VyYXRpb24KICAgICAgICB0b3BpY19wcmVmaXggKHN0cik6IE1RVFQgdG9waWMgcHJlZml4IChlLmcuLCAnQkUnKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBHZW5lcmF0ZSBkaXNjb3ZlcnkgdG9waWMKICAgICAgICBkaXNjb3ZlcnlfdG9waWMgPSBmImhvbWVhc3Npc3RhbnQvYnV0dG9uL3t0b3BpY19wcmVmaXh9L3tidXR0b25fY29uZmlnWydpZCddfS9jb25maWciCiAgICAgICAgCiAgICAgICAgIyBDcmVhdGUgZGlzY292ZXJ5IHBheWxvYWQKICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAibmFtZSI6IGJ1dHRvbl9jb25maWdbJ25hbWUnXSwKICAgICAgICAgICAgInVuaXF1ZV9pZCI6IGYie3RvcGljX3ByZWZpeC5sb3dlcigpfV97YnV0dG9uX2NvbmZpZ1snaWQnXX0iLAogICAgICAgICAgICAiY29tbWFuZF90b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vY29tbWFuZC97YnV0dG9uX2NvbmZpZ1snaWQnXX0iLAogICAgICAgICAgICAiZGV2aWNlIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXJzIjogWyJiYXR0ZXJ5LWVtdWxhdG9yIl0sCiAgICAgICAgICAgICAgICAibWFudWZhY3R1cmVyIjogIkRhbGFUZWNoIiwKICAgICAgICAgICAgICAgICJtb2RlbCI6ICJCYXR0ZXJ5RW11bGF0b3IiLAogICAgICAgICAgICAgICAgIm5hbWUiOiAiQmF0dGVyeSBFbXVsYXRvciIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImF2YWlsYWJpbGl0eSI6IHsKICAgICAgICAgICAgICAgICJ0b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vc3RhdHVzIiwKICAgICAgICAgICAgICAgICJwYXlsb2FkX2F2YWlsYWJsZSI6ICJvbmxpbmUiLAogICAgICAgICAgICAgICAgInBheWxvYWRfbm90X2F2YWlsYWJsZSI6ICJvZmZsaW5lIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgQ29udmVydCB0byBKU09OCiAgICAgICAgcGF5bG9hZF9qc29uID0ganNvbi5kdW1wcyhwYXlsb2FkKQogICAgICAgIAogICAgICAgICMgUHVibGlzaCBkaXNjb3ZlcnkgbWVzc2FnZSAocmV0YWluPVRydWUpCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudCBvciBub3QgbXF0dF9jbGllbnQuX21xdHRfY29ubmVjdGVkOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBtcXR0X2NsaWVudC5fbXF0dF9jbGllbnQucHVibGlzaChkaXNjb3ZlcnlfdG9waWMuZW5jb2RlKCksIHBheWxvYWRfanNvbi5lbmNvZGUoKSwgcmV0YWluPVRydWUsIHFvcz0wKQogICAgICAgIAogICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbSEEgRGlzY292ZXJ5XSBFcnJvciBwdWJsaXNoaW5nIGJ1dHRvbiB7YnV0dG9uX2NvbmZpZ1snaWQnXX06IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1Ymxpc2hfY2VsbF92b2x0YWdlX2Rpc2NvdmVyeShjZWxsX251bWJlciwgdG9waWNfcHJlZml4KToKICAgICIiIlB1Ymxpc2ggY2VsbCB2b2x0YWdlIHNlbnNvciBkaXNjb3ZlcnkgbWVzc2FnZQogICAgCiAgICBBcmdzOgogICAgICAgIGNlbGxfbnVtYmVyIChpbnQpOiBDZWxsIG51bWJlciAoMS1iYXNlZCkKICAgICAgICB0b3BpY19wcmVmaXggKHN0cik6IE1RVFQgdG9waWMgcHJlZml4IChlLmcuLCAnQkUnKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBHZW5lcmF0ZSBkaXNjb3ZlcnkgdG9waWMKICAgICAgICBkaXNjb3ZlcnlfdG9waWMgPSBmImhvbWVhc3Npc3RhbnQvc2Vuc29yL3t0b3BpY19wcmVmaXh9L2NlbGxfdm9sdGFnZXtjZWxsX251bWJlcn0vY29uZmlnIgogICAgICAgIAogICAgICAgICMgQ3JlYXRlIGRpc2NvdmVyeSBwYXlsb2FkCiAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgIm5hbWUiOiBmIkJhdHRlcnkgQ2VsbCBWb2x0YWdlIHtjZWxsX251bWJlcn0iLAogICAgICAgICAgICAic3RhdGVfdG9waWMiOiBmInt0b3BpY19wcmVmaXh9L3NwZWNfZGF0YSIsCiAgICAgICAgICAgICJ1bmlxdWVfaWQiOiBmInt0b3BpY19wcmVmaXh9X2JhdHRlcnlfdm9sdGFnZV9jZWxse2NlbGxfbnVtYmVyfSIsCiAgICAgICAgICAgICJvYmplY3RfaWQiOiBmInt0b3BpY19wcmVmaXgubG93ZXIoKX1fYmF0dGVyeV92b2x0YWdlX2NlbGx7Y2VsbF9udW1iZXJ9IiwKICAgICAgICAgICAgInZhbHVlX3RlbXBsYXRlIjogZiJ7e3t7IHZhbHVlX2pzb24uY2VsbF92b2x0YWdlc1t7Y2VsbF9udW1iZXIgLSAxfV0gfX19fSIsCiAgICAgICAgICAgICJ1bml0X29mX21lYXN1cmVtZW50IjogIlYiLAogICAgICAgICAgICAiZGV2aWNlX2NsYXNzIjogInZvbHRhZ2UiLAogICAgICAgICAgICAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQiLAogICAgICAgICAgICAiZGV2aWNlIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXJzIjogWyJiYXR0ZXJ5LWVtdWxhdG9yIl0sCiAgICAgICAgICAgICAgICAibWFudWZhY3R1cmVyIjogIkRhbGFUZWNoIiwKICAgICAgICAgICAgICAgICJtb2RlbCI6ICJCYXR0ZXJ5RW11bGF0b3IiLAogICAgICAgICAgICAgICAgIm5hbWUiOiAiQmF0dGVyeSBFbXVsYXRvciIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImF2YWlsYWJpbGl0eSI6IHsKICAgICAgICAgICAgICAgICJ0b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vc3RhdHVzIiwKICAgICAgICAgICAgICAgICJwYXlsb2FkX2F2YWlsYWJsZSI6ICJvbmxpbmUiLAogICAgICAgICAgICAgICAgInBheWxvYWRfbm90X2F2YWlsYWJsZSI6ICJvZmZsaW5lIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgQ29udmVydCB0byBKU09OCiAgICAgICAgcGF5bG9hZF9qc29uID0ganNvbi5kdW1wcyhwYXlsb2FkKQogICAgICAgIAogICAgICAgICMgUHVibGlzaCBkaXNjb3ZlcnkgbWVzc2FnZSAocmV0YWluPVRydWUpCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudCBvciBub3QgbXF0dF9jbGllbnQuX21xdHRfY29ubmVjdGVkOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBtcXR0X2NsaWVudC5fbXF0dF9jbGllbnQucHVibGlzaChkaXNjb3ZlcnlfdG9waWMuZW5jb2RlKCksIHBheWxvYWRfanNvbi5lbmNvZGUoKSwgcmV0YWluPVRydWUsIHFvcz0wKQogICAgICAgIAogICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbSEEgRGlzY292ZXJ5XSBFcnJvciBwdWJsaXNoaW5nIGNlbGwgdm9sdGFnZSB7Y2VsbF9udW1iZXJ9OiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdWJsaXNoX2Rpc2NvdmVyeShudW1fY2VsbHM9MCwgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzPUZhbHNlKToKICAgICIiIlB1Ymxpc2ggYWxsIEhvbWUgQXNzaXN0YW50IGRpc2NvdmVyeSBtZXNzYWdlcwogICAgCiAgICBBcmdzOgogICAgICAgIG51bV9jZWxscyAoaW50KTogTnVtYmVyIG9mIGJhdHRlcnkgY2VsbHMgKGZvciBjZWxsIHZvbHRhZ2Ugc2Vuc29ycykKICAgICAgICBwdWJsaXNoX2NlbGxfdm9sdGFnZXMgKGJvb2wpOiBXaGV0aGVyIHRvIHB1Ymxpc2ggY2VsbCB2b2x0YWdlIHNlbnNvcnMKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGFsbCBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIGdsb2JhbCBfZGlzY292ZXJ5X3B1Ymxpc2hlZAogICAgCiAgICBpZiBfZGlzY292ZXJ5X3B1Ymxpc2hlZDoKICAgICAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gQWxyZWFkeSBwdWJsaXNoZWQsIHNraXBwaW5nIikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgCiAgICBpZiBub3QgbXF0dF9jbGllbnQuaXNfY29ubmVjdGVkKCk6CiAgICAgICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIE1RVFQgbm90IGNvbm5lY3RlZCIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHRvcGljX3ByZWZpeCA9IG1xdHRfY2xpZW50LmdldF90b3BpY19wcmVmaXgoKQogICAgCiAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gUHVibGlzaGluZyBkaXNjb3ZlcnkgbWVzc2FnZXMuLi4iKQogICAgCiAgICBzdWNjZXNzID0gVHJ1ZQogICAgCiAgICAjIFB1Ymxpc2ggc2Vuc29yIGRpc2NvdmVyaWVzCiAgICBmb3Igc2Vuc29yX2NvbmZpZyBpbiBTRU5TT1JfQ09ORklHUzoKICAgICAgICBpZiBub3QgcHVibGlzaF9zZW5zb3JfZGlzY292ZXJ5KHNlbnNvcl9jb25maWcsIHRvcGljX3ByZWZpeCk6CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgICAgIHRpbWUuc2xlZXBfbXMoNTApICAjIFNtYWxsIGRlbGF5IHRvIGF2b2lkIG92ZXJ3aGVsbWluZyBicm9rZXIKICAgIAogICAgIyBQdWJsaXNoIGJ1dHRvbiBkaXNjb3ZlcmllcwogICAgZm9yIGJ1dHRvbl9jb25maWcgaW4gQlVUVE9OX0NPTkZJR1M6CiAgICAgICAgaWYgbm90IHB1Ymxpc2hfYnV0dG9uX2Rpc2NvdmVyeShidXR0b25fY29uZmlnLCB0b3BpY19wcmVmaXgpOgogICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgICAgICB0aW1lLnNsZWVwX21zKDUwKQogICAgCiAgICAjIFB1Ymxpc2ggY2VsbCB2b2x0YWdlIGRpc2NvdmVyaWVzIChpZiBlbmFibGVkKQogICAgaWYgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzIGFuZCBudW1fY2VsbHMgPiAwOgogICAgICAgIHByaW50KGYiW0hBIERpc2NvdmVyeV0gUHVibGlzaGluZyB7bnVtX2NlbGxzfSBjZWxsIHZvbHRhZ2Ugc2Vuc29ycy4uLiIpCiAgICAgICAgZm9yIGNlbGxfbnVtIGluIHJhbmdlKDEsIG51bV9jZWxscyArIDEpOgogICAgICAgICAgICBpZiBub3QgcHVibGlzaF9jZWxsX3ZvbHRhZ2VfZGlzY292ZXJ5KGNlbGxfbnVtLCB0b3BpY19wcmVmaXgpOgogICAgICAgICAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgICAgIHRpbWUuc2xlZXBfbXMoNTApCiAgICAKICAgIGlmIHN1Y2Nlc3M6CiAgICAgICAgX2Rpc2NvdmVyeV9wdWJsaXNoZWQgPSBUcnVlCiAgICAgICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIEFsbCBkaXNjb3ZlcnkgbWVzc2FnZXMgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseSIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBTb21lIGRpc2NvdmVyeSBtZXNzYWdlcyBmYWlsZWQgdG8gcHVibGlzaCIpCiAgICAKICAgIHJldHVybiBzdWNjZXNzCgoKZGVmIGNsZWFyX2Rpc2NvdmVyeSgpOgogICAgIiIiQ2xlYXIgSG9tZSBBc3Npc3RhbnQgZGlzY292ZXJ5IChwdWJsaXNoIGVtcHR5IHBheWxvYWRzKQogICAgCiAgICBUaGlzIHJlbW92ZXMgdGhlIGVudGl0aWVzIGZyb20gSG9tZSBBc3Npc3RhbnQuCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBjbGVhcmVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICBnbG9iYWwgX2Rpc2NvdmVyeV9wdWJsaXNoZWQKICAgIAogICAgaWYgbm90IG1xdHRfY2xpZW50LmlzX2Nvbm5lY3RlZCgpOgogICAgICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBNUVRUIG5vdCBjb25uZWN0ZWQiKQogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0b3BpY19wcmVmaXggPSBtcXR0X2NsaWVudC5nZXRfdG9waWNfcHJlZml4KCkKICAgIAogICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIENsZWFyaW5nIGRpc2NvdmVyeSBtZXNzYWdlcy4uLiIpCiAgICAKICAgIHN1Y2Nlc3MgPSBUcnVlCiAgICAKICAgICMgQ2xlYXIgc2Vuc29yIGRpc2NvdmVyaWVzCiAgICBmb3Igc2Vuc29yX2NvbmZpZyBpbiBTRU5TT1JfQ09ORklHUzoKICAgICAgICBkaXNjb3ZlcnlfdG9waWMgPSBmImhvbWVhc3Npc3RhbnQvc2Vuc29yL3t0b3BpY19wcmVmaXh9L3tzZW5zb3JfY29uZmlnWydpZCddfS9jb25maWciCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudC5wdWJsaXNoKGRpc2NvdmVyeV90b3BpYy5lbmNvZGUoKSwgYiIiLCByZXRhaW49VHJ1ZSwgcW9zPTApOgogICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgICAgICB0aW1lLnNsZWVwX21zKDUwKQogICAgCiAgICAjIENsZWFyIGJ1dHRvbiBkaXNjb3ZlcmllcwogICAgZm9yIGJ1dHRvbl9jb25maWcgaW4gQlVUVE9OX0NPTkZJR1M6CiAgICAgICAgZGlzY292ZXJ5X3RvcGljID0gZiJob21lYXNzaXN0YW50L2J1dHRvbi97dG9waWNfcHJlZml4fS97YnV0dG9uX2NvbmZpZ1snaWQnXX0vY29uZmlnIgogICAgICAgIGlmIG5vdCBtcXR0X2NsaWVudC5fbXF0dF9jbGllbnQucHVibGlzaChkaXNjb3ZlcnlfdG9waWMuZW5jb2RlKCksIGIiIiwgcmV0YWluPVRydWUsIHFvcz0wKToKICAgICAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgdGltZS5zbGVlcF9tcyg1MCkKICAgIAogICAgX2Rpc2NvdmVyeV9wdWJsaXNoZWQgPSBGYWxzZQogICAgCiAgICBpZiBzdWNjZXNzOgogICAgICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBEaXNjb3ZlcnkgY2xlYXJlZCBzdWNjZXNzZnVsbHkiKQogICAgZWxzZToKICAgICAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gU29tZSBkaXNjb3ZlcnkgbWVzc2FnZXMgZmFpbGVkIHRvIGNsZWFyIikKICAgIAogICAgcmV0dXJuIHN1Y2Nlc3MKCgpkZWYgcmVzZXRfZGlzY292ZXJ5X2ZsYWcoKToKICAgICIiIlJlc2V0IGRpc2NvdmVyeSBwdWJsaXNoZWQgZmxhZyAoZm9yIHJlLXB1Ymxpc2hpbmcgYWZ0ZXIgY29uZmlnIGNoYW5nZSkiIiIKICAgIGdsb2JhbCBfZGlzY292ZXJ5X3B1Ymxpc2hlZAogICAgX2Rpc2NvdmVyeV9wdWJsaXNoZWQgPSBGYWxzZQo=",
  "/lib/ext/dbe/mqtt_publisher.py": "IiIiCk1RVFQgUHVibGlzaGVyIE1vZHVsZSBmb3IgREJFCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKRm9ybWF0IGFuZCBwdWJsaXNoIGJhdHRlcnkgdGVsZW1ldHJ5IGRhdGEgdG8gTVFUVCBicm9rZXIuCgpUb3BpY3MgU3RydWN0dXJlIChmb2xsb3dpbmcgQmF0dGVyeSBFbXVsYXRvciBwYXR0ZXJuKToKLSB7cHJlZml4fS9zdGF0dXMgICAgICAgICAgLSAib25saW5lIiAvICJvZmZsaW5lIiAoTFdUKQotIHtwcmVmaXh9L2luZm8gICAgICAgICAgICAtIE1haW4gYmF0dGVyeSBpbmZvIChKU09OKQotIHtwcmVmaXh9L3NwZWNfZGF0YSAgICAgICAtIENlbGwgdm9sdGFnZXMgKEpTT04gYXJyYXkpCi0ge3ByZWZpeH0vYmFsYW5jaW5nX2RhdGEgIC0gQ2VsbCBiYWxhbmNpbmcgc3RhdHVzIChKU09OIGFycmF5KQotIHtwcmVmaXh9L2V2ZW50cyAgICAgICAgICAtIEV2ZW50cy9hbGFybXMgKEpTT04pCgpQZXJmb3JtYW5jZSBDb25zaWRlcmF0aW9uczoKLSBQcmUtYWxsb2NhdGUgSlNPTiBidWZmZXJzIChhdm9pZCByZXBlYXRlZCBhbGxvY2F0aW9uKQotIEJhdGNoIHB1Ymxpc2ggb3BlcmF0aW9ucyAoZG9uJ3QgYmxvY2sgb24gZWFjaCBwdWJsaXNoKQotIENvbmZpZ3VyYWJsZSBwdWJsaXNoIGludGVydmFsIChkZWZhdWx0OiA1IHNlY29uZHMpCi0gU2tpcCBjZWxsIHZvbHRhZ2VzIGlmIGRpc2FibGVkIGluIGNvbmZpZwoiIiIKCmltcG9ydCBqc29uCmZyb20gbGliLmV4dC5kYmUgaW1wb3J0IG1xdHRfY2xpZW50CgoKZGVmIHB1Ymxpc2hfc3RhdHVzKG9ubGluZT1UcnVlKToKICAgICIiIlB1Ymxpc2ggb25saW5lL29mZmxpbmUgc3RhdHVzCiAgICAKICAgIEFyZ3M6CiAgICAgICAgb25saW5lIChib29sKTogVHJ1ZSBmb3Igb25saW5lLCBGYWxzZSBmb3Igb2ZmbGluZQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICBzdGF0dXMgPSAib25saW5lIiBpZiBvbmxpbmUgZWxzZSAib2ZmbGluZSIKICAgIHJldHVybiBtcXR0X2NsaWVudC5wdWJsaXNoKCJzdGF0dXMiLCBzdGF0dXMsIHJldGFpbj1UcnVlLCBxb3M9MSkKCgpkZWYgcHVibGlzaF9pbmZvKGJhdHRlcnlfZGF0YSk6CiAgICAiIiJQdWJsaXNoIG1haW4gYmF0dGVyeSBpbmZvcm1hdGlvbgogICAgCiAgICBBcmdzOgogICAgICAgIGJhdHRlcnlfZGF0YSAoZGljdCk6IEJhdHRlcnkgZGF0YSBmcm9tIGJhdHRlcnkuZ2V0X2RhdGEoKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBFeHRyYWN0IGFuZCBmb3JtYXQgYmF0dGVyeSBtZXRyaWNzCiAgICAgICAgaW5mbyA9IHsKICAgICAgICAgICAgIyBTdGF0ZSBvZiBDaGFyZ2UKICAgICAgICAgICAgIlNPQyI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3NvY19wZXJjZW50JywgMCkgLyAxMDAuMCwgMiksCiAgICAgICAgICAgICJTT0NfcmVhbCI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3NvY19wZXJjZW50JywgMCkgLyAxMDAuMCwgMiksICAjIFNhbWUgZm9yIG5vdwogICAgICAgICAgICAKICAgICAgICAgICAgIyBTdGF0ZSBvZiBIZWFsdGgKICAgICAgICAgICAgInN0YXRlX29mX2hlYWx0aCI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3NvaF9wZXJjZW50JywgMTAwKSAvIDEwMC4wLCAyKSwKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVGVtcGVyYXR1cmUKICAgICAgICAgICAgInRlbXBlcmF0dXJlX21pbiI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3RlbXBfbWluX0MnLCAwKSwgMSksCiAgICAgICAgICAgICJ0ZW1wZXJhdHVyZV9tYXgiOiByb3VuZChiYXR0ZXJ5X2RhdGEuZ2V0KCd0ZW1wX21heF9DJywgMCksIDEpLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBDdXJyZW50IGFuZCBWb2x0YWdlCiAgICAgICAgICAgICJiYXR0ZXJ5X2N1cnJlbnQiOiByb3VuZChiYXR0ZXJ5X2RhdGEuZ2V0KCdjdXJyZW50X2RBJywgMCkgLyAxMC4wLCAxKSwKICAgICAgICAgICAgImJhdHRlcnlfdm9sdGFnZSI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3ZvbHRhZ2VfZFYnLCAwKSAvIDEwLjAsIDEpLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBDZWxsIFZvbHRhZ2VzCiAgICAgICAgICAgICJjZWxsX21heF92b2x0YWdlIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgnY2VsbF9tYXhfbVYnLCAwKSAvIDEwMDAuMCwgMyksCiAgICAgICAgICAgICJjZWxsX21pbl92b2x0YWdlIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgnY2VsbF9taW5fbVYnLCAwKSAvIDEwMDAuMCwgMyksCiAgICAgICAgICAgICJjZWxsX3ZvbHRhZ2VfZGVsdGEiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX2RldmlhdGlvbl9tVicsIDApLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBDYXBhY2l0eQogICAgICAgICAgICAidG90YWxfY2FwYWNpdHkiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCd0b3RhbF9jYXBhY2l0eV9XaCcsIDApLAogICAgICAgICAgICAicmVtYWluaW5nX2NhcGFjaXR5IjogYmF0dGVyeV9kYXRhLmdldCgncmVtYWluaW5nX2NhcGFjaXR5X1doJywgMCksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFBvd2VyIExpbWl0cwogICAgICAgICAgICAibWF4X2Rpc2NoYXJnZV9wb3dlciI6IGJhdHRlcnlfZGF0YS5nZXQoJ21heF9kaXNjaGFyZ2VfcG93ZXJfVycsIDApLAogICAgICAgICAgICAibWF4X2NoYXJnZV9wb3dlciI6IGJhdHRlcnlfZGF0YS5nZXQoJ21heF9jaGFyZ2VfcG93ZXJfVycsIDApLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBDdXJyZW50IFBvd2VyCiAgICAgICAgICAgICJzdGF0X2JhdHRfcG93ZXIiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdwb3dlcl9XJywgMCksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEJhbGFuY2luZwogICAgICAgICAgICAiYmFsYW5jaW5nX2FjdGl2ZV9jZWxscyI6IGJhdHRlcnlfZGF0YS5nZXQoJ2JhbGFuY2luZ19hY3RpdmVfY2VsbHMnLCAwKSwKICAgICAgICAgICAgImJhbGFuY2luZ19zdGF0dXMiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdiYWxhbmNpbmdfc3RhdHVzJywgJ1Vua25vd24nKSwKICAgICAgICAgICAgCiAgICAgICAgICAgICMgU3RhdHVzCiAgICAgICAgICAgICJibXNfc3RhdHVzIjogYmF0dGVyeV9kYXRhLmdldCgnYm1zX3N0YXR1cycsICdVbmtub3duJyksCiAgICAgICAgICAgICJlbXVsYXRvcl9zdGF0dXMiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdlbXVsYXRvcl9zdGF0dXMnLCAnUnVubmluZycpCiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgQ29udmVydCB0byBKU09OCiAgICAgICAgcGF5bG9hZCA9IGpzb24uZHVtcHMoaW5mbykKICAgICAgICAKICAgICAgICAjIFB1Ymxpc2gKICAgICAgICByZXR1cm4gbXF0dF9jbGllbnQucHVibGlzaCgiaW5mbyIsIHBheWxvYWQsIHJldGFpbj1GYWxzZSwgcW9zPTApCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVCBQdWJsaXNoZXJdIEVycm9yIHB1Ymxpc2hpbmcgaW5mbzoge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzKGJhdHRlcnlfZGF0YSk6CiAgICAiIiJQdWJsaXNoIGluZGl2aWR1YWwgY2VsbCB2b2x0YWdlcwogICAgCiAgICBBcmdzOgogICAgICAgIGJhdHRlcnlfZGF0YSAoZGljdCk6IEJhdHRlcnkgZGF0YSBmcm9tIGJhdHRlcnkuZ2V0X2RhdGEoKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgcHVibGlzaGVkIHN1Y2Nlc3NmdWxseQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBHZXQgY2VsbCB2b2x0YWdlcyBhcnJheQogICAgICAgIGNlbGxfdm9sdGFnZXNfbVYgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX3ZvbHRhZ2VzX21WJywgW10pCiAgICAgICAgCiAgICAgICAgaWYgbm90IGNlbGxfdm9sdGFnZXNfbVY6CiAgICAgICAgICAgIHJldHVybiBUcnVlICAjIE5vIGNlbGwgdm9sdGFnZXMgYXZhaWxhYmxlCiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IGZyb20gbVYgdG8gVgogICAgICAgIGNlbGxfdm9sdGFnZXNfViA9IFtyb3VuZCh2IC8gMTAwMC4wLCAzKSBmb3IgdiBpbiBjZWxsX3ZvbHRhZ2VzX21WXQogICAgICAgIAogICAgICAgICMgQ3JlYXRlIHBheWxvYWQKICAgICAgICBwYXlsb2FkX2RpY3QgPSB7CiAgICAgICAgICAgICJjZWxsX3ZvbHRhZ2VzIjogY2VsbF92b2x0YWdlc19WCiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgQ29udmVydCB0byBKU09OCiAgICAgICAgcGF5bG9hZCA9IGpzb24uZHVtcHMocGF5bG9hZF9kaWN0KQogICAgICAgIAogICAgICAgICMgUHVibGlzaAogICAgICAgIHJldHVybiBtcXR0X2NsaWVudC5wdWJsaXNoKCJzcGVjX2RhdGEiLCBwYXlsb2FkLCByZXRhaW49RmFsc2UsIHFvcz0wKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW01RVFQgUHVibGlzaGVyXSBFcnJvciBwdWJsaXNoaW5nIGNlbGwgdm9sdGFnZXM6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1Ymxpc2hfY2VsbF9iYWxhbmNpbmcoYmF0dGVyeV9kYXRhKToKICAgICIiIlB1Ymxpc2ggY2VsbCBiYWxhbmNpbmcgc3RhdHVzCiAgICAKICAgIEFyZ3M6CiAgICAgICAgYmF0dGVyeV9kYXRhIChkaWN0KTogQmF0dGVyeSBkYXRhIGZyb20gYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdldCBjZWxsIGJhbGFuY2luZyBzdGF0dXMgYXJyYXkKICAgICAgICBjZWxsX2JhbGFuY2luZyA9IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfYmFsYW5jaW5nX3N0YXR1cycsIFtdKQogICAgICAgIAogICAgICAgIGlmIG5vdCBjZWxsX2JhbGFuY2luZzoKICAgICAgICAgICAgcmV0dXJuIFRydWUgICMgTm8gYmFsYW5jaW5nIGRhdGEgYXZhaWxhYmxlCiAgICAgICAgCiAgICAgICAgIyBDcmVhdGUgcGF5bG9hZAogICAgICAgIHBheWxvYWRfZGljdCA9IHsKICAgICAgICAgICAgImNlbGxfYmFsYW5jaW5nIjogY2VsbF9iYWxhbmNpbmcKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHRvIEpTT04KICAgICAgICBwYXlsb2FkID0ganNvbi5kdW1wcyhwYXlsb2FkX2RpY3QpCiAgICAgICAgCiAgICAgICAgIyBQdWJsaXNoCiAgICAgICAgcmV0dXJuIG1xdHRfY2xpZW50LnB1Ymxpc2goImJhbGFuY2luZ19kYXRhIiwgcGF5bG9hZCwgcmV0YWluPUZhbHNlLCBxb3M9MCkKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUIFB1Ymxpc2hlcl0gRXJyb3IgcHVibGlzaGluZyBjZWxsIGJhbGFuY2luZzoge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgcHVibGlzaF9ldmVudHMoZXZlbnRzKToKICAgICIiIlB1Ymxpc2ggZXZlbnRzL2FsYXJtcwogICAgCiAgICBBcmdzOgogICAgICAgIGV2ZW50cyAobGlzdCk6IExpc3Qgb2YgZXZlbnQgZGljdGlvbmFyaWVzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICBpZiBub3QgZXZlbnRzOgogICAgICAgICAgICByZXR1cm4gVHJ1ZSAgIyBObyBldmVudHMgdG8gcHVibGlzaAogICAgICAgIAogICAgICAgICMgUHVibGlzaCBlYWNoIGV2ZW50IHNlcGFyYXRlbHkgKGxpa2UgQmF0dGVyeSBFbXVsYXRvcikKICAgICAgICBmb3IgZXZlbnQgaW4gZXZlbnRzOgogICAgICAgICAgICBwYXlsb2FkID0ganNvbi5kdW1wcyhldmVudCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIG5vdCBtcXR0X2NsaWVudC5wdWJsaXNoKCJldmVudHMiLCBwYXlsb2FkLCByZXRhaW49RmFsc2UsIHFvcz0wKToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVCBQdWJsaXNoZXJdIEVycm9yIHB1Ymxpc2hpbmcgZXZlbnRzOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdWJsaXNoX2FsbChiYXR0ZXJ5X2RhdGEsIHB1Ymxpc2hfY2VsbF92b2x0YWdlc19lbmFibGVkPVRydWUsIHB1Ymxpc2hfYmFsYW5jaW5nX2VuYWJsZWQ9VHJ1ZSk6CiAgICAiIiJQdWJsaXNoIGFsbCBiYXR0ZXJ5IGRhdGEKICAgIAogICAgQXJnczoKICAgICAgICBiYXR0ZXJ5X2RhdGEgKGRpY3QpOiBCYXR0ZXJ5IGRhdGEgZnJvbSBiYXR0ZXJ5LmdldF9kYXRhKCkKICAgICAgICBwdWJsaXNoX2NlbGxfdm9sdGFnZXNfZW5hYmxlZCAoYm9vbCk6IFdoZXRoZXIgdG8gcHVibGlzaCBjZWxsIHZvbHRhZ2VzCiAgICAgICAgcHVibGlzaF9iYWxhbmNpbmdfZW5hYmxlZCAoYm9vbCk6IFdoZXRoZXIgdG8gcHVibGlzaCBiYWxhbmNpbmcgc3RhdHVzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBhbGwgcHVibGlzaGVzIHN1Y2Nlc3NmdWwKICAgICIiIgogICAgc3VjY2VzcyA9IFRydWUKICAgIAogICAgIyBQdWJsaXNoIHN0YXR1cyAob25saW5lKQogICAgaWYgbm90IHB1Ymxpc2hfc3RhdHVzKG9ubGluZT1UcnVlKToKICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgIAogICAgIyBQdWJsaXNoIG1haW4gaW5mbwogICAgaWYgbm90IHB1Ymxpc2hfaW5mbyhiYXR0ZXJ5X2RhdGEpOgogICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgCiAgICAjIFB1Ymxpc2ggY2VsbCB2b2x0YWdlcyAoaWYgZW5hYmxlZCkKICAgIGlmIHB1Ymxpc2hfY2VsbF92b2x0YWdlc19lbmFibGVkOgogICAgICAgIGlmIG5vdCBwdWJsaXNoX2NlbGxfdm9sdGFnZXMoYmF0dGVyeV9kYXRhKToKICAgICAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAKICAgICMgUHVibGlzaCBjZWxsIGJhbGFuY2luZyAoaWYgZW5hYmxlZCkKICAgIGlmIHB1Ymxpc2hfYmFsYW5jaW5nX2VuYWJsZWQ6CiAgICAgICAgaWYgbm90IHB1Ymxpc2hfY2VsbF9iYWxhbmNpbmcoYmF0dGVyeV9kYXRhKToKICAgICAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAKICAgIHJldHVybiBzdWNjZXNzCg==",
  "/lib/ext/dbe/battery/__init__.py": "IiIiCkJhdHRlcnkgUHJvdG9jb2wgSW1wbGVtZW50YXRpb25zCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKTWljcm9QeXRob24gaW1wbGVtZW50YXRpb25zIG9mIGJhdHRlcnkgcHJvdG9jb2xzIGZyb20gQmF0dGVyeSBFbXVsYXRvci4KIiIiCg==",
  "/lib/ext/dbe/battery/battery_base.py": "IiIiCkJhdHRlcnkgQmFzZSBDbGFzcwo9PT09PT09PT09PT09PT09PT0KCkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGJhdHRlcnkgcHJvdG9jb2wgaW1wbGVtZW50YXRpb25zLgoKVXNlcyBDQU4gbWFuYWdlciBmb3IgdHJhbnNtaXNzaW9uIChub3QgZGlyZWN0IENBTiBkZXZpY2UgYWNjZXNzKS4KIiIiCgppbXBvcnQgQ0FOCgoKY2xhc3MgQmF0dGVyeUJhc2U6CiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBiYXR0ZXJ5IHByb3RvY29scwogICAgCiAgICBVc2VzIENBTiBtYW5hZ2VyIGZvciB0cmFuc21pc3Npb24gKG5vdCBkaXJlY3QgQ0FOIGRldmljZSBhY2Nlc3MpLgogICAgIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjYW5faGFuZGxlKToKICAgICAgICAiIiJJbml0aWFsaXplIHdpdGggQ0FOIG1hbmFnZXIgaGFuZGxlCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgY2FuX2hhbmRsZTogSGFuZGxlIGZyb20gQ0FOLnJlZ2lzdGVyKCkKICAgICAgICAiIiIKICAgICAgICBzZWxmLmNhbl9oYW5kbGUgPSBjYW5faGFuZGxlCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGEgPSB7CiAgICAgICAgICAgICMgVm9sdGFnZSBhbmQgY3VycmVudAogICAgICAgICAgICAndm9sdGFnZV9kVic6IDAsICAgICAgICAgICMgQmF0dGVyeSB2b2x0YWdlIGluIGRlY2l2b2x0cyAoZS5nLiwgMzYwMCA9IDM2MC4wVikKICAgICAgICAgICAgJ2N1cnJlbnRfZEEnOiAwLCAgICAgICAgICAjIEJhdHRlcnkgY3VycmVudCBpbiBkZWNpYW1wcyAoc2lnbmVkLCBlLmcuLCAxMDAgPSAxMC4wQSkKICAgICAgICAgICAgJ3Bvd2VyX1cnOiAwLCAgICAgICAgICAgICAjIENhbGN1bGF0ZWQgcG93ZXIgaW4gd2F0dHMKICAgICAgICAgICAgCiAgICAgICAgICAgICMgU3RhdGUgb2YgY2hhcmdlL2hlYWx0aAogICAgICAgICAgICAnc29jX3BlcmNlbnQnOiAwLCAgICAgICAgICMgU3RhdGUgb2YgY2hhcmdlICgwLTEwMCUpCiAgICAgICAgICAgICdzb2hfcGVyY2VudCc6IDEwMCwgICAgICAgIyBTdGF0ZSBvZiBoZWFsdGggKDAtMTAwJSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVGVtcGVyYXR1cmUKICAgICAgICAgICAgJ3RlbXBfbWF4X0MnOiAwLCAgICAgICAgICAjIE1heGltdW0gY2VsbCB0ZW1wZXJhdHVyZSAowrBDKQogICAgICAgICAgICAndGVtcF9taW5fQyc6IDAsICAgICAgICAgICMgTWluaW11bSBjZWxsIHRlbXBlcmF0dXJlICjCsEMpCiAgICAgICAgICAgICd0ZW1wX2F2Z19DJzogMCwgICAgICAgICAgIyBBdmVyYWdlIGNlbGwgdGVtcGVyYXR1cmUgKMKwQykKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQ2VsbCB2b2x0YWdlcwogICAgICAgICAgICAnY2VsbF9tYXhfbVYnOiAwLCAgICAgICAgICMgTWF4aW11bSBjZWxsIHZvbHRhZ2UgKG1pbGxpdm9sdHMpCiAgICAgICAgICAgICdjZWxsX21pbl9tVic6IDAsICAgICAgICAgIyBNaW5pbXVtIGNlbGwgdm9sdGFnZSAobWlsbGl2b2x0cykKICAgICAgICAgICAgJ2NlbGxfZGV2aWF0aW9uX21WJzogMCwgICAjIENlbGwgdm9sdGFnZSBkZXZpYXRpb24gKG1heCAtIG1pbikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTGltaXRzCiAgICAgICAgICAgICdtYXhfY2hhcmdlX2N1cnJlbnRfZEEnOiAwLCAgICAjIE1heGltdW0gY2hhcmdlIGN1cnJlbnQgKGRlY2lhbXBzKQogICAgICAgICAgICAnbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBJzogMCwgIyBNYXhpbXVtIGRpc2NoYXJnZSBjdXJyZW50IChkZWNpYW1wcykKICAgICAgICAgICAgJ21heF92b2x0YWdlX2RWJzogMCwgICAgICAgICAgICMgTWF4aW11bSBwYWNrIHZvbHRhZ2UgKGRlY2l2b2x0cykKICAgICAgICAgICAgJ21pbl92b2x0YWdlX2RWJzogMCwgICAgICAgICAgICMgTWluaW11bSBwYWNrIHZvbHRhZ2UgKGRlY2l2b2x0cykKICAgICAgICAgICAgCiAgICAgICAgICAgICMgU3RhdHVzL2FsYXJtcwogICAgICAgICAgICAnYWxhcm1zJzogMCwgICAgICAgICAgICAgICMgQWxhcm0gYml0ZmllbGQKICAgICAgICAgICAgJ3dhcm5pbmdzJzogMCwgICAgICAgICAgICAjIFdhcm5pbmcgYml0ZmllbGQKICAgICAgICAgICAgJ3N0YXR1cyc6ICd1bmtub3duJywgICAgICAjIFN0YXR1cyBzdHJpbmcKICAgICAgICAgICAgJ2Vycm9yJzogJycsICAgICAgICAgICAgICAjIEVycm9yIG1lc3NhZ2UgKGlmIGFueSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTWV0YWRhdGEKICAgICAgICAgICAgJ2xhc3RfdXBkYXRlX21zJzogMCwgICAgICAjIExhc3QgdXBkYXRlIHRpbWVzdGFtcCAodGltZS50aWNrc19tcygpKQogICAgICAgICAgICAnZnJhbWVfY291bnQnOiAwLCAgICAgICAgICMgTnVtYmVyIG9mIGZyYW1lcyByZWNlaXZlZAogICAgICAgIH0KICAgIAogICAgZGVmIHNldHVwKHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgYmF0dGVyeSBwcm90b2NvbAogICAgICAgIAogICAgICAgIENhbGxlZCBvbmNlIGR1cmluZyBzdGFydERCRSgpLiBPdmVycmlkZSB0byBzZXQgdXAgcHJvdG9jb2wtc3BlY2lmaWMgc3RhdGUuCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigiU3ViY2xhc3MgbXVzdCBpbXBsZW1lbnQgc2V0dXAoKSIpCiAgICAKICAgIGRlZiBoYW5kbGVfaW5jb21pbmdfY2FuX2ZyYW1lKHNlbGYsIGNhbl9pZCwgZGF0YSk6CiAgICAgICAgIiIiUHJvY2VzcyBpbmNvbWluZyBDQU4gZnJhbWUgKGNhbGxlZCBieSBDQU4gbWFuYWdlciBSWCBjYWxsYmFjaykKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBjYW5faWQ6IENBTiBtZXNzYWdlIElEIChpbnQpCiAgICAgICAgICAgIGRhdGE6IENBTiBkYXRhIGJ5dGVzIChieXRlYXJyYXkvYnl0ZXMsIDAtOCBieXRlcykKICAgICAgICAiIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTdWJjbGFzcyBtdXN0IGltcGxlbWVudCBoYW5kbGVfaW5jb21pbmdfY2FuX2ZyYW1lKCkiKQogICAgCiAgICBkZWYgdHJhbnNtaXRfY2FuKHNlbGYsIGN1cnJlbnRfdGltZV9tcyk6CiAgICAgICAgIiIiU2VuZCBrZWVwLWFsaXZlL2NvbnRyb2wgbWVzc2FnZXMgdmlhIENBTiBtYW5hZ2VyCiAgICAgICAgCiAgICAgICAgVXNlcyBDQU4udHJhbnNtaXQoc2VsZi5jYW5faGFuZGxlLCB7J2lkJzogY2FuX2lkLCAnZGF0YSc6IGRhdGF9KQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGN1cnJlbnRfdGltZV9tczogQ3VycmVudCB0aW1lIGZyb20gdGltZS50aWNrc19tcygpCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigiU3ViY2xhc3MgbXVzdCBpbXBsZW1lbnQgdHJhbnNtaXRfY2FuKCkiKQogICAgCiAgICBkZWYgdXBkYXRlX3ZhbHVlcyhzZWxmKToKICAgICAgICAiIiJVcGRhdGUgZGVyaXZlZCB2YWx1ZXMgKHBvd2VyLCBhdmVyYWdlcywgZXRjLikKICAgICAgICAKICAgICAgICBDYWxsZWQgcGVyaW9kaWNhbGx5IGluIG1haW4gbG9vcCBhZnRlciBDQU4gZnJhbWVzIHByb2Nlc3NlZC4KICAgICAgICBPdmVycmlkZSB0byBjYWxjdWxhdGUgZGVyaXZlZCB2YWx1ZXMgZnJvbSByYXcgZGF0YS4KICAgICAgICAiIiIKICAgICAgICAjIENhbGN1bGF0ZSBwb3dlciBmcm9tIHZvbHRhZ2UgYW5kIGN1cnJlbnQKICAgICAgICB2b2x0YWdlX1YgPSBzZWxmLmJhdHRlcnlfZGF0YVsndm9sdGFnZV9kViddIC8gMTAuMAogICAgICAgIGN1cnJlbnRfQSA9IHNlbGYuYmF0dGVyeV9kYXRhWydjdXJyZW50X2RBJ10gLyAxMC4wCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3Bvd2VyX1cnXSA9IGludCh2b2x0YWdlX1YgKiBjdXJyZW50X0EpCiAgICAgICAgCiAgICAgICAgIyBDYWxjdWxhdGUgY2VsbCBkZXZpYXRpb24KICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnY2VsbF9kZXZpYXRpb25fbVYnXSA9ICgKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ2NlbGxfbWF4X21WJ10gLSBzZWxmLmJhdHRlcnlfZGF0YVsnY2VsbF9taW5fbVYnXQogICAgICAgICkKICAgIAogICAgZGVmIGdldF9kYXRhKHNlbGYpOgogICAgICAgICIiIlJldHVybiBjdXJyZW50IGJhdHRlcnkgZGF0YSBkaWN0CiAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgZGljdDogQ29weSBvZiBiYXR0ZXJ5X2RhdGEKICAgICAgICAiIiIKICAgICAgICByZXR1cm4gc2VsZi5iYXR0ZXJ5X2RhdGEuY29weSgpCiAgICAKICAgIGRlZiBoYW5kbGVfaW52ZXJ0ZXJfY29tbWFuZHMoc2VsZiwgY29tbWFuZHMpOgogICAgICAgICIiIkhhbmRsZSBjb250cm9sIGNvbW1hbmRzIGZyb20gaW52ZXJ0ZXIgKG9wdGlvbmFsKQogICAgICAgIAogICAgICAgIE92ZXJyaWRlIGlmIGJhdHRlcnkgc3VwcG9ydHMgaW52ZXJ0ZXIgY29tbWFuZHMgKGVuYWJsZSBjaGFyZ2UvZGlzY2hhcmdlLCBsaW1pdHMpLgogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGNvbW1hbmRzOiBEaWN0IG9mIGludmVydGVyIGNvbW1hbmRzIChlbmFibGVfY2hhcmdlLCBlbmFibGVfZGlzY2hhcmdlLCBldGMuKQogICAgICAgICIiIgogICAgICAgIHBhc3MgICMgRGVmYXVsdDogbm8tb3AgKG1vc3QgYmF0dGVyaWVzIGRvbid0IHN1cHBvcnQgaW52ZXJ0ZXIgY29tbWFuZHMpCiAgICAKICAgIGRlZiBfdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYsIGNhbl9pZCwgZGF0YSk6CiAgICAgICAgIiIiSGVscGVyIHRvIHRyYW5zbWl0IENBTiBmcmFtZSB2aWEgQ0FOIG1hbmFnZXIKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBjYW5faWQ6IENBTiBtZXNzYWdlIElEIChpbnQpCiAgICAgICAgICAgIGRhdGE6IERhdGEgYnl0ZXMgKGxpc3QvdHVwbGUvYnl0ZXMsIDAtOCBieXRlcykKICAgICAgICAiIiIKICAgICAgICAjIEVuc3VyZSBkYXRhIGlzIGJ5dGVzLWxpa2UKICAgICAgICBpZiBpc2luc3RhbmNlKGRhdGEsIChsaXN0LCB0dXBsZSkpOgogICAgICAgICAgICBkYXRhID0gYnl0ZXMoZGF0YSkKICAgICAgICAKICAgICAgICAjIFRyYW5zbWl0IHZpYSBDQU4gbWFuYWdlcgogICAgICAgIENBTi50cmFuc21pdChzZWxmLmNhbl9oYW5kbGUsIHsnaWQnOiBjYW5faWQsICdkYXRhJzogZGF0YX0pCg==",
  "/lib/ext/dbe/battery/nissan_leaf.py": "IiIiCk5pc3NhbiBMRUFGIEJhdHRlcnkgUHJvdG9jb2wKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgTmlzc2FuIExFQUYgYmF0dGVyeSBwcm90b2NvbCBmcm9tIEJhdHRlcnkgRW11bGF0b3IuCgpTdXBwb3J0cyBaRTAgKDIwMTEtMjAxMyksIEFaRTAgKDIwMTMtMjAxNyksIGFuZCBaRTEgKDIwMTgrKSBiYXR0ZXJ5IHBhY2tzLgoKUmVmZXJlbmNlOiBCYXR0ZXJ5LUVtdWxhdG9yL1NvZnR3YXJlL3NyYy9iYXR0ZXJ5L05JU1NBTi1MRUFGLUJBVFRFUlkuY3BwCiIiIgoKaW1wb3J0IHRpbWUKZnJvbSBsaWIuZXh0LmRiZS5iYXR0ZXJ5LmJhdHRlcnlfYmFzZSBpbXBvcnQgQmF0dGVyeUJhc2UKCiMgQ29uc3RhbnRzCldIX1BFUl9HSUQgPSA4MCAgIyBXaCBwZXIgR0lEIChOaXNzYW4ncyBpbnRlcm5hbCBjYXBhY2l0eSB1bml0KQoKIyBCYXR0ZXJ5IHR5cGVzClpFMF9CQVRURVJZID0gMCAgICMgMjAxMS0yMDEzIDI0a1doCkFaRTBfQkFUVEVSWSA9IDEgICMgMjAxMy0yMDE3IDI0LzMwa1doClpFMV9CQVRURVJZID0gMiAgICMgMjAxOCsgNDAvNjJrV2gKCiMgVGltaW5nIGludGVydmFscyAobWlsbGlzZWNvbmRzKQpJTlRFUlZBTF8xMF9NUyA9IDEwCklOVEVSVkFMXzQwX01TID0gNDAKSU5URVJWQUxfMTAwX01TID0gMTAwCklOVEVSVkFMXzUwMF9NUyA9IDUwMApJTlRFUlZBTF8xMF9TID0gMTAwMDAKCgpjbGFzcyBOaXNzYW5MZWFmQmF0dGVyeShCYXR0ZXJ5QmFzZSk6CiAgICAiIiJOaXNzYW4gTEVBRiBiYXR0ZXJ5IHByb3RvY29sIGltcGxlbWVudGF0aW9uCiAgICAKICAgIEhhbmRsZXMgQ0FOIGNvbW11bmljYXRpb24gd2l0aCBOaXNzYW4gTEVBRiBiYXR0ZXJ5IHBhY2tzIChaRTAsIEFaRTAsIFpFMSkuCiAgICAiIiIKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNhbl9oYW5kbGUpOgogICAgICAgICIiIkluaXRpYWxpemUgTmlzc2FuIExFQUYgYmF0dGVyeSBwcm90b2NvbAogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGNhbl9oYW5kbGU6IENBTiBtYW5hZ2VyIGhhbmRsZSBmcm9tIENBTi5yZWdpc3RlcigpCiAgICAgICAgIiIiCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhjYW5faGFuZGxlKQogICAgICAgIAogICAgICAgICMgQmF0dGVyeSB0eXBlIGRldGVjdGlvbiAod2lsbCBiZSBhdXRvLWRldGVjdGVkIGZyb20gQ0FOIG1lc3NhZ2VzKQogICAgICAgIHNlbGYuYmF0dGVyeV90eXBlID0gWkUwX0JBVFRFUlkKICAgICAgICAKICAgICAgICAjIFJhdyBiYXR0ZXJ5IGRhdGEgZnJvbSBDQU4KICAgICAgICBzZWxmLmJhdHRlcnlfc29jID0gMCAgICAgICAgICAjIFN0YXRlIG9mIGNoYXJnZSAoMC0xMDIzLCAwLjElIHBlciBiaXQpCiAgICAgICAgc2VsZi5iYXR0ZXJ5X3NvaCA9IDEwMCAgICAgICAgIyBTdGF0ZSBvZiBoZWFsdGggKDAtMTAwJSkKICAgICAgICBzZWxmLmJhdHRlcnlfZ2lkcyA9IDAgICAgICAgICAjIEN1cnJlbnQgR0lEUwogICAgICAgIHNlbGYuYmF0dGVyeV9tYXhfZ2lkcyA9IDI4MSAgICMgTWF4aW11bSBHSURTIChkZWZhdWx0IGZvciAyNGtXaCkKICAgICAgICBzZWxmLmJhdHRlcnlfd2hfcmVtYWluaW5nID0gMCAjIFdoIHJlbWFpbmluZwogICAgICAgIHNlbGYuYmF0dGVyeV90b3RhbF92b2x0YWdlID0gMCAgIyBQYWNrIHZvbHRhZ2UgKDAuNVYgcGVyIGJpdCkKICAgICAgICBzZWxmLmJhdHRlcnlfY3VycmVudCA9IDAgICAgICAjIFBhY2sgY3VycmVudCAoMC41QSBwZXIgYml0LCBzaWduZWQpCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2F2Z190ZW1wID0gMCAgICAgIyBBdmVyYWdlIHRlbXBlcmF0dXJlICjCsEMpCiAgICAgICAgc2VsZi5iYXR0ZXJ5X3RlbXBfbWluID0gMCAgICAgIyBNaW4gdGVtcGVyYXR1cmUgKMKwQykKICAgICAgICBzZWxmLmJhdHRlcnlfdGVtcF9tYXggPSAwICAgICAjIE1heCB0ZW1wZXJhdHVyZSAowrBDKQogICAgICAgIHNlbGYuYmF0dGVyeV9jaGFyZ2VfcG93ZXJfbGltaXQgPSAwICAgIyBrVwogICAgICAgIHNlbGYuYmF0dGVyeV9kaXNjaGFyZ2VfcG93ZXJfbGltaXQgPSAwICAjIGtXCiAgICAgICAgc2VsZi5iYXR0ZXJ5X21heF9wb3dlcl9mb3JfY2hhcmdlciA9IDAgICMga1cKICAgICAgICAKICAgICAgICAjIFN0YXR1cyBmbGFncwogICAgICAgIHNlbGYuYmF0dGVyeV9yZWxheV9jdXRfcmVxdWVzdCA9IDAKICAgICAgICBzZWxmLmJhdHRlcnlfZmFpbHNhZmVfc3RhdHVzID0gMAogICAgICAgIHNlbGYuYmF0dGVyeV9tYWluX3JlbGF5X29uID0gRmFsc2UKICAgICAgICBzZWxmLmJhdHRlcnlfZnVsbF9jaGFyZ2VfZmxhZyA9IEZhbHNlCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2NhcGFjaXR5X2VtcHR5ID0gRmFsc2UKICAgICAgICBzZWxmLmJhdHRlcnlfaW50ZXJsb2NrID0gRmFsc2UKICAgICAgICBzZWxmLmJhdHRlcnlfY2FuX2FsaXZlID0gRmFsc2UKICAgICAgICAKICAgICAgICAjIEhlYXRpbmcgc3lzdGVtCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRfZXhpc3QgPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0aW5nX3N0b3AgPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0aW5nX3N0YXJ0ID0gRmFsc2UKICAgICAgICBzZWxmLmJhdHRlcnlfaGVhdGVyX21haWxfc2VuZF9yZXF1ZXN0ID0gRmFsc2UKICAgICAgICAKICAgICAgICAjIFRpbWluZyBmb3IgdHJhbnNtaXQKICAgICAgICBzZWxmLmxhc3RfMTBtcyA9IDAKICAgICAgICBzZWxmLmxhc3RfNDBtcyA9IDAKICAgICAgICBzZWxmLmxhc3RfMTAwbXMgPSAwCiAgICAgICAgc2VsZi5sYXN0XzUwMG1zID0gMAogICAgICAgIHNlbGYubGFzdF8xMHMgPSAwCiAgICAgICAgCiAgICAgICAgIyBDb3VudGVycyBmb3IgbWVzc2FnZSBzZXF1ZW5jaW5nCiAgICAgICAgc2VsZi5tcHJ1bjEwciA9IDAgICMgMC0xOSBjb3VudGVyIGZvciAweDFGMgogICAgICAgIHNlbGYubXBydW4xMCA9IDAgICAjIDAtMyBjb3VudGVyCiAgICAgICAgc2VsZi5tcHJ1bjEwMCA9IDAgICMgMC0zIGNvdW50ZXIKICAgICAgICBzZWxmLmNvdW50ZXJfM0I4ID0gMCAgIyAwLTE0IGNvdW50ZXIgZm9yIFpFMQogICAgICAgIHNlbGYuZmxpcF8zQjggPSBGYWxzZSAgIyBGbGlwIGZsYWcgZm9yIFpFMQogICAgICAgIAogICAgICAgICMgQ0FOIG1lc3NhZ2UgdGVtcGxhdGVzICh3aWxsIGJlIHBvcHVsYXRlZCBpbiBzZXR1cCgpKQogICAgICAgIHNlbGYuTEVBRl8xRjIgPSBOb25lCiAgICAgICAgc2VsZi5MRUFGXzUwQiA9IE5vbmUKICAgICAgICBzZWxmLkxFQUZfNTBDID0gTm9uZQogICAgICAgIHNlbGYuTEVBRl8zNTUgPSBOb25lCiAgICAgICAgc2VsZi5MRUFGXzNCOCA9IE5vbmUKICAgICAgICBzZWxmLkxFQUZfNUM1ID0gTm9uZQogICAgICAgIHNlbGYuTEVBRl82MjYgPSBOb25lCiAgICAKICAgIGRlZiBzZXR1cChzZWxmKToKICAgICAgICAiIiJJbml0aWFsaXplIE5pc3NhbiBMRUFGIGJhdHRlcnkgcHJvdG9jb2wKICAgICAgICAKICAgICAgICBTZXRzIHVwIENBTiBtZXNzYWdlIHRlbXBsYXRlcyBmb3Iga2VlcC1hbGl2ZSBtZXNzYWdlcy4KICAgICAgICAiIiIKICAgICAgICAjIEluaXRpYWxpemUgQ0FOIG1lc3NhZ2UgdGVtcGxhdGVzCiAgICAgICAgc2VsZi5MRUFGXzFGMiA9IGJ5dGVhcnJheShbMHgxMCwgMHg2NCwgMHgwMCwgMHhCMCwgMHgwMCwgMHgxRSwgMHgwMCwgMHg4Rl0pCiAgICAgICAgc2VsZi5MRUFGXzUwQiA9IGJ5dGVhcnJheShbMHgwMCwgMHgwMCwgMHgwNiwgMHhDMCwgMHgwMCwgMHgwMCwgMHgwMF0pCiAgICAgICAgc2VsZi5MRUFGXzUwQyA9IGJ5dGVhcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMF0pCiAgICAgICAgc2VsZi5MRUFGXzM1NSA9IGJ5dGVhcnJheShbMHgxNCwgMHgwQSwgMHgxMywgMHg5NywgMHgxMCwgMHgwMCwgMHg0MCwgMHgwMF0pCiAgICAgICAgc2VsZi5MRUFGXzNCOCA9IGJ5dGVhcnJheShbMHg0MCwgMHhDOCwgMHgwMCwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRiwgMHhGRl0pCiAgICAgICAgc2VsZi5MRUFGXzVDNSA9IGJ5dGVhcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMF0pCiAgICAgICAgc2VsZi5MRUFGXzYyNiA9IGJ5dGVhcnJheShbMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMF0pCiAgICAKICAgIGRlZiBoYW5kbGVfaW5jb21pbmdfY2FuX2ZyYW1lKHNlbGYsIGNhbl9pZCwgZGF0YSk6CiAgICAgICAgIiIiUHJvY2VzcyBpbmNvbWluZyBDQU4gZnJhbWUgZnJvbSBiYXR0ZXJ5CiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgY2FuX2lkOiBDQU4gbWVzc2FnZSBJRCAoaW50KQogICAgICAgICAgICBkYXRhOiBDQU4gZGF0YSBieXRlcyAoYnl0ZWFycmF5L2J5dGVzLCAwLTggYnl0ZXMpCiAgICAgICAgIiIiCiAgICAgICAgaWYgY2FuX2lkID09IDB4MURCOgogICAgICAgICAgICAjIEJhdHRlcnkgdm9sdGFnZSwgY3VycmVudCwgYW5kIHN0YXR1cwogICAgICAgICAgICBzZWxmLmJhdHRlcnlfY3VycmVudCA9IChkYXRhWzBdIDw8IDMpIHwgKChkYXRhWzFdICYgMHhFMCkgPj4gNSkKICAgICAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X2N1cnJlbnQgJiAweDA0MDA6CiAgICAgICAgICAgICAgICAjIE5lZ2F0aXZlICgyJ3MgY29tcGxlbWVudCkKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9jdXJyZW50IHw9IDB4RjgwMAogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2N1cnJlbnQgPSAtKDB4MTAwMDAgLSBzZWxmLmJhdHRlcnlfY3VycmVudCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHZvbHRhZ2VfcmF3ID0gKGRhdGFbMl0gPDwgMikgfCAoKGRhdGFbM10gJiAweEMwKSA+PiA2KQogICAgICAgICAgICBpZiB2b2x0YWdlX3JhdyAhPSAweDNGRjogICMgMHgzRkYgPSB1bmF2YWlsYWJsZQogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X3RvdGFsX3ZvbHRhZ2UgPSB2b2x0YWdlX3JhdwogICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X3JlbGF5X2N1dF9yZXF1ZXN0ID0gKGRhdGFbMV0gJiAweDE4KSA+PiAzCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9mYWlsc2FmZV9zdGF0dXMgPSBkYXRhWzFdICYgMHgwNwogICAgICAgICAgICBzZWxmLmJhdHRlcnlfbWFpbl9yZWxheV9vbiA9IGJvb2woKGRhdGFbM10gJiAweDIwKSA+PiA1KQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZnVsbF9jaGFyZ2VfZmxhZyA9IGJvb2woKGRhdGFbM10gJiAweDEwKSA+PiA0KQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfaW50ZXJsb2NrID0gYm9vbCgoZGF0YVszXSAmIDB4MDgpID4+IDMpCiAgICAgICAgICAgIAogICAgICAgIGVsaWYgY2FuX2lkID09IDB4MURDOgogICAgICAgICAgICAjIFBvd2VyIGxpbWl0cwogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGlzY2hhcmdlX3Bvd2VyX2xpbWl0ID0gKChkYXRhWzBdIDw8IDIpIHwgKGRhdGFbMV0gPj4gNikpIC8gNC4wCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9jaGFyZ2VfcG93ZXJfbGltaXQgPSAoKChkYXRhWzFdICYgMHgzRikgPDwgNCkgfCAoZGF0YVsyXSA+PiA0KSkgLyA0LjAKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X21heF9wb3dlcl9mb3JfY2hhcmdlciA9ICgoKChkYXRhWzJdICYgMHgwRikgPDwgNikgfCAoZGF0YVszXSA+PiAyKSkgLyAxMC4wKSAtIDEwCiAgICAgICAgICAgIAogICAgICAgIGVsaWYgY2FuX2lkID09IDB4NTVCOgogICAgICAgICAgICAjIFN0YXRlIG9mIGNoYXJnZQogICAgICAgICAgICBzb2NfcmF3ID0gKGRhdGFbMF0gPDwgMikgfCAoZGF0YVsxXSA+PiA2KQogICAgICAgICAgICBpZiBzb2NfcmF3ICE9IDB4M0ZGOiAgIyAweDNGRiA9IHVuYXZhaWxhYmxlCiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfc29jID0gc29jX3JhdwogICAgICAgICAgICBzZWxmLmJhdHRlcnlfY2FwYWNpdHlfZW1wdHkgPSBib29sKChkYXRhWzZdICYgMHg4MCkgPj4gNykKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBjYW5faWQgPT0gMHg1QkM6CiAgICAgICAgICAgICMgR0lEUywgU09ILCB0ZW1wZXJhdHVyZQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfY2FuX2FsaXZlID0gVHJ1ZQogICAgICAgICAgICAKICAgICAgICAgICAgaXNfbWF4X2dpZHMgPSBib29sKChkYXRhWzVdICYgMHgxMCkgPj4gNCkKICAgICAgICAgICAgZ2lkc192YWx1ZSA9IChkYXRhWzBdIDw8IDIpIHwgKChkYXRhWzFdICYgMHhDMCkgPj4gNikKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGlzX21heF9naWRzOgogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X21heF9naWRzID0gZ2lkc192YWx1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2dpZHMgPSBnaWRzX3ZhbHVlCiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfd2hfcmVtYWluaW5nID0gc2VsZi5iYXR0ZXJ5X2dpZHMgKiBXSF9QRVJfR0lECiAgICAgICAgICAgIAogICAgICAgICAgICAjIFRlbXBlcmF0dXJlIChaRTAgb25seSkKICAgICAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X3R5cGUgPT0gWkUwX0JBVFRFUlk6CiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfYXZnX3RlbXAgPSBkYXRhWzNdIC0gNDAgICMgLTQwIHRvICs1NcKwQwogICAgICAgICAgICAKICAgICAgICAgICAgIyBTdGF0ZSBvZiBoZWFsdGgKICAgICAgICAgICAgc29oX3JhdyA9IGRhdGFbNF0gPj4gMQogICAgICAgICAgICBpZiBzb2hfcmF3ICE9IDA6CiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfc29oID0gc29oX3JhdwogICAgICAgICAgICAgICAgCiAgICAgICAgZWxpZiBjYW5faWQgPT0gMHg1QzA6CiAgICAgICAgICAgICMgVGVtcGVyYXR1cmUgKEFaRTApIGFuZCBoZWF0aW5nIHN5c3RlbQogICAgICAgICAgICBpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBBWkUwX0JBVFRFUlk6CiAgICAgICAgICAgICAgICBtdXggPSBkYXRhWzBdID4+IDYKICAgICAgICAgICAgICAgIGlmIG11eCA9PSAxOiAgIyBNQVggdGVtcGVyYXR1cmUKICAgICAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfdGVtcF9tYXggPSAoZGF0YVsyXSAvIDIpIC0gNDAKICAgICAgICAgICAgICAgIGVsaWYgbXV4ID09IDM6ICAjIE1JTiB0ZW1wZXJhdHVyZQogICAgICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV90ZW1wX21pbiA9IChkYXRhWzJdIC8gMikgLSA0MAogICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRfZXhpc3QgPSBib29sKGRhdGFbNF0gJiAweDAxKQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfaGVhdGluZ19zdG9wID0gYm9vbCgoZGF0YVswXSAmIDB4MTApID4+IDQpCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0aW5nX3N0YXJ0ID0gYm9vbCgoZGF0YVswXSAmIDB4MjApID4+IDUpCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0ZXJfbWFpbF9zZW5kX3JlcXVlc3QgPSBib29sKGRhdGFbMV0gJiAweDAxKQogICAgICAgICAgICAKICAgICAgICBlbGlmIGNhbl9pZCA9PSAweDU5RToKICAgICAgICAgICAgIyBCYXR0ZXJ5IHR5cGUgZGV0ZWN0aW9uIChBWkUwIG9yIFpFMSkKICAgICAgICAgICAgIyBJZiB3ZSByZWNlaXZlIHRoaXMgbWVzc2FnZSwgaXQncyBub3QgYSBaRTAKICAgICAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X3R5cGUgPT0gWkUwX0JBVFRFUlk6CiAgICAgICAgICAgICAgICAjIERldGVjdCBBWkUwIHZzIFpFMSBiYXNlZCBvbiBvdGhlciBjcml0ZXJpYQogICAgICAgICAgICAgICAgIyBGb3Igbm93LCBhc3N1bWUgQVpFMCAod2lsbCBiZSByZWZpbmVkIHdpdGggbW9yZSBtZXNzYWdlcykKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV90eXBlID0gQVpFMF9CQVRURVJZCiAgICAKICAgIGRlZiB0cmFuc21pdF9jYW4oc2VsZiwgY3VycmVudF90aW1lX21zKToKICAgICAgICAiIiJTZW5kIGtlZXAtYWxpdmUgbWVzc2FnZXMgdG8gYmF0dGVyeQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGN1cnJlbnRfdGltZV9tczogQ3VycmVudCB0aW1lIGZyb20gdGltZS50aWNrc19tcygpCiAgICAgICAgIiIiCiAgICAgICAgIyBTZW5kIDEwbXMgbWVzc2FnZSAoMHgxRjIpCiAgICAgICAgaWYgdGltZS50aWNrc19kaWZmKGN1cnJlbnRfdGltZV9tcywgc2VsZi5sYXN0XzEwbXMpID49IElOVEVSVkFMXzEwX01TOgogICAgICAgICAgICBzZWxmLmxhc3RfMTBtcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICBzZWxmLl90cmFuc21pdF8xRjIoKQogICAgICAgICAgICAKICAgICAgICAjIFNlbmQgNDBtcyBtZXNzYWdlICgweDM1NSBmb3IgWkUxIG9ubHkpCiAgICAgICAgaWYgdGltZS50aWNrc19kaWZmKGN1cnJlbnRfdGltZV9tcywgc2VsZi5sYXN0XzQwbXMpID49IElOVEVSVkFMXzQwX01TOgogICAgICAgICAgICBzZWxmLmxhc3RfNDBtcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICBpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBaRTFfQkFUVEVSWToKICAgICAgICAgICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDM1NSwgc2VsZi5MRUFGXzM1NSkKICAgICAgICAKICAgICAgICAjIFNlbmQgMTAwbXMgbWVzc2FnZXMKICAgICAgICBpZiB0aW1lLnRpY2tzX2RpZmYoY3VycmVudF90aW1lX21zLCBzZWxmLmxhc3RfMTAwbXMpID49IElOVEVSVkFMXzEwMF9NUzoKICAgICAgICAgICAgc2VsZi5sYXN0XzEwMG1zID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIHNlbGYuX3RyYW5zbWl0XzEwMG1zX21lc3NhZ2VzKCkKICAgIAogICAgZGVmIF90cmFuc21pdF8xRjIoc2VsZik6CiAgICAgICAgIiIiVHJhbnNtaXQgMHgxRjIga2VlcC1hbGl2ZSBtZXNzYWdlICgxMG1zIGludGVydmFsKQogICAgICAgIAogICAgICAgIFRoaXMgbWVzc2FnZSBoYXMgYSBjb21wbGV4IDIwLXN0ZXAgc2VxdWVuY2UgcGF0dGVybi4KICAgICAgICAiIiIKICAgICAgICAjIFVwZGF0ZSBtZXNzYWdlIGJhc2VkIG9uIGNvdW50ZXIgKHNpbXBsaWZpZWQgdmVyc2lvbikKICAgICAgICAjIEZ1bGwgcGF0dGVybiBmcm9tIEMrKyBjb2RlIGlzIGNvbXBsZXgsIGltcGxlbWVudGluZyBrZXkgcGFydHMKICAgICAgICAKICAgICAgICBpZiBzZWxmLm1wcnVuMTByID09IDA6CiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbM10gPSAweEIwCiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbNl0gPSAweDAwCiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbN10gPSAweDhGCiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTByID09IDU6CiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbM10gPSAweEI0CiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbNl0gPSAweDAxCiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbN10gPSAweDg0CiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTByID09IDEwOgogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzNdID0gMHhCMAogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzZdID0gMHgwMgogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzddID0gMHg4MQogICAgICAgIGVsaWYgc2VsZi5tcHJ1bjEwciA9PSAxNToKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMlszXSA9IDB4QjQKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls2XSA9IDB4MDMKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls3XSA9IDB4ODYKICAgICAgICAKICAgICAgICAjIFRyYW5zbWl0IG1lc3NhZ2UKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoMHgxRjIsIHNlbGYuTEVBRl8xRjIpCiAgICAgICAgCiAgICAgICAgIyBVcGRhdGUgY291bnRlcnMKICAgICAgICBzZWxmLm1wcnVuMTByID0gKHNlbGYubXBydW4xMHIgKyAxKSAlIDIwCiAgICAgICAgc2VsZi5tcHJ1bjEwID0gKHNlbGYubXBydW4xMCArIDEpICUgNAogICAgCiAgICBkZWYgX3RyYW5zbWl0XzEwMG1zX21lc3NhZ2VzKHNlbGYpOgogICAgICAgICIiIlRyYW5zbWl0IDEwMG1zIGtlZXAtYWxpdmUgbWVzc2FnZXMiIiIKICAgICAgICAjIEFjayBoZWF0ZXIgcmVxdWVzdCBpZiBuZWVkZWQKICAgICAgICBpZiBzZWxmLmJhdHRlcnlfaGVhdGVyX21haWxfc2VuZF9yZXF1ZXN0OgogICAgICAgICAgICBzZWxmLkxFQUZfNTBCWzZdID0gMHgyMCAgIyBCYXR0X0hlYXRlcl9NYWlsX1NlbmRfT0sKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLkxFQUZfNTBCWzZdID0gMHgwMCAgIyBCYXR0X0hlYXRlcl9NYWlsX1NlbmRfTkcKICAgICAgICAKICAgICAgICAjIFpFMS1zcGVjaWZpYyBtZXNzYWdlcwogICAgICAgIGlmIHNlbGYuYmF0dGVyeV90eXBlID09IFpFMV9CQVRURVJZOgogICAgICAgICAgICBzZWxmLmNvdW50ZXJfM0I4ID0gKHNlbGYuY291bnRlcl8zQjggKyAxKSAlIDE1CiAgICAgICAgICAgIHNlbGYuTEVBRl8zQjhbMl0gPSBzZWxmLmNvdW50ZXJfM0I4CiAgICAgICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDNCOCwgc2VsZi5MRUFGXzNCOCkKICAgICAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKDB4NUM1LCBzZWxmLkxFQUZfNUM1KQogICAgICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoMHg2MjYsIHNlbGYuTEVBRl82MjYpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEZsaXAgYml0IGluIDB4M0I4CiAgICAgICAgICAgIGlmIHNlbGYuZmxpcF8zQjg6CiAgICAgICAgICAgICAgICBzZWxmLmZsaXBfM0I4ID0gRmFsc2UKICAgICAgICAgICAgICAgIHNlbGYuTEVBRl8zQjhbMV0gPSAweEM4CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmZsaXBfM0I4ID0gVHJ1ZQogICAgICAgICAgICAgICAgc2VsZi5MRUFGXzNCOFsxXSA9IDB4RTgKICAgICAgICAKICAgICAgICAjIFZDTSB3YWtlL3NsZWVwIG1lc3NhZ2UKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoMHg1MEIsIHNlbGYuTEVBRl81MEIpCiAgICAgICAgCiAgICAgICAgIyAweDUwQyBtZXNzYWdlIHdpdGggY291bnRlcgogICAgICAgIHNlbGYuTEVBRl81MENbM10gPSBzZWxmLm1wcnVuMTAwCiAgICAgICAgaWYgc2VsZi5tcHJ1bjEwMCA9PSAwOgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzRdID0gMHg1RAogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzVdID0gMHhDOAogICAgICAgIGVsaWYgc2VsZi5tcHJ1bjEwMCA9PSAxOgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzRdID0gMHhCMgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzVdID0gMHgzMQogICAgICAgIGVsaWYgc2VsZi5tcHJ1bjEwMCA9PSAyOgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzRdID0gMHg1RAogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzVdID0gMHg2MwogICAgICAgIGVsaWYgc2VsZi5tcHJ1bjEwMCA9PSAzOgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzRdID0gMHhCMgogICAgICAgICAgICBzZWxmLkxFQUZfNTBDWzVdID0gMHg5QwogICAgICAgIAogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDUwQywgc2VsZi5MRUFGXzUwQykKICAgICAgICAKICAgICAgICAjIFVwZGF0ZSBjb3VudGVyCiAgICAgICAgc2VsZi5tcHJ1bjEwMCA9IChzZWxmLm1wcnVuMTAwICsgMSkgJSA0CiAgICAKICAgIGRlZiB1cGRhdGVfdmFsdWVzKHNlbGYpOgogICAgICAgICIiIlVwZGF0ZSBkZXJpdmVkIHZhbHVlcyBhbmQgbWFwIHRvIGJhdHRlcnlfZGF0YSBkaWN0IiIiCiAgICAgICAgIyBDYWxsIHBhcmVudCB0byBjYWxjdWxhdGUgcG93ZXIKICAgICAgICBzdXBlcigpLnVwZGF0ZV92YWx1ZXMoKQogICAgICAgIAogICAgICAgICMgTWFwIHJhdyB2YWx1ZXMgdG8gYmF0dGVyeV9kYXRhCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3ZvbHRhZ2VfZFYnXSA9IHNlbGYuYmF0dGVyeV90b3RhbF92b2x0YWdlICogNSAgIyAwLjVWL2JpdCAtPiBkZWNpdm9sdHMKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnY3VycmVudF9kQSddID0gc2VsZi5iYXR0ZXJ5X2N1cnJlbnQgKiA1ICAjIDAuNUEvYml0IC0+IGRlY2lhbXBzCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3NvY19wZXJjZW50J10gPSBpbnQoKHNlbGYuYmF0dGVyeV9zb2MgLyAxMC4yMykpICAjIDAtMTAyMyAtPiAwLTEwMCUKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnc29oX3BlcmNlbnQnXSA9IHNlbGYuYmF0dGVyeV9zb2gKICAgICAgICAKICAgICAgICAjIFRlbXBlcmF0dXJlCiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X3R5cGUgPT0gWkUwX0JBVFRFUlk6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWyd0ZW1wX2F2Z19DJ10gPSBzZWxmLmJhdHRlcnlfYXZnX3RlbXAKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3RlbXBfbWluX0MnXSA9IHNlbGYuYmF0dGVyeV9hdmdfdGVtcCAtIDEKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3RlbXBfbWF4X0MnXSA9IHNlbGYuYmF0dGVyeV9hdmdfdGVtcAogICAgICAgIGVsaWYgc2VsZi5iYXR0ZXJ5X3R5cGUgPT0gQVpFMF9CQVRURVJZOgogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsndGVtcF9taW5fQyddID0gc2VsZi5iYXR0ZXJ5X3RlbXBfbWluCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWyd0ZW1wX21heF9DJ10gPSBzZWxmLmJhdHRlcnlfdGVtcF9tYXgKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3RlbXBfYXZnX0MnXSA9IChzZWxmLmJhdHRlcnlfdGVtcF9taW4gKyBzZWxmLmJhdHRlcnlfdGVtcF9tYXgpIC8gMgogICAgICAgIAogICAgICAgICMgUG93ZXIgbGltaXRzIChrVyAtPiBkZWNpYW1wcyBhcHByb3hpbWF0aW9uKQogICAgICAgICMgQXNzdW1lIG5vbWluYWwgdm9sdGFnZSBmb3IgY29udmVyc2lvbgogICAgICAgIG5vbWluYWxfdm9sdGFnZV9WID0gc2VsZi5iYXR0ZXJ5X2RhdGFbJ3ZvbHRhZ2VfZFYnXSAvIDEwLjAKICAgICAgICBpZiBub21pbmFsX3ZvbHRhZ2VfViA+IDA6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydtYXhfY2hhcmdlX2N1cnJlbnRfZEEnXSA9IGludCgoc2VsZi5iYXR0ZXJ5X2NoYXJnZV9wb3dlcl9saW1pdCAqIDEwMDAgLyBub21pbmFsX3ZvbHRhZ2VfVikgKiAxMCkKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ21heF9kaXNjaGFyZ2VfY3VycmVudF9kQSddID0gaW50KChzZWxmLmJhdHRlcnlfZGlzY2hhcmdlX3Bvd2VyX2xpbWl0ICogMTAwMCAvIG5vbWluYWxfdm9sdGFnZV9WKSAqIDEwKQogICAgICAgIAogICAgICAgICMgU3RhdHVzCiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X2ZhaWxzYWZlX3N0YXR1cyA+IDA6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydzdGF0dXMnXSA9IGYnZmFpbHNhZmVfe3NlbGYuYmF0dGVyeV9mYWlsc2FmZV9zdGF0dXN9JwogICAgICAgIGVsaWYgc2VsZi5iYXR0ZXJ5X2Z1bGxfY2hhcmdlX2ZsYWc6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydzdGF0dXMnXSA9ICdmdWxsJwogICAgICAgIGVsaWYgc2VsZi5iYXR0ZXJ5X2NhcGFjaXR5X2VtcHR5OgogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnc3RhdHVzJ10gPSAnZW1wdHknCiAgICAgICAgZWxpZiBzZWxmLmJhdHRlcnlfY2FuX2FsaXZlOgogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnc3RhdHVzJ10gPSAnb2snCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3N0YXR1cyddID0gJ3Vua25vd24nCiAgICAgICAgCiAgICAgICAgIyBBbGFybXMvd2FybmluZ3MKICAgICAgICBhbGFybXMgPSAwCiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X3JlbGF5X2N1dF9yZXF1ZXN0OgogICAgICAgICAgICBhbGFybXMgfD0gMHgwMQogICAgICAgIGlmIHNlbGYuYmF0dGVyeV9mYWlsc2FmZV9zdGF0dXMgPiAwOgogICAgICAgICAgICBhbGFybXMgfD0gMHgwMgogICAgICAgIGlmIG5vdCBzZWxmLmJhdHRlcnlfaW50ZXJsb2NrOgogICAgICAgICAgICBhbGFybXMgfD0gMHgwNAogICAgICAgIGlmIHNlbGYuYmF0dGVyeV9naWRzIDwgMTA6CiAgICAgICAgICAgIGFsYXJtcyB8PSAweDA4CiAgICAgICAgCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ2FsYXJtcyddID0gYWxhcm1zCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ2xhc3RfdXBkYXRlX21zJ10gPSB0aW1lLnRpY2tzX21zKCkKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnZnJhbWVfY291bnQnXSArPSAxCg==",
  "/lib/ext/dbe/charger/__init__.py": "IiIiCkNoYXJnZXIgUHJvdG9jb2wgSW1wbGVtZW50YXRpb25zCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKKEZ1dHVyZTogQ2hhcmdlciBzdXBwb3J0KQoiIiIK",
  "/lib/ext/dbe/inverter/__init__.py": "IiIiCkludmVydGVyIFByb3RvY29sIEltcGxlbWVudGF0aW9ucwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpNaWNyb1B5dGhvbiBpbXBsZW1lbnRhdGlvbnMgb2YgaW52ZXJ0ZXIgcHJvdG9jb2xzIChQeWxvbiBDQU4sIGV0Yy4pCiIiIgo=",
  "/lib/ext/dbe/inverter/inverter_base.py": "IiIiCkludmVydGVyIEJhc2UgQ2xhc3MKPT09PT09PT09PT09PT09PT09PQoKQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgaW52ZXJ0ZXIgcHJvdG9jb2wgaW1wbGVtZW50YXRpb25zLgoiIiIKCmltcG9ydCBtYWNoaW5lCmZyb20gbGliIGltcG9ydCBib2FyZCwgc2V0dGluZ3MKCgpjbGFzcyBJbnZlcnRlckJhc2U6CiAgICAiIiJBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBpbnZlcnRlciBwcm90b2NvbHMKICAgIAogICAgSGFuZGxlcyBSUzQ4NSBjb21tdW5pY2F0aW9uIHRvIGludmVydGVyLgogICAgIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1YXJ0X3BvcnQ9MiwgYmF1ZHJhdGU9Tm9uZSk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBpbnZlcnRlciBwcm90b2NvbAogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHVhcnRfcG9ydDogVUFSVCBwb3J0IG51bWJlciAoZGVmYXVsdDogMikKICAgICAgICAgICAgYmF1ZHJhdGU6IEJhdWQgcmF0ZSAoZGVmYXVsdDogZnJvbSBzZXR0aW5ncyBvciA5NjAwKQogICAgICAgICIiIgogICAgICAgICMgR2V0IGJhdWRyYXRlIGZyb20gc2V0dGluZ3MgaWYgbm90IHByb3ZpZGVkCiAgICAgICAgaWYgYmF1ZHJhdGUgaXMgTm9uZToKICAgICAgICAgICAgYmF1ZHJhdGUgPSBzZXR0aW5ncy5nZXQoJ2RiZS5yczQ4NV9iYXVkcmF0ZScsIDk2MDApCiAgICAgICAgCiAgICAgICAgIyBHZXQgUlM0ODUgcGlucyBmcm9tIGJvYXJkIEFQSQogICAgICAgIHRyeToKICAgICAgICAgICAgcnM0ODUgPSBib2FyZC51YXJ0KCJyczQ4NSIpCiAgICAgICAgICAgIHR4X3BpbiA9IHJzNDg1LnR4CiAgICAgICAgICAgIHJ4X3BpbiA9IHJzNDg1LnJ4CiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgIyBGYWxsYmFjayB0byBkZWZhdWx0IHBpbnMgaWYgYm9hcmQgQVBJIG5vdCBhdmFpbGFibGUKICAgICAgICAgICAgdHhfcGluID0gMTcKICAgICAgICAgICAgcnhfcGluID0gMTYKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgVUFSVAogICAgICAgIHNlbGYudWFydCA9IG1hY2hpbmUuVUFSVCgKICAgICAgICAgICAgdWFydF9wb3J0LAogICAgICAgICAgICBiYXVkcmF0ZT1iYXVkcmF0ZSwKICAgICAgICAgICAgdHg9dHhfcGluLAogICAgICAgICAgICByeD1yeF9waW4sCiAgICAgICAgICAgIHRpbWVvdXQ9MTAwICAjIDEwMG1zIHRpbWVvdXQgZm9yIHJlYWRzCiAgICAgICAgKQogICAgICAgIAogICAgICAgICMgVGltaW5nIHN0YXRlCiAgICAgICAgc2VsZi5sYXN0X3RyYW5zbWl0X21zID0gMAogICAgICAgIHNlbGYudHJhbnNtaXRfaW50ZXJ2YWxfbXMgPSAxMDAwICAjIERlZmF1bHQ6IDFIegogICAgICAgIAogICAgICAgICMgUlggYnVmZmVyIGZvciBpbmNvbWluZyBtZXNzYWdlcwogICAgICAgIHNlbGYucnhfYnVmZmVyID0gYnl0ZWFycmF5KCkKICAgIAogICAgZGVmIHRyYW5zbWl0KHNlbGYsIGJhdHRlcnlfZGF0YSwgY3VycmVudF90aW1lX21zKToKICAgICAgICAiIiJTZW5kIGJhdHRlcnkgZGF0YSB0byBpbnZlcnRlciB2aWEgUlM0ODUKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBiYXR0ZXJ5X2RhdGE6IERpY3Qgb2YgYmF0dGVyeSBkYXRhIGZyb20gYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAgICAgICAgIGN1cnJlbnRfdGltZV9tczogQ3VycmVudCB0aW1lIGZyb20gdGltZS50aWNrc19tcygpCiAgICAgICAgIiIiCiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigiU3ViY2xhc3MgbXVzdCBpbXBsZW1lbnQgdHJhbnNtaXQoKSIpCiAgICAKICAgIGRlZiByZWNlaXZlKHNlbGYpOgogICAgICAgICIiIkNoZWNrIGZvciBpbmNvbWluZyBtZXNzYWdlcyBmcm9tIGludmVydGVyCiAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgZGljdDogUGFyc2VkIGNvbW1hbmRzIGZyb20gaW52ZXJ0ZXIsIG9yIE5vbmUgaWYgbm8gbWVzc2FnZXMKICAgICAgICAiIiIKICAgICAgICAjIENoZWNrIGlmIGRhdGEgYXZhaWxhYmxlCiAgICAgICAgaWYgc2VsZi51YXJ0LmFueSgpOgogICAgICAgICAgICAjIFJlYWQgYXZhaWxhYmxlIGRhdGEKICAgICAgICAgICAgZGF0YSA9IHNlbGYudWFydC5yZWFkKCkKICAgICAgICAgICAgaWYgZGF0YToKICAgICAgICAgICAgICAgIHNlbGYucnhfYnVmZmVyLmV4dGVuZChkYXRhKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFRyeSB0byBwYXJzZSBtZXNzYWdlcyBmcm9tIGJ1ZmZlcgogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3BhcnNlX3J4X2J1ZmZlcigpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgZGVmIF9wYXJzZV9yeF9idWZmZXIoc2VsZik6CiAgICAgICAgIiIiUGFyc2UgUlggYnVmZmVyIGZvciBjb21wbGV0ZSBtZXNzYWdlcwogICAgICAgIAogICAgICAgIE92ZXJyaWRlIGluIHN1YmNsYXNzIHRvIGltcGxlbWVudCBwcm90b2NvbC1zcGVjaWZpYyBwYXJzaW5nLgogICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIGRpY3Q6IFBhcnNlZCBjb21tYW5kcywgb3IgTm9uZQogICAgICAgICIiIgogICAgICAgICMgRGVmYXVsdDogbm8gcGFyc2luZyAob3ZlcnJpZGUgaW4gc3ViY2xhc3MpCiAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgZGVmIF90cmFuc21pdF91YXJ0KHNlbGYsIGRhdGEpOgogICAgICAgICIiIkhlbHBlciB0byB0cmFuc21pdCBkYXRhIHZpYSBVQVJUCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZGF0YTogQnl0ZXMgdG8gdHJhbnNtaXQKICAgICAgICAiIiIKICAgICAgICBpZiBpc2luc3RhbmNlKGRhdGEsIChsaXN0LCB0dXBsZSkpOgogICAgICAgICAgICBkYXRhID0gYnl0ZXMoZGF0YSkKICAgICAgICAKICAgICAgICBzZWxmLnVhcnQud3JpdGUoZGF0YSkK",
  "/lib/ext/dbe/inverter/pylon_can.py": "IiIiClB5bG9uIENBTiBQcm90b2NvbAo9PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgUHlsb24gQ0FOIGludmVydGVyIHByb3RvY29sIGZyb20gQmF0dGVyeSBFbXVsYXRvci4KClRoZSBQeWxvbiBwcm90b2NvbCBpcyB1c2VkIGJ5IG1hbnkgaW52ZXJ0ZXJzIChHcm93YXR0LCBHb29kd2UsIERleWUsIGV0Yy4pCnRvIGNvbW11bmljYXRlIHdpdGggYmF0dGVyeSBzeXN0ZW1zLgoKTk9URTogVGhpcyBpbXBsZW1lbnRhdGlvbiBzZW5kcyBQeWxvbiBDQU4gZnJhbWVzIHZpYSBSUzQ4NSAoQ0FOLW92ZXItUlM0ODUpLgpUaGUgZnJhbWVzIGFyZSBzdGFuZGFyZCBDQU4gZm9ybWF0IGJ1dCB0cmFuc21pdHRlZCBvdmVyIFJTNDg1IHBoeXNpY2FsIGxheWVyLgoKUmVmZXJlbmNlOiBCYXR0ZXJ5LUVtdWxhdG9yL1NvZnR3YXJlL3NyYy9pbnZlcnRlci9QWUxPTi1DQU4uY3BwCiIiIgoKaW1wb3J0IHN0cnVjdApmcm9tIGxpYi5leHQuZGJlLmludmVydGVyLmludmVydGVyX2Jhc2UgaW1wb3J0IEludmVydGVyQmFzZQpmcm9tIGxpYiBpbXBvcnQgc2V0dGluZ3MKCgpjbGFzcyBQeWxvbkNBTlByb3RvY29sKEludmVydGVyQmFzZSk6CiAgICAiIiJQeWxvbiBDQU4gcHJvdG9jb2wgaW1wbGVtZW50YXRpb24KICAgIAogICAgU2VuZHMgYmF0dGVyeSBkYXRhIHRvIGludmVydGVyIHVzaW5nIFB5bG9uIENBTiBtZXNzYWdlIGZvcm1hdC4KICAgICIiIgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgdWFydF9wb3J0PTIsIGJhdWRyYXRlPU5vbmUpOgogICAgICAgICIiIkluaXRpYWxpemUgUHlsb24gQ0FOIHByb3RvY29sCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgdWFydF9wb3J0OiBVQVJUIHBvcnQgbnVtYmVyIChkZWZhdWx0OiAyKQogICAgICAgICAgICBiYXVkcmF0ZTogQmF1ZCByYXRlIChkZWZhdWx0OiBmcm9tIHNldHRpbmdzIG9yIDk2MDApCiAgICAgICAgIiIiCiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyh1YXJ0X3BvcnQsIGJhdWRyYXRlKQogICAgICAgIAogICAgICAgICMgQ29uZmlndXJhdGlvbiBvcHRpb25zIChmcm9tIHNldHRpbmdzKQogICAgICAgIHNlbGYucHlsb25fc2VuZCA9IHNldHRpbmdzLmdldCgnZGJlLnB5bG9uX3NlbmQnLCAwKSAgIyAwIG9yIDEgKGJhdHRlcnkgSUQpCiAgICAgICAgc2VsZi5weWxvbl8zMGtfb2Zmc2V0ID0gc2V0dGluZ3MuZ2V0KCdkYmUucHlsb25fMzBrX29mZnNldCcsIEZhbHNlKQogICAgICAgIHNlbGYucHlsb25faW52ZXJ0X2J5dGVvcmRlciA9IHNldHRpbmdzLmdldCgnZGJlLnB5bG9uX2ludmVydF9ieXRlb3JkZXInLCBGYWxzZSkKICAgICAgICAKICAgICAgICAjIFVzZXItY29uZmlndXJhYmxlIGJhdHRlcnkgcGFyYW1ldGVycwogICAgICAgIHNlbGYuaW52ZXJ0ZXJfY2VsbHMgPSBzZXR0aW5ncy5nZXQoJ2RiZS5pbnZlcnRlcl9jZWxscycsIDk2KQogICAgICAgIHNlbGYuaW52ZXJ0ZXJfbW9kdWxlcyA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX21vZHVsZXMnLCAxKQogICAgICAgIHNlbGYuaW52ZXJ0ZXJfY2VsbHNfcGVyX21vZHVsZSA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX2NlbGxzX3Blcl9tb2R1bGUnLCA5NikKICAgICAgICBzZWxmLmludmVydGVyX3ZvbHRhZ2VfbGV2ZWwgPSBzZXR0aW5ncy5nZXQoJ2RiZS5pbnZlcnRlcl92b2x0YWdlX2xldmVsJywgMzUwKQogICAgICAgIHNlbGYuaW52ZXJ0ZXJfYWhfY2FwYWNpdHkgPSBzZXR0aW5ncy5nZXQoJ2RiZS5pbnZlcnRlcl9haF9jYXBhY2l0eScsIDEwMCkKICAgICAgICAKICAgICAgICAjIFZvbHRhZ2Ugb2Zmc2V0IGZvciBjdXRvZmYgdm9sdGFnZXMgKGRlY2l2b2x0cykKICAgICAgICBzZWxmLnZvbHRhZ2Vfb2Zmc2V0X2RWID0gNTAgICMgNS4wViBvZmZzZXQKICAgICAgICAKICAgICAgICAjIENBTiBtZXNzYWdlIElEcyAod2lsbCBiZSBzZXQgYmFzZWQgb24gcHlsb25fc2VuZCkKICAgICAgICBzZWxmLl9zZXR1cF9jYW5faWRzKCkKICAgICAgICAKICAgICAgICAjIENBTiBtZXNzYWdlIGJ1ZmZlcnMKICAgICAgICBzZWxmLlBZTE9OXzczMVggPSBieXRlYXJyYXkoOCkgICMgRW5zZW1ibGUgaW5mbwogICAgICAgIHNlbGYuUFlMT05fNzMyWCA9IGJ5dGVhcnJheSg4KSAgIyBCYXR0ZXJ5IHBhcmFtZXRlcnMKICAgICAgICBzZWxmLlBZTE9OXzQyMVggPSBieXRlYXJyYXkoOCkgICMgVm9sdGFnZSwgY3VycmVudCwgU09DLCBTT0gKICAgICAgICBzZWxmLlBZTE9OXzQyMlggPSBieXRlYXJyYXkoOCkgICMgVm9sdGFnZS9jdXJyZW50IGxpbWl0cwogICAgICAgIHNlbGYuUFlMT05fNDIzWCA9IGJ5dGVhcnJheSg4KSAgIyBDZWxsIHZvbHRhZ2VzCiAgICAgICAgc2VsZi5QWUxPTl80MjRYID0gYnl0ZWFycmF5KDgpICAjIENlbGwgdGVtcGVyYXR1cmVzCiAgICAgICAgc2VsZi5QWUxPTl80MjVYID0gYnl0ZWFycmF5KDgpICAjIFN0YXR1cwogICAgICAgIHNlbGYuUFlMT05fNDI2WCA9IGJ5dGVhcnJheSg4KSAgIyBBbGFybXMKICAgICAgICBzZWxmLlBZTE9OXzQyN1ggPSBieXRlYXJyYXkoOCkgICMgTW9kdWxlIHRlbXBlcmF0dXJlcwogICAgICAgIHNlbGYuUFlMT05fNDI4WCA9IGJ5dGVhcnJheSg4KSAgIyBDaGFyZ2UvZGlzY2hhcmdlIGVuYWJsZQogICAgICAgIHNlbGYuUFlMT05fNDI5WCA9IGJ5dGVhcnJheSg4KSAgIyBSZXNlcnZlZAogICAgICAgIAogICAgICAgICMgSW5pdGlhbGl6ZSBzdGF0aWMgbWVzc2FnZXMKICAgICAgICBzZWxmLl9pbml0X3N0YXRpY19tZXNzYWdlcygpCiAgICAgICAgCiAgICAgICAgIyBMYXN0IHJlcXVlc3QgZnJvbSBpbnZlcnRlcgogICAgICAgIHNlbGYubGFzdF9pbnZlcnRlcl9yZXF1ZXN0ID0gMAogICAgCiAgICBkZWYgX3NldHVwX2Nhbl9pZHMoc2VsZik6CiAgICAgICAgIiIiU2V0dXAgQ0FOIG1lc3NhZ2UgSURzIGJhc2VkIG9uIHB5bG9uX3NlbmQgc2V0dGluZyIiIgogICAgICAgIGlmIHNlbGYucHlsb25fc2VuZCA9PSAwOgogICAgICAgICAgICAjIEJhdHRlcnkgSUQgMAogICAgICAgICAgICBzZWxmLklEXzczMVggPSAweDczMTAKICAgICAgICAgICAgc2VsZi5JRF83MzJYID0gMHg3MzIwCiAgICAgICAgICAgIHNlbGYuSURfNDIxWCA9IDB4NDIxMAogICAgICAgICAgICBzZWxmLklEXzQyMlggPSAweDQyMjAKICAgICAgICAgICAgc2VsZi5JRF80MjNYID0gMHg0MjMwCiAgICAgICAgICAgIHNlbGYuSURfNDI0WCA9IDB4NDI0MAogICAgICAgICAgICBzZWxmLklEXzQyNVggPSAweDQyNTAKICAgICAgICAgICAgc2VsZi5JRF80MjZYID0gMHg0MjYwCiAgICAgICAgICAgIHNlbGYuSURfNDI3WCA9IDB4NDI3MAogICAgICAgICAgICBzZWxmLklEXzQyOFggPSAweDQyODAKICAgICAgICAgICAgc2VsZi5JRF80MjlYID0gMHg0MjkwCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBCYXR0ZXJ5IElEIDEKICAgICAgICAgICAgc2VsZi5JRF83MzFYID0gMHg3MzExCiAgICAgICAgICAgIHNlbGYuSURfNzMyWCA9IDB4NzMyMQogICAgICAgICAgICBzZWxmLklEXzQyMVggPSAweDQyMTEKICAgICAgICAgICAgc2VsZi5JRF80MjJYID0gMHg0MjIxCiAgICAgICAgICAgIHNlbGYuSURfNDIzWCA9IDB4NDIzMQogICAgICAgICAgICBzZWxmLklEXzQyNFggPSAweDQyNDEKICAgICAgICAgICAgc2VsZi5JRF80MjVYID0gMHg0MjUxCiAgICAgICAgICAgIHNlbGYuSURfNDI2WCA9IDB4NDI2MQogICAgICAgICAgICBzZWxmLklEXzQyN1ggPSAweDQyNzEKICAgICAgICAgICAgc2VsZi5JRF80MjhYID0gMHg0MjgxCiAgICAgICAgICAgIHNlbGYuSURfNDI5WCA9IDB4NDI5MQogICAgCiAgICBkZWYgX2luaXRfc3RhdGljX21lc3NhZ2VzKHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgc3RhdGljIFB5bG9uIG1lc3NhZ2VzIChlbnNlbWJsZSBpbmZvLCBiYXR0ZXJ5IHBhcmFtcykiIiIKICAgICAgICAjIDB4NzMxMC8weDczMTE6IEVuc2VtYmxlIGluZm8gKG1hbnVmYWN0dXJlciwgbW9kZWwsIGV0Yy4pCiAgICAgICAgIyAiUFlMT04iIGluIEFTQ0lJCiAgICAgICAgc2VsZi5QWUxPTl83MzFYWzBdID0gb3JkKCdQJykKICAgICAgICBzZWxmLlBZTE9OXzczMVhbMV0gPSBvcmQoJ1knKQogICAgICAgIHNlbGYuUFlMT05fNzMxWFsyXSA9IG9yZCgnTCcpCiAgICAgICAgc2VsZi5QWUxPTl83MzFYWzNdID0gb3JkKCdPJykKICAgICAgICBzZWxmLlBZTE9OXzczMVhbNF0gPSBvcmQoJ04nKQogICAgICAgIHNlbGYuUFlMT05fNzMxWFs1XSA9IDB4MDAKICAgICAgICBzZWxmLlBZTE9OXzczMVhbNl0gPSAweDAwCiAgICAgICAgc2VsZi5QWUxPTl83MzFYWzddID0gMHgwMAogICAgICAgIAogICAgICAgICMgMHg3MzIwLzB4NzMyMTogQmF0dGVyeSBwYXJhbWV0ZXJzCiAgICAgICAgc2VsZi5QWUxPTl83MzJYWzBdID0gc2VsZi5pbnZlcnRlcl9jZWxscyAmIDB4RkYKICAgICAgICBzZWxmLlBZTE9OXzczMlhbMV0gPSAoc2VsZi5pbnZlcnRlcl9jZWxscyA+PiA4KSAmIDB4RkYKICAgICAgICBzZWxmLlBZTE9OXzczMlhbMl0gPSBzZWxmLmludmVydGVyX21vZHVsZXMKICAgICAgICBzZWxmLlBZTE9OXzczMlhbM10gPSBzZWxmLmludmVydGVyX2NlbGxzX3Blcl9tb2R1bGUKICAgICAgICBzZWxmLlBZTE9OXzczMlhbNF0gPSBzZWxmLmludmVydGVyX3ZvbHRhZ2VfbGV2ZWwgJiAweEZGCiAgICAgICAgc2VsZi5QWUxPTl83MzJYWzVdID0gKHNlbGYuaW52ZXJ0ZXJfdm9sdGFnZV9sZXZlbCA+PiA4KSAmIDB4RkYKICAgICAgICBzZWxmLlBZTE9OXzczMlhbNl0gPSBzZWxmLmludmVydGVyX2FoX2NhcGFjaXR5ICYgMHhGRgogICAgICAgIHNlbGYuUFlMT05fNzMyWFs3XSA9IChzZWxmLmludmVydGVyX2FoX2NhcGFjaXR5ID4+IDgpICYgMHhGRgogICAgCiAgICBkZWYgdHJhbnNtaXQoc2VsZiwgYmF0dGVyeV9kYXRhLCBjdXJyZW50X3RpbWVfbXMpOgogICAgICAgICIiIlNlbmQgYmF0dGVyeSBkYXRhIHRvIGludmVydGVyIHZpYSBSUzQ4NSAoUHlsb24gQ0FOIGZyYW1lcykKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBiYXR0ZXJ5X2RhdGE6IERpY3Qgb2YgYmF0dGVyeSBkYXRhIGZyb20gYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAgICAgICAgIGN1cnJlbnRfdGltZV9tczogQ3VycmVudCB0aW1lIGZyb20gdGltZS50aWNrc19tcygpCiAgICAgICAgIiIiCiAgICAgICAgIyBQeWxvbiBwcm90b2NvbCBpcyByZXF1ZXN0LXJlc3BvbnNlIGJhc2VkCiAgICAgICAgIyBXZSBvbmx5IHNlbmQgZGF0YSB3aGVuIGludmVydGVyIHJlcXVlc3RzIGl0CiAgICAgICAgIyBGb3Igbm93LCBzZW5kIHBlcmlvZGljYWxseSBhdCAxSHogKHNpbXBsaWZpZWQpCiAgICAgICAgCiAgICAgICAgaWYgY3VycmVudF90aW1lX21zIC0gc2VsZi5sYXN0X3RyYW5zbWl0X21zID49IHNlbGYudHJhbnNtaXRfaW50ZXJ2YWxfbXM6CiAgICAgICAgICAgIHNlbGYubGFzdF90cmFuc21pdF9tcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICAKICAgICAgICAgICAgIyBVcGRhdGUgbWVzc2FnZXMgd2l0aCBjdXJyZW50IGJhdHRlcnkgZGF0YQogICAgICAgICAgICBzZWxmLl91cGRhdGVfbWVzc2FnZXMoYmF0dGVyeV9kYXRhKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBTZW5kIHN5c3RlbSBkYXRhIChtb3N0IGNvbW1vbiByZXF1ZXN0KQogICAgICAgICAgICBzZWxmLl9zZW5kX3N5c3RlbV9kYXRhKCkKICAgIAogICAgZGVmIF91cGRhdGVfbWVzc2FnZXMoc2VsZiwgYmF0dGVyeV9kYXRhKToKICAgICAgICAiIiJVcGRhdGUgUHlsb24gQ0FOIG1lc3NhZ2VzIHdpdGggY3VycmVudCBiYXR0ZXJ5IGRhdGEKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBiYXR0ZXJ5X2RhdGE6IERpY3Qgb2YgYmF0dGVyeSBkYXRhCiAgICAgICAgIiIiCiAgICAgICAgIyBFeHRyYWN0IHZhbHVlcyBmcm9tIGJhdHRlcnlfZGF0YQogICAgICAgIHZvbHRhZ2VfZFYgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCd2b2x0YWdlX2RWJywgMCkKICAgICAgICBjdXJyZW50X2RBID0gYmF0dGVyeV9kYXRhLmdldCgnY3VycmVudF9kQScsIDApCiAgICAgICAgc29jX3BlcmNlbnQgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdzb2NfcGVyY2VudCcsIDApCiAgICAgICAgc29oX3BlcmNlbnQgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdzb2hfcGVyY2VudCcsIDEwMCkKICAgICAgICB0ZW1wX21heF9kQyA9IGJhdHRlcnlfZGF0YS5nZXQoJ3RlbXBfbWF4X0MnLCAyNSkgKiAxMCAgIyBDIHRvIGRlY2lDCiAgICAgICAgdGVtcF9taW5fZEMgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCd0ZW1wX21pbl9DJywgMjUpICogMTAKICAgICAgICBjZWxsX21heF9tViA9IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfbWF4X21WJywgMzcwMCkKICAgICAgICBjZWxsX21pbl9tViA9IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfbWluX21WJywgMzcwMCkKICAgICAgICBtYXhfY2hhcmdlX2N1cnJlbnRfZEEgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdtYXhfY2hhcmdlX2N1cnJlbnRfZEEnLCAwKQogICAgICAgIG1heF9kaXNjaGFyZ2VfY3VycmVudF9kQSA9IGJhdHRlcnlfZGF0YS5nZXQoJ21heF9kaXNjaGFyZ2VfY3VycmVudF9kQScsIDApCiAgICAgICAgCiAgICAgICAgIyBDYWxjdWxhdGUgY3V0b2ZmIHZvbHRhZ2VzIChzaW1wbGlmaWVkIC0gdXNpbmcgZml4ZWQgb2Zmc2V0cykKICAgICAgICBjaGFyZ2VfY3V0b2ZmX3ZvbHRhZ2VfZFYgPSB2b2x0YWdlX2RWICsgc2VsZi52b2x0YWdlX29mZnNldF9kVgogICAgICAgIGRpc2NoYXJnZV9jdXRvZmZfdm9sdGFnZV9kViA9IHZvbHRhZ2VfZFYgLSBzZWxmLnZvbHRhZ2Vfb2Zmc2V0X2RWCiAgICAgICAgCiAgICAgICAgIyAweDQyMTAvMHg0MjExOiBWb2x0YWdlLCBjdXJyZW50LCBTT0MsIFNPSAogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjFYLCAwLCB2b2x0YWdlX2RWKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjFYLCAyLCBjdXJyZW50X2RBKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjFYLCA0LCB0ZW1wX21heF9kQyArIDEwMDApICAjIEFkZCAxMDAwIG9mZnNldAogICAgICAgIHNlbGYuUFlMT05fNDIxWFs2XSA9IHNvY19wZXJjZW50CiAgICAgICAgc2VsZi5QWUxPTl80MjFYWzddID0gc29oX3BlcmNlbnQKICAgICAgICAKICAgICAgICAjIDB4NDIyMC8weDQyMjE6IFZvbHRhZ2UvY3VycmVudCBsaW1pdHMKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDIyWCwgMCwgY2hhcmdlX2N1dG9mZl92b2x0YWdlX2RWKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjJYLCAyLCBkaXNjaGFyZ2VfY3V0b2ZmX3ZvbHRhZ2VfZFYpCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyMlgsIDQsIG1heF9jaGFyZ2VfY3VycmVudF9kQSkKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDIyWCwgNiwgbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBKQogICAgICAgIAogICAgICAgICMgMHg0MjMwLzB4NDIzMTogQ2VsbCB2b2x0YWdlcwogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjNYLCAwLCBjZWxsX21heF9tVikKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDIzWCwgMiwgY2VsbF9taW5fbVYpCiAgICAgICAgCiAgICAgICAgIyAweDQyNDAvMHg0MjQxOiBDZWxsIHRlbXBlcmF0dXJlcwogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjRYLCAwLCB0ZW1wX21heF9kQykKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDI0WCwgMiwgdGVtcF9taW5fZEMpCiAgICAgICAgCiAgICAgICAgIyAweDQyNTAvMHg0MjUxOiBTdGF0dXMgKDA9U2xlZXAsIDE9Q2hhcmdlLCAyPURpc2NoYXJnZSwgMz1JZGxlKQogICAgICAgIGlmIGN1cnJlbnRfZEEgPCAwOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyNVhbMF0gPSAweDAxICAjIENoYXJnaW5nCiAgICAgICAgZWxpZiBjdXJyZW50X2RBID4gMDoKICAgICAgICAgICAgc2VsZi5QWUxPTl80MjVYWzBdID0gMHgwMiAgIyBEaXNjaGFyZ2luZwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuUFlMT05fNDI1WFswXSA9IDB4MDMgICMgSWRsZQogICAgICAgIAogICAgICAgICMgMHg0MjYwLzB4NDI2MTogQWxhcm1zIChub3QgaW1wbGVtZW50ZWQgeWV0KQogICAgICAgIHNlbGYuUFlMT05fNDI2WFswXSA9IDB4MDAKICAgICAgICAKICAgICAgICAjIDB4NDI3MC8weDQyNzE6IE1vZHVsZSB0ZW1wZXJhdHVyZXMKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDI3WCwgMCwgdGVtcF9tYXhfZEMpCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyN1gsIDIsIHRlbXBfbWluX2RDKQogICAgICAgIAogICAgICAgICMgMHg0MjgwLzB4NDI4MTogQ2hhcmdlL2Rpc2NoYXJnZSBlbmFibGUKICAgICAgICBpZiBtYXhfY2hhcmdlX2N1cnJlbnRfZEEgPT0gMDoKICAgICAgICAgICAgc2VsZi5QWUxPTl80MjhYWzBdID0gMHhBQSAgIyBDaGFyZ2UgZm9yYmlkZGVuCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5QWUxPTl80MjhYWzBdID0gMHgwMCAgIyBDaGFyZ2UgYWxsb3dlZAogICAgICAgIAogICAgICAgIGlmIG1heF9kaXNjaGFyZ2VfY3VycmVudF9kQSA9PSAwOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyOFhbMV0gPSAweEFBICAjIERpc2NoYXJnZSBmb3JiaWRkZW4KICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyOFhbMV0gPSAweDAwICAjIERpc2NoYXJnZSBhbGxvd2VkCiAgICAgICAgCiAgICAgICAgIyBBcHBseSAzMGsgb2Zmc2V0IGlmIGVuYWJsZWQKICAgICAgICBpZiBzZWxmLnB5bG9uXzMwa19vZmZzZXQ6CiAgICAgICAgICAgIHNlbGYuX2FwcGx5XzMwa19vZmZzZXQoc2VsZi5QWUxPTl80MjFYLCAyKSAgIyBDdXJyZW50CiAgICAgICAgICAgIHNlbGYuX2FwcGx5XzMwa19vZmZzZXQoc2VsZi5QWUxPTl80MjJYLCA0KSAgIyBNYXggY2hhcmdlIGN1cnJlbnQKICAgICAgICAgICAgc2VsZi5fYXBwbHlfMzBrX29mZnNldChzZWxmLlBZTE9OXzQyMlgsIDYpICAjIE1heCBkaXNjaGFyZ2UgY3VycmVudAogICAgICAgIAogICAgICAgICMgSW52ZXJ0IGJ5dGUgb3JkZXIgaWYgZW5hYmxlZAogICAgICAgIGlmIHNlbGYucHlsb25faW52ZXJ0X2J5dGVvcmRlcjoKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyMVgsIDApICAjIFZvbHRhZ2UKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyMVgsIDIpICAjIEN1cnJlbnQKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyMVgsIDQpICAjIFRlbXBlcmF0dXJlCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjJYLCAwKSAgIyBNYXggdm9sdGFnZQogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIyWCwgMikgICMgTWluIHZvbHRhZ2UKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyMlgsIDQpICAjIE1heCBjaGFyZ2UgY3VycmVudAogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIyWCwgNikgICMgTWF4IGRpc2NoYXJnZSBjdXJyZW50CiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjNYLCAwKSAgIyBNYXggY2VsbCB2b2x0YWdlCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjNYLCAyKSAgIyBNaW4gY2VsbCB2b2x0YWdlCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjRYLCAwKSAgIyBNYXggY2VsbCB0ZW1wCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjRYLCAyKSAgIyBNaW4gY2VsbCB0ZW1wCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjdYLCAwKSAgIyBNYXggbW9kdWxlIHRlbXAKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyN1gsIDIpICAjIE1pbiBtb2R1bGUgdGVtcAogICAgCiAgICBkZWYgX3NlbmRfc2V0dXBfaW5mbyhzZWxmKToKICAgICAgICAiIiJTZW5kIGVuc2VtYmxlIGluZm9ybWF0aW9uIChtYW51ZmFjdHVyZXIsIGJhdHRlcnkgcGFyYW1zKSIiIgogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzczMVgsIHNlbGYuUFlMT05fNzMxWCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF83MzJYLCBzZWxmLlBZTE9OXzczMlgpCiAgICAKICAgIGRlZiBfc2VuZF9zeXN0ZW1fZGF0YShzZWxmKToKICAgICAgICAiIiJTZW5kIHN5c3RlbSBlcXVpcG1lbnQgaW5mb3JtYXRpb24gKGJhdHRlcnkgZGF0YSkiIiIKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjFYLCBzZWxmLlBZTE9OXzQyMVgpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDIyWCwgc2VsZi5QWUxPTl80MjJYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyM1gsIHNlbGYuUFlMT05fNDIzWCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjRYLCBzZWxmLlBZTE9OXzQyNFgpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDI1WCwgc2VsZi5QWUxPTl80MjVYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyNlgsIHNlbGYuUFlMT05fNDI2WCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjdYLCBzZWxmLlBZTE9OXzQyN1gpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDI4WCwgc2VsZi5QWUxPTl80MjhYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyOVgsIHNlbGYuUFlMT05fNDI5WCkKICAgIAogICAgZGVmIF90cmFuc21pdF9jYW5fZnJhbWUoc2VsZiwgY2FuX2lkLCBkYXRhKToKICAgICAgICAiIiJUcmFuc21pdCBDQU4gZnJhbWUgdmlhIFJTNDg1IChDQU4tb3Zlci1SUzQ4NSkKICAgICAgICAKICAgICAgICBGcmFtZSBmb3JtYXQ6IFtDQU5fSUQgKDIgYnl0ZXMsIGJpZy1lbmRpYW4pXSBbRExDICgxIGJ5dGUpXSBbRGF0YSAoMC04IGJ5dGVzKV0KICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBjYW5faWQ6IENBTiBtZXNzYWdlIElEIChpbnQpCiAgICAgICAgICAgIGRhdGE6IENBTiBkYXRhIGJ5dGVzIChieXRlYXJyYXksIDggYnl0ZXMpCiAgICAgICAgIiIiCiAgICAgICAgIyBCdWlsZCBDQU4tb3Zlci1SUzQ4NSBmcmFtZQogICAgICAgIGZyYW1lID0gYnl0ZWFycmF5KDExKSAgIyAyIChJRCkgKyAxIChETEMpICsgOCAoZGF0YSkKICAgICAgICAKICAgICAgICAjIENBTiBJRCAoYmlnLWVuZGlhbikKICAgICAgICBmcmFtZVswXSA9IChjYW5faWQgPj4gOCkgJiAweEZGCiAgICAgICAgZnJhbWVbMV0gPSBjYW5faWQgJiAweEZGCiAgICAgICAgCiAgICAgICAgIyBETEMgKGFsd2F5cyA4IGZvciBQeWxvbikKICAgICAgICBmcmFtZVsyXSA9IDgKICAgICAgICAKICAgICAgICAjIERhdGEKICAgICAgICBmcmFtZVszOjExXSA9IGRhdGEKICAgICAgICAKICAgICAgICAjIFRyYW5zbWl0IHZpYSBVQVJUCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfdWFydChmcmFtZSkKICAgIAogICAgZGVmIF9zZXRfdTE2KHNlbGYsIGJ1ZmZlciwgb2Zmc2V0LCB2YWx1ZSk6CiAgICAgICAgIiIiU2V0IDE2LWJpdCB1bnNpZ25lZCB2YWx1ZSBpbiBidWZmZXIgKGJpZy1lbmRpYW4pCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgYnVmZmVyOiBCeXRlYXJyYXkgdG8gd3JpdGUgdG8KICAgICAgICAgICAgb2Zmc2V0OiBCeXRlIG9mZnNldAogICAgICAgICAgICB2YWx1ZTogMTYtYml0IHZhbHVlCiAgICAgICAgIiIiCiAgICAgICAgYnVmZmVyW29mZnNldF0gPSAodmFsdWUgPj4gOCkgJiAweEZGCiAgICAgICAgYnVmZmVyW29mZnNldCArIDFdID0gdmFsdWUgJiAweEZGCiAgICAKICAgIGRlZiBfYXBwbHlfMzBrX29mZnNldChzZWxmLCBidWZmZXIsIG9mZnNldCk6CiAgICAgICAgIiIiQXBwbHkgMzAwMDAgb2Zmc2V0IHRvIDE2LWJpdCB2YWx1ZSBpbiBidWZmZXIKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBidWZmZXI6IEJ5dGVhcnJheSB0byBtb2RpZnkKICAgICAgICAgICAgb2Zmc2V0OiBCeXRlIG9mZnNldCBvZiAxNi1iaXQgdmFsdWUKICAgICAgICAiIiIKICAgICAgICB2YWx1ZSA9IChidWZmZXJbb2Zmc2V0XSA8PCA4KSB8IGJ1ZmZlcltvZmZzZXQgKyAxXQogICAgICAgIHZhbHVlICs9IDMwMDAwCiAgICAgICAgYnVmZmVyW29mZnNldF0gPSAodmFsdWUgPj4gOCkgJiAweEZGCiAgICAgICAgYnVmZmVyW29mZnNldCArIDFdID0gdmFsdWUgJiAweEZGCiAgICAKICAgIGRlZiBfc3dhcF9ieXRlcyhzZWxmLCBidWZmZXIsIG9mZnNldCk6CiAgICAgICAgIiIiU3dhcCBieXRlIG9yZGVyIG9mIDE2LWJpdCB2YWx1ZSBpbiBidWZmZXIKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBidWZmZXI6IEJ5dGVhcnJheSB0byBtb2RpZnkKICAgICAgICAgICAgb2Zmc2V0OiBCeXRlIG9mZnNldCBvZiAxNi1iaXQgdmFsdWUKICAgICAgICAiIiIKICAgICAgICBidWZmZXJbb2Zmc2V0XSwgYnVmZmVyW29mZnNldCArIDFdID0gYnVmZmVyW29mZnNldCArIDFdLCBidWZmZXJbb2Zmc2V0XQo="
};

// Bundled extension code
var r=class{constructor(e,t,s,i){this.device=e,this.emit=t,this.state=s,this.html=i,s.dbe||(s.dbe={config:{enabled:!1,battery_type:"nissan_leaf",rs485_baudrate:9600,inverter_protocol:"pylon_can",poll_interval:1e3,available_batteries:{},available_inverters:{}},mqttConfig:{enabled:!1,topic_prefix:"BE",publish_interval:5,publish_cell_voltages:!0,publish_balancing:!0,ha_autodiscovery:!0},mqttStatus:{connected:!1,messages_published:0,commands_received:0,last_publish_ms:0},metrics:{},status:{state:"stopped",running:!1,error:"",battery_type:"",inverter_protocol:"",frames_rx:0,frames_tx:0,last_update_ms:0},isLoading:!1,configLoaded:!1,mqttConfigLoaded:!1})}async onInstall(){if(!this.state.isConnected)return!1;console.log("[DBE] Installing device files...");try{await this.device.mkdir("/lib/ext/dbe"),await this.device.mkdir("/lib/ext/dbe/battery"),await this.device.mkdir("/lib/ext/dbe/charger"),await this.device.mkdir("/lib/ext/dbe/inverter");for(let[e,t]of Object.entries(this.deviceFiles)){let s=e.split("/").pop();console.log(`[DBE] Writing ${s}...`),await this.device.saveFile(e,t)}return console.log("[DBE] Installation complete! Device may need restart to use extension."),!0}catch(e){return console.error("[DBE] Installation failed:",e),!1}}async getDBEConfig(){if(this.state.dbe.isLoading)return console.log("[DBE] Config already loading, skipping"),this.state.dbe.config||{};try{this.state.dbe.isLoading=!0;let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import getDBEConfig; getDBEConfig()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.config=t),this.state.dbe.configLoaded=!0,this.state.dbe.isLoading=!1,this.emit("render"),this.state.dbe.config||{}}catch(e){return console.error("[DBE] Error getting config:",e),this.state.dbe.isLoading=!1,this.state.dbe.configLoaded=!0,this.state.dbe.config||{}}}async setDBEConfig(e){try{let t=await this.device.execute(`from lib.ext.dbe.DBE_helpers import setDBEConfig; setDBEConfig(${JSON.stringify(e)})`),s=this.device.parseJSON(t);return this.state.dbe.config=e,this.emit("render"),s||{success:!0}}catch(t){return console.error("[DBE] Error setting config:",t),{error:t.message}}}async getDBEMetrics(){try{let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import getDBEMetrics; getDBEMetrics()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.metrics=t,this.emit("render")),t||{}}catch(e){return console.error("[DBE] Error getting metrics:",e),{}}}async getDBEStatus(){try{let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import getDBEStatus; getDBEStatus()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.status=t,this.emit("render")),t||{}}catch(e){return console.error("[DBE] Error getting status:",e),{}}}async startDBE(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import startDBE; startDBE()"),t=this.device.parseJSON(e);return await this.getDBEStatus(),this.state.dbe.isLoading=!1,this.emit("render"),t||{}}catch(e){return console.error("[DBE] Error starting:",e),this.state.dbe.isLoading=!1,this.emit("render"),{error:e.message}}}async stopDBE(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import stopDBE; stopDBE()"),t=this.device.parseJSON(e);return await this.getDBEStatus(),this.state.dbe.isLoading=!1,this.emit("render"),t||{}}catch(e){return console.error("[DBE] Error stopping:",e),this.state.dbe.isLoading=!1,this.emit("render"),{error:e.message}}}async getMqttConfig(){if(this.state.dbe.isLoading)return console.log("[DBE MQTT] Config already loading, skipping"),this.state.dbe.mqttConfig||{};try{this.state.dbe.isLoading=!0;let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import getMqttConfig; getMqttConfig()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.mqttConfig=t),this.state.dbe.mqttConfigLoaded=!0,this.state.dbe.isLoading=!1,this.emit("render"),this.state.dbe.mqttConfig||{}}catch(e){return console.error("[DBE MQTT] Error getting config:",e),this.state.dbe.isLoading=!1,this.state.dbe.mqttConfigLoaded=!0,this.state.dbe.mqttConfig||{}}}async saveMqttConfig(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=this.state.dbe.mqttConfig,t=await this.device.execute(`from lib.ext.dbe.DBE_helpers import setMqttConfig; setMqttConfig(${JSON.stringify(e)})`),s=this.device.parseJSON(t);this.state.dbe.isLoading=!1,s&&s.success?alert("\u2713 MQTT configuration saved successfully!"):alert("\u2717 Failed to save MQTT configuration: "+(s?.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 Failed to save MQTT configuration: "+e.message),this.emit("render")}}async testMqttConnection(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import testMqtt; testMqtt()"),t=this.device.parseJSON(e);this.state.dbe.isLoading=!1,t&&t.success?alert("\u2713 MQTT connection successful!"):alert("\u2717 MQTT connection failed: "+(t?.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 MQTT test failed: "+e.message),this.emit("render")}}async refreshMqttStatus(){try{let e=await this.device.execute("from lib.ext.dbe.DBE_helpers import getMqttStatus; getMqttStatus()"),t=this.device.parseJSON(e);t&&typeof t=="object"&&(this.state.dbe.mqttStatus=t,this.emit("render"))}catch(e){console.error("[DBE MQTT] Error getting status:",e)}}handleMqttConfigChange(e,t){this.state.dbe.mqttConfig[e]=t,this.emit("render")}renderConfig(){if(!this.state.dbe.configLoaded&&!this.state.dbe.isLoading&&this.state.isConnected&&setTimeout(()=>{this.getDBEConfig().catch(a=>{console.error("[DBE] getDBEConfig() error:",a)})},0),this.state.isConnected&&!this.state.dbe.isLoading){let a=Date.now();(!this.state.dbe.lastStatusRefresh||a-this.state.dbe.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getDBEStatus(),this.state.dbe.lastStatusRefresh=Date.now()},0)}let t=this.state.dbe.config,i=(this.state.dbe.status||{}).running;return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>DBE Configuration</h2>
          <div style="display: flex; gap: 8px;">
            <button 
              class="dbe-button ${i?"stop":"start"}"
              onclick=${()=>i?this.stopDBE():this.startDBE()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading||!t.enabled}
              style="min-width: 120px;"
            >
              ${i?"Stop":"Start"}
            </button>
            <button 
              class="dbe-button"
              onclick=${()=>this.saveConfig()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading}
              style="min-width: 120px;"
            >
              Save
            </button>
          </div>
        </div>
        <div class="dbe-section" style="padding: 20px;">
          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.enabled}
                onchange=${a=>this.handleConfigChange("enabled",a.target.checked)}
              />
              Enable DBE Bridge
            </label>
          </div>

          <div class="dbe-field">
            <label>Battery Type</label>
            <select 
              value="${t.battery_type||"nissan_leaf"}"
              onchange=${a=>this.handleConfigChange("battery_type",a.target.value)}
              disabled=${!this.state.isConnected}
            >
              ${t.available_batteries&&Object.keys(t.available_batteries).length>0?Object.entries(t.available_batteries).map(([a,n])=>this.html`
                  <option value="${a}" ${t.battery_type===a?"selected":""}>${n}</option>
                `):this.html`
                  <option value="nissan_leaf" ${t.battery_type==="nissan_leaf"?"selected":""}>Nissan LEAF (ZE0/AZE0/ZE1)</option>
                `}
            </select>
          </div>

          <div class="dbe-field">
            <label>RS485 Baudrate</label>
            <select 
              value="${t.rs485_baudrate||9600}"
              onchange=${a=>this.handleConfigChange("rs485_baudrate",parseInt(a.target.value))}
              disabled=${!this.state.isConnected}
            >
              <option value="9600">9600</option>
              <option value="19200">19200</option>
              <option value="38400">38400</option>
              <option value="57600">57600</option>
              <option value="115200">115200</option>
            </select>
          </div>

          <div class="dbe-field">
            <label>Inverter Protocol</label>
            <select 
              value="${t.inverter_protocol||"pylon_can"}"
              onchange=${a=>this.handleConfigChange("inverter_protocol",a.target.value)}
              disabled=${!this.state.isConnected}
            >
              ${t.available_inverters&&Object.keys(t.available_inverters).length>0?Object.entries(t.available_inverters).map(([a,n])=>this.html`
                  <option value="${a}" ${t.inverter_protocol===a?"selected":""}>${n}</option>
                `):this.html`
                  <option value="pylon_can" ${t.inverter_protocol==="pylon_can"?"selected":""}>Pylon CAN Protocol</option>
                `}
            </select>
          </div>

          <div class="dbe-field">
            <label>Poll Interval (ms)</label>
            <input 
              type="number" 
              value="${t.poll_interval||1e3}"
              placeholder="1000"
              min="100"
              max="10000"
              step="100"
              oninput=${a=>this.handleConfigChange("poll_interval",parseInt(a.target.value)||1e3)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div style="margin-top: 20px; padding: 16px; background: var(--dbe-blue-light); border-radius: 8px; border-left: 4px solid var(--dbe-blue);">
            <p style="margin: 0; font-size: 14px; color: var(--text-primary);">
              <strong>Note:</strong> CAN bus settings are configured in the System panel. 
              DBE uses the existing CAN configuration automatically.
            </p>
          </div>
        </div>
      </div>
    `}renderStatus(){if(this.state.isConnected&&!this.state.dbe.isLoading){let s=Date.now();(!this.state.dbe.lastStatusRefresh||s-this.state.dbe.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getDBEStatus(),this.state.dbe.lastStatusRefresh=Date.now()},0)}let e=this.state.dbe.status||{},t=this.state.dbe.config||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Status</h2>
        </div>
        <div class="dbe-status-panel">
          <div class="dbe-status-item">
            <span class="dbe-status-label">Bridge State</span>
            <span class="dbe-status-value ${e.running?"running":e.state==="error"?"error":""}">
              ${e.state||"stopped"}
            </span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Battery Type</span>
            <span class="dbe-status-value">${e.battery_type||t.battery_type||"-"}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Inverter Protocol</span>
            <span class="dbe-status-value">${e.inverter_protocol||t.inverter_protocol||"-"}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">CAN Frames Received</span>
            <span class="dbe-status-value">${e.frames_rx||0}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">CAN Frames Transmitted</span>
            <span class="dbe-status-value">${e.frames_tx||0}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Last Update</span>
            <span class="dbe-status-value">
              ${e.last_update_ms?new Date(e.last_update_ms).toLocaleTimeString():"Never"}
            </span>
          </div>

          ${e.error?this.html`
            <div class="dbe-status-item">
              <span class="dbe-status-label">Error</span>
              <span class="dbe-status-value error">${e.error}</span>
            </div>
          `:""}

          <div style="margin-top: 24px; display: flex; gap: 12px;">
            <button 
              class="dbe-button start"
              onclick=${()=>this.startDBE()}
              disabled=${!this.state.isConnected||!t.enabled||e.running||this.state.dbe.isLoading}
            >
              Start Bridge
            </button>
            <button 
              class="dbe-button stop"
              onclick=${()=>this.stopDBE()}
              disabled=${!this.state.isConnected||!e.running||this.state.dbe.isLoading}
            >
              Stop Bridge
            </button>
            <button 
              class="dbe-button secondary"
              onclick=${()=>this.getDBEStatus()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading}
            >
              Refresh Status
            </button>
          </div>
        </div>
      </div>
    `}renderMetrics(){if(this.state.isConnected&&!this.state.dbe.isLoading){let v=Date.now();(!this.state.dbe.lastMetricsRefresh||v-this.state.dbe.lastMetricsRefresh>2e3)&&setTimeout(()=>{this.getDBEMetrics(),this.state.dbe.lastMetricsRefresh=Date.now()},0)}let e=this.state.dbe.metrics||{},t=this.state.dbe.status||{},s=(e.voltage_dV||0)/10,i=(e.current_dA||0)/10,a=e.power_W||0,n=e.soc_percent||0,l=e.soh_percent||100,o=e.temp_max_C||0,c=e.temp_min_C||0,b=(e.cell_max_mV||0)/1e3,h=(e.cell_min_mV||0)/1e3,u=e.cell_deviation_mV||0,d=e.alarms||0;return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Battery Metrics</h2>
        </div>
        
        ${t.running?this.html`
          <div style="padding: 20px;">
            <!-- SOC Gauge -->
            <div style="margin-bottom: 24px;">
              <h3 style="margin-bottom: 8px; color: var(--text-primary);">State of Charge</h3>
              <div class="dbe-soc-gauge">
                <div class="dbe-soc-fill" style="width: ${n}%">
                  ${n.toFixed(1)}%
                </div>
              </div>
            </div>

            <!-- Alarms -->
            ${d>0?this.html`
              <div style="margin-bottom: 24px;">
                <h3 style="margin-bottom: 8px; color: var(--dbe-red);">Alarms</h3>
                <div>
                  ${d&1?this.html`<span class="dbe-alarm-badge error">Relay Cut Request</span>`:""}
                  ${d&2?this.html`<span class="dbe-alarm-badge error">Failsafe Active</span>`:""}
                  ${d&4?this.html`<span class="dbe-alarm-badge warning">Interlock Open</span>`:""}
                  ${d&8?this.html`<span class="dbe-alarm-badge error">Battery Empty</span>`:""}
                </div>
              </div>
            `:""}

            <!-- Metrics Grid -->
            <div class="dbe-metrics-grid">
              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Voltage</div>
                <div class="dbe-metric-value">${s.toFixed(1)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Current</div>
                <div class="dbe-metric-value">${i.toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Power</div>
                <div class="dbe-metric-value">${(a/1e3).toFixed(2)}</div>
                <div class="dbe-metric-unit">kW</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">State of Health</div>
                <div class="dbe-metric-value">${l}</div>
                <div class="dbe-metric-unit">%</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Temperature Max</div>
                <div class="dbe-metric-value">${o.toFixed(1)}</div>
                <div class="dbe-metric-unit">C</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Temperature Min</div>
                <div class="dbe-metric-value">${c.toFixed(1)}</div>
                <div class="dbe-metric-unit">C</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Voltage Max</div>
                <div class="dbe-metric-value">${b.toFixed(3)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Voltage Min</div>
                <div class="dbe-metric-value">${h.toFixed(3)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Deviation</div>
                <div class="dbe-metric-value">${u}</div>
                <div class="dbe-metric-unit">mV</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Max Charge Current</div>
                <div class="dbe-metric-value">${((e.max_charge_current_dA||0)/10).toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Max Discharge Current</div>
                <div class="dbe-metric-value">${((e.max_discharge_current_dA||0)/10).toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Status</div>
                <div class="dbe-metric-value" style="font-size: 16px;">${e.status||"unknown"}</div>
              </div>
            </div>
          </div>
        `:this.html`
          <div style="padding: 40px 20px; text-align: center; color: var(--text-secondary);">
            ${this.state.isConnected?"Bridge not running. Start the bridge to see metrics.":"Not connected to device."}
          </div>
        `}
      </div>
    `}renderMqtt(){if(!this.state.dbe.mqttConfigLoaded&&!this.state.dbe.isLoading&&this.state.isConnected&&setTimeout(()=>{this.getMqttConfig().catch(i=>{console.error("[DBE MQTT] getMqttConfig() error:",i)})},0),this.state.isConnected&&!this.state.dbe.isLoading){let i=Date.now();(!this.state.dbe.lastMqttStatusRefresh||i-this.state.dbe.lastMqttStatusRefresh>3e3)&&setTimeout(()=>{this.refreshMqttStatus(),this.state.dbe.lastMqttStatusRefresh=Date.now()},0)}let t=this.state.dbe.mqttConfig||{},s=this.state.dbe.mqttStatus||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>MQTT Configuration</h2>
          <button 
            class="dbe-button"
            onclick=${()=>this.saveMqttConfig()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
            style="min-width: 120px;"
          >
            Save
          </button>
        </div>
        
        <div class="dbe-section" style="padding: 20px;">
          <div style="margin-bottom: 20px; padding: 16px; background: var(--bg-secondary); border-radius: 8px; border-left: 4px solid var(--scheme-primary);">
            <p style="margin: 0; font-size: 14px; color: var(--text-primary);">
              <strong>Note:</strong> MQTT broker settings (server, port, credentials) are configured in <strong>Networks  MQTT</strong> panel. 
              This panel configures DBE-specific MQTT settings only.
            </p>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.enabled}
                onchange=${i=>this.handleMqttConfigChange("enabled",i.target.checked)}
              />
              Enable MQTT Publishing
            </label>
          </div>

          <div class="dbe-field">
            <label>Topic Prefix</label>
            <input 
              type="text" 
              value="${t.topic_prefix||"BE"}"
              placeholder="BE"
              oninput=${i=>this.handleMqttConfigChange("topic_prefix",i.target.value)}
              disabled=${!this.state.isConnected}
            />
            <small style="color: var(--text-secondary); font-size: 12px;">
              MQTT topics will be: ${t.topic_prefix||"BE"}/info, ${t.topic_prefix||"BE"}/command/*, etc.
            </small>
          </div>

          <div class="dbe-field">
            <label>Publish Interval (seconds)</label>
            <input 
              type="number" 
              value="${t.publish_interval||5}"
              min="1" max="60"
              oninput=${i=>this.handleMqttConfigChange("publish_interval",parseInt(i.target.value))}
              disabled=${!this.state.isConnected}
            />
            <small style="color: var(--text-secondary); font-size: 12px;">
              How often to publish battery telemetry (default: 5 seconds)
            </small>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.publish_cell_voltages}
                onchange=${i=>this.handleMqttConfigChange("publish_cell_voltages",i.target.checked)}
              />
              Publish All Cell Voltages
            </label>
            <small style="color: var(--text-secondary); font-size: 12px;">
              Publishes individual cell voltages (96+ cells for Nissan LEAF). Disable to reduce bandwidth.
            </small>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.ha_autodiscovery}
                onchange=${i=>this.handleMqttConfigChange("ha_autodiscovery",i.target.checked)}
              />
              Home Assistant Autodiscovery
            </label>
            <small style="color: var(--text-secondary); font-size: 12px;">
              Automatically creates sensors and buttons in Home Assistant
            </small>
          </div>
        </div>

        <!-- MQTT Status Section -->
        <div class="dbe-section" style="padding: 20px;">
          <h3>MQTT Status</h3>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Connection</span>
            <span class="dbe-status-value ${s.connected?"running":""}">
              ${s.connected?"Connected":"Disconnected"}
            </span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Broker</span>
            <span class="dbe-status-value">${s.server||"Not configured"}:${s.port||1883}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Topic Prefix</span>
            <span class="dbe-status-value">${s.topic_prefix||"BE"}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Messages Published</span>
            <span class="dbe-status-value">${s.messages_published||0}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Commands Received</span>
            <span class="dbe-status-value">${s.commands_received||0}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Last Publish</span>
            <span class="dbe-status-value">
              ${s.last_publish_ms?new Date(s.last_publish_ms).toLocaleTimeString():"Never"}
            </span>
          </div>
        </div>

        <!-- Test Buttons -->
        <div style="padding: 20px; display: flex; gap: 12px;">
          <button 
            class="dbe-button start" 
            onclick=${()=>this.testMqttConnection()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
          >
            Test Connection
          </button>
          <button 
            class="dbe-button secondary" 
            onclick=${()=>this.refreshMqttStatus()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
          >
            Refresh Status
          </button>
        </div>
      </div>
    `}handleConfigChange(e,t){this.state.dbe.config[e]=t,this.emit("render")}async saveConfig(){try{if(this.state.dbe.isLoading=!0,this.emit("render"),!this.state.dbe.config.enabled)try{await this.stopDBE()}catch(t){console.warn("[DBE] Error stopping service:",t)}let e=await this.setDBEConfig(this.state.dbe.config);this.state.dbe.isLoading=!1,e.success?alert("\u2713 Configuration saved successfully!"):alert("\u2717 Failed to save configuration: "+(e.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 Failed to save configuration: "+e.message),this.emit("render")}}render(e){switch(e){case"config":return this.renderConfig();case"status":return this.renderStatus();case"metrics":return this.renderMetrics();case"mqtt":return this.renderMqtt();default:return this.renderConfig()}}};export{r as default};

