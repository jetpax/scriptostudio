// === EXTENSION_BUNDLE ===
// Generated by bundle_extensions.js
// Do not edit - regenerated on each build

export const __EXTENSION_META__ = {
  "name": "DBE",
  "id": "dbe",
  "version": [
    0,
    2,
    2
  ],
  "author": "JetPax",
  "description": "Dala The Great's Battery Emulator - CAN-to-RS485 bridge for battery management systems. Bridges EV battery packs to solar inverters.",
  "icon": "battery-charging",
  "iconSvg": "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-battery-charging\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16 7h1a2 2 0 0 1 2 2v.5a.5 .5 0 0 0 .5 .5a.5 .5 0 0 1 .5 .5v3a.5 .5 0 0 1 -.5 .5a.5 .5 0 0 0 -.5 .5v.5a2 2 0 0 1 -2 2h-2\" /><path d=\"M8 7h-2a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h1\" /><path d=\"M12 8l-2 4h3l-2 4\" /></svg>",
  "menu": [
    {
      "id": "config",
      "label": "Configuration"
    },
    {
      "id": "status",
      "label": "Status"
    },
    {
      "id": "metrics",
      "label": "Metrics"
    },
    {
      "id": "mqtt",
      "label": "MQTT"
    }
  ],
  "styles": ".dbe-section h3 { font-size: 18px; font-weight: 600; color: var(--scheme-primary); margin-bottom: 12px; } .dbe-field { display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; } .dbe-field label { font-size: 14px; font-weight: 600; color: var(--text-primary); } .dbe-field input, .dbe-field select { padding: 10px 12px; border: 2px solid var(--border-color); border-radius: 6px; background: var(--input-bg); color: var(--text-primary); font-size: 14px; } .dbe-field input:focus, .dbe-field select:focus { outline: none; border-color: var(--scheme-primary); box-shadow: 0 0 0 3px var(--scheme-primary-light); opacity: 0.2; } .dbe-button { text-transform: uppercase; letter-spacing: 0.5px; width: auto; padding: 10px 20px; border: none; border-radius: 6px; background: var(--scheme-primary); color: white; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; } .dbe-button:hover:not(:disabled) { background: var(--scheme-primary-dark); transform: translateY(-1px); } .dbe-button:disabled { opacity: 0.5; cursor: not-allowed; } .dbe-button.secondary { background: var(--button-bg); color: var(--text-primary); border: 1px solid var(--border-color); } .dbe-button.secondary:hover:not(:disabled) { background: var(--button-hover); } .dbe-button.start { background: #4caf50; color: white; } .dbe-button.start:hover:not(:disabled) { background: #45a049; } .dbe-button.stop { background: #f44336; color: white; } .dbe-button.stop:hover:not(:disabled) { background: #da190b; } .dbe-metrics-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; padding: 20px; } .dbe-metric-card { background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 8px; padding: 16px; } .dbe-metric-name { font-weight: 600; color: var(--scheme-primary); font-size: 13px; margin-bottom: 8px; } .dbe-metric-value { font-size: 24px; font-weight: 700; font-family: 'Menlo', Monaco, 'Courier New', monospace; color: var(--text-primary); } .dbe-metric-unit { font-size: 12px; color: var(--text-secondary); margin-top: 4px; } .dbe-status-panel { padding: 20px; } .dbe-status-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border-color); } .dbe-status-item:last-child { border-bottom: none; } .dbe-status-label { font-weight: 600; color: var(--text-primary); } .dbe-status-value { color: var(--text-secondary); } .dbe-status-value.running { color: #4caf50; font-weight: 600; } .dbe-status-value.error { color: #f44336; font-weight: 600; } .dbe-soc-gauge { width: 100%; height: 40px; background: var(--bg-tertiary); border: 2px solid var(--border-color); border-radius: 20px; overflow: hidden; position: relative; margin: 16px 0; } .dbe-soc-fill { height: 100%; background: linear-gradient(90deg, #4caf50, var(--scheme-primary)); transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; } .dbe-alarm-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; margin: 4px; } .dbe-alarm-badge.warning { background: #ff9800; color: white; } .dbe-alarm-badge.error { background: #f44336; color: white; }",
  "devicePaths": {
    "lib/DBE/__init__.py": "/lib/ext/dbe/__init__.py",
    "lib/DBE/DBE_helpers.py": "/lib/ext/dbe/DBE_helpers.py",
    "lib/DBE/mqtt_client.py": "/lib/ext/dbe/mqtt_client.py",
    "lib/DBE/mqtt_commands.py": "/lib/ext/dbe/mqtt_commands.py",
    "lib/DBE/mqtt_ha_discovery.py": "/lib/ext/dbe/mqtt_ha_discovery.py",
    "lib/DBE/mqtt_publisher.py": "/lib/ext/dbe/mqtt_publisher.py",
    "lib/DBE/battery/__init__.py": "/lib/ext/dbe/battery/__init__.py",
    "lib/DBE/battery/base.py": "/lib/ext/dbe/battery/base.py",
    "lib/DBE/battery/nissan_leaf.py": "/lib/ext/dbe/battery/nissan_leaf.py",
    "lib/DBE/charger/__init__.py": "/lib/ext/dbe/charger/__init__.py",
    "lib/DBE/inverter/__init__.py": "/lib/ext/dbe/inverter/__init__.py",
    "lib/DBE/inverter/base.py": "/lib/ext/dbe/inverter/base.py",
    "lib/DBE/inverter/pylon_can.py": "/lib/ext/dbe/inverter/pylon_can.py"
  }
};

export const __DEVICE_FILES__ = {
  "/lib/ext/dbe/__init__.py": "IiIiCkRCRSAoRGFsYSBUaGUgR3JlYXQncyBCYXR0ZXJ5IEVtdWxhdG9yKSBNb2R1bGUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgQmF0dGVyeSBFbXVsYXRvciBmb3IgU2NyaXB0byBTdHVkaW8uCgpQcm92aWRlcyBiaWRpcmVjdGlvbmFsIENBTi10by1SUzQ4NSBicmlkZ2UgZm9yIGJhdHRlcnkgbWFuYWdlbWVudCBzeXN0ZW1zLgoiIiIKCl9fdmVyc2lvbl9fID0gJzAuMS4wJwo=",
  "/lib/ext/dbe/DBE_helpers.py": "IiIiCkRCRSBIZWxwZXIgRnVuY3Rpb25zCj09PT09PT09PT09PT09PT09PT09CgpNYWluIGNvbnRyb2wgZnVuY3Rpb25zIGZvciBEQkUgKERhbGEgVGhlIEdyZWF0J3MgQmF0dGVyeSBFbXVsYXRvcikgZXh0ZW5zaW9uLgoKQ2xpZW50LWNhbGxhYmxlIGZ1bmN0aW9uczoKLSBnZXREQkVDb25maWcoKSAgICAgICAgICAtIEdldCBjdXJyZW50IGNvbmZpZ3VyYXRpb24KLSBzZXREQkVDb25maWcoY29uZmlnKSAgICAtIFNldCBjb25maWd1cmF0aW9uCi0gc3RhcnREQkUoKSAgICAgICAgICAgICAgLSBTdGFydCBDQU4tdG8tUlM0ODUgYnJpZGdlCi0gc3RvcERCRSgpICAgICAgICAgICAgICAgLSBTdG9wIGJyaWRnZQotIGdldERCRVN0YXR1cygpICAgICAgICAgIC0gR2V0IGNvbm5lY3Rpb24gc3RhdHVzCi0gZ2V0REJFTWV0cmljcygpICAgICAgICAgLSBHZXQgY3VycmVudCBiYXR0ZXJ5IG1ldHJpY3MKLSBnZXRNcXR0Q29uZmlnKCkgICAgICAgICAtIEdldCBNUVRUIGNvbmZpZ3VyYXRpb24KLSBzZXRNcXR0Q29uZmlnKGNvbmZpZykgICAtIFNldCBNUVRUIGNvbmZpZ3VyYXRpb24KLSBnZXRNcXR0U3RhdHVzKCkgICAgICAgICAtIEdldCBNUVRUIGNvbm5lY3Rpb24gc3RhdHVzCi0gdGVzdE1xdHQoKSAgICAgICAgICAgICAgLSBUZXN0IE1RVFQgY29ubmVjdGlvbgoiIiIKCmltcG9ydCBqc29uCmltcG9ydCB0aW1lCmltcG9ydCBDQU4KZnJvbSBsaWIgaW1wb3J0IHNldHRpbmdzCgojIEdsb2JhbCBzdGF0ZQpfZGJlX3J1bm5pbmcgPSBGYWxzZQpfZGJlX3BhdXNlZCA9IEZhbHNlCl9kYmVfY2FuX2hhbmRsZSA9IE5vbmUKX2RiZV9iYXR0ZXJ5ID0gTm9uZQpfZGJlX2ludmVydGVyID0gTm9uZQpfZGJlX2xvb3BfdGFzayA9IE5vbmUKX2RiZV9zdGF0dXMgPSB7CiAgICAnc3RhdGUnOiAnc3RvcHBlZCcsCiAgICAncnVubmluZyc6IEZhbHNlLAogICAgJ3BhdXNlZCc6IEZhbHNlLAogICAgJ2Vycm9yJzogJycsCiAgICAnYmF0dGVyeV90eXBlJzogJycsCiAgICAnaW52ZXJ0ZXJfcHJvdG9jb2wnOiAnJywKICAgICdmcmFtZXNfcngnOiAwLAogICAgJ2ZyYW1lc190eCc6IDAsCiAgICAnbGFzdF91cGRhdGVfbXMnOiAwCn0KCiMgTVFUVCBzdGF0ZQpfbXF0dF9lbmFibGVkID0gRmFsc2UKX21xdHRfbGFzdF9wdWJsaXNoX21zID0gMApfbXF0dF9wdWJsaXNoX2ludGVydmFsX21zID0gNTAwMApfbXF0dF9yZWNvbm5lY3RfbGFzdF9hdHRlbXB0X21zID0gMApfbXF0dF9yZWNvbm5lY3RfaW50ZXJ2YWxfbXMgPSA1MDAwCgoKZGVmIGdldERCRUNvbmZpZygpOgogICAgIiIiR2V0IGN1cnJlbnQgREJFIGNvbmZpZ3VyYXRpb24gZnJvbSBzZXR0aW5ncwogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggY29uZmlndXJhdGlvbgogICAgIiIiCiAgICBjb25maWcgPSB7CiAgICAgICAgJ2VuYWJsZWQnOiBzZXR0aW5ncy5nZXQoJ2RiZS5lbmFibGVkJywgRmFsc2UpLAogICAgICAgICdiYXR0ZXJ5X3R5cGUnOiBzZXR0aW5ncy5nZXQoJ2RiZS5iYXR0ZXJ5X3R5cGUnLCAnbmlzc2FuX2xlYWYnKSwKICAgICAgICAncnM0ODVfYmF1ZHJhdGUnOiBzZXR0aW5ncy5nZXQoJ2RiZS5yczQ4NV9iYXVkcmF0ZScsIDk2MDApLAogICAgICAgICdpbnZlcnRlcl9wcm90b2NvbCc6IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX3Byb3RvY29sJywgJ3B5bG9uX2NhbicpLAogICAgICAgICdwb2xsX2ludGVydmFsJzogc2V0dGluZ3MuZ2V0KCdkYmUucG9sbF9pbnRlcnZhbCcsIDEwMDApLAogICAgICAgICdhdmFpbGFibGVfYmF0dGVyaWVzJzogewogICAgICAgICAgICAnbmlzc2FuX2xlYWYnOiAnTmlzc2FuIExFQUYgKFpFMC9BWkUwL1pFMSknLAogICAgICAgICAgICAjIEZ1dHVyZSBiYXR0ZXJpZXMgd2lsbCBiZSBhZGRlZCBoZXJlCiAgICAgICAgfSwKICAgICAgICAnYXZhaWxhYmxlX2ludmVydGVycyc6IHsKICAgICAgICAgICAgJ3B5bG9uX2Nhbic6ICdQeWxvbiBDQU4gUHJvdG9jb2wnLAogICAgICAgICAgICAjIEZ1dHVyZSBpbnZlcnRlciBwcm90b2NvbHMgd2lsbCBiZSBhZGRlZCBoZXJlCiAgICAgICAgfQogICAgfQogICAgcHJpbnQoanNvbi5kdW1wcyhjb25maWcpKQoKCmRlZiBzZXREQkVDb25maWcoY29uZmlnX2RpY3QpOgogICAgIiIiU2V0IERCRSBjb25maWd1cmF0aW9uIHZpYSBzZXR0aW5ncyBtb2R1bGUKICAgIAogICAgQXJnczoKICAgICAgICBjb25maWdfZGljdDogRGljdGlvbmFyeSB3aXRoIGNvbmZpZ3VyYXRpb24gdmFsdWVzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBzdWNjZXNzIHN0YXR1cwogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBVcGRhdGUgc2V0dGluZ3MKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBjb25maWdfZGljdC5pdGVtcygpOgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoZidkYmUue2tleX0nLCB2YWx1ZSkKICAgICAgICAKICAgICAgICAjIFNhdmUgdG8gZGlzawogICAgICAgIGlmIHNldHRpbmdzLnNhdmUoKToKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBUcnVlfSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ0ZhaWxlZCB0byBzYXZlIHNldHRpbmdzJ30pKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6IHN0cihlKX0pKQoKCmRlZiBzdGFydERCRSgpOgogICAgIiIiU3RhcnQgREJFIGJyaWRnZSB1c2luZyBDQU4gbWFuYWdlcgogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggc3VjY2VzcyBzdGF0dXMKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfcnVubmluZywgX2RiZV9jYW5faGFuZGxlLCBfZGJlX2JhdHRlcnksIF9kYmVfaW52ZXJ0ZXIsIF9kYmVfbG9vcF90YXNrLCBfZGJlX3N0YXR1cwogICAgCiAgICBpZiBfZGJlX3J1bm5pbmc6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ0FscmVhZHkgcnVubmluZyd9KSkKICAgICAgICByZXR1cm4KICAgIAogICAgdHJ5OgogICAgICAgICMgR2V0IGNvbmZpZ3VyYXRpb24KICAgICAgICBiYXR0ZXJ5X3R5cGUgPSBzZXR0aW5ncy5nZXQoJ2RiZS5iYXR0ZXJ5X3R5cGUnLCAnbmlzc2FuX2xlYWYnKQogICAgICAgIGludmVydGVyX3Byb3RvY29sID0gc2V0dGluZ3MuZ2V0KCdkYmUuaW52ZXJ0ZXJfcHJvdG9jb2wnLCAncHlsb25fY2FuJykKICAgICAgICAKICAgICAgICAjID09PSBDQU4gTWFuYWdlciBJbnRlZ3JhdGlvbiA9PT0KICAgICAgICAKICAgICAgICAjIFN0YWdlIDE6IFJlZ2lzdGVyIHdpdGggQ0FOIG1hbmFnZXIgKGJ1cyBzdGF5cyBTVE9QUEVEKQogICAgICAgIF9kYmVfY2FuX2hhbmRsZSA9IENBTi5yZWdpc3RlcihDQU4uVFhfRU5BQkxFRCkKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgYmF0dGVyeSBwcm90b2NvbAogICAgICAgIGlmIGJhdHRlcnlfdHlwZSA9PSAnbmlzc2FuX2xlYWYnOgogICAgICAgICAgICBmcm9tIGxpYi5EQkUuYmF0dGVyeS5uaXNzYW5fbGVhZiBpbXBvcnQgTmlzc2FuTGVhZkJhdHRlcnkKICAgICAgICAgICAgX2RiZV9iYXR0ZXJ5ID0gTmlzc2FuTGVhZkJhdHRlcnkoX2RiZV9jYW5faGFuZGxlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJVbnN1cHBvcnRlZCBiYXR0ZXJ5IHR5cGU6IHtiYXR0ZXJ5X3R5cGV9IikKICAgICAgICAKICAgICAgICBfZGJlX2JhdHRlcnkuc2V0dXAoKQogICAgICAgIAogICAgICAgICMgU2V0IFJYIGNhbGxiYWNrIGZvciBiYXR0ZXJ5IGZyYW1lcwogICAgICAgIGRlZiBiYXR0ZXJ5X3J4X2NhbGxiYWNrKGZyYW1lKToKICAgICAgICAgICAgIiIiQ0FOIG1hbmFnZXIgUlggY2FsbGJhY2sgLSBkaXNwYXRjaGVzIHRvIGJhdHRlcnkgcHJvdG9jb2wiIiIKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY2FuX2lkID0gZnJhbWVbJ2lkJ10KICAgICAgICAgICAgICAgIGRhdGEgPSBmcmFtZVsnZGF0YSddCiAgICAgICAgICAgICAgICBfZGJlX2JhdHRlcnkuaGFuZGxlX2luY29taW5nX2Nhbl9mcmFtZShjYW5faWQsIGRhdGEpCiAgICAgICAgICAgICAgICBfZGJlX3N0YXR1c1snZnJhbWVzX3J4J10gKz0gMQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBfZGJlX3N0YXR1c1snZXJyb3InXSA9IGYiUlggZXJyb3I6IHtlfSIKICAgICAgICAKICAgICAgICBDQU4uc2V0X3J4X2NhbGxiYWNrKF9kYmVfY2FuX2hhbmRsZSwgYmF0dGVyeV9yeF9jYWxsYmFjaykKICAgICAgICAKICAgICAgICAjIFN0YWdlIDI6IEFjdGl2YXRlIGNsaWVudCAoYnVzIHN0YXJ0cyBpbiBOT1JNQUwgbW9kZSkKICAgICAgICBDQU4uYWN0aXZhdGUoX2RiZV9jYW5faGFuZGxlKQogICAgICAgIAogICAgICAgICMgSW5pdGlhbGl6ZSBpbnZlcnRlciBwcm90b2NvbAogICAgICAgIGlmIGludmVydGVyX3Byb3RvY29sID09ICdweWxvbl9jYW4nOgogICAgICAgICAgICBmcm9tIGxpYi5EQkUuaW52ZXJ0ZXIucHlsb25fY2FuIGltcG9ydCBQeWxvbkNBTlByb3RvY29sCiAgICAgICAgICAgIF9kYmVfaW52ZXJ0ZXIgPSBQeWxvbkNBTlByb3RvY29sKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5zdXBwb3J0ZWQgaW52ZXJ0ZXIgcHJvdG9jb2w6IHtpbnZlcnRlcl9wcm90b2NvbH0iKQogICAgICAgIAogICAgICAgICMgVXBkYXRlIHN0YXR1cwogICAgICAgIF9kYmVfc3RhdHVzWydzdGF0ZSddID0gJ3J1bm5pbmcnCiAgICAgICAgX2RiZV9zdGF0dXNbJ3J1bm5pbmcnXSA9IFRydWUKICAgICAgICBfZGJlX3N0YXR1c1snYmF0dGVyeV90eXBlJ10gPSBiYXR0ZXJ5X3R5cGUKICAgICAgICBfZGJlX3N0YXR1c1snaW52ZXJ0ZXJfcHJvdG9jb2wnXSA9IGludmVydGVyX3Byb3RvY29sCiAgICAgICAgX2RiZV9zdGF0dXNbJ2Vycm9yJ10gPSAnJwogICAgICAgIAogICAgICAgICMgSW5pdGlhbGl6ZSBNUVRUIGNvbW1hbmQgaGFuZGxlcnMKICAgICAgICBfaW5pdF9tcXR0X2NvbW1hbmRzKCkKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgTVFUVCBpZiBlbmFibGVkCiAgICAgICAgZ2xvYmFsIF9tcXR0X2VuYWJsZWQsIF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXMKICAgICAgICBfbXF0dF9lbmFibGVkID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9lbmFibGVkJywgRmFsc2UpCiAgICAgICAgX21xdHRfcHVibGlzaF9pbnRlcnZhbF9tcyA9IHNldHRpbmdzLmdldCgnZGJlLm1xdHRfcHVibGlzaF9pbnRlcnZhbCcsIDUpICogMTAwMAogICAgICAgIAogICAgICAgIGlmIF9tcXR0X2VuYWJsZWQ6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9jbGllbnQsIG1xdHRfY29tbWFuZHMsIG1xdHRfaGFfZGlzY292ZXJ5CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG1xdHRfY2xpZW50LmluaXRfbXF0dCgpOgogICAgICAgICAgICAgICAgICAgIGlmIG1xdHRfY2xpZW50LmNvbm5lY3QoKToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltEQkVdIE1RVFQgY29ubmVjdGVkIikKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICMgU3Vic2NyaWJlIHRvIGNvbW1hbmRzCiAgICAgICAgICAgICAgICAgICAgICAgIG1xdHRfY29tbWFuZHMuc3Vic2NyaWJlX3RvX2NvbW1hbmRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICMgUHVibGlzaCBIb21lIEFzc2lzdGFudCBkaXNjb3ZlcnkgKGlmIGVuYWJsZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNldHRpbmdzLmdldCgnZGJlLm1xdHRfaGFfYXV0b2Rpc2NvdmVyeScsIFRydWUpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtX2NlbGxzID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX2RiZV9iYXR0ZXJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdHRlcnlfZGF0YSA9IF9kYmVfYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbF92b2x0YWdlcyA9IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfdm9sdGFnZXNfbVYnLCBbXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1fY2VsbHMgPSBsZW4oY2VsbF92b2x0YWdlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXF0dF9oYV9kaXNjb3ZlcnkucHVibGlzaF9kaXNjb3ZlcnkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtX2NlbGxzPW51bV9jZWxscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaXNoX2NlbGxfdm9sdGFnZXM9c2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2NlbGxfdm9sdGFnZXMnLCBUcnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbREJFXSBNUVRUIGNvbm5lY3Rpb24gZmFpbGVkLCB3aWxsIHJldHJ5IGluIGJhY2tncm91bmQiKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgiW0RCRV0gTVFUVCBpbml0aWFsaXphdGlvbiBmYWlsZWQiKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIltEQkVdIE1RVFQgc2V0dXAgZXJyb3I6IHtlfSIpCiAgICAgICAgCiAgICAgICAgIyBTdGFydCBiYWNrZ3JvdW5kIGxvb3AKICAgICAgICBfZGJlX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgaW1wb3J0IF90aHJlYWQKICAgICAgICBfZGJlX2xvb3BfdGFzayA9IF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZChfZGJlX2xvb3AsICgpKQogICAgICAgIAogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogVHJ1ZSwgJ3N0YXR1cyc6ICdzdGFydGVkJ30pKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgQ2xlYW51cCBvbiBlcnJvcgogICAgICAgIF9kYmVfc3RhdHVzWydzdGF0ZSddID0gJ2Vycm9yJwogICAgICAgIF9kYmVfc3RhdHVzWydlcnJvciddID0gc3RyKGUpCiAgICAgICAgX2RiZV9ydW5uaW5nID0gRmFsc2UKICAgICAgICAKICAgICAgICBpZiBfZGJlX2Nhbl9oYW5kbGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIENBTi5kZWFjdGl2YXRlKF9kYmVfY2FuX2hhbmRsZSkKICAgICAgICAgICAgICAgIENBTi51bnJlZ2lzdGVyKF9kYmVfY2FuX2hhbmRsZSkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgICAgICAgICBfZGJlX2Nhbl9oYW5kbGUgPSBOb25lCiAgICAgICAgCiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogc3RyKGUpfSkpCgoKZGVmIF9kYmVfbG9vcCgpOgogICAgIiIiTWFpbiBwcm9jZXNzaW5nIGxvb3AgKHJ1bnMgaW4gYmFja2dyb3VuZCB0aHJlYWQpCiAgICAKICAgIEJJRElSRUNUSU9OQUwgQlJJREdFOgogICAgLSBCYXR0ZXJ5IOKGkiBJbnZlcnRlcjogRm9yd2FyZCBiYXR0ZXJ5IGRhdGEgKHZvbHRhZ2UsIFNPQywgbGltaXRzLCBhbGFybXMpCiAgICAtIEludmVydGVyIOKGkiBCYXR0ZXJ5OiBGb3J3YXJkIGNvbnRyb2wgbWVzc2FnZXMgKGVuYWJsZSBjaGFyZ2UvZGlzY2hhcmdlLCBsaW1pdHMpCiAgICAtIE1RVFQ6IFB1Ymxpc2ggdGVsZW1ldHJ5IGFuZCBoYW5kbGUgY29tbWFuZHMKICAgIAogICAgTk9URTogQ0FOIFJYIGhhbmRsZWQgYnkgQ0FOIG1hbmFnZXIgY2FsbGJhY2sgKGJhdHRlcnlfcnhfY2FsbGJhY2spCiAgICAiIiIKICAgIGdsb2JhbCBfZGJlX3J1bm5pbmcsIF9kYmVfcGF1c2VkLCBfZGJlX2JhdHRlcnksIF9kYmVfaW52ZXJ0ZXIsIF9kYmVfY2FuX2hhbmRsZSwgX2RiZV9zdGF0dXMKICAgIGdsb2JhbCBfbXF0dF9lbmFibGVkLCBfbXF0dF9sYXN0X3B1Ymxpc2hfbXMsIF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXMKICAgIGdsb2JhbCBfbXF0dF9yZWNvbm5lY3RfbGFzdF9hdHRlbXB0X21zLCBfbXF0dF9yZWNvbm5lY3RfaW50ZXJ2YWxfbXMKICAgIAogICAgd2hpbGUgX2RiZV9ydW5uaW5nOgogICAgICAgIHRyeToKICAgICAgICAgICAgY3VycmVudF90aW1lX21zID0gdGltZS50aWNrc19tcygpCiAgICAgICAgICAgIAogICAgICAgICAgICAjID09PSBNUVRUIENvbm5lY3Rpb24gTWFuYWdlbWVudCA9PT0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIF9tcXR0X2VuYWJsZWQ6CiAgICAgICAgICAgICAgICBmcm9tIGxpYi5EQkUgaW1wb3J0IG1xdHRfY2xpZW50CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgQ2hlY2sgaWYgY29ubmVjdGVkLCBhdHRlbXB0IHJlY29ubmVjdCBpZiBuZWVkZWQKICAgICAgICAgICAgICAgIGlmIG5vdCBtcXR0X2NsaWVudC5pc19jb25uZWN0ZWQoKToKICAgICAgICAgICAgICAgICAgICAjIE9ubHkgYXR0ZW1wdCByZWNvbm5lY3QgZXZlcnkgNSBzZWNvbmRzCiAgICAgICAgICAgICAgICAgICAgaWYgdGltZS50aWNrc19kaWZmKGN1cnJlbnRfdGltZV9tcywgX21xdHRfcmVjb25uZWN0X2xhc3RfYXR0ZW1wdF9tcykgPiBfbXF0dF9yZWNvbm5lY3RfaW50ZXJ2YWxfbXM6CiAgICAgICAgICAgICAgICAgICAgICAgIF9tcXR0X3JlY29ubmVjdF9sYXN0X2F0dGVtcHRfbXMgPSBjdXJyZW50X3RpbWVfbXMKICAgICAgICAgICAgICAgICAgICAgICAgbXF0dF9jbGllbnQuY29ubmVjdCgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgQ2hlY2sgZm9yIGluY29taW5nIE1RVFQgY29tbWFuZHMgKG5vbi1ibG9ja2luZykKICAgICAgICAgICAgICAgICAgICBtcXR0X2NsaWVudC5jaGVja19tc2coKQogICAgICAgICAgICAKICAgICAgICAgICAgIyA9PT0gQmF0dGVyeSDihpIgSW52ZXJ0ZXIgUGF0aCA9PT0KICAgICAgICAgICAgCiAgICAgICAgICAgICMgMS4gQ0FOIFJYIGhhbmRsZWQgYnkgQ0FOIG1hbmFnZXIgY2FsbGJhY2sgKG5vIHBvbGxpbmcgbmVlZGVkISkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgMi4gU2VuZCBrZWVwLWFsaXZlIHRvIGJhdHRlcnkgKGlmIG5lZWRlZCBieSBwcm90b2NvbCBhbmQgbm90IHBhdXNlZCkKICAgICAgICAgICAgIyAgICBCYXR0ZXJ5IHByb3RvY29sIHVzZXMgQ0FOLnRyYW5zbWl0KGhhbmRsZSwgZnJhbWVfZGljdCkKICAgICAgICAgICAgaWYgbm90IF9kYmVfcGF1c2VkOgogICAgICAgICAgICAgICAgX2RiZV9iYXR0ZXJ5LnRyYW5zbWl0X2NhbihjdXJyZW50X3RpbWVfbXMpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIDMuIFVwZGF0ZSBkZXJpdmVkIHZhbHVlcyAocG93ZXIsIGV0Yy4pCiAgICAgICAgICAgIF9kYmVfYmF0dGVyeS51cGRhdGVfdmFsdWVzKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgNC4gRm9yd2FyZCBiYXR0ZXJ5IGRhdGEgdG8gaW52ZXJ0ZXIgdmlhIFJTNDg1IChpZiBub3QgcGF1c2VkKQogICAgICAgICAgICBiYXR0ZXJ5X2RhdGEgPSBfZGJlX2JhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgICAgICBpZiBub3QgX2RiZV9wYXVzZWQ6CiAgICAgICAgICAgICAgICBfZGJlX2ludmVydGVyLnRyYW5zbWl0KGJhdHRlcnlfZGF0YSwgY3VycmVudF90aW1lX21zKQogICAgICAgICAgICAKICAgICAgICAgICAgIyA9PT0gSW52ZXJ0ZXIg4oaSIEJhdHRlcnkgUGF0aCA9PT0KICAgICAgICAgICAgCiAgICAgICAgICAgICMgNS4gQ2hlY2sgZm9yIGluY29taW5nIFJTNDg1IG1lc3NhZ2VzIGZyb20gaW52ZXJ0ZXIgKGlmIG5vdCBwYXVzZWQpCiAgICAgICAgICAgIGlmIG5vdCBfZGJlX3BhdXNlZDoKICAgICAgICAgICAgICAgIGludmVydGVyX2NvbW1hbmRzID0gX2RiZV9pbnZlcnRlci5yZWNlaXZlKCkKICAgICAgICAgICAgICAgIGlmIGludmVydGVyX2NvbW1hbmRzOgogICAgICAgICAgICAgICAgICAgICMgRm9yd2FyZCBjb250cm9sIG1lc3NhZ2VzIHRvIGJhdHRlcnkgKGlmIHN1cHBvcnRlZCkKICAgICAgICAgICAgICAgICAgICBfZGJlX2JhdHRlcnkuaGFuZGxlX2ludmVydGVyX2NvbW1hbmRzKGludmVydGVyX2NvbW1hbmRzKQogICAgICAgICAgICAKICAgICAgICAgICAgIyA9PT0gTVFUVCBQdWJsaXNoaW5nID09PQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgX21xdHRfZW5hYmxlZCBhbmQgbXF0dF9jbGllbnQuaXNfY29ubmVjdGVkKCk6CiAgICAgICAgICAgICAgICAjIFB1Ymxpc2ggdGVsZW1ldHJ5IGF0IGNvbmZpZ3VyZWQgaW50ZXJ2YWwKICAgICAgICAgICAgICAgIGlmIHRpbWUudGlja3NfZGlmZihjdXJyZW50X3RpbWVfbXMsIF9tcXR0X2xhc3RfcHVibGlzaF9tcykgPiBfbXF0dF9wdWJsaXNoX2ludGVydmFsX21zOgogICAgICAgICAgICAgICAgICAgIGZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9wdWJsaXNoZXIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjIEdldCBwdWJsaXNoIHNldHRpbmdzCiAgICAgICAgICAgICAgICAgICAgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2NlbGxfdm9sdGFnZXMnLCBUcnVlKQogICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hfYmFsYW5jaW5nID0gc2V0dGluZ3MuZ2V0KCdkYmUubXF0dF9wdWJsaXNoX2JhbGFuY2luZycsIFRydWUpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBQdWJsaXNoIGFsbCBkYXRhCiAgICAgICAgICAgICAgICAgICAgbXF0dF9wdWJsaXNoZXIucHVibGlzaF9hbGwoYmF0dGVyeV9kYXRhLCBwdWJsaXNoX2NlbGxfdm9sdGFnZXMsIHB1Ymxpc2hfYmFsYW5jaW5nKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIF9tcXR0X2xhc3RfcHVibGlzaF9tcyA9IGN1cnJlbnRfdGltZV9tcwogICAgICAgICAgICAKICAgICAgICAgICAgIyBVcGRhdGUgc3RhdHVzCiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydsYXN0X3VwZGF0ZV9tcyddID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydwYXVzZWQnXSA9IF9kYmVfcGF1c2VkCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFNsZWVwIHRvIGF2b2lkIGJ1c3ktd2FpdAogICAgICAgICAgICB0aW1lLnNsZWVwX21zKDEwKQogICAgICAgICAgICAKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIF9kYmVfc3RhdHVzWydlcnJvciddID0gZiJMb29wIGVycm9yOiB7ZX0iCiAgICAgICAgICAgICMgQ29udGludWUgcnVubmluZyBkZXNwaXRlIGVycm9ycwoKCmRlZiBzdG9wREJFKCk6CiAgICAiIiJTdG9wIERCRSBicmlkZ2UgYW5kIGNsZWFuIHVwIENBTiBtYW5hZ2VyIHJlZ2lzdHJhdGlvbgogICAgCiAgICBSZXR1cm5zIEpTT04gc3RyaW5nIHdpdGggc3VjY2VzcyBzdGF0dXMKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfcnVubmluZywgX2RiZV9jYW5faGFuZGxlLCBfZGJlX2JhdHRlcnksIF9kYmVfaW52ZXJ0ZXIsIF9kYmVfbG9vcF90YXNrLCBfZGJlX3N0YXR1cwogICAgZ2xvYmFsIF9tcXR0X2VuYWJsZWQKICAgIAogICAgdHJ5OgogICAgICAgICMgU3RvcCBiYWNrZ3JvdW5kIGxvb3AKICAgICAgICBpZiBfZGJlX2xvb3BfdGFzazoKICAgICAgICAgICAgX2RiZV9ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgdGltZS5zbGVlcCgwLjMpICAjIEdpdmUgbG9vcCB0aW1lIHRvIGV4aXQKICAgICAgICAgICAgX2RiZV9sb29wX3Rhc2sgPSBOb25lCiAgICAgICAgCiAgICAgICAgIyA9PT0gTVFUVCBDbGVhbnVwID09PQogICAgICAgIAogICAgICAgIGlmIF9tcXR0X2VuYWJsZWQ6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9jbGllbnQKICAgICAgICAgICAgICAgIG1xdHRfY2xpZW50LmRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgcHJpbnQoIltEQkVdIE1RVFQgZGlzY29ubmVjdGVkIikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJbREJFXSBNUVRUIGRpc2Nvbm5lY3QgZXJyb3I6IHtlfSIpCiAgICAgICAgCiAgICAgICAgIyA9PT0gQ0FOIE1hbmFnZXIgQ2xlYW51cCA9PT0KICAgICAgICAKICAgICAgICBpZiBfZGJlX2Nhbl9oYW5kbGUgaXMgbm90IE5vbmU6CiAgICAgICAgICAgICMgRGVhY3RpdmF0ZSBjbGllbnQgKGJ1cyBtYXkgZ28gdG8gTElTVEVOX09OTFkgb3IgU1RPUFBFRCkKICAgICAgICAgICAgQ0FOLmRlYWN0aXZhdGUoX2RiZV9jYW5faGFuZGxlKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBVbnJlZ2lzdGVyIGNsaWVudCAocmVtb3ZlcyBmcm9tIG1hbmFnZXIpCiAgICAgICAgICAgIENBTi51bnJlZ2lzdGVyKF9kYmVfY2FuX2hhbmRsZSkKICAgICAgICAgICAgCiAgICAgICAgICAgIF9kYmVfY2FuX2hhbmRsZSA9IE5vbmUKICAgICAgICAKICAgICAgICAjIENsZWFuIHVwIGJhdHRlcnkvaW52ZXJ0ZXIKICAgICAgICBfZGJlX2JhdHRlcnkgPSBOb25lCiAgICAgICAgX2RiZV9pbnZlcnRlciA9IE5vbmUKICAgICAgICAKICAgICAgICAjIFVwZGF0ZSBzdGF0dXMKICAgICAgICBfZGJlX3N0YXR1c1snc3RhdGUnXSA9ICdzdG9wcGVkJwogICAgICAgIF9kYmVfc3RhdHVzWydydW5uaW5nJ10gPSBGYWxzZQogICAgICAgIF9kYmVfc3RhdHVzWydwYXVzZWQnXSA9IEZhbHNlCiAgICAgICAgX2RiZV9zdGF0dXNbJ2Vycm9yJ10gPSAnJwogICAgICAgIAogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogVHJ1ZSwgJ3N0YXR1cyc6ICdzdG9wcGVkJ30pKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6IHN0cihlKX0pKQoKCmRlZiBnZXREQkVTdGF0dXMoKToKICAgICIiIkdldCBEQkUgY29ubmVjdGlvbiBzdGF0dXMKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIHN0YXR1cyBpbmZvcm1hdGlvbgogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9zdGF0dXMsIF9kYmVfYmF0dGVyeQogICAgCiAgICB0cnk6CiAgICAgICAgIyBBZGQgYmF0dGVyeS1zcGVjaWZpYyBzdGF0dXMgaWYgYXZhaWxhYmxlCiAgICAgICAgaWYgX2RiZV9iYXR0ZXJ5OgogICAgICAgICAgICBiYXR0ZXJ5X2RhdGEgPSBfZGJlX2JhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgICAgICBfZGJlX3N0YXR1c1snYmF0dGVyeV92b2x0YWdlX1YnXSA9IGJhdHRlcnlfZGF0YS5nZXQoJ3ZvbHRhZ2VfZFYnLCAwKSAvIDEwLjAKICAgICAgICAgICAgX2RiZV9zdGF0dXNbJ2JhdHRlcnlfc29jX3BlcmNlbnQnXSA9IGJhdHRlcnlfZGF0YS5nZXQoJ3NvY19wZXJjZW50JywgMCkKICAgICAgICAKICAgICAgICBwcmludChqc29uLmR1bXBzKF9kYmVfc3RhdHVzKSkKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnZXJyb3InOiBzdHIoZSl9KSkKCgpkZWYgZ2V0REJFTWV0cmljcygpOgogICAgIiIiR2V0IGN1cnJlbnQgYmF0dGVyeSBtZXRyaWNzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBiYXR0ZXJ5IGRhdGEKICAgICIiIgogICAgZ2xvYmFsIF9kYmVfYmF0dGVyeQogICAgCiAgICB0cnk6CiAgICAgICAgaWYgX2RiZV9iYXR0ZXJ5OgogICAgICAgICAgICBiYXR0ZXJ5X2RhdGEgPSBfZGJlX2JhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKGJhdHRlcnlfZGF0YSkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J2Vycm9yJzogJ0JhdHRlcnkgbm90IGluaXRpYWxpemVkJ30pKQogICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnZXJyb3InOiBzdHIoZSl9KSkKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBNUVRUIEZ1bmN0aW9ucwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBnZXRNcXR0Q29uZmlnKCk6CiAgICAiIiJHZXQgTVFUVCBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIERCRS1zcGVjaWZpYyBNUVRUIGNvbmZpZ3VyYXRpb24uCiAgICBOb3RlOiBCcm9rZXIgc2V0dGluZ3MgKHNlcnZlciwgcG9ydCwgY3JlZGVudGlhbHMpIGFyZSBtYW5hZ2VkIGdsb2JhbGx5CiAgICBpbiBTeXN0ZW0g4oaSIE5ldHdvcmtzIOKGkiBNUVRUIHBhbmVsLgogICAgIiIiCiAgICBjb25maWcgPSB7CiAgICAgICAgJ2VuYWJsZWQnOiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X2VuYWJsZWQnLCBGYWxzZSksCiAgICAgICAgJ3RvcGljX3ByZWZpeCc6IHNldHRpbmdzLmdldCgnbXF0dC50b3BpY19wcmVmaXgnLCAnQkUnKSwKICAgICAgICAncHVibGlzaF9pbnRlcnZhbCc6IHNldHRpbmdzLmdldCgnZGJlLm1xdHRfcHVibGlzaF9pbnRlcnZhbCcsIDUpLAogICAgICAgICdwdWJsaXNoX2NlbGxfdm9sdGFnZXMnOiBzZXR0aW5ncy5nZXQoJ2RiZS5tcXR0X3B1Ymxpc2hfY2VsbF92b2x0YWdlcycsIFRydWUpLAogICAgICAgICdwdWJsaXNoX2JhbGFuY2luZyc6IHNldHRpbmdzLmdldCgnZGJlLm1xdHRfcHVibGlzaF9iYWxhbmNpbmcnLCBUcnVlKSwKICAgICAgICAnaGFfYXV0b2Rpc2NvdmVyeSc6IHNldHRpbmdzLmdldCgnZGJlLm1xdHRfaGFfYXV0b2Rpc2NvdmVyeScsIFRydWUpCiAgICB9CiAgICBwcmludChqc29uLmR1bXBzKGNvbmZpZykpCgoKZGVmIHNldE1xdHRDb25maWcoY29uZmlnX2RpY3QpOgogICAgIiIiU2V0IE1RVFQgY29uZmlndXJhdGlvbiB2aWEgc2V0dGluZ3MgbW9kdWxlCiAgICAKICAgIEFyZ3M6CiAgICAgICAgY29uZmlnX2RpY3Q6IERpY3Rpb25hcnkgd2l0aCBEQkUtc3BlY2lmaWMgY29uZmlndXJhdGlvbiB2YWx1ZXMKICAgIAogICAgUmV0dXJucyBKU09OIHN0cmluZyB3aXRoIHN1Y2Nlc3Mgc3RhdHVzCiAgICAKICAgIE5vdGU6IEJyb2tlciBzZXR0aW5ncyAoc2VydmVyLCBwb3J0LCBjcmVkZW50aWFscykgYXJlIG1hbmFnZWQgZ2xvYmFsbHkKICAgIGluIFN5c3RlbSDihpIgTmV0d29ya3Mg4oaSIE1RVFQgcGFuZWwgYW5kIHNob3VsZCBub3QgYmUgc2V0IGhlcmUuCiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIFVwZGF0ZSBEQkUgTVFUVCBzZXR0aW5ncwogICAgICAgIGlmICdlbmFibGVkJyBpbiBjb25maWdfZGljdDoKICAgICAgICAgICAgc2V0dGluZ3Muc2V0KCdkYmUubXF0dF9lbmFibGVkJywgY29uZmlnX2RpY3RbJ2VuYWJsZWQnXSkKICAgICAgICBpZiAncHVibGlzaF9pbnRlcnZhbCcgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIHNldHRpbmdzLnNldCgnZGJlLm1xdHRfcHVibGlzaF9pbnRlcnZhbCcsIGNvbmZpZ19kaWN0WydwdWJsaXNoX2ludGVydmFsJ10pCiAgICAgICAgaWYgJ3B1Ymxpc2hfY2VsbF92b2x0YWdlcycgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIHNldHRpbmdzLnNldCgnZGJlLm1xdHRfcHVibGlzaF9jZWxsX3ZvbHRhZ2VzJywgY29uZmlnX2RpY3RbJ3B1Ymxpc2hfY2VsbF92b2x0YWdlcyddKQogICAgICAgIGlmICdwdWJsaXNoX2JhbGFuY2luZycgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIHNldHRpbmdzLnNldCgnZGJlLm1xdHRfcHVibGlzaF9iYWxhbmNpbmcnLCBjb25maWdfZGljdFsncHVibGlzaF9iYWxhbmNpbmcnXSkKICAgICAgICBpZiAnaGFfYXV0b2Rpc2NvdmVyeScgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIHNldHRpbmdzLnNldCgnZGJlLm1xdHRfaGFfYXV0b2Rpc2NvdmVyeScsIGNvbmZpZ19kaWN0WydoYV9hdXRvZGlzY292ZXJ5J10pCiAgICAgICAgCiAgICAgICAgIyBVcGRhdGUgdG9waWMgcHJlZml4IChzaGFyZWQgc2V0dGluZywgYnV0IGNvbmZpZ3VyYWJsZSBwZXIgZXh0ZW5zaW9uKQogICAgICAgIGlmICd0b3BpY19wcmVmaXgnIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ21xdHQudG9waWNfcHJlZml4JywgY29uZmlnX2RpY3RbJ3RvcGljX3ByZWZpeCddKQogICAgICAgIAogICAgICAgICMgU2F2ZSB0byBkaXNrCiAgICAgICAgaWYgc2V0dGluZ3Muc2F2ZSgpOgogICAgICAgICAgICAjIFVwZGF0ZSBydW50aW1lIHZhcmlhYmxlcwogICAgICAgICAgICBnbG9iYWwgX21xdHRfZW5hYmxlZCwgX21xdHRfcHVibGlzaF9pbnRlcnZhbF9tcwogICAgICAgICAgICBfbXF0dF9lbmFibGVkID0gY29uZmlnX2RpY3QuZ2V0KCdlbmFibGVkJywgRmFsc2UpCiAgICAgICAgICAgIF9tcXR0X3B1Ymxpc2hfaW50ZXJ2YWxfbXMgPSBjb25maWdfZGljdC5nZXQoJ3B1Ymxpc2hfaW50ZXJ2YWwnLCA1KSAqIDEwMDAKICAgICAgICAgICAgCiAgICAgICAgICAgICMgSWYgTVFUVCBpcyBiZWluZyBlbmFibGVkLCBpbml0aWFsaXplIGl0CiAgICAgICAgICAgIGlmIF9tcXR0X2VuYWJsZWQgYW5kIF9kYmVfcnVubmluZzoKICAgICAgICAgICAgICAgIGZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9jbGllbnQsIG1xdHRfY29tbWFuZHMsIG1xdHRfaGFfZGlzY292ZXJ5CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG1xdHRfY2xpZW50LmluaXRfbXF0dCgpOgogICAgICAgICAgICAgICAgICAgIGlmIG1xdHRfY2xpZW50LmNvbm5lY3QoKToKICAgICAgICAgICAgICAgICAgICAgICAgIyBTdWJzY3JpYmUgdG8gY29tbWFuZHMKICAgICAgICAgICAgICAgICAgICAgICAgbXF0dF9jb21tYW5kcy5zdWJzY3JpYmVfdG9fY29tbWFuZHMoKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgIyBQdWJsaXNoIEhvbWUgQXNzaXN0YW50IGRpc2NvdmVyeSAoaWYgZW5hYmxlZCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY29uZmlnX2RpY3QuZ2V0KCdoYV9hdXRvZGlzY292ZXJ5JywgVHJ1ZSk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1fY2VsbHMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBfZGJlX2JhdHRlcnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmF0dGVyeV9kYXRhID0gX2RiZV9iYXR0ZXJ5LmdldF9kYXRhKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsX3ZvbHRhZ2VzID0gYmF0dGVyeV9kYXRhLmdldCgnY2VsbF92b2x0YWdlc19tVicsIFtdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9jZWxscyA9IGxlbihjZWxsX3ZvbHRhZ2VzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtcXR0X2hhX2Rpc2NvdmVyeS5wdWJsaXNoX2Rpc2NvdmVyeSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1fY2VsbHM9bnVtX2NlbGxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hfY2VsbF92b2x0YWdlcz1jb25maWdfZGljdC5nZXQoJ3B1Ymxpc2hfY2VsbF92b2x0YWdlcycsIFRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIAogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWV9KSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiAnRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MnfSkpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogc3RyKGUpfSkpCgoKZGVmIGdldE1xdHRTdGF0dXMoKToKICAgICIiIkdldCBNUVRUIGNvbm5lY3Rpb24gc3RhdHVzCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBzdGF0dXMgaW5mb3JtYXRpb24KICAgICIiIgogICAgdHJ5OgogICAgICAgIGZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9jbGllbnQKICAgICAgICBzdGF0cyA9IG1xdHRfY2xpZW50LmdldF9zdGF0cygpCiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyhzdGF0cykpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J2Vycm9yJzogc3RyKGUpLCAnY29ubmVjdGVkJzogRmFsc2V9KSkKCgpkZWYgdGVzdE1xdHQoKToKICAgICIiIlRlc3QgTVFUVCBjb25uZWN0aW9uCiAgICAKICAgIFJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCB0ZXN0IHJlc3VsdAogICAgIiIiCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIuREJFIGltcG9ydCBtcXR0X2NsaWVudAogICAgICAgIAogICAgICAgICMgSW5pdGlhbGl6ZSBpZiBuZWVkZWQKICAgICAgICBpZiBub3QgbXF0dF9jbGllbnQuaW5pdF9tcXR0KCk6CiAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNUVRUIGNsaWVudCd9KSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgCiAgICAgICAgIyBBdHRlbXB0IGNvbm5lY3Rpb24KICAgICAgICBpZiBtcXR0X2NsaWVudC5jb25uZWN0KCk6CiAgICAgICAgICAgICMgUHVibGlzaCB0ZXN0IG1lc3NhZ2UKICAgICAgICAgICAgaWYgbXF0dF9jbGllbnQucHVibGlzaCgidGVzdCIsICJDb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCIsIHJldGFpbj1GYWxzZSwgcW9zPTApOgogICAgICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBUcnVlLCAnbWVzc2FnZSc6ICdNUVRUIGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCd9KSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6ICdGYWlsZWQgdG8gcHVibGlzaCB0ZXN0IG1lc3NhZ2UnfSkpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIERpc2Nvbm5lY3QKICAgICAgICAgICAgbXF0dF9jbGllbnQuZGlzY29ubmVjdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoanNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ0ZhaWxlZCB0byBjb25uZWN0IHRvIE1RVFQgYnJva2VyJ30pKQogICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KSkKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBQYXVzZS9SZXN1bWUgRnVuY3Rpb25zIChmb3IgTVFUVCBjb21tYW5kcykKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpkZWYgcGF1c2VEQkUoKToKICAgICIiIlBhdXNlIGJhdHRlcnkgb3BlcmF0aW9uIChzdG9wIENBTiBUWCwga2VlcCBtb25pdG9yaW5nKSIiIgogICAgZ2xvYmFsIF9kYmVfcGF1c2VkCiAgICBfZGJlX3BhdXNlZCA9IFRydWUKICAgIHByaW50KCJbREJFXSBQYXVzZWQgLSBDQU4gVFggc3RvcHBlZCwgbW9uaXRvcmluZyBjb250aW51ZXMiKQoKCmRlZiByZXN1bWVEQkUoKToKICAgICIiIlJlc3VtZSBiYXR0ZXJ5IG9wZXJhdGlvbiIiIgogICAgZ2xvYmFsIF9kYmVfcGF1c2VkCiAgICBfZGJlX3BhdXNlZCA9IEZhbHNlCiAgICBwcmludCgiW0RCRV0gUmVzdW1lZCAtIENBTiBUWCByZXN0YXJ0ZWQiKQoKCmRlZiByZXN0YXJ0REJFKCk6CiAgICAiIiJSZXN0YXJ0IERCRSBicmlkZ2UiIiIKICAgIHByaW50KCJbREJFXSBSZXN0YXJ0aW5nLi4uIikKICAgIHN0b3BEQkUoKQogICAgdGltZS5zbGVlcCgxKQogICAgc3RhcnREQkUoKQoKCmRlZiBibXNSZXNldERCRSgpOgogICAgIiIiUmVzZXQgQk1TIChpZiBzdXBwb3J0ZWQgYnkgYmF0dGVyeSBwcm90b2NvbCkiIiIKICAgIGdsb2JhbCBfZGJlX2JhdHRlcnkKICAgIGlmIF9kYmVfYmF0dGVyeSBhbmQgaGFzYXR0cihfZGJlX2JhdHRlcnksICdyZXNldF9ibXMnKToKICAgICAgICBfZGJlX2JhdHRlcnkucmVzZXRfYm1zKCkKICAgICAgICBwcmludCgiW0RCRV0gQk1TIHJlc2V0IHRyaWdnZXJlZCIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbREJFXSBCTVMgcmVzZXQgbm90IHN1cHBvcnRlZCBieSBjdXJyZW50IGJhdHRlcnkgcHJvdG9jb2wiKQoKCmRlZiBzZXRMaW1pdHNEQkUobGltaXRzKToKICAgICIiIlNldCB0ZW1wb3JhcnkgY2hhcmdlL2Rpc2NoYXJnZSBsaW1pdHMKICAgIAogICAgQXJnczoKICAgICAgICBsaW1pdHMgKGRpY3QpOiBEaWN0aW9uYXJ5IHdpdGggJ21heF9jaGFyZ2UnLCAnbWF4X2Rpc2NoYXJnZScsICd0aW1lb3V0JwogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9iYXR0ZXJ5CiAgICBpZiBfZGJlX2JhdHRlcnkgYW5kIGhhc2F0dHIoX2RiZV9iYXR0ZXJ5LCAnc2V0X2xpbWl0cycpOgogICAgICAgIF9kYmVfYmF0dGVyeS5zZXRfbGltaXRzKGxpbWl0cykKICAgICAgICBwcmludChmIltEQkVdIExpbWl0cyBzZXQ6IHtsaW1pdHN9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltEQkVdIFNldCBsaW1pdHMgbm90IHN1cHBvcnRlZCBieSBjdXJyZW50IGJhdHRlcnkgcHJvdG9jb2wiKQoKCiMgSW5pdGlhbGl6ZSBNUVRUIGNvbW1hbmQgaGFuZGxlcnMKZGVmIF9pbml0X21xdHRfY29tbWFuZHMoKToKICAgICIiIkluaXRpYWxpemUgTVFUVCBjb21tYW5kIGhhbmRsZXJzIChjYWxsZWQgYnkgc3RhcnREQkUpIiIiCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIuREJFIGltcG9ydCBtcXR0X2NvbW1hbmRzCiAgICAgICAgCiAgICAgICAgIyBTZXQgY29udHJvbCBmdW5jdGlvbnMgZm9yIE1RVFQgY29tbWFuZHMKICAgICAgICBjb250cm9sX2Z1bmN0aW9ucyA9IHsKICAgICAgICAgICAgJ3BhdXNlJzogcGF1c2VEQkUsCiAgICAgICAgICAgICdyZXN1bWUnOiByZXN1bWVEQkUsCiAgICAgICAgICAgICdyZXN0YXJ0JzogcmVzdGFydERCRSwKICAgICAgICAgICAgJ3N0b3AnOiBzdG9wREJFLAogICAgICAgICAgICAnYm1zX3Jlc2V0JzogYm1zUmVzZXREQkUsCiAgICAgICAgICAgICdzZXRfbGltaXRzJzogc2V0TGltaXRzREJFCiAgICAgICAgfQogICAgICAgIAogICAgICAgIG1xdHRfY29tbWFuZHMuc2V0X2RiZV9jb250cm9sKGNvbnRyb2xfZnVuY3Rpb25zKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW0RCRV0gRmFpbGVkIHRvIGluaXRpYWxpemUgTVFUVCBjb21tYW5kczoge2V9IikK",
  "/lib/ext/dbe/mqtt_client.py": "IiIiCk1RVFQgQ2xpZW50IE1vZHVsZSBmb3IgREJFCj09PT09PT09PT09PT09PT09PT09PT09PT09PQoKQ29yZSBNUVRUIGNvbm5lY3Rpb24gbWFuYWdlbWVudCB1c2luZyB1bXF0dC5zaW1wbGUuCgpGZWF0dXJlczoKLSBDb25uZWN0L2Rpc2Nvbm5lY3QgdG8gTVFUVCBicm9rZXIKLSBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBzZXR0aW5ncyBtb2R1bGUKLSBIYW5kbGUgY29ubmVjdGlvbiBlcnJvcnMgYW5kIHJlY29ubmVjdGlvbgotIExhc3QgV2lsbCBhbmQgVGVzdGFtZW50IChMV1QpIGZvciBvbmxpbmUvb2ZmbGluZSBzdGF0dXMKLSBOb24tYmxvY2tpbmcgbWVzc2FnZSBjaGVja2luZwoKTWljcm9QeXRob24gQ29tcGF0aWJpbGl0eToKLSBVc2VzIHVtcXR0LnNpbXBsZSAobm90IHVtcXR0LnJvYnVzdCkKLSBNYW51YWwgcmVjb25uZWN0aW9uIGxvZ2ljCi0gTm8gYmxvY2tpbmcgb3BlcmF0aW9ucwotIEV4Y2VwdGlvbiBoYW5kbGluZyBmb3IgbmV0d29yayBlcnJvcnMKIiIiCgppbXBvcnQgdGltZQpmcm9tIGxpYiBpbXBvcnQgc2V0dGluZ3MKCiMgR2xvYmFsIE1RVFQgY2xpZW50IGluc3RhbmNlCl9tcXR0X2NsaWVudCA9IE5vbmUKX21xdHRfY29ubmVjdGVkID0gRmFsc2UKX21xdHRfY29uZmlnID0ge30KX21xdHRfc3RhdHMgPSB7CiAgICAnbWVzc2FnZXNfcHVibGlzaGVkJzogMCwKICAgICdjb21tYW5kc19yZWNlaXZlZCc6IDAsCiAgICAnbGFzdF9wdWJsaXNoX21zJzogMCwKICAgICdsYXN0X2Nvbm5lY3RfYXR0ZW1wdF9tcyc6IDAsCiAgICAnY29ubmVjdGlvbl9lcnJvcnMnOiAwCn0KCgpkZWYgaW5pdF9tcXR0KCk6CiAgICAiIiJJbml0aWFsaXplIE1RVFQgY2xpZW50IHdpdGggY29uZmlndXJhdGlvbiBmcm9tIHNldHRpbmdzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBpbml0aWFsaXphdGlvbiBzdWNjZXNzZnVsLCBGYWxzZSBvdGhlcndpc2UKICAgICIiIgogICAgZ2xvYmFsIF9tcXR0X2NsaWVudCwgX21xdHRfY29uZmlnCiAgICAKICAgIHRyeToKICAgICAgICAjIEltcG9ydCB1bXF0dC5zaW1wbGUgKG1heSBub3QgYmUgaW5zdGFsbGVkIHlldCkKICAgICAgICBmcm9tIHVtcXR0LnNpbXBsZSBpbXBvcnQgTVFUVENsaWVudAogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHByaW50KCJbTVFUVF0gdW1xdHQuc2ltcGxlIG5vdCBpbnN0YWxsZWQgLSBydW46IGltcG9ydCBtaXA7IG1pcC5pbnN0YWxsKCd1bXF0dC5zaW1wbGUnKSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgTG9hZCBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MKICAgIF9tcXR0X2NvbmZpZyA9IHsKICAgICAgICAnc2VydmVyJzogc2V0dGluZ3MuZ2V0KCdtcXR0LnNlcnZlcicsICcnKSwKICAgICAgICAncG9ydCc6IHNldHRpbmdzLmdldCgnbXF0dC5wb3J0JywgMTg4MyksCiAgICAgICAgJ3VzZXJuYW1lJzogc2V0dGluZ3MuZ2V0KCdtcXR0LnVzZXJuYW1lJywgJycpLAogICAgICAgICdwYXNzd29yZCc6IHNldHRpbmdzLmdldCgnbXF0dC5wYXNzd29yZCcsICcnKSwKICAgICAgICAnY2xpZW50X2lkJzogc2V0dGluZ3MuZ2V0KCdtcXR0LmNsaWVudF9pZCcsICdkYmVfY2xpZW50JyksCiAgICAgICAgJ3RvcGljX3ByZWZpeCc6IHNldHRpbmdzLmdldCgnbXF0dC50b3BpY19wcmVmaXgnLCAnQkUnKSwKICAgICAgICAna2VlcGFsaXZlJzogc2V0dGluZ3MuZ2V0KCdtcXR0LmtlZXBhbGl2ZScsIDYwKQogICAgfQogICAgCiAgICAjIFZhbGlkYXRlIGNvbmZpZ3VyYXRpb24KICAgIGlmIG5vdCBfbXF0dF9jb25maWdbJ3NlcnZlciddOgogICAgICAgIHByaW50KCJbTVFUVF0gTm8gTVFUVCBzZXJ2ZXIgY29uZmlndXJlZCIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgICMgQ3JlYXRlIE1RVFQgY2xpZW50CiAgICB0cnk6CiAgICAgICAgIyBQcmVwYXJlIExXVCAoTGFzdCBXaWxsIGFuZCBUZXN0YW1lbnQpIGZvciBvbmxpbmUvb2ZmbGluZSBzdGF0dXMKICAgICAgICBsd3RfdG9waWMgPSBmIntfbXF0dF9jb25maWdbJ3RvcGljX3ByZWZpeCddfS9zdGF0dXMiCiAgICAgICAgCiAgICAgICAgX21xdHRfY2xpZW50ID0gTVFUVENsaWVudCgKICAgICAgICAgICAgY2xpZW50X2lkPV9tcXR0X2NvbmZpZ1snY2xpZW50X2lkJ10sCiAgICAgICAgICAgIHNlcnZlcj1fbXF0dF9jb25maWdbJ3NlcnZlciddLAogICAgICAgICAgICBwb3J0PV9tcXR0X2NvbmZpZ1sncG9ydCddLAogICAgICAgICAgICB1c2VyPV9tcXR0X2NvbmZpZ1sndXNlcm5hbWUnXSBpZiBfbXF0dF9jb25maWdbJ3VzZXJuYW1lJ10gZWxzZSBOb25lLAogICAgICAgICAgICBwYXNzd29yZD1fbXF0dF9jb25maWdbJ3Bhc3N3b3JkJ10gaWYgX21xdHRfY29uZmlnWydwYXNzd29yZCddIGVsc2UgTm9uZSwKICAgICAgICAgICAga2VlcGFsaXZlPV9tcXR0X2NvbmZpZ1sna2VlcGFsaXZlJ10KICAgICAgICApCiAgICAgICAgCiAgICAgICAgIyBTZXQgTFdUIChzZW50IGJ5IGJyb2tlciB3aGVuIGNsaWVudCBkaXNjb25uZWN0cyB1bmV4cGVjdGVkbHkpCiAgICAgICAgX21xdHRfY2xpZW50LnNldF9sYXN0X3dpbGwobHd0X3RvcGljLmVuY29kZSgpLCBiIm9mZmxpbmUiLCByZXRhaW49VHJ1ZSwgcW9zPTEpCiAgICAgICAgCiAgICAgICAgcHJpbnQoZiJbTVFUVF0gQ2xpZW50IGluaXRpYWxpemVkOiB7X21xdHRfY29uZmlnWydzZXJ2ZXInXX06e19tcXR0X2NvbmZpZ1sncG9ydCddfSIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBJbml0aWFsaXphdGlvbiBlcnJvcjoge2V9IikKICAgICAgICBfbXF0dF9jbGllbnQgPSBOb25lCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGNvbm5lY3QoKToKICAgICIiIkNvbm5lY3QgdG8gTVFUVCBicm9rZXIKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGNvbm5lY3RlZCwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZCwgX21xdHRfc3RhdHMKICAgIAogICAgaWYgX21xdHRfY2xpZW50IGlzIE5vbmU6CiAgICAgICAgaWYgbm90IGluaXRfbXF0dCgpOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgaWYgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBUcnVlCiAgICAKICAgIHRyeToKICAgICAgICBfbXF0dF9zdGF0c1snbGFzdF9jb25uZWN0X2F0dGVtcHRfbXMnXSA9IHRpbWUudGlja3NfbXMoKQogICAgICAgIAogICAgICAgIHByaW50KGYiW01RVFRdIENvbm5lY3RpbmcgdG8ge19tcXR0X2NvbmZpZ1snc2VydmVyJ119OntfbXF0dF9jb25maWdbJ3BvcnQnXX0uLi4iKQogICAgICAgIF9tcXR0X2NsaWVudC5jb25uZWN0KCkKICAgICAgICAKICAgICAgICAjIFB1Ymxpc2ggb25saW5lIHN0YXR1cyAob3ZlcnJpZGVzIExXVCkKICAgICAgICBzdGF0dXNfdG9waWMgPSBmIntfbXF0dF9jb25maWdbJ3RvcGljX3ByZWZpeCddfS9zdGF0dXMiCiAgICAgICAgX21xdHRfY2xpZW50LnB1Ymxpc2goc3RhdHVzX3RvcGljLmVuY29kZSgpLCBiIm9ubGluZSIsIHJldGFpbj1UcnVlLCBxb3M9MSkKICAgICAgICAKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBUcnVlCiAgICAgICAgX21xdHRfc3RhdHNbJ2Nvbm5lY3Rpb25fZXJyb3JzJ10gPSAwCiAgICAgICAgcHJpbnQoIltNUVRUXSBDb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIAogICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIF9tcXR0X3N0YXRzWydjb25uZWN0aW9uX2Vycm9ycyddICs9IDEKICAgICAgICBwcmludChmIltNUVRUXSBDb25uZWN0aW9uIGZhaWxlZDoge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIF9tcXR0X3N0YXRzWydjb25uZWN0aW9uX2Vycm9ycyddICs9IDEKICAgICAgICBwcmludChmIltNUVRUXSBVbmV4cGVjdGVkIGVycm9yOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBkaXNjb25uZWN0KCk6CiAgICAiIiJEaXNjb25uZWN0IGZyb20gTVFUVCBicm9rZXIiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgIyBQdWJsaXNoIG9mZmxpbmUgc3RhdHVzIGJlZm9yZSBkaXNjb25uZWN0aW5nCiAgICAgICAgc3RhdHVzX3RvcGljID0gZiJ7X21xdHRfY29uZmlnWyd0b3BpY19wcmVmaXgnXX0vc3RhdHVzIgogICAgICAgIF9tcXR0X2NsaWVudC5wdWJsaXNoKHN0YXR1c190b3BpYy5lbmNvZGUoKSwgYiJvZmZsaW5lIiwgcmV0YWluPVRydWUsIHFvcz0xKQogICAgICAgIAogICAgICAgIF9tcXR0X2NsaWVudC5kaXNjb25uZWN0KCkKICAgICAgICBfbXF0dF9jb25uZWN0ZWQgPSBGYWxzZQogICAgICAgIHByaW50KCJbTVFUVF0gRGlzY29ubmVjdGVkIikKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBEaXNjb25uZWN0IGVycm9yOiB7ZX0iKQogICAgICAgIF9tcXR0X2Nvbm5lY3RlZCA9IEZhbHNlCgoKZGVmIHB1Ymxpc2godG9waWMsIHBheWxvYWQsIHJldGFpbj1GYWxzZSwgcW9zPTApOgogICAgIiIiUHVibGlzaCBtZXNzYWdlIHRvIE1RVFQgYnJva2VyCiAgICAKICAgIEFyZ3M6CiAgICAgICAgdG9waWMgKHN0cik6IFRvcGljIHRvIHB1Ymxpc2ggdG8gKHdpdGhvdXQgcHJlZml4KQogICAgICAgIHBheWxvYWQgKGJ5dGVzIG9yIHN0cik6IE1lc3NhZ2UgcGF5bG9hZAogICAgICAgIHJldGFpbiAoYm9vbCk6IFJldGFpbiBtZXNzYWdlIG9uIGJyb2tlcgogICAgICAgIHFvcyAoaW50KTogUXVhbGl0eSBvZiBTZXJ2aWNlICgwIG9yIDEpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5LCBGYWxzZSBvdGhlcndpc2UKICAgICIiIgogICAgZ2xvYmFsIF9tcXR0X2NsaWVudCwgX21xdHRfY29ubmVjdGVkLCBfbXF0dF9zdGF0cwogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgIyBBZGQgdG9waWMgcHJlZml4CiAgICAgICAgZnVsbF90b3BpYyA9IGYie19tcXR0X2NvbmZpZ1sndG9waWNfcHJlZml4J119L3t0b3BpY30iCiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHBheWxvYWQgdG8gYnl0ZXMgaWYgbmVlZGVkCiAgICAgICAgaWYgaXNpbnN0YW5jZShwYXlsb2FkLCBzdHIpOgogICAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZC5lbmNvZGUoKQogICAgICAgIAogICAgICAgIF9tcXR0X2NsaWVudC5wdWJsaXNoKGZ1bGxfdG9waWMuZW5jb2RlKCksIHBheWxvYWQsIHJldGFpbj1yZXRhaW4sIHFvcz1xb3MpCiAgICAgICAgCiAgICAgICAgX21xdHRfc3RhdHNbJ21lc3NhZ2VzX3B1Ymxpc2hlZCddICs9IDEKICAgICAgICBfbXF0dF9zdGF0c1snbGFzdF9wdWJsaXNoX21zJ10gPSB0aW1lLnRpY2tzX21zKCkKICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIAogICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICAjIE5ldHdvcmsgZXJyb3IgLSBjb25uZWN0aW9uIGxvc3QKICAgICAgICBwcmludChmIltNUVRUXSBQdWJsaXNoIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBQdWJsaXNoIGZhaWxlZCAodW5leHBlY3RlZCBlcnJvcik6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHN1YnNjcmliZSh0b3BpYywgY2FsbGJhY2spOgogICAgIiIiU3Vic2NyaWJlIHRvIE1RVFQgdG9waWMKICAgIAogICAgQXJnczoKICAgICAgICB0b3BpYyAoc3RyKTogVG9waWMgdG8gc3Vic2NyaWJlIHRvICh3aXRob3V0IHByZWZpeCwgc3VwcG9ydHMgd2lsZGNhcmRzKQogICAgICAgIGNhbGxiYWNrIChmdW5jdGlvbik6IENhbGxiYWNrIGZ1bmN0aW9uKHRvcGljLCBtc2cpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBzdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseSwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgIyBBZGQgdG9waWMgcHJlZml4CiAgICAgICAgZnVsbF90b3BpYyA9IGYie19tcXR0X2NvbmZpZ1sndG9waWNfcHJlZml4J119L3t0b3BpY30iCiAgICAgICAgCiAgICAgICAgIyBTZXQgY2FsbGJhY2sKICAgICAgICBfbXF0dF9jbGllbnQuc2V0X2NhbGxiYWNrKGNhbGxiYWNrKQogICAgICAgIAogICAgICAgICMgU3Vic2NyaWJlCiAgICAgICAgX21xdHRfY2xpZW50LnN1YnNjcmliZShmdWxsX3RvcGljLmVuY29kZSgpKQogICAgICAgIAogICAgICAgIHByaW50KGYiW01RVFRdIFN1YnNjcmliZWQgdG86IHtmdWxsX3RvcGljfSIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVF0gU3Vic2NyaWJlIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBTdWJzY3JpYmUgZmFpbGVkICh1bmV4cGVjdGVkIGVycm9yKToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgY2hlY2tfbXNnKCk6CiAgICAiIiJDaGVjayBmb3IgaW5jb21pbmcgTVFUVCBtZXNzYWdlcyAobm9uLWJsb2NraW5nKQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgY2hlY2sgc3VjY2Vzc2Z1bCwgRmFsc2UgaWYgY29ubmVjdGlvbiBsb3N0CiAgICAiIiIKICAgIGdsb2JhbCBfbXF0dF9jbGllbnQsIF9tcXR0X2Nvbm5lY3RlZAogICAgCiAgICBpZiBfbXF0dF9jbGllbnQgaXMgTm9uZSBvciBub3QgX21xdHRfY29ubmVjdGVkOgogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICB0cnk6CiAgICAgICAgX21xdHRfY2xpZW50LmNoZWNrX21zZygpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgIyBOZXR3b3JrIGVycm9yIC0gY29ubmVjdGlvbiBsb3N0CiAgICAgICAgcHJpbnQoZiJbTVFUVF0gY2hlY2tfbXNnIGZhaWxlZCAobmV0d29yayBlcnJvcik6IHtlfSIpCiAgICAgICAgX21xdHRfY29ubmVjdGVkID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUXSBjaGVja19tc2cgZmFpbGVkICh1bmV4cGVjdGVkIGVycm9yKToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgaXNfY29ubmVjdGVkKCk6CiAgICAiIiJDaGVjayBpZiBNUVRUIGNsaWVudCBpcyBjb25uZWN0ZWQKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGNvbm5lY3RlZCwgRmFsc2Ugb3RoZXJ3aXNlCiAgICAiIiIKICAgIHJldHVybiBfbXF0dF9jb25uZWN0ZWQKCgpkZWYgZ2V0X3N0YXRzKCk6CiAgICAiIiJHZXQgTVFUVCBzdGF0aXN0aWNzCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgZGljdDogU3RhdGlzdGljcyBkaWN0aW9uYXJ5CiAgICAiIiIKICAgIHJldHVybiB7CiAgICAgICAgJ2Nvbm5lY3RlZCc6IF9tcXR0X2Nvbm5lY3RlZCwKICAgICAgICAnbWVzc2FnZXNfcHVibGlzaGVkJzogX21xdHRfc3RhdHNbJ21lc3NhZ2VzX3B1Ymxpc2hlZCddLAogICAgICAgICdjb21tYW5kc19yZWNlaXZlZCc6IF9tcXR0X3N0YXRzWydjb21tYW5kc19yZWNlaXZlZCddLAogICAgICAgICdsYXN0X3B1Ymxpc2hfbXMnOiBfbXF0dF9zdGF0c1snbGFzdF9wdWJsaXNoX21zJ10sCiAgICAgICAgJ2Nvbm5lY3Rpb25fZXJyb3JzJzogX21xdHRfc3RhdHNbJ2Nvbm5lY3Rpb25fZXJyb3JzJ10sCiAgICAgICAgJ3NlcnZlcic6IF9tcXR0X2NvbmZpZy5nZXQoJ3NlcnZlcicsICcnKSwKICAgICAgICAncG9ydCc6IF9tcXR0X2NvbmZpZy5nZXQoJ3BvcnQnLCAxODgzKSwKICAgICAgICAndG9waWNfcHJlZml4JzogX21xdHRfY29uZmlnLmdldCgndG9waWNfcHJlZml4JywgJ0JFJykKICAgIH0KCgpkZWYgaW5jcmVtZW50X2NvbW1hbmRzX3JlY2VpdmVkKCk6CiAgICAiIiJJbmNyZW1lbnQgY29tbWFuZHMgcmVjZWl2ZWQgY291bnRlciAoY2FsbGVkIGJ5IG1xdHRfY29tbWFuZHMgbW9kdWxlKSIiIgogICAgZ2xvYmFsIF9tcXR0X3N0YXRzCiAgICBfbXF0dF9zdGF0c1snY29tbWFuZHNfcmVjZWl2ZWQnXSArPSAxCgoKZGVmIGdldF90b3BpY19wcmVmaXgoKToKICAgICIiIkdldCBjb25maWd1cmVkIHRvcGljIHByZWZpeAogICAgCiAgICBSZXR1cm5zOgogICAgICAgIHN0cjogVG9waWMgcHJlZml4IChlLmcuLCAnQkUnKQogICAgIiIiCiAgICByZXR1cm4gX21xdHRfY29uZmlnLmdldCgndG9waWNfcHJlZml4JywgJ0JFJykK",
  "/lib/ext/dbe/mqtt_commands.py": "IiIiCk1RVFQgQ29tbWFuZHMgTW9kdWxlIGZvciBEQkUKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCkhhbmRsZSBpbmNvbWluZyBNUVRUIGNvbW1hbmRzIGZvciByZW1vdGUgY29udHJvbC4KCkNvbW1hbmQgVG9waWNzIChmb2xsb3dpbmcgQmF0dGVyeSBFbXVsYXRvciBwYXR0ZXJuKToKLSB7cHJlZml4fS9jb21tYW5kL1BBVVNFICAgICAgIC0gUGF1c2UgY2hhcmdlL2Rpc2NoYXJnZQotIHtwcmVmaXh9L2NvbW1hbmQvUkVTVU1FICAgICAgLSBSZXN1bWUgb3BlcmF0aW9uCi0ge3ByZWZpeH0vY29tbWFuZC9SRVNUQVJUICAgICAtIFJlc3RhcnQgREJFIGJyaWRnZQotIHtwcmVmaXh9L2NvbW1hbmQvU1RPUCAgICAgICAgLSBTdG9wIERCRSBicmlkZ2UKLSB7cHJlZml4fS9jb21tYW5kL0JNU1JFU0VUICAgIC0gUmVzZXQgQk1TIChpZiBzdXBwb3J0ZWQpCi0ge3ByZWZpeH0vY29tbWFuZC9TRVRfTElNSVRTICAtIFNldCB0ZW1wb3JhcnkgbGltaXRzIChKU09OIHBheWxvYWQpCgpJbnRlZ3JhdGlvbiB3aXRoIERCRV9oZWxwZXJzLnB5OgotIENvbW1hbmRzIGNhbGwgZXhpc3RpbmcgaGVscGVyIGZ1bmN0aW9ucyAoc3RhcnREQkUoKSwgc3RvcERCRSgpKQotIEFkZCBuZXcgcGF1c2UvcmVzdW1lIHN0YXRlIG1hbmFnZW1lbnQKLSBUZW1wb3JhcnkgbGltaXRzIHN0b3JlZCBpbiBiYXR0ZXJ5IGRhdGEgc3RydWN0dXJlCiIiIgoKaW1wb3J0IGpzb24KZnJvbSBsaWIuREJFIGltcG9ydCBtcXR0X2NsaWVudAoKIyBHbG9iYWwgcmVmZXJlbmNlIHRvIERCRSBjb250cm9sIGZ1bmN0aW9ucyAoc2V0IGJ5IERCRV9oZWxwZXJzLnB5KQpfZGJlX2NvbnRyb2wgPSBOb25lCgoKZGVmIHNldF9kYmVfY29udHJvbChjb250cm9sX2Z1bmN0aW9ucyk6CiAgICAiIiJTZXQgREJFIGNvbnRyb2wgZnVuY3Rpb25zIHJlZmVyZW5jZQogICAgCiAgICBBcmdzOgogICAgICAgIGNvbnRyb2xfZnVuY3Rpb25zIChkaWN0KTogRGljdGlvbmFyeSBvZiBjb250cm9sIGZ1bmN0aW9ucwogICAgICAgICAgICAtICdwYXVzZSc6IHBhdXNlREJFKCkKICAgICAgICAgICAgLSAncmVzdW1lJzogcmVzdW1lREJFKCkKICAgICAgICAgICAgLSAncmVzdGFydCc6IHJlc3RhcnREQkUoKQogICAgICAgICAgICAtICdzdG9wJzogc3RvcERCRSgpCiAgICAgICAgICAgIC0gJ2Jtc19yZXNldCc6IGJtc1Jlc2V0REJFKCkKICAgICAgICAgICAgLSAnc2V0X2xpbWl0cyc6IHNldExpbWl0c0RCRShsaW1pdHMpCiAgICAiIiIKICAgIGdsb2JhbCBfZGJlX2NvbnRyb2wKICAgIF9kYmVfY29udHJvbCA9IGNvbnRyb2xfZnVuY3Rpb25zCgoKZGVmIGhhbmRsZV9jb21tYW5kKHRvcGljLCBtc2cpOgogICAgIiIiTWFpbiBjb21tYW5kIGRpc3BhdGNoZXIgKGNhbGxlZCBieSBNUVRUIGNsaWVudCBjYWxsYmFjaykKICAgIAogICAgQXJnczoKICAgICAgICB0b3BpYyAoYnl0ZXMpOiBGdWxsIE1RVFQgdG9waWMgKGUuZy4sIGInQkUvY29tbWFuZC9QQVVTRScpCiAgICAgICAgbXNnIChieXRlcyk6IE1lc3NhZ2UgcGF5bG9hZAogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgICMgSW5jcmVtZW50IGNvbW1hbmRzIHJlY2VpdmVkIGNvdW50ZXIKICAgIG1xdHRfY2xpZW50LmluY3JlbWVudF9jb21tYW5kc19yZWNlaXZlZCgpCiAgICAKICAgICMgRGVjb2RlIHRvcGljCiAgICB0b3BpY19zdHIgPSB0b3BpYy5kZWNvZGUoKSBpZiBpc2luc3RhbmNlKHRvcGljLCBieXRlcykgZWxzZSB0b3BpYwogICAgbXNnX3N0ciA9IG1zZy5kZWNvZGUoKSBpZiBpc2luc3RhbmNlKG1zZywgYnl0ZXMpIGVsc2UgbXNnCiAgICAKICAgICMgRXh0cmFjdCBjb21tYW5kIGZyb20gdG9waWMgKGxhc3QgcGFydCBhZnRlciAvKQogICAgY29tbWFuZCA9IHRvcGljX3N0ci5zcGxpdCgnLycpWy0xXS51cHBlcigpCiAgICAKICAgIHByaW50KGYiW01RVFQgQ29tbWFuZHNdIFJlY2VpdmVkIGNvbW1hbmQ6IHtjb21tYW5kfSIpCiAgICAKICAgIGlmIF9kYmVfY29udHJvbCBpcyBOb25lOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gRXJyb3I6IERCRSBjb250cm9sIGZ1bmN0aW9ucyBub3Qgc2V0IikKICAgICAgICByZXR1cm4KICAgIAogICAgIyBEaXNwYXRjaCBjb21tYW5kCiAgICB0cnk6CiAgICAgICAgaWYgY29tbWFuZCA9PSAnUEFVU0UnOgogICAgICAgICAgICBjbWRfcGF1c2UoKQogICAgICAgIGVsaWYgY29tbWFuZCA9PSAnUkVTVU1FJzoKICAgICAgICAgICAgY21kX3Jlc3VtZSgpCiAgICAgICAgZWxpZiBjb21tYW5kID09ICdSRVNUQVJUJzoKICAgICAgICAgICAgY21kX3Jlc3RhcnQoKQogICAgICAgIGVsaWYgY29tbWFuZCA9PSAnU1RPUCc6CiAgICAgICAgICAgIGNtZF9zdG9wKCkKICAgICAgICBlbGlmIGNvbW1hbmQgPT0gJ0JNU1JFU0VUJzoKICAgICAgICAgICAgY21kX2Jtc19yZXNldCgpCiAgICAgICAgZWxpZiBjb21tYW5kID09ICdTRVRfTElNSVRTJzoKICAgICAgICAgICAgY21kX3NldF9saW1pdHMobXNnX3N0cikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmIltNUVRUIENvbW1hbmRzXSBVbmtub3duIGNvbW1hbmQ6IHtjb21tYW5kfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVCBDb21tYW5kc10gRXJyb3IgZXhlY3V0aW5nIGNvbW1hbmQge2NvbW1hbmR9OiB7ZX0iKQoKCmRlZiBjbWRfcGF1c2UoKToKICAgICIiIlBhdXNlIGJhdHRlcnkgb3BlcmF0aW9uIChzdG9wIENBTiBUWCwga2VlcCBtb25pdG9yaW5nKSIiIgogICAgZ2xvYmFsIF9kYmVfY29udHJvbAogICAgCiAgICBpZiBfZGJlX2NvbnRyb2wgYW5kICdwYXVzZScgaW4gX2RiZV9jb250cm9sOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gRXhlY3V0aW5nIFBBVVNFIikKICAgICAgICBfZGJlX2NvbnRyb2xbJ3BhdXNlJ10oKQogICAgZWxzZToKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIFBBVVNFIG5vdCBhdmFpbGFibGUiKQoKCmRlZiBjbWRfcmVzdW1lKCk6CiAgICAiIiJSZXN1bWUgYmF0dGVyeSBvcGVyYXRpb24iIiIKICAgIGdsb2JhbCBfZGJlX2NvbnRyb2wKICAgIAogICAgaWYgX2RiZV9jb250cm9sIGFuZCAncmVzdW1lJyBpbiBfZGJlX2NvbnRyb2w6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBFeGVjdXRpbmcgUkVTVU1FIikKICAgICAgICBfZGJlX2NvbnRyb2xbJ3Jlc3VtZSddKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBSRVNVTUUgbm90IGF2YWlsYWJsZSIpCgoKZGVmIGNtZF9yZXN0YXJ0KCk6CiAgICAiIiJSZXN0YXJ0IERCRSBicmlkZ2UiIiIKICAgIGdsb2JhbCBfZGJlX2NvbnRyb2wKICAgIAogICAgaWYgX2RiZV9jb250cm9sIGFuZCAncmVzdGFydCcgaW4gX2RiZV9jb250cm9sOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gRXhlY3V0aW5nIFJFU1RBUlQiKQogICAgICAgIF9kYmVfY29udHJvbFsncmVzdGFydCddKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBSRVNUQVJUIG5vdCBhdmFpbGFibGUiKQoKCmRlZiBjbWRfc3RvcCgpOgogICAgIiIiU3RvcCBEQkUgYnJpZGdlIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgIGlmIF9kYmVfY29udHJvbCBhbmQgJ3N0b3AnIGluIF9kYmVfY29udHJvbDoKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIEV4ZWN1dGluZyBTVE9QIikKICAgICAgICBfZGJlX2NvbnRyb2xbJ3N0b3AnXSgpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbTVFUVCBDb21tYW5kc10gU1RPUCBub3QgYXZhaWxhYmxlIikKCgpkZWYgY21kX2Jtc19yZXNldCgpOgogICAgIiIiUmVzZXQgQk1TIChpZiBzdXBwb3J0ZWQgYnkgYmF0dGVyeSBwcm90b2NvbCkiIiIKICAgIGdsb2JhbCBfZGJlX2NvbnRyb2wKICAgIAogICAgaWYgX2RiZV9jb250cm9sIGFuZCAnYm1zX3Jlc2V0JyBpbiBfZGJlX2NvbnRyb2w6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBFeGVjdXRpbmcgQk1TUkVTRVQiKQogICAgICAgIF9kYmVfY29udHJvbFsnYm1zX3Jlc2V0J10oKQogICAgZWxzZToKICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIEJNU1JFU0VUIG5vdCBhdmFpbGFibGUiKQoKCmRlZiBjbWRfc2V0X2xpbWl0cyhwYXlsb2FkX3N0cik6CiAgICAiIiJTZXQgdGVtcG9yYXJ5IGNoYXJnZS9kaXNjaGFyZ2UgbGltaXRzCiAgICAKICAgIFBheWxvYWQgZm9ybWF0IChKU09OKToKICAgIHsKICAgICAgICAibWF4X2NoYXJnZSI6IDUwLCAgICAgIC8vIE1heCBjaGFyZ2UgY3VycmVudCAoQSkKICAgICAgICAibWF4X2Rpc2NoYXJnZSI6IDEwMCwgIC8vIE1heCBkaXNjaGFyZ2UgY3VycmVudCAoQSkKICAgICAgICAidGltZW91dCI6IDMwICAgICAgICAgIC8vIFRpbWVvdXQgKHNlY29uZHMpCiAgICB9CiAgICAKICAgIEFyZ3M6CiAgICAgICAgcGF5bG9hZF9zdHIgKHN0cik6IEpTT04gcGF5bG9hZAogICAgIiIiCiAgICBnbG9iYWwgX2RiZV9jb250cm9sCiAgICAKICAgIGlmIG5vdCBfZGJlX2NvbnRyb2wgb3IgJ3NldF9saW1pdHMnIG5vdCBpbiBfZGJlX2NvbnRyb2w6CiAgICAgICAgcHJpbnQoIltNUVRUIENvbW1hbmRzXSBTRVRfTElNSVRTIG5vdCBhdmFpbGFibGUiKQogICAgICAgIHJldHVybgogICAgCiAgICB0cnk6CiAgICAgICAgIyBQYXJzZSBKU09OIHBheWxvYWQKICAgICAgICBsaW1pdHMgPSBqc29uLmxvYWRzKHBheWxvYWRfc3RyKQogICAgICAgIAogICAgICAgICMgVmFsaWRhdGUgbGltaXRzCiAgICAgICAgbWF4X2NoYXJnZSA9IGxpbWl0cy5nZXQoJ21heF9jaGFyZ2UnKQogICAgICAgIG1heF9kaXNjaGFyZ2UgPSBsaW1pdHMuZ2V0KCdtYXhfZGlzY2hhcmdlJykKICAgICAgICB0aW1lb3V0ID0gbGltaXRzLmdldCgndGltZW91dCcsIDMwKQogICAgICAgIAogICAgICAgIGlmIG1heF9jaGFyZ2UgaXMgTm9uZSBhbmQgbWF4X2Rpc2NoYXJnZSBpcyBOb25lOgogICAgICAgICAgICBwcmludCgiW01RVFQgQ29tbWFuZHNdIFNFVF9MSU1JVFM6IE5vIGxpbWl0cyBzcGVjaWZpZWQiKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAKICAgICAgICBwcmludChmIltNUVRUIENvbW1hbmRzXSBFeGVjdXRpbmcgU0VUX0xJTUlUUzogY2hhcmdlPXttYXhfY2hhcmdlfUEsIGRpc2NoYXJnZT17bWF4X2Rpc2NoYXJnZX1BLCB0aW1lb3V0PXt0aW1lb3V0fXMiKQogICAgICAgIAogICAgICAgICMgQ2FsbCBjb250cm9sIGZ1bmN0aW9uCiAgICAgICAgX2RiZV9jb250cm9sWydzZXRfbGltaXRzJ10obGltaXRzKQogICAgICAgIAogICAgZXhjZXB0IGpzb24uSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVCBDb21tYW5kc10gU0VUX0xJTUlUUzogSW52YWxpZCBKU09OOiB7ZX0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW01RVFQgQ29tbWFuZHNdIFNFVF9MSU1JVFMgZXJyb3I6IHtlfSIpCgoKZGVmIHN1YnNjcmliZV90b19jb21tYW5kcygpOgogICAgIiIiU3Vic2NyaWJlIHRvIGFsbCBjb21tYW5kIHRvcGljcwogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgc3Vic2NyaWJlZCBzdWNjZXNzZnVsbHkKICAgICIiIgogICAgIyBTdWJzY3JpYmUgdG8gYWxsIGNvbW1hbmRzIHVzaW5nIHdpbGRjYXJkCiAgICByZXR1cm4gbXF0dF9jbGllbnQuc3Vic2NyaWJlKCJjb21tYW5kLysiLCBoYW5kbGVfY29tbWFuZCkK",
  "/lib/ext/dbe/mqtt_ha_discovery.py": "IiIiCkhvbWUgQXNzaXN0YW50IE1RVFQgQXV0b2Rpc2NvdmVyeSBNb2R1bGUgZm9yIERCRQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpQdWJsaXNoIEhvbWUgQXNzaXN0YW50IE1RVFQgZGlzY292ZXJ5IG1lc3NhZ2VzIGZvciBhdXRvbWF0aWMgZW50aXR5IGNyZWF0aW9uLgoKRGlzY292ZXJ5IFRvcGljcyAoZm9sbG93aW5nIEJhdHRlcnkgRW11bGF0b3IgcGF0dGVybik6Ci0gaG9tZWFzc2lzdGFudC9zZW5zb3Ive3ByZWZpeH0vU09DL2NvbmZpZwotIGhvbWVhc3Npc3RhbnQvc2Vuc29yL3twcmVmaXh9L2JhdHRlcnlfdm9sdGFnZS9jb25maWcKLSBob21lYXNzaXN0YW50L3NlbnNvci97cHJlZml4fS9jZWxsX3ZvbHRhZ2UxL2NvbmZpZwotIC4uLgotIGhvbWVhc3Npc3RhbnQvYnV0dG9uL3twcmVmaXh9L1BBVVNFL2NvbmZpZwotIGhvbWVhc3Npc3RhbnQvYnV0dG9uL3twcmVmaXh9L1JFU1VNRS9jb25maWcKClBlcmZvcm1hbmNlOgotIE9ubHkgcHVibGlzaCBkaXNjb3Zlcnkgb25jZSBvbiBzdGFydHVwIChvciB3aGVuIGNvbmZpZyBjaGFuZ2VzKQotIFVzZSByZXRhaW49VHJ1ZSBmb3IgZGlzY292ZXJ5IG1lc3NhZ2VzCi0gQmF0Y2ggcHVibGlzaCB3aXRoIHNtYWxsIGRlbGF5cyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgYnJva2VyCiIiIgoKaW1wb3J0IGpzb24KaW1wb3J0IHRpbWUKZnJvbSBsaWIuREJFIGltcG9ydCBtcXR0X2NsaWVudAoKIyBEaXNjb3ZlcnkgcHVibGlzaGVkIGZsYWcKX2Rpc2NvdmVyeV9wdWJsaXNoZWQgPSBGYWxzZQoKCiMgU2Vuc29yIGRlZmluaXRpb25zIChmcm9tIEJhdHRlcnkgRW11bGF0b3IpClNFTlNPUl9DT05GSUdTID0gWwogICAgIyBTdGF0ZSBvZiBDaGFyZ2UKICAgIHsiaWQiOiAiU09DIiwgIm5hbWUiOiAiQmF0dGVyeSBTT0MgKFNjYWxlZCkiLCAidW5pdCI6ICIlIiwgImRldmljZV9jbGFzcyI6ICJiYXR0ZXJ5IiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICB7ImlkIjogIlNPQ19yZWFsIiwgIm5hbWUiOiAiQmF0dGVyeSBTT0MgKFJlYWwpIiwgInVuaXQiOiAiJSIsICJkZXZpY2VfY2xhc3MiOiAiYmF0dGVyeSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgCiAgICAjIFN0YXRlIG9mIEhlYWx0aAogICAgeyJpZCI6ICJzdGF0ZV9vZl9oZWFsdGgiLCAibmFtZSI6ICJTdGF0ZSBPZiBIZWFsdGgiLCAidW5pdCI6ICIlIiwgImRldmljZV9jbGFzcyI6ICJiYXR0ZXJ5IiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICAKICAgICMgVGVtcGVyYXR1cmUKICAgIHsiaWQiOiAidGVtcGVyYXR1cmVfbWluIiwgIm5hbWUiOiAiVGVtcGVyYXR1cmUgTWluIiwgInVuaXQiOiAiwrBDIiwgImRldmljZV9jbGFzcyI6ICJ0ZW1wZXJhdHVyZSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJ0ZW1wZXJhdHVyZV9tYXgiLCAibmFtZSI6ICJUZW1wZXJhdHVyZSBNYXgiLCAidW5pdCI6ICLCsEMiLCAiZGV2aWNlX2NsYXNzIjogInRlbXBlcmF0dXJlIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICAKICAgICMgQ3VycmVudCBhbmQgVm9sdGFnZQogICAgeyJpZCI6ICJiYXR0ZXJ5X2N1cnJlbnQiLCAibmFtZSI6ICJCYXR0ZXJ5IEN1cnJlbnQiLCAidW5pdCI6ICJBIiwgImRldmljZV9jbGFzcyI6ICJjdXJyZW50IiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICB7ImlkIjogImJhdHRlcnlfdm9sdGFnZSIsICJuYW1lIjogIkJhdHRlcnkgVm9sdGFnZSIsICJ1bml0IjogIlYiLCAiZGV2aWNlX2NsYXNzIjogInZvbHRhZ2UiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIAogICAgIyBDZWxsIFZvbHRhZ2VzCiAgICB7ImlkIjogImNlbGxfbWF4X3ZvbHRhZ2UiLCAibmFtZSI6ICJDZWxsIE1heCBWb2x0YWdlIiwgInVuaXQiOiAiViIsICJkZXZpY2VfY2xhc3MiOiAidm9sdGFnZSIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJjZWxsX21pbl92b2x0YWdlIiwgIm5hbWUiOiAiQ2VsbCBNaW4gVm9sdGFnZSIsICJ1bml0IjogIlYiLCAiZGV2aWNlX2NsYXNzIjogInZvbHRhZ2UiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAiY2VsbF92b2x0YWdlX2RlbHRhIiwgIm5hbWUiOiAiQ2VsbCBWb2x0YWdlIERlbHRhIiwgInVuaXQiOiAibVYiLCAiZGV2aWNlX2NsYXNzIjogInZvbHRhZ2UiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIAogICAgIyBDYXBhY2l0eQogICAgeyJpZCI6ICJ0b3RhbF9jYXBhY2l0eSIsICJuYW1lIjogIkJhdHRlcnkgVG90YWwgQ2FwYWNpdHkiLCAidW5pdCI6ICJXaCIsICJkZXZpY2VfY2xhc3MiOiAiZW5lcmd5IiwgInN0YXRlX2NsYXNzIjogInRvdGFsIn0sCiAgICB7ImlkIjogInJlbWFpbmluZ19jYXBhY2l0eSIsICJuYW1lIjogIkJhdHRlcnkgUmVtYWluaW5nIENhcGFjaXR5IiwgInVuaXQiOiAiV2giLCAiZGV2aWNlX2NsYXNzIjogImVuZXJneSIsICJzdGF0ZV9jbGFzcyI6ICJ0b3RhbCJ9LAogICAgCiAgICAjIFBvd2VyCiAgICB7ImlkIjogIm1heF9kaXNjaGFyZ2VfcG93ZXIiLCAibmFtZSI6ICJCYXR0ZXJ5IE1heCBEaXNjaGFyZ2UgUG93ZXIiLCAidW5pdCI6ICJXIiwgImRldmljZV9jbGFzcyI6ICJwb3dlciIsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJtYXhfY2hhcmdlX3Bvd2VyIiwgIm5hbWUiOiAiQmF0dGVyeSBNYXggQ2hhcmdlIFBvd2VyIiwgInVuaXQiOiAiVyIsICJkZXZpY2VfY2xhc3MiOiAicG93ZXIiLCAic3RhdGVfY2xhc3MiOiAibWVhc3VyZW1lbnQifSwKICAgIHsiaWQiOiAic3RhdF9iYXR0X3Bvd2VyIiwgIm5hbWUiOiAiQmF0dGVyeSBQb3dlciIsICJ1bml0IjogIlciLCAiZGV2aWNlX2NsYXNzIjogInBvd2VyIiwgInN0YXRlX2NsYXNzIjogIm1lYXN1cmVtZW50In0sCiAgICAKICAgICMgQmFsYW5jaW5nCiAgICB7ImlkIjogImJhbGFuY2luZ19hY3RpdmVfY2VsbHMiLCAibmFtZSI6ICJCYWxhbmNpbmcgQWN0aXZlIENlbGxzIiwgInVuaXQiOiAiIiwgImRldmljZV9jbGFzcyI6IE5vbmUsICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCJ9LAogICAgeyJpZCI6ICJiYWxhbmNpbmdfc3RhdHVzIiwgIm5hbWUiOiAiQmFsYW5jaW5nIFN0YXR1cyIsICJ1bml0IjogIiIsICJkZXZpY2VfY2xhc3MiOiBOb25lLCAic3RhdGVfY2xhc3MiOiBOb25lfSwKICAgIAogICAgIyBTdGF0dXMKICAgIHsiaWQiOiAiYm1zX3N0YXR1cyIsICJuYW1lIjogIkJNUyBTdGF0dXMiLCAidW5pdCI6ICIiLCAiZGV2aWNlX2NsYXNzIjogTm9uZSwgInN0YXRlX2NsYXNzIjogTm9uZX0sCiAgICB7ImlkIjogImVtdWxhdG9yX3N0YXR1cyIsICJuYW1lIjogIkVtdWxhdG9yIFN0YXR1cyIsICJ1bml0IjogIiIsICJkZXZpY2VfY2xhc3MiOiBOb25lLCAic3RhdGVfY2xhc3MiOiBOb25lfSwKXQoKCiMgQnV0dG9uIGRlZmluaXRpb25zCkJVVFRPTl9DT05GSUdTID0gWwogICAgeyJpZCI6ICJQQVVTRSIsICJuYW1lIjogIlBhdXNlIEJhdHRlcnkifSwKICAgIHsiaWQiOiAiUkVTVU1FIiwgIm5hbWUiOiAiUmVzdW1lIEJhdHRlcnkifSwKICAgIHsiaWQiOiAiUkVTVEFSVCIsICJuYW1lIjogIlJlc3RhcnQgRW11bGF0b3IifSwKICAgIHsiaWQiOiAiU1RPUCIsICJuYW1lIjogIlN0b3AgRW11bGF0b3IifSwKICAgIHsiaWQiOiAiQk1TUkVTRVQiLCAibmFtZSI6ICJSZXNldCBCTVMifSwKXQoKCmRlZiBwdWJsaXNoX3NlbnNvcl9kaXNjb3Zlcnkoc2Vuc29yX2NvbmZpZywgdG9waWNfcHJlZml4KToKICAgICIiIlB1Ymxpc2ggc2Vuc29yIGRpc2NvdmVyeSBtZXNzYWdlCiAgICAKICAgIEFyZ3M6CiAgICAgICAgc2Vuc29yX2NvbmZpZyAoZGljdCk6IFNlbnNvciBjb25maWd1cmF0aW9uCiAgICAgICAgdG9waWNfcHJlZml4IChzdHIpOiBNUVRUIHRvcGljIHByZWZpeCAoZS5nLiwgJ0JFJykKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIHB1Ymxpc2hlZCBzdWNjZXNzZnVsbHkKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgR2VuZXJhdGUgZGlzY292ZXJ5IHRvcGljCiAgICAgICAgZGlzY292ZXJ5X3RvcGljID0gZiJob21lYXNzaXN0YW50L3NlbnNvci97dG9waWNfcHJlZml4fS97c2Vuc29yX2NvbmZpZ1snaWQnXX0vY29uZmlnIgogICAgICAgIAogICAgICAgICMgQ3JlYXRlIGRpc2NvdmVyeSBwYXlsb2FkCiAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgIm5hbWUiOiBzZW5zb3JfY29uZmlnWyduYW1lJ10sCiAgICAgICAgICAgICJzdGF0ZV90b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vaW5mbyIsCiAgICAgICAgICAgICJ1bmlxdWVfaWQiOiBmInt0b3BpY19wcmVmaXh9X3tzZW5zb3JfY29uZmlnWydpZCddfSIsCiAgICAgICAgICAgICJvYmplY3RfaWQiOiBmInt0b3BpY19wcmVmaXgubG93ZXIoKX1fe3NlbnNvcl9jb25maWdbJ2lkJ119IiwKICAgICAgICAgICAgInZhbHVlX3RlbXBsYXRlIjogZiJ7e3t7IHZhbHVlX2pzb24ue3NlbnNvcl9jb25maWdbJ2lkJ119IH19fX0iLAogICAgICAgICAgICAiZGV2aWNlIjogewogICAgICAgICAgICAgICAgImlkZW50aWZpZXJzIjogWyJiYXR0ZXJ5LWVtdWxhdG9yIl0sCiAgICAgICAgICAgICAgICAibWFudWZhY3R1cmVyIjogIkRhbGFUZWNoIiwKICAgICAgICAgICAgICAgICJtb2RlbCI6ICJCYXR0ZXJ5RW11bGF0b3IiLAogICAgICAgICAgICAgICAgIm5hbWUiOiAiQmF0dGVyeSBFbXVsYXRvciIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgImF2YWlsYWJpbGl0eSI6IHsKICAgICAgICAgICAgICAgICJ0b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vc3RhdHVzIiwKICAgICAgICAgICAgICAgICJwYXlsb2FkX2F2YWlsYWJsZSI6ICJvbmxpbmUiLAogICAgICAgICAgICAgICAgInBheWxvYWRfbm90X2F2YWlsYWJsZSI6ICJvZmZsaW5lIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgQWRkIHVuaXQgb2YgbWVhc3VyZW1lbnQgaWYgc3BlY2lmaWVkCiAgICAgICAgaWYgc2Vuc29yX2NvbmZpZ1sndW5pdCddOgogICAgICAgICAgICBwYXlsb2FkWyJ1bml0X29mX21lYXN1cmVtZW50Il0gPSBzZW5zb3JfY29uZmlnWyd1bml0J10KICAgICAgICAKICAgICAgICAjIEFkZCBkZXZpY2UgY2xhc3MgaWYgc3BlY2lmaWVkCiAgICAgICAgaWYgc2Vuc29yX2NvbmZpZ1snZGV2aWNlX2NsYXNzJ106CiAgICAgICAgICAgIHBheWxvYWRbImRldmljZV9jbGFzcyJdID0gc2Vuc29yX2NvbmZpZ1snZGV2aWNlX2NsYXNzJ10KICAgICAgICAKICAgICAgICAjIEFkZCBzdGF0ZSBjbGFzcyBpZiBzcGVjaWZpZWQKICAgICAgICBpZiBzZW5zb3JfY29uZmlnWydzdGF0ZV9jbGFzcyddOgogICAgICAgICAgICBwYXlsb2FkWyJzdGF0ZV9jbGFzcyJdID0gc2Vuc29yX2NvbmZpZ1snc3RhdGVfY2xhc3MnXQogICAgICAgIAogICAgICAgICMgQ29udmVydCB0byBKU09OCiAgICAgICAgcGF5bG9hZF9qc29uID0ganNvbi5kdW1wcyhwYXlsb2FkKQogICAgICAgIAogICAgICAgICMgUHVibGlzaCBkaXNjb3ZlcnkgbWVzc2FnZSAocmV0YWluPVRydWUgc28gSEEgY2FuIGRpc2NvdmVyIGFmdGVyIHJlc3RhcnQpCiAgICAgICAgIyBOb3RlOiBXZSBuZWVkIHRvIHB1Ymxpc2ggdG8gdGhlIGZ1bGwgdG9waWMsIG5vdCB1c2luZyBtcXR0X2NsaWVudC5wdWJsaXNoKCkKICAgICAgICAjIGJlY2F1c2UgdGhhdCBhZGRzIHRoZSBwcmVmaXggYXV0b21hdGljYWxseQogICAgICAgIGZyb20gdW1xdHQuc2ltcGxlIGltcG9ydCBNUVRUQ2xpZW50CiAgICAgICAgCiAgICAgICAgIyBHZXQgTVFUVCBjbGllbnQgZnJvbSBtcXR0X2NsaWVudCBtb2R1bGUgKGludGVybmFsIGFjY2VzcykKICAgICAgICBpZiBub3QgbXF0dF9jbGllbnQuX21xdHRfY2xpZW50IG9yIG5vdCBtcXR0X2NsaWVudC5fbXF0dF9jb25uZWN0ZWQ6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudC5wdWJsaXNoKGRpc2NvdmVyeV90b3BpYy5lbmNvZGUoKSwgcGF5bG9hZF9qc29uLmVuY29kZSgpLCByZXRhaW49VHJ1ZSwgcW9zPTApCiAgICAgICAgCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltIQSBEaXNjb3ZlcnldIEVycm9yIHB1Ymxpc2hpbmcgc2Vuc29yIHtzZW5zb3JfY29uZmlnWydpZCddfToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgcHVibGlzaF9idXR0b25fZGlzY292ZXJ5KGJ1dHRvbl9jb25maWcsIHRvcGljX3ByZWZpeCk6CiAgICAiIiJQdWJsaXNoIGJ1dHRvbiBkaXNjb3ZlcnkgbWVzc2FnZQogICAgCiAgICBBcmdzOgogICAgICAgIGJ1dHRvbl9jb25maWcgKGRpY3QpOiBCdXR0b24gY29uZmlndXJhdGlvbgogICAgICAgIHRvcGljX3ByZWZpeCAoc3RyKTogTVFUVCB0b3BpYyBwcmVmaXggKGUuZy4sICdCRScpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdlbmVyYXRlIGRpc2NvdmVyeSB0b3BpYwogICAgICAgIGRpc2NvdmVyeV90b3BpYyA9IGYiaG9tZWFzc2lzdGFudC9idXR0b24ve3RvcGljX3ByZWZpeH0ve2J1dHRvbl9jb25maWdbJ2lkJ119L2NvbmZpZyIKICAgICAgICAKICAgICAgICAjIENyZWF0ZSBkaXNjb3ZlcnkgcGF5bG9hZAogICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICJuYW1lIjogYnV0dG9uX2NvbmZpZ1snbmFtZSddLAogICAgICAgICAgICAidW5pcXVlX2lkIjogZiJ7dG9waWNfcHJlZml4Lmxvd2VyKCl9X3tidXR0b25fY29uZmlnWydpZCddfSIsCiAgICAgICAgICAgICJjb21tYW5kX3RvcGljIjogZiJ7dG9waWNfcHJlZml4fS9jb21tYW5kL3tidXR0b25fY29uZmlnWydpZCddfSIsCiAgICAgICAgICAgICJkZXZpY2UiOiB7CiAgICAgICAgICAgICAgICAiaWRlbnRpZmllcnMiOiBbImJhdHRlcnktZW11bGF0b3IiXSwKICAgICAgICAgICAgICAgICJtYW51ZmFjdHVyZXIiOiAiRGFsYVRlY2giLAogICAgICAgICAgICAgICAgIm1vZGVsIjogIkJhdHRlcnlFbXVsYXRvciIsCiAgICAgICAgICAgICAgICAibmFtZSI6ICJCYXR0ZXJ5IEVtdWxhdG9yIgogICAgICAgICAgICB9LAogICAgICAgICAgICAiYXZhaWxhYmlsaXR5IjogewogICAgICAgICAgICAgICAgInRvcGljIjogZiJ7dG9waWNfcHJlZml4fS9zdGF0dXMiLAogICAgICAgICAgICAgICAgInBheWxvYWRfYXZhaWxhYmxlIjogIm9ubGluZSIsCiAgICAgICAgICAgICAgICAicGF5bG9hZF9ub3RfYXZhaWxhYmxlIjogIm9mZmxpbmUiCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHRvIEpTT04KICAgICAgICBwYXlsb2FkX2pzb24gPSBqc29uLmR1bXBzKHBheWxvYWQpCiAgICAgICAgCiAgICAgICAgIyBQdWJsaXNoIGRpc2NvdmVyeSBtZXNzYWdlIChyZXRhaW49VHJ1ZSkKICAgICAgICBpZiBub3QgbXF0dF9jbGllbnQuX21xdHRfY2xpZW50IG9yIG5vdCBtcXR0X2NsaWVudC5fbXF0dF9jb25uZWN0ZWQ6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudC5wdWJsaXNoKGRpc2NvdmVyeV90b3BpYy5lbmNvZGUoKSwgcGF5bG9hZF9qc29uLmVuY29kZSgpLCByZXRhaW49VHJ1ZSwgcW9zPTApCiAgICAgICAgCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltIQSBEaXNjb3ZlcnldIEVycm9yIHB1Ymxpc2hpbmcgYnV0dG9uIHtidXR0b25fY29uZmlnWydpZCddfToge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgcHVibGlzaF9jZWxsX3ZvbHRhZ2VfZGlzY292ZXJ5KGNlbGxfbnVtYmVyLCB0b3BpY19wcmVmaXgpOgogICAgIiIiUHVibGlzaCBjZWxsIHZvbHRhZ2Ugc2Vuc29yIGRpc2NvdmVyeSBtZXNzYWdlCiAgICAKICAgIEFyZ3M6CiAgICAgICAgY2VsbF9udW1iZXIgKGludCk6IENlbGwgbnVtYmVyICgxLWJhc2VkKQogICAgICAgIHRvcGljX3ByZWZpeCAoc3RyKTogTVFUVCB0b3BpYyBwcmVmaXggKGUuZy4sICdCRScpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdlbmVyYXRlIGRpc2NvdmVyeSB0b3BpYwogICAgICAgIGRpc2NvdmVyeV90b3BpYyA9IGYiaG9tZWFzc2lzdGFudC9zZW5zb3Ive3RvcGljX3ByZWZpeH0vY2VsbF92b2x0YWdle2NlbGxfbnVtYmVyfS9jb25maWciCiAgICAgICAgCiAgICAgICAgIyBDcmVhdGUgZGlzY292ZXJ5IHBheWxvYWQKICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAibmFtZSI6IGYiQmF0dGVyeSBDZWxsIFZvbHRhZ2Uge2NlbGxfbnVtYmVyfSIsCiAgICAgICAgICAgICJzdGF0ZV90b3BpYyI6IGYie3RvcGljX3ByZWZpeH0vc3BlY19kYXRhIiwKICAgICAgICAgICAgInVuaXF1ZV9pZCI6IGYie3RvcGljX3ByZWZpeH1fYmF0dGVyeV92b2x0YWdlX2NlbGx7Y2VsbF9udW1iZXJ9IiwKICAgICAgICAgICAgIm9iamVjdF9pZCI6IGYie3RvcGljX3ByZWZpeC5sb3dlcigpfV9iYXR0ZXJ5X3ZvbHRhZ2VfY2VsbHtjZWxsX251bWJlcn0iLAogICAgICAgICAgICAidmFsdWVfdGVtcGxhdGUiOiBmInt7e3sgdmFsdWVfanNvbi5jZWxsX3ZvbHRhZ2VzW3tjZWxsX251bWJlciAtIDF9XSB9fX19IiwKICAgICAgICAgICAgInVuaXRfb2ZfbWVhc3VyZW1lbnQiOiAiViIsCiAgICAgICAgICAgICJkZXZpY2VfY2xhc3MiOiAidm9sdGFnZSIsCiAgICAgICAgICAgICJzdGF0ZV9jbGFzcyI6ICJtZWFzdXJlbWVudCIsCiAgICAgICAgICAgICJkZXZpY2UiOiB7CiAgICAgICAgICAgICAgICAiaWRlbnRpZmllcnMiOiBbImJhdHRlcnktZW11bGF0b3IiXSwKICAgICAgICAgICAgICAgICJtYW51ZmFjdHVyZXIiOiAiRGFsYVRlY2giLAogICAgICAgICAgICAgICAgIm1vZGVsIjogIkJhdHRlcnlFbXVsYXRvciIsCiAgICAgICAgICAgICAgICAibmFtZSI6ICJCYXR0ZXJ5IEVtdWxhdG9yIgogICAgICAgICAgICB9LAogICAgICAgICAgICAiYXZhaWxhYmlsaXR5IjogewogICAgICAgICAgICAgICAgInRvcGljIjogZiJ7dG9waWNfcHJlZml4fS9zdGF0dXMiLAogICAgICAgICAgICAgICAgInBheWxvYWRfYXZhaWxhYmxlIjogIm9ubGluZSIsCiAgICAgICAgICAgICAgICAicGF5bG9hZF9ub3RfYXZhaWxhYmxlIjogIm9mZmxpbmUiCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHRvIEpTT04KICAgICAgICBwYXlsb2FkX2pzb24gPSBqc29uLmR1bXBzKHBheWxvYWQpCiAgICAgICAgCiAgICAgICAgIyBQdWJsaXNoIGRpc2NvdmVyeSBtZXNzYWdlIChyZXRhaW49VHJ1ZSkKICAgICAgICBpZiBub3QgbXF0dF9jbGllbnQuX21xdHRfY2xpZW50IG9yIG5vdCBtcXR0X2NsaWVudC5fbXF0dF9jb25uZWN0ZWQ6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudC5wdWJsaXNoKGRpc2NvdmVyeV90b3BpYy5lbmNvZGUoKSwgcGF5bG9hZF9qc29uLmVuY29kZSgpLCByZXRhaW49VHJ1ZSwgcW9zPTApCiAgICAgICAgCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltIQSBEaXNjb3ZlcnldIEVycm9yIHB1Ymxpc2hpbmcgY2VsbCB2b2x0YWdlIHtjZWxsX251bWJlcn06IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1Ymxpc2hfZGlzY292ZXJ5KG51bV9jZWxscz0wLCBwdWJsaXNoX2NlbGxfdm9sdGFnZXM9RmFsc2UpOgogICAgIiIiUHVibGlzaCBhbGwgSG9tZSBBc3Npc3RhbnQgZGlzY292ZXJ5IG1lc3NhZ2VzCiAgICAKICAgIEFyZ3M6CiAgICAgICAgbnVtX2NlbGxzIChpbnQpOiBOdW1iZXIgb2YgYmF0dGVyeSBjZWxscyAoZm9yIGNlbGwgdm9sdGFnZSBzZW5zb3JzKQogICAgICAgIHB1Ymxpc2hfY2VsbF92b2x0YWdlcyAoYm9vbCk6IFdoZXRoZXIgdG8gcHVibGlzaCBjZWxsIHZvbHRhZ2Ugc2Vuc29ycwogICAgCiAgICBSZXR1cm5zOgogICAgICAgIGJvb2w6IFRydWUgaWYgYWxsIHB1Ymxpc2hlZCBzdWNjZXNzZnVsbHkKICAgICIiIgogICAgZ2xvYmFsIF9kaXNjb3ZlcnlfcHVibGlzaGVkCiAgICAKICAgIGlmIF9kaXNjb3ZlcnlfcHVibGlzaGVkOgogICAgICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBBbHJlYWR5IHB1Ymxpc2hlZCwgc2tpcHBpbmciKQogICAgICAgIHJldHVybiBUcnVlCiAgICAKICAgIGlmIG5vdCBtcXR0X2NsaWVudC5pc19jb25uZWN0ZWQoKToKICAgICAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gTVFUVCBub3QgY29ubmVjdGVkIikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgdG9waWNfcHJlZml4ID0gbXF0dF9jbGllbnQuZ2V0X3RvcGljX3ByZWZpeCgpCiAgICAKICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBQdWJsaXNoaW5nIGRpc2NvdmVyeSBtZXNzYWdlcy4uLiIpCiAgICAKICAgIHN1Y2Nlc3MgPSBUcnVlCiAgICAKICAgICMgUHVibGlzaCBzZW5zb3IgZGlzY292ZXJpZXMKICAgIGZvciBzZW5zb3JfY29uZmlnIGluIFNFTlNPUl9DT05GSUdTOgogICAgICAgIGlmIG5vdCBwdWJsaXNoX3NlbnNvcl9kaXNjb3Zlcnkoc2Vuc29yX2NvbmZpZywgdG9waWNfcHJlZml4KToKICAgICAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAgICAgdGltZS5zbGVlcF9tcyg1MCkgICMgU21hbGwgZGVsYXkgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIGJyb2tlcgogICAgCiAgICAjIFB1Ymxpc2ggYnV0dG9uIGRpc2NvdmVyaWVzCiAgICBmb3IgYnV0dG9uX2NvbmZpZyBpbiBCVVRUT05fQ09ORklHUzoKICAgICAgICBpZiBub3QgcHVibGlzaF9idXR0b25fZGlzY292ZXJ5KGJ1dHRvbl9jb25maWcsIHRvcGljX3ByZWZpeCk6CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgICAgIHRpbWUuc2xlZXBfbXMoNTApCiAgICAKICAgICMgUHVibGlzaCBjZWxsIHZvbHRhZ2UgZGlzY292ZXJpZXMgKGlmIGVuYWJsZWQpCiAgICBpZiBwdWJsaXNoX2NlbGxfdm9sdGFnZXMgYW5kIG51bV9jZWxscyA+IDA6CiAgICAgICAgcHJpbnQoZiJbSEEgRGlzY292ZXJ5XSBQdWJsaXNoaW5nIHtudW1fY2VsbHN9IGNlbGwgdm9sdGFnZSBzZW5zb3JzLi4uIikKICAgICAgICBmb3IgY2VsbF9udW0gaW4gcmFuZ2UoMSwgbnVtX2NlbGxzICsgMSk6CiAgICAgICAgICAgIGlmIG5vdCBwdWJsaXNoX2NlbGxfdm9sdGFnZV9kaXNjb3ZlcnkoY2VsbF9udW0sIHRvcGljX3ByZWZpeCk6CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgICAgICAgICAgdGltZS5zbGVlcF9tcyg1MCkKICAgIAogICAgaWYgc3VjY2VzczoKICAgICAgICBfZGlzY292ZXJ5X3B1Ymxpc2hlZCA9IFRydWUKICAgICAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gQWxsIGRpc2NvdmVyeSBtZXNzYWdlcyBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIFNvbWUgZGlzY292ZXJ5IG1lc3NhZ2VzIGZhaWxlZCB0byBwdWJsaXNoIikKICAgIAogICAgcmV0dXJuIHN1Y2Nlc3MKCgpkZWYgY2xlYXJfZGlzY292ZXJ5KCk6CiAgICAiIiJDbGVhciBIb21lIEFzc2lzdGFudCBkaXNjb3ZlcnkgKHB1Ymxpc2ggZW1wdHkgcGF5bG9hZHMpCiAgICAKICAgIFRoaXMgcmVtb3ZlcyB0aGUgZW50aXRpZXMgZnJvbSBIb21lIEFzc2lzdGFudC4KICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGNsZWFyZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIGdsb2JhbCBfZGlzY292ZXJ5X3B1Ymxpc2hlZAogICAgCiAgICBpZiBub3QgbXF0dF9jbGllbnQuaXNfY29ubmVjdGVkKCk6CiAgICAgICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIE1RVFQgbm90IGNvbm5lY3RlZCIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHRvcGljX3ByZWZpeCA9IG1xdHRfY2xpZW50LmdldF90b3BpY19wcmVmaXgoKQogICAgCiAgICBwcmludCgiW0hBIERpc2NvdmVyeV0gQ2xlYXJpbmcgZGlzY292ZXJ5IG1lc3NhZ2VzLi4uIikKICAgIAogICAgc3VjY2VzcyA9IFRydWUKICAgIAogICAgIyBDbGVhciBzZW5zb3IgZGlzY292ZXJpZXMKICAgIGZvciBzZW5zb3JfY29uZmlnIGluIFNFTlNPUl9DT05GSUdTOgogICAgICAgIGRpc2NvdmVyeV90b3BpYyA9IGYiaG9tZWFzc2lzdGFudC9zZW5zb3Ive3RvcGljX3ByZWZpeH0ve3NlbnNvcl9jb25maWdbJ2lkJ119L2NvbmZpZyIKICAgICAgICBpZiBub3QgbXF0dF9jbGllbnQuX21xdHRfY2xpZW50LnB1Ymxpc2goZGlzY292ZXJ5X3RvcGljLmVuY29kZSgpLCBiIiIsIHJldGFpbj1UcnVlLCBxb3M9MCk6CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgICAgIHRpbWUuc2xlZXBfbXMoNTApCiAgICAKICAgICMgQ2xlYXIgYnV0dG9uIGRpc2NvdmVyaWVzCiAgICBmb3IgYnV0dG9uX2NvbmZpZyBpbiBCVVRUT05fQ09ORklHUzoKICAgICAgICBkaXNjb3ZlcnlfdG9waWMgPSBmImhvbWVhc3Npc3RhbnQvYnV0dG9uL3t0b3BpY19wcmVmaXh9L3tidXR0b25fY29uZmlnWydpZCddfS9jb25maWciCiAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50Ll9tcXR0X2NsaWVudC5wdWJsaXNoKGRpc2NvdmVyeV90b3BpYy5lbmNvZGUoKSwgYiIiLCByZXRhaW49VHJ1ZSwgcW9zPTApOgogICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgICAgICB0aW1lLnNsZWVwX21zKDUwKQogICAgCiAgICBfZGlzY292ZXJ5X3B1Ymxpc2hlZCA9IEZhbHNlCiAgICAKICAgIGlmIHN1Y2Nlc3M6CiAgICAgICAgcHJpbnQoIltIQSBEaXNjb3ZlcnldIERpc2NvdmVyeSBjbGVhcmVkIHN1Y2Nlc3NmdWxseSIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbSEEgRGlzY292ZXJ5XSBTb21lIGRpc2NvdmVyeSBtZXNzYWdlcyBmYWlsZWQgdG8gY2xlYXIiKQogICAgCiAgICByZXR1cm4gc3VjY2VzcwoKCmRlZiByZXNldF9kaXNjb3ZlcnlfZmxhZygpOgogICAgIiIiUmVzZXQgZGlzY292ZXJ5IHB1Ymxpc2hlZCBmbGFnIChmb3IgcmUtcHVibGlzaGluZyBhZnRlciBjb25maWcgY2hhbmdlKSIiIgogICAgZ2xvYmFsIF9kaXNjb3ZlcnlfcHVibGlzaGVkCiAgICBfZGlzY292ZXJ5X3B1Ymxpc2hlZCA9IEZhbHNlCg==",
  "/lib/ext/dbe/mqtt_publisher.py": "IiIiCk1RVFQgUHVibGlzaGVyIE1vZHVsZSBmb3IgREJFCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKRm9ybWF0IGFuZCBwdWJsaXNoIGJhdHRlcnkgdGVsZW1ldHJ5IGRhdGEgdG8gTVFUVCBicm9rZXIuCgpUb3BpY3MgU3RydWN0dXJlIChmb2xsb3dpbmcgQmF0dGVyeSBFbXVsYXRvciBwYXR0ZXJuKToKLSB7cHJlZml4fS9zdGF0dXMgICAgICAgICAgLSAib25saW5lIiAvICJvZmZsaW5lIiAoTFdUKQotIHtwcmVmaXh9L2luZm8gICAgICAgICAgICAtIE1haW4gYmF0dGVyeSBpbmZvIChKU09OKQotIHtwcmVmaXh9L3NwZWNfZGF0YSAgICAgICAtIENlbGwgdm9sdGFnZXMgKEpTT04gYXJyYXkpCi0ge3ByZWZpeH0vYmFsYW5jaW5nX2RhdGEgIC0gQ2VsbCBiYWxhbmNpbmcgc3RhdHVzIChKU09OIGFycmF5KQotIHtwcmVmaXh9L2V2ZW50cyAgICAgICAgICAtIEV2ZW50cy9hbGFybXMgKEpTT04pCgpQZXJmb3JtYW5jZSBDb25zaWRlcmF0aW9uczoKLSBQcmUtYWxsb2NhdGUgSlNPTiBidWZmZXJzIChhdm9pZCByZXBlYXRlZCBhbGxvY2F0aW9uKQotIEJhdGNoIHB1Ymxpc2ggb3BlcmF0aW9ucyAoZG9uJ3QgYmxvY2sgb24gZWFjaCBwdWJsaXNoKQotIENvbmZpZ3VyYWJsZSBwdWJsaXNoIGludGVydmFsIChkZWZhdWx0OiA1IHNlY29uZHMpCi0gU2tpcCBjZWxsIHZvbHRhZ2VzIGlmIGRpc2FibGVkIGluIGNvbmZpZwoiIiIKCmltcG9ydCBqc29uCmZyb20gbGliLkRCRSBpbXBvcnQgbXF0dF9jbGllbnQKCgpkZWYgcHVibGlzaF9zdGF0dXMob25saW5lPVRydWUpOgogICAgIiIiUHVibGlzaCBvbmxpbmUvb2ZmbGluZSBzdGF0dXMKICAgIAogICAgQXJnczoKICAgICAgICBvbmxpbmUgKGJvb2wpOiBUcnVlIGZvciBvbmxpbmUsIEZhbHNlIGZvciBvZmZsaW5lCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHN0YXR1cyA9ICJvbmxpbmUiIGlmIG9ubGluZSBlbHNlICJvZmZsaW5lIgogICAgcmV0dXJuIG1xdHRfY2xpZW50LnB1Ymxpc2goInN0YXR1cyIsIHN0YXR1cywgcmV0YWluPVRydWUsIHFvcz0xKQoKCmRlZiBwdWJsaXNoX2luZm8oYmF0dGVyeV9kYXRhKToKICAgICIiIlB1Ymxpc2ggbWFpbiBiYXR0ZXJ5IGluZm9ybWF0aW9uCiAgICAKICAgIEFyZ3M6CiAgICAgICAgYmF0dGVyeV9kYXRhIChkaWN0KTogQmF0dGVyeSBkYXRhIGZyb20gYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEV4dHJhY3QgYW5kIGZvcm1hdCBiYXR0ZXJ5IG1ldHJpY3MKICAgICAgICBpbmZvID0gewogICAgICAgICAgICAjIFN0YXRlIG9mIENoYXJnZQogICAgICAgICAgICAiU09DIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgnc29jX3BlcmNlbnQnLCAwKSAvIDEwMC4wLCAyKSwKICAgICAgICAgICAgIlNPQ19yZWFsIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgnc29jX3BlcmNlbnQnLCAwKSAvIDEwMC4wLCAyKSwgICMgU2FtZSBmb3Igbm93CiAgICAgICAgICAgIAogICAgICAgICAgICAjIFN0YXRlIG9mIEhlYWx0aAogICAgICAgICAgICAic3RhdGVfb2ZfaGVhbHRoIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgnc29oX3BlcmNlbnQnLCAxMDApIC8gMTAwLjAsIDIpLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBUZW1wZXJhdHVyZQogICAgICAgICAgICAidGVtcGVyYXR1cmVfbWluIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgndGVtcF9taW5fQycsIDApLCAxKSwKICAgICAgICAgICAgInRlbXBlcmF0dXJlX21heCI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ3RlbXBfbWF4X0MnLCAwKSwgMSksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEN1cnJlbnQgYW5kIFZvbHRhZ2UKICAgICAgICAgICAgImJhdHRlcnlfY3VycmVudCI6IHJvdW5kKGJhdHRlcnlfZGF0YS5nZXQoJ2N1cnJlbnRfZEEnLCAwKSAvIDEwLjAsIDEpLAogICAgICAgICAgICAiYmF0dGVyeV92b2x0YWdlIjogcm91bmQoYmF0dGVyeV9kYXRhLmdldCgndm9sdGFnZV9kVicsIDApIC8gMTAuMCwgMSksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIENlbGwgVm9sdGFnZXMKICAgICAgICAgICAgImNlbGxfbWF4X3ZvbHRhZ2UiOiByb3VuZChiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX21heF9tVicsIDApIC8gMTAwMC4wLCAzKSwKICAgICAgICAgICAgImNlbGxfbWluX3ZvbHRhZ2UiOiByb3VuZChiYXR0ZXJ5X2RhdGEuZ2V0KCdjZWxsX21pbl9tVicsIDApIC8gMTAwMC4wLCAzKSwKICAgICAgICAgICAgImNlbGxfdm9sdGFnZV9kZWx0YSI6IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfZGV2aWF0aW9uX21WJywgMCksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIENhcGFjaXR5CiAgICAgICAgICAgICJ0b3RhbF9jYXBhY2l0eSI6IGJhdHRlcnlfZGF0YS5nZXQoJ3RvdGFsX2NhcGFjaXR5X1doJywgMCksCiAgICAgICAgICAgICJyZW1haW5pbmdfY2FwYWNpdHkiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdyZW1haW5pbmdfY2FwYWNpdHlfV2gnLCAwKSwKICAgICAgICAgICAgCiAgICAgICAgICAgICMgUG93ZXIgTGltaXRzCiAgICAgICAgICAgICJtYXhfZGlzY2hhcmdlX3Bvd2VyIjogYmF0dGVyeV9kYXRhLmdldCgnbWF4X2Rpc2NoYXJnZV9wb3dlcl9XJywgMCksCiAgICAgICAgICAgICJtYXhfY2hhcmdlX3Bvd2VyIjogYmF0dGVyeV9kYXRhLmdldCgnbWF4X2NoYXJnZV9wb3dlcl9XJywgMCksCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEN1cnJlbnQgUG93ZXIKICAgICAgICAgICAgInN0YXRfYmF0dF9wb3dlciI6IGJhdHRlcnlfZGF0YS5nZXQoJ3Bvd2VyX1cnLCAwKSwKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQmFsYW5jaW5nCiAgICAgICAgICAgICJiYWxhbmNpbmdfYWN0aXZlX2NlbGxzIjogYmF0dGVyeV9kYXRhLmdldCgnYmFsYW5jaW5nX2FjdGl2ZV9jZWxscycsIDApLAogICAgICAgICAgICAiYmFsYW5jaW5nX3N0YXR1cyI6IGJhdHRlcnlfZGF0YS5nZXQoJ2JhbGFuY2luZ19zdGF0dXMnLCAnVW5rbm93bicpLAogICAgICAgICAgICAKICAgICAgICAgICAgIyBTdGF0dXMKICAgICAgICAgICAgImJtc19zdGF0dXMiOiBiYXR0ZXJ5X2RhdGEuZ2V0KCdibXNfc3RhdHVzJywgJ1Vua25vd24nKSwKICAgICAgICAgICAgImVtdWxhdG9yX3N0YXR1cyI6IGJhdHRlcnlfZGF0YS5nZXQoJ2VtdWxhdG9yX3N0YXR1cycsICdSdW5uaW5nJykKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHRvIEpTT04KICAgICAgICBwYXlsb2FkID0ganNvbi5kdW1wcyhpbmZvKQogICAgICAgIAogICAgICAgICMgUHVibGlzaAogICAgICAgIHJldHVybiBtcXR0X2NsaWVudC5wdWJsaXNoKCJpbmZvIiwgcGF5bG9hZCwgcmV0YWluPUZhbHNlLCBxb3M9MCkKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUIFB1Ymxpc2hlcl0gRXJyb3IgcHVibGlzaGluZyBpbmZvOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdWJsaXNoX2NlbGxfdm9sdGFnZXMoYmF0dGVyeV9kYXRhKToKICAgICIiIlB1Ymxpc2ggaW5kaXZpZHVhbCBjZWxsIHZvbHRhZ2VzCiAgICAKICAgIEFyZ3M6CiAgICAgICAgYmF0dGVyeV9kYXRhIChkaWN0KTogQmF0dGVyeSBkYXRhIGZyb20gYmF0dGVyeS5nZXRfZGF0YSgpCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBpZiBwdWJsaXNoZWQgc3VjY2Vzc2Z1bGx5CiAgICAiIiIKICAgIHRyeToKICAgICAgICAjIEdldCBjZWxsIHZvbHRhZ2VzIGFycmF5CiAgICAgICAgY2VsbF92b2x0YWdlc19tViA9IGJhdHRlcnlfZGF0YS5nZXQoJ2NlbGxfdm9sdGFnZXNfbVYnLCBbXSkKICAgICAgICAKICAgICAgICBpZiBub3QgY2VsbF92b2x0YWdlc19tVjoKICAgICAgICAgICAgcmV0dXJuIFRydWUgICMgTm8gY2VsbCB2b2x0YWdlcyBhdmFpbGFibGUKICAgICAgICAKICAgICAgICAjIENvbnZlcnQgZnJvbSBtViB0byBWCiAgICAgICAgY2VsbF92b2x0YWdlc19WID0gW3JvdW5kKHYgLyAxMDAwLjAsIDMpIGZvciB2IGluIGNlbGxfdm9sdGFnZXNfbVZdCiAgICAgICAgCiAgICAgICAgIyBDcmVhdGUgcGF5bG9hZAogICAgICAgIHBheWxvYWRfZGljdCA9IHsKICAgICAgICAgICAgImNlbGxfdm9sdGFnZXMiOiBjZWxsX3ZvbHRhZ2VzX1YKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBDb252ZXJ0IHRvIEpTT04KICAgICAgICBwYXlsb2FkID0ganNvbi5kdW1wcyhwYXlsb2FkX2RpY3QpCiAgICAgICAgCiAgICAgICAgIyBQdWJsaXNoCiAgICAgICAgcmV0dXJuIG1xdHRfY2xpZW50LnB1Ymxpc2goInNwZWNfZGF0YSIsIHBheWxvYWQsIHJldGFpbj1GYWxzZSwgcW9zPTApCiAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbTVFUVCBQdWJsaXNoZXJdIEVycm9yIHB1Ymxpc2hpbmcgY2VsbCB2b2x0YWdlczoge2V9IikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgcHVibGlzaF9jZWxsX2JhbGFuY2luZyhiYXR0ZXJ5X2RhdGEpOgogICAgIiIiUHVibGlzaCBjZWxsIGJhbGFuY2luZyBzdGF0dXMKICAgIAogICAgQXJnczoKICAgICAgICBiYXR0ZXJ5X2RhdGEgKGRpY3QpOiBCYXR0ZXJ5IGRhdGEgZnJvbSBiYXR0ZXJ5LmdldF9kYXRhKCkKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIHB1Ymxpc2hlZCBzdWNjZXNzZnVsbHkKICAgICIiIgogICAgdHJ5OgogICAgICAgICMgR2V0IGNlbGwgYmFsYW5jaW5nIHN0YXR1cyBhcnJheQogICAgICAgIGNlbGxfYmFsYW5jaW5nID0gYmF0dGVyeV9kYXRhLmdldCgnY2VsbF9iYWxhbmNpbmdfc3RhdHVzJywgW10pCiAgICAgICAgCiAgICAgICAgaWYgbm90IGNlbGxfYmFsYW5jaW5nOgogICAgICAgICAgICByZXR1cm4gVHJ1ZSAgIyBObyBiYWxhbmNpbmcgZGF0YSBhdmFpbGFibGUKICAgICAgICAKICAgICAgICAjIENyZWF0ZSBwYXlsb2FkCiAgICAgICAgcGF5bG9hZF9kaWN0ID0gewogICAgICAgICAgICAiY2VsbF9iYWxhbmNpbmciOiBjZWxsX2JhbGFuY2luZwogICAgICAgIH0KICAgICAgICAKICAgICAgICAjIENvbnZlcnQgdG8gSlNPTgogICAgICAgIHBheWxvYWQgPSBqc29uLmR1bXBzKHBheWxvYWRfZGljdCkKICAgICAgICAKICAgICAgICAjIFB1Ymxpc2gKICAgICAgICByZXR1cm4gbXF0dF9jbGllbnQucHVibGlzaCgiYmFsYW5jaW5nX2RhdGEiLCBwYXlsb2FkLCByZXRhaW49RmFsc2UsIHFvcz0wKQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW01RVFQgUHVibGlzaGVyXSBFcnJvciBwdWJsaXNoaW5nIGNlbGwgYmFsYW5jaW5nOiB7ZX0iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdWJsaXNoX2V2ZW50cyhldmVudHMpOgogICAgIiIiUHVibGlzaCBldmVudHMvYWxhcm1zCiAgICAKICAgIEFyZ3M6CiAgICAgICAgZXZlbnRzIChsaXN0KTogTGlzdCBvZiBldmVudCBkaWN0aW9uYXJpZXMKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIHB1Ymxpc2hlZCBzdWNjZXNzZnVsbHkKICAgICIiIgogICAgdHJ5OgogICAgICAgIGlmIG5vdCBldmVudHM6CiAgICAgICAgICAgIHJldHVybiBUcnVlICAjIE5vIGV2ZW50cyB0byBwdWJsaXNoCiAgICAgICAgCiAgICAgICAgIyBQdWJsaXNoIGVhY2ggZXZlbnQgc2VwYXJhdGVseSAobGlrZSBCYXR0ZXJ5IEVtdWxhdG9yKQogICAgICAgIGZvciBldmVudCBpbiBldmVudHM6CiAgICAgICAgICAgIHBheWxvYWQgPSBqc29uLmR1bXBzKGV2ZW50KQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbm90IG1xdHRfY2xpZW50LnB1Ymxpc2goImV2ZW50cyIsIHBheWxvYWQsIHJldGFpbj1GYWxzZSwgcW9zPTApOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgCiAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltNUVRUIFB1Ymxpc2hlcl0gRXJyb3IgcHVibGlzaGluZyBldmVudHM6IHtlfSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1Ymxpc2hfYWxsKGJhdHRlcnlfZGF0YSwgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzX2VuYWJsZWQ9VHJ1ZSwgcHVibGlzaF9iYWxhbmNpbmdfZW5hYmxlZD1UcnVlKToKICAgICIiIlB1Ymxpc2ggYWxsIGJhdHRlcnkgZGF0YQogICAgCiAgICBBcmdzOgogICAgICAgIGJhdHRlcnlfZGF0YSAoZGljdCk6IEJhdHRlcnkgZGF0YSBmcm9tIGJhdHRlcnkuZ2V0X2RhdGEoKQogICAgICAgIHB1Ymxpc2hfY2VsbF92b2x0YWdlc19lbmFibGVkIChib29sKTogV2hldGhlciB0byBwdWJsaXNoIGNlbGwgdm9sdGFnZXMKICAgICAgICBwdWJsaXNoX2JhbGFuY2luZ19lbmFibGVkIChib29sKTogV2hldGhlciB0byBwdWJsaXNoIGJhbGFuY2luZyBzdGF0dXMKICAgIAogICAgUmV0dXJuczoKICAgICAgICBib29sOiBUcnVlIGlmIGFsbCBwdWJsaXNoZXMgc3VjY2Vzc2Z1bAogICAgIiIiCiAgICBzdWNjZXNzID0gVHJ1ZQogICAgCiAgICAjIFB1Ymxpc2ggc3RhdHVzIChvbmxpbmUpCiAgICBpZiBub3QgcHVibGlzaF9zdGF0dXMob25saW5lPVRydWUpOgogICAgICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgCiAgICAjIFB1Ymxpc2ggbWFpbiBpbmZvCiAgICBpZiBub3QgcHVibGlzaF9pbmZvKGJhdHRlcnlfZGF0YSk6CiAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICAKICAgICMgUHVibGlzaCBjZWxsIHZvbHRhZ2VzIChpZiBlbmFibGVkKQogICAgaWYgcHVibGlzaF9jZWxsX3ZvbHRhZ2VzX2VuYWJsZWQ6CiAgICAgICAgaWYgbm90IHB1Ymxpc2hfY2VsbF92b2x0YWdlcyhiYXR0ZXJ5X2RhdGEpOgogICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgIAogICAgIyBQdWJsaXNoIGNlbGwgYmFsYW5jaW5nIChpZiBlbmFibGVkKQogICAgaWYgcHVibGlzaF9iYWxhbmNpbmdfZW5hYmxlZDoKICAgICAgICBpZiBub3QgcHVibGlzaF9jZWxsX2JhbGFuY2luZyhiYXR0ZXJ5X2RhdGEpOgogICAgICAgICAgICBzdWNjZXNzID0gRmFsc2UKICAgIAogICAgcmV0dXJuIHN1Y2Nlc3MK",
  "/lib/ext/dbe/battery/__init__.py": "IiIiCkJhdHRlcnkgUHJvdG9jb2wgSW1wbGVtZW50YXRpb25zCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKTWljcm9QeXRob24gaW1wbGVtZW50YXRpb25zIG9mIGJhdHRlcnkgcHJvdG9jb2xzIGZyb20gQmF0dGVyeSBFbXVsYXRvci4KIiIiCg==",
  "/lib/ext/dbe/battery/nissan_leaf.py": "IiIiCk5pc3NhbiBMRUFGIEJhdHRlcnkgUHJvdG9jb2wKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgTmlzc2FuIExFQUYgYmF0dGVyeSBwcm90b2NvbCBmcm9tIEJhdHRlcnkgRW11bGF0b3IuCgpTdXBwb3J0cyBaRTAgKDIwMTEtMjAxMyksIEFaRTAgKDIwMTMtMjAxNyksIGFuZCBaRTEgKDIwMTgrKSBiYXR0ZXJ5IHBhY2tzLgoKUmVmZXJlbmNlOiBCYXR0ZXJ5LUVtdWxhdG9yL1NvZnR3YXJlL3NyYy9iYXR0ZXJ5L05JU1NBTi1MRUFGLUJBVFRFUlkuY3BwCiIiIgoKaW1wb3J0IHRpbWUKZnJvbSBsaWIuREJFLmJhdHRlcnkuYmF0dGVyeV9iYXNlIGltcG9ydCBCYXR0ZXJ5QmFzZQoKIyBDb25zdGFudHMKV0hfUEVSX0dJRCA9IDgwICAjIFdoIHBlciBHSUQgKE5pc3NhbidzIGludGVybmFsIGNhcGFjaXR5IHVuaXQpCgojIEJhdHRlcnkgdHlwZXMKWkUwX0JBVFRFUlkgPSAwICAgIyAyMDExLTIwMTMgMjRrV2gKQVpFMF9CQVRURVJZID0gMSAgIyAyMDEzLTIwMTcgMjQvMzBrV2gKWkUxX0JBVFRFUlkgPSAyICAgIyAyMDE4KyA0MC82MmtXaAoKIyBUaW1pbmcgaW50ZXJ2YWxzIChtaWxsaXNlY29uZHMpCklOVEVSVkFMXzEwX01TID0gMTAKSU5URVJWQUxfNDBfTVMgPSA0MApJTlRFUlZBTF8xMDBfTVMgPSAxMDAKSU5URVJWQUxfNTAwX01TID0gNTAwCklOVEVSVkFMXzEwX1MgPSAxMDAwMAoKCmNsYXNzIE5pc3NhbkxlYWZCYXR0ZXJ5KEJhdHRlcnlCYXNlKToKICAgICIiIk5pc3NhbiBMRUFGIGJhdHRlcnkgcHJvdG9jb2wgaW1wbGVtZW50YXRpb24KICAgIAogICAgSGFuZGxlcyBDQU4gY29tbXVuaWNhdGlvbiB3aXRoIE5pc3NhbiBMRUFGIGJhdHRlcnkgcGFja3MgKFpFMCwgQVpFMCwgWkUxKS4KICAgICIiIgogICAgCiAgICBkZWYgX19pbml0X18oc2VsZiwgY2FuX2hhbmRsZSk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBOaXNzYW4gTEVBRiBiYXR0ZXJ5IHByb3RvY29sCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgY2FuX2hhbmRsZTogQ0FOIG1hbmFnZXIgaGFuZGxlIGZyb20gQ0FOLnJlZ2lzdGVyKCkKICAgICAgICAiIiIKICAgICAgICBzdXBlcigpLl9faW5pdF9fKGNhbl9oYW5kbGUpCiAgICAgICAgCiAgICAgICAgIyBCYXR0ZXJ5IHR5cGUgZGV0ZWN0aW9uICh3aWxsIGJlIGF1dG8tZGV0ZWN0ZWQgZnJvbSBDQU4gbWVzc2FnZXMpCiAgICAgICAgc2VsZi5iYXR0ZXJ5X3R5cGUgPSBaRTBfQkFUVEVSWQogICAgICAgIAogICAgICAgICMgUmF3IGJhdHRlcnkgZGF0YSBmcm9tIENBTgogICAgICAgIHNlbGYuYmF0dGVyeV9zb2MgPSAwICAgICAgICAgICMgU3RhdGUgb2YgY2hhcmdlICgwLTEwMjMsIDAuMSUgcGVyIGJpdCkKICAgICAgICBzZWxmLmJhdHRlcnlfc29oID0gMTAwICAgICAgICAjIFN0YXRlIG9mIGhlYWx0aCAoMC0xMDAlKQogICAgICAgIHNlbGYuYmF0dGVyeV9naWRzID0gMCAgICAgICAgICMgQ3VycmVudCBHSURTCiAgICAgICAgc2VsZi5iYXR0ZXJ5X21heF9naWRzID0gMjgxICAgIyBNYXhpbXVtIEdJRFMgKGRlZmF1bHQgZm9yIDI0a1doKQogICAgICAgIHNlbGYuYmF0dGVyeV93aF9yZW1haW5pbmcgPSAwICMgV2ggcmVtYWluaW5nCiAgICAgICAgc2VsZi5iYXR0ZXJ5X3RvdGFsX3ZvbHRhZ2UgPSAwICAjIFBhY2sgdm9sdGFnZSAoMC41ViBwZXIgYml0KQogICAgICAgIHNlbGYuYmF0dGVyeV9jdXJyZW50ID0gMCAgICAgICMgUGFjayBjdXJyZW50ICgwLjVBIHBlciBiaXQsIHNpZ25lZCkKICAgICAgICBzZWxmLmJhdHRlcnlfYXZnX3RlbXAgPSAwICAgICAjIEF2ZXJhZ2UgdGVtcGVyYXR1cmUgKMKwQykKICAgICAgICBzZWxmLmJhdHRlcnlfdGVtcF9taW4gPSAwICAgICAjIE1pbiB0ZW1wZXJhdHVyZSAowrBDKQogICAgICAgIHNlbGYuYmF0dGVyeV90ZW1wX21heCA9IDAgICAgICMgTWF4IHRlbXBlcmF0dXJlICjCsEMpCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2NoYXJnZV9wb3dlcl9saW1pdCA9IDAgICAjIGtXCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2Rpc2NoYXJnZV9wb3dlcl9saW1pdCA9IDAgICMga1cKICAgICAgICBzZWxmLmJhdHRlcnlfbWF4X3Bvd2VyX2Zvcl9jaGFyZ2VyID0gMCAgIyBrVwogICAgICAgIAogICAgICAgICMgU3RhdHVzIGZsYWdzCiAgICAgICAgc2VsZi5iYXR0ZXJ5X3JlbGF5X2N1dF9yZXF1ZXN0ID0gMAogICAgICAgIHNlbGYuYmF0dGVyeV9mYWlsc2FmZV9zdGF0dXMgPSAwCiAgICAgICAgc2VsZi5iYXR0ZXJ5X21haW5fcmVsYXlfb24gPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9mdWxsX2NoYXJnZV9mbGFnID0gRmFsc2UKICAgICAgICBzZWxmLmJhdHRlcnlfY2FwYWNpdHlfZW1wdHkgPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9pbnRlcmxvY2sgPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9jYW5fYWxpdmUgPSBGYWxzZQogICAgICAgIAogICAgICAgICMgSGVhdGluZyBzeXN0ZW0KICAgICAgICBzZWxmLmJhdHRlcnlfaGVhdF9leGlzdCA9IEZhbHNlCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRpbmdfc3RvcCA9IEZhbHNlCiAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRpbmdfc3RhcnQgPSBGYWxzZQogICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0ZXJfbWFpbF9zZW5kX3JlcXVlc3QgPSBGYWxzZQogICAgICAgIAogICAgICAgICMgVGltaW5nIGZvciB0cmFuc21pdAogICAgICAgIHNlbGYubGFzdF8xMG1zID0gMAogICAgICAgIHNlbGYubGFzdF80MG1zID0gMAogICAgICAgIHNlbGYubGFzdF8xMDBtcyA9IDAKICAgICAgICBzZWxmLmxhc3RfNTAwbXMgPSAwCiAgICAgICAgc2VsZi5sYXN0XzEwcyA9IDAKICAgICAgICAKICAgICAgICAjIENvdW50ZXJzIGZvciBtZXNzYWdlIHNlcXVlbmNpbmcKICAgICAgICBzZWxmLm1wcnVuMTByID0gMCAgIyAwLTE5IGNvdW50ZXIgZm9yIDB4MUYyCiAgICAgICAgc2VsZi5tcHJ1bjEwID0gMCAgICMgMC0zIGNvdW50ZXIKICAgICAgICBzZWxmLm1wcnVuMTAwID0gMCAgIyAwLTMgY291bnRlcgogICAgICAgIHNlbGYuY291bnRlcl8zQjggPSAwICAjIDAtMTQgY291bnRlciBmb3IgWkUxCiAgICAgICAgc2VsZi5mbGlwXzNCOCA9IEZhbHNlICAjIEZsaXAgZmxhZyBmb3IgWkUxCiAgICAgICAgCiAgICAgICAgIyBDQU4gbWVzc2FnZSB0ZW1wbGF0ZXMgKHdpbGwgYmUgcG9wdWxhdGVkIGluIHNldHVwKCkpCiAgICAgICAgc2VsZi5MRUFGXzFGMiA9IE5vbmUKICAgICAgICBzZWxmLkxFQUZfNTBCID0gTm9uZQogICAgICAgIHNlbGYuTEVBRl81MEMgPSBOb25lCiAgICAgICAgc2VsZi5MRUFGXzM1NSA9IE5vbmUKICAgICAgICBzZWxmLkxFQUZfM0I4ID0gTm9uZQogICAgICAgIHNlbGYuTEVBRl81QzUgPSBOb25lCiAgICAgICAgc2VsZi5MRUFGXzYyNiA9IE5vbmUKICAgIAogICAgZGVmIHNldHVwKHNlbGYpOgogICAgICAgICIiIkluaXRpYWxpemUgTmlzc2FuIExFQUYgYmF0dGVyeSBwcm90b2NvbAogICAgICAgIAogICAgICAgIFNldHMgdXAgQ0FOIG1lc3NhZ2UgdGVtcGxhdGVzIGZvciBrZWVwLWFsaXZlIG1lc3NhZ2VzLgogICAgICAgICIiIgogICAgICAgICMgSW5pdGlhbGl6ZSBDQU4gbWVzc2FnZSB0ZW1wbGF0ZXMKICAgICAgICBzZWxmLkxFQUZfMUYyID0gYnl0ZWFycmF5KFsweDEwLCAweDY0LCAweDAwLCAweEIwLCAweDAwLCAweDFFLCAweDAwLCAweDhGXSkKICAgICAgICBzZWxmLkxFQUZfNTBCID0gYnl0ZWFycmF5KFsweDAwLCAweDAwLCAweDA2LCAweEMwLCAweDAwLCAweDAwLCAweDAwXSkKICAgICAgICBzZWxmLkxFQUZfNTBDID0gYnl0ZWFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwXSkKICAgICAgICBzZWxmLkxFQUZfMzU1ID0gYnl0ZWFycmF5KFsweDE0LCAweDBBLCAweDEzLCAweDk3LCAweDEwLCAweDAwLCAweDQwLCAweDAwXSkKICAgICAgICBzZWxmLkxFQUZfM0I4ID0gYnl0ZWFycmF5KFsweDQwLCAweEM4LCAweDAwLCAweEZGLCAweEZGLCAweEZGLCAweEZGLCAweEZGXSkKICAgICAgICBzZWxmLkxFQUZfNUM1ID0gYnl0ZWFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwXSkKICAgICAgICBzZWxmLkxFQUZfNjI2ID0gYnl0ZWFycmF5KFsweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDAwXSkKICAgIAogICAgZGVmIGhhbmRsZV9pbmNvbWluZ19jYW5fZnJhbWUoc2VsZiwgY2FuX2lkLCBkYXRhKToKICAgICAgICAiIiJQcm9jZXNzIGluY29taW5nIENBTiBmcmFtZSBmcm9tIGJhdHRlcnkKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBjYW5faWQ6IENBTiBtZXNzYWdlIElEIChpbnQpCiAgICAgICAgICAgIGRhdGE6IENBTiBkYXRhIGJ5dGVzIChieXRlYXJyYXkvYnl0ZXMsIDAtOCBieXRlcykKICAgICAgICAiIiIKICAgICAgICBpZiBjYW5faWQgPT0gMHgxREI6CiAgICAgICAgICAgICMgQmF0dGVyeSB2b2x0YWdlLCBjdXJyZW50LCBhbmQgc3RhdHVzCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9jdXJyZW50ID0gKGRhdGFbMF0gPDwgMykgfCAoKGRhdGFbMV0gJiAweEUwKSA+PiA1KQogICAgICAgICAgICBpZiBzZWxmLmJhdHRlcnlfY3VycmVudCAmIDB4MDQwMDoKICAgICAgICAgICAgICAgICMgTmVnYXRpdmUgKDIncyBjb21wbGVtZW50KQogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2N1cnJlbnQgfD0gMHhGODAwCiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfY3VycmVudCA9IC0oMHgxMDAwMCAtIHNlbGYuYmF0dGVyeV9jdXJyZW50KQogICAgICAgICAgICAKICAgICAgICAgICAgdm9sdGFnZV9yYXcgPSAoZGF0YVsyXSA8PCAyKSB8ICgoZGF0YVszXSAmIDB4QzApID4+IDYpCiAgICAgICAgICAgIGlmIHZvbHRhZ2VfcmF3ICE9IDB4M0ZGOiAgIyAweDNGRiA9IHVuYXZhaWxhYmxlCiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfdG90YWxfdm9sdGFnZSA9IHZvbHRhZ2VfcmF3CiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmJhdHRlcnlfcmVsYXlfY3V0X3JlcXVlc3QgPSAoZGF0YVsxXSAmIDB4MTgpID4+IDMKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2ZhaWxzYWZlX3N0YXR1cyA9IGRhdGFbMV0gJiAweDA3CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9tYWluX3JlbGF5X29uID0gYm9vbCgoZGF0YVszXSAmIDB4MjApID4+IDUpCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9mdWxsX2NoYXJnZV9mbGFnID0gYm9vbCgoZGF0YVszXSAmIDB4MTApID4+IDQpCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9pbnRlcmxvY2sgPSBib29sKChkYXRhWzNdICYgMHgwOCkgPj4gMykKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBjYW5faWQgPT0gMHgxREM6CiAgICAgICAgICAgICMgUG93ZXIgbGltaXRzCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kaXNjaGFyZ2VfcG93ZXJfbGltaXQgPSAoKGRhdGFbMF0gPDwgMikgfCAoZGF0YVsxXSA+PiA2KSkgLyA0LjAKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2NoYXJnZV9wb3dlcl9saW1pdCA9ICgoKGRhdGFbMV0gJiAweDNGKSA8PCA0KSB8IChkYXRhWzJdID4+IDQpKSAvIDQuMAogICAgICAgICAgICBzZWxmLmJhdHRlcnlfbWF4X3Bvd2VyX2Zvcl9jaGFyZ2VyID0gKCgoKGRhdGFbMl0gJiAweDBGKSA8PCA2KSB8IChkYXRhWzNdID4+IDIpKSAvIDEwLjApIC0gMTAKICAgICAgICAgICAgCiAgICAgICAgZWxpZiBjYW5faWQgPT0gMHg1NUI6CiAgICAgICAgICAgICMgU3RhdGUgb2YgY2hhcmdlCiAgICAgICAgICAgIHNvY19yYXcgPSAoZGF0YVswXSA8PCAyKSB8IChkYXRhWzFdID4+IDYpCiAgICAgICAgICAgIGlmIHNvY19yYXcgIT0gMHgzRkY6ICAjIDB4M0ZGID0gdW5hdmFpbGFibGUKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9zb2MgPSBzb2NfcmF3CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9jYXBhY2l0eV9lbXB0eSA9IGJvb2woKGRhdGFbNl0gJiAweDgwKSA+PiA3KQogICAgICAgICAgICAKICAgICAgICBlbGlmIGNhbl9pZCA9PSAweDVCQzoKICAgICAgICAgICAgIyBHSURTLCBTT0gsIHRlbXBlcmF0dXJlCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9jYW5fYWxpdmUgPSBUcnVlCiAgICAgICAgICAgIAogICAgICAgICAgICBpc19tYXhfZ2lkcyA9IGJvb2woKGRhdGFbNV0gJiAweDEwKSA+PiA0KQogICAgICAgICAgICBnaWRzX3ZhbHVlID0gKGRhdGFbMF0gPDwgMikgfCAoKGRhdGFbMV0gJiAweEMwKSA+PiA2KQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgaXNfbWF4X2dpZHM6CiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfbWF4X2dpZHMgPSBnaWRzX3ZhbHVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmJhdHRlcnlfZ2lkcyA9IGdpZHNfdmFsdWUKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV93aF9yZW1haW5pbmcgPSBzZWxmLmJhdHRlcnlfZ2lkcyAqIFdIX1BFUl9HSUQKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVGVtcGVyYXR1cmUgKFpFMCBvbmx5KQogICAgICAgICAgICBpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBaRTBfQkFUVEVSWToKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9hdmdfdGVtcCA9IGRhdGFbM10gLSA0MCAgIyAtNDAgdG8gKzU1wrBDCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFN0YXRlIG9mIGhlYWx0aAogICAgICAgICAgICBzb2hfcmF3ID0gZGF0YVs0XSA+PiAxCiAgICAgICAgICAgIGlmIHNvaF9yYXcgIT0gMDoKICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9zb2ggPSBzb2hfcmF3CiAgICAgICAgICAgICAgICAKICAgICAgICBlbGlmIGNhbl9pZCA9PSAweDVDMDoKICAgICAgICAgICAgIyBUZW1wZXJhdHVyZSAoQVpFMCkgYW5kIGhlYXRpbmcgc3lzdGVtCiAgICAgICAgICAgIGlmIHNlbGYuYmF0dGVyeV90eXBlID09IEFaRTBfQkFUVEVSWToKICAgICAgICAgICAgICAgIG11eCA9IGRhdGFbMF0gPj4gNgogICAgICAgICAgICAgICAgaWYgbXV4ID09IDE6ICAjIE1BWCB0ZW1wZXJhdHVyZQogICAgICAgICAgICAgICAgICAgIHNlbGYuYmF0dGVyeV90ZW1wX21heCA9IChkYXRhWzJdIC8gMikgLSA0MAogICAgICAgICAgICAgICAgZWxpZiBtdXggPT0gMzogICMgTUlOIHRlbXBlcmF0dXJlCiAgICAgICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X3RlbXBfbWluID0gKGRhdGFbMl0gLyAyKSAtIDQwCiAgICAgICAgICAgIAogICAgICAgICAgICBzZWxmLmJhdHRlcnlfaGVhdF9leGlzdCA9IGJvb2woZGF0YVs0XSAmIDB4MDEpCiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9oZWF0aW5nX3N0b3AgPSBib29sKChkYXRhWzBdICYgMHgxMCkgPj4gNCkKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRpbmdfc3RhcnQgPSBib29sKChkYXRhWzBdICYgMHgyMCkgPj4gNSkKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2hlYXRlcl9tYWlsX3NlbmRfcmVxdWVzdCA9IGJvb2woZGF0YVsxXSAmIDB4MDEpCiAgICAgICAgICAgIAogICAgICAgIGVsaWYgY2FuX2lkID09IDB4NTlFOgogICAgICAgICAgICAjIEJhdHRlcnkgdHlwZSBkZXRlY3Rpb24gKEFaRTAgb3IgWkUxKQogICAgICAgICAgICAjIElmIHdlIHJlY2VpdmUgdGhpcyBtZXNzYWdlLCBpdCdzIG5vdCBhIFpFMAogICAgICAgICAgICBpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBaRTBfQkFUVEVSWToKICAgICAgICAgICAgICAgICMgRGV0ZWN0IEFaRTAgdnMgWkUxIGJhc2VkIG9uIG90aGVyIGNyaXRlcmlhCiAgICAgICAgICAgICAgICAjIEZvciBub3csIGFzc3VtZSBBWkUwICh3aWxsIGJlIHJlZmluZWQgd2l0aCBtb3JlIG1lc3NhZ2VzKQogICAgICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X3R5cGUgPSBBWkUwX0JBVFRFUlkKICAgIAogICAgZGVmIHRyYW5zbWl0X2NhbihzZWxmLCBjdXJyZW50X3RpbWVfbXMpOgogICAgICAgICIiIlNlbmQga2VlcC1hbGl2ZSBtZXNzYWdlcyB0byBiYXR0ZXJ5CiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgY3VycmVudF90aW1lX21zOiBDdXJyZW50IHRpbWUgZnJvbSB0aW1lLnRpY2tzX21zKCkKICAgICAgICAiIiIKICAgICAgICAjIFNlbmQgMTBtcyBtZXNzYWdlICgweDFGMikKICAgICAgICBpZiB0aW1lLnRpY2tzX2RpZmYoY3VycmVudF90aW1lX21zLCBzZWxmLmxhc3RfMTBtcykgPj0gSU5URVJWQUxfMTBfTVM6CiAgICAgICAgICAgIHNlbGYubGFzdF8xMG1zID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIHNlbGYuX3RyYW5zbWl0XzFGMigpCiAgICAgICAgICAgIAogICAgICAgICMgU2VuZCA0MG1zIG1lc3NhZ2UgKDB4MzU1IGZvciBaRTEgb25seSkKICAgICAgICBpZiB0aW1lLnRpY2tzX2RpZmYoY3VycmVudF90aW1lX21zLCBzZWxmLmxhc3RfNDBtcykgPj0gSU5URVJWQUxfNDBfTVM6CiAgICAgICAgICAgIHNlbGYubGFzdF80MG1zID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIGlmIHNlbGYuYmF0dGVyeV90eXBlID09IFpFMV9CQVRURVJZOgogICAgICAgICAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKDB4MzU1LCBzZWxmLkxFQUZfMzU1KQogICAgICAgIAogICAgICAgICMgU2VuZCAxMDBtcyBtZXNzYWdlcwogICAgICAgIGlmIHRpbWUudGlja3NfZGlmZihjdXJyZW50X3RpbWVfbXMsIHNlbGYubGFzdF8xMDBtcykgPj0gSU5URVJWQUxfMTAwX01TOgogICAgICAgICAgICBzZWxmLmxhc3RfMTAwbXMgPSBjdXJyZW50X3RpbWVfbXMKICAgICAgICAgICAgc2VsZi5fdHJhbnNtaXRfMTAwbXNfbWVzc2FnZXMoKQogICAgCiAgICBkZWYgX3RyYW5zbWl0XzFGMihzZWxmKToKICAgICAgICAiIiJUcmFuc21pdCAweDFGMiBrZWVwLWFsaXZlIG1lc3NhZ2UgKDEwbXMgaW50ZXJ2YWwpCiAgICAgICAgCiAgICAgICAgVGhpcyBtZXNzYWdlIGhhcyBhIGNvbXBsZXggMjAtc3RlcCBzZXF1ZW5jZSBwYXR0ZXJuLgogICAgICAgICIiIgogICAgICAgICMgVXBkYXRlIG1lc3NhZ2UgYmFzZWQgb24gY291bnRlciAoc2ltcGxpZmllZCB2ZXJzaW9uKQogICAgICAgICMgRnVsbCBwYXR0ZXJuIGZyb20gQysrIGNvZGUgaXMgY29tcGxleCwgaW1wbGVtZW50aW5nIGtleSBwYXJ0cwogICAgICAgIAogICAgICAgIGlmIHNlbGYubXBydW4xMHIgPT0gMDoKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMlszXSA9IDB4QjAKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls2XSA9IDB4MDAKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls3XSA9IDB4OEYKICAgICAgICBlbGlmIHNlbGYubXBydW4xMHIgPT0gNToKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMlszXSA9IDB4QjQKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls2XSA9IDB4MDEKICAgICAgICAgICAgc2VsZi5MRUFGXzFGMls3XSA9IDB4ODQKICAgICAgICBlbGlmIHNlbGYubXBydW4xMHIgPT0gMTA6CiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbM10gPSAweEIwCiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbNl0gPSAweDAyCiAgICAgICAgICAgIHNlbGYuTEVBRl8xRjJbN10gPSAweDgxCiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTByID09IDE1OgogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzNdID0gMHhCNAogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzZdID0gMHgwMwogICAgICAgICAgICBzZWxmLkxFQUZfMUYyWzddID0gMHg4NgogICAgICAgIAogICAgICAgICMgVHJhbnNtaXQgbWVzc2FnZQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDFGMiwgc2VsZi5MRUFGXzFGMikKICAgICAgICAKICAgICAgICAjIFVwZGF0ZSBjb3VudGVycwogICAgICAgIHNlbGYubXBydW4xMHIgPSAoc2VsZi5tcHJ1bjEwciArIDEpICUgMjAKICAgICAgICBzZWxmLm1wcnVuMTAgPSAoc2VsZi5tcHJ1bjEwICsgMSkgJSA0CiAgICAKICAgIGRlZiBfdHJhbnNtaXRfMTAwbXNfbWVzc2FnZXMoc2VsZik6CiAgICAgICAgIiIiVHJhbnNtaXQgMTAwbXMga2VlcC1hbGl2ZSBtZXNzYWdlcyIiIgogICAgICAgICMgQWNrIGhlYXRlciByZXF1ZXN0IGlmIG5lZWRlZAogICAgICAgIGlmIHNlbGYuYmF0dGVyeV9oZWF0ZXJfbWFpbF9zZW5kX3JlcXVlc3Q6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MEJbNl0gPSAweDIwICAjIEJhdHRfSGVhdGVyX01haWxfU2VuZF9PSwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MEJbNl0gPSAweDAwICAjIEJhdHRfSGVhdGVyX01haWxfU2VuZF9ORwogICAgICAgIAogICAgICAgICMgWkUxLXNwZWNpZmljIG1lc3NhZ2VzCiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X3R5cGUgPT0gWkUxX0JBVFRFUlk6CiAgICAgICAgICAgIHNlbGYuY291bnRlcl8zQjggPSAoc2VsZi5jb3VudGVyXzNCOCArIDEpICUgMTUKICAgICAgICAgICAgc2VsZi5MRUFGXzNCOFsyXSA9IHNlbGYuY291bnRlcl8zQjgKICAgICAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKDB4M0I4LCBzZWxmLkxFQUZfM0I4KQogICAgICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoMHg1QzUsIHNlbGYuTEVBRl81QzUpCiAgICAgICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDYyNiwgc2VsZi5MRUFGXzYyNikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgRmxpcCBiaXQgaW4gMHgzQjgKICAgICAgICAgICAgaWYgc2VsZi5mbGlwXzNCODoKICAgICAgICAgICAgICAgIHNlbGYuZmxpcF8zQjggPSBGYWxzZQogICAgICAgICAgICAgICAgc2VsZi5MRUFGXzNCOFsxXSA9IDB4QzgKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuZmxpcF8zQjggPSBUcnVlCiAgICAgICAgICAgICAgICBzZWxmLkxFQUZfM0I4WzFdID0gMHhFOAogICAgICAgIAogICAgICAgICMgVkNNIHdha2Uvc2xlZXAgbWVzc2FnZQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZSgweDUwQiwgc2VsZi5MRUFGXzUwQikKICAgICAgICAKICAgICAgICAjIDB4NTBDIG1lc3NhZ2Ugd2l0aCBjb3VudGVyCiAgICAgICAgc2VsZi5MRUFGXzUwQ1szXSA9IHNlbGYubXBydW4xMDAKICAgICAgICBpZiBzZWxmLm1wcnVuMTAwID09IDA6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNF0gPSAweDVECiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNV0gPSAweEM4CiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTAwID09IDE6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNF0gPSAweEIyCiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNV0gPSAweDMxCiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTAwID09IDI6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNF0gPSAweDVECiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNV0gPSAweDYzCiAgICAgICAgZWxpZiBzZWxmLm1wcnVuMTAwID09IDM6CiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNF0gPSAweEIyCiAgICAgICAgICAgIHNlbGYuTEVBRl81MENbNV0gPSAweDlDCiAgICAgICAgCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKDB4NTBDLCBzZWxmLkxFQUZfNTBDKQogICAgICAgIAogICAgICAgICMgVXBkYXRlIGNvdW50ZXIKICAgICAgICBzZWxmLm1wcnVuMTAwID0gKHNlbGYubXBydW4xMDAgKyAxKSAlIDQKICAgIAogICAgZGVmIHVwZGF0ZV92YWx1ZXMoc2VsZik6CiAgICAgICAgIiIiVXBkYXRlIGRlcml2ZWQgdmFsdWVzIGFuZCBtYXAgdG8gYmF0dGVyeV9kYXRhIGRpY3QiIiIKICAgICAgICAjIENhbGwgcGFyZW50IHRvIGNhbGN1bGF0ZSBwb3dlcgogICAgICAgIHN1cGVyKCkudXBkYXRlX3ZhbHVlcygpCiAgICAgICAgCiAgICAgICAgIyBNYXAgcmF3IHZhbHVlcyB0byBiYXR0ZXJ5X2RhdGEKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsndm9sdGFnZV9kViddID0gc2VsZi5iYXR0ZXJ5X3RvdGFsX3ZvbHRhZ2UgKiA1ICAjIDAuNVYvYml0IC0+IGRlY2l2b2x0cwogICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydjdXJyZW50X2RBJ10gPSBzZWxmLmJhdHRlcnlfY3VycmVudCAqIDUgICMgMC41QS9iaXQgLT4gZGVjaWFtcHMKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnc29jX3BlcmNlbnQnXSA9IGludCgoc2VsZi5iYXR0ZXJ5X3NvYyAvIDEwLjIzKSkgICMgMC0xMDIzIC0+IDAtMTAwJQogICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydzb2hfcGVyY2VudCddID0gc2VsZi5iYXR0ZXJ5X3NvaAogICAgICAgIAogICAgICAgICMgVGVtcGVyYXR1cmUKICAgICAgICBpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBaRTBfQkFUVEVSWToKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3RlbXBfYXZnX0MnXSA9IHNlbGYuYmF0dGVyeV9hdmdfdGVtcAogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsndGVtcF9taW5fQyddID0gc2VsZi5iYXR0ZXJ5X2F2Z190ZW1wIC0gMQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsndGVtcF9tYXhfQyddID0gc2VsZi5iYXR0ZXJ5X2F2Z190ZW1wCiAgICAgICAgZWxpZiBzZWxmLmJhdHRlcnlfdHlwZSA9PSBBWkUwX0JBVFRFUlk6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWyd0ZW1wX21pbl9DJ10gPSBzZWxmLmJhdHRlcnlfdGVtcF9taW4KICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3RlbXBfbWF4X0MnXSA9IHNlbGYuYmF0dGVyeV90ZW1wX21heAogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsndGVtcF9hdmdfQyddID0gKHNlbGYuYmF0dGVyeV90ZW1wX21pbiArIHNlbGYuYmF0dGVyeV90ZW1wX21heCkgLyAyCiAgICAgICAgCiAgICAgICAgIyBQb3dlciBsaW1pdHMgKGtXIC0+IGRlY2lhbXBzIGFwcHJveGltYXRpb24pCiAgICAgICAgIyBBc3N1bWUgbm9taW5hbCB2b2x0YWdlIGZvciBjb252ZXJzaW9uCiAgICAgICAgbm9taW5hbF92b2x0YWdlX1YgPSBzZWxmLmJhdHRlcnlfZGF0YVsndm9sdGFnZV9kViddIC8gMTAuMAogICAgICAgIGlmIG5vbWluYWxfdm9sdGFnZV9WID4gMDoKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ21heF9jaGFyZ2VfY3VycmVudF9kQSddID0gaW50KChzZWxmLmJhdHRlcnlfY2hhcmdlX3Bvd2VyX2xpbWl0ICogMTAwMCAvIG5vbWluYWxfdm9sdGFnZV9WKSAqIDEwKQogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBJ10gPSBpbnQoKHNlbGYuYmF0dGVyeV9kaXNjaGFyZ2VfcG93ZXJfbGltaXQgKiAxMDAwIC8gbm9taW5hbF92b2x0YWdlX1YpICogMTApCiAgICAgICAgCiAgICAgICAgIyBTdGF0dXMKICAgICAgICBpZiBzZWxmLmJhdHRlcnlfZmFpbHNhZmVfc3RhdHVzID4gMDoKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3N0YXR1cyddID0gZidmYWlsc2FmZV97c2VsZi5iYXR0ZXJ5X2ZhaWxzYWZlX3N0YXR1c30nCiAgICAgICAgZWxpZiBzZWxmLmJhdHRlcnlfZnVsbF9jaGFyZ2VfZmxhZzoKICAgICAgICAgICAgc2VsZi5iYXR0ZXJ5X2RhdGFbJ3N0YXR1cyddID0gJ2Z1bGwnCiAgICAgICAgZWxpZiBzZWxmLmJhdHRlcnlfY2FwYWNpdHlfZW1wdHk6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydzdGF0dXMnXSA9ICdlbXB0eScKICAgICAgICBlbGlmIHNlbGYuYmF0dGVyeV9jYW5fYWxpdmU6CiAgICAgICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydzdGF0dXMnXSA9ICdvaycKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnc3RhdHVzJ10gPSAndW5rbm93bicKICAgICAgICAKICAgICAgICAjIEFsYXJtcy93YXJuaW5ncwogICAgICAgIGFsYXJtcyA9IDAKICAgICAgICBpZiBzZWxmLmJhdHRlcnlfcmVsYXlfY3V0X3JlcXVlc3Q6CiAgICAgICAgICAgIGFsYXJtcyB8PSAweDAxCiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X2ZhaWxzYWZlX3N0YXR1cyA+IDA6CiAgICAgICAgICAgIGFsYXJtcyB8PSAweDAyCiAgICAgICAgaWYgbm90IHNlbGYuYmF0dGVyeV9pbnRlcmxvY2s6CiAgICAgICAgICAgIGFsYXJtcyB8PSAweDA0CiAgICAgICAgaWYgc2VsZi5iYXR0ZXJ5X2dpZHMgPCAxMDoKICAgICAgICAgICAgYWxhcm1zIHw9IDB4MDgKICAgICAgICAKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnYWxhcm1zJ10gPSBhbGFybXMKICAgICAgICBzZWxmLmJhdHRlcnlfZGF0YVsnbGFzdF91cGRhdGVfbXMnXSA9IHRpbWUudGlja3NfbXMoKQogICAgICAgIHNlbGYuYmF0dGVyeV9kYXRhWydmcmFtZV9jb3VudCddICs9IDEK",
  "/lib/ext/dbe/charger/__init__.py": "IiIiCkNoYXJnZXIgUHJvdG9jb2wgSW1wbGVtZW50YXRpb25zCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKKEZ1dHVyZTogQ2hhcmdlciBzdXBwb3J0KQoiIiIK",
  "/lib/ext/dbe/inverter/__init__.py": "IiIiCkludmVydGVyIFByb3RvY29sIEltcGxlbWVudGF0aW9ucwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpNaWNyb1B5dGhvbiBpbXBsZW1lbnRhdGlvbnMgb2YgaW52ZXJ0ZXIgcHJvdG9jb2xzIChQeWxvbiBDQU4sIGV0Yy4pCiIiIgo=",
  "/lib/ext/dbe/inverter/pylon_can.py": "IiIiClB5bG9uIENBTiBQcm90b2NvbAo9PT09PT09PT09PT09PT09PT0KCk1pY3JvUHl0aG9uIHBvcnQgb2YgUHlsb24gQ0FOIGludmVydGVyIHByb3RvY29sIGZyb20gQmF0dGVyeSBFbXVsYXRvci4KClRoZSBQeWxvbiBwcm90b2NvbCBpcyB1c2VkIGJ5IG1hbnkgaW52ZXJ0ZXJzIChHcm93YXR0LCBHb29kd2UsIERleWUsIGV0Yy4pCnRvIGNvbW11bmljYXRlIHdpdGggYmF0dGVyeSBzeXN0ZW1zLgoKTk9URTogVGhpcyBpbXBsZW1lbnRhdGlvbiBzZW5kcyBQeWxvbiBDQU4gZnJhbWVzIHZpYSBSUzQ4NSAoQ0FOLW92ZXItUlM0ODUpLgpUaGUgZnJhbWVzIGFyZSBzdGFuZGFyZCBDQU4gZm9ybWF0IGJ1dCB0cmFuc21pdHRlZCBvdmVyIFJTNDg1IHBoeXNpY2FsIGxheWVyLgoKUmVmZXJlbmNlOiBCYXR0ZXJ5LUVtdWxhdG9yL1NvZnR3YXJlL3NyYy9pbnZlcnRlci9QWUxPTi1DQU4uY3BwCiIiIgoKaW1wb3J0IHN0cnVjdApmcm9tIGxpYi5EQkUuaW52ZXJ0ZXIuaW52ZXJ0ZXJfYmFzZSBpbXBvcnQgSW52ZXJ0ZXJCYXNlCmZyb20gbGliIGltcG9ydCBzZXR0aW5ncwoKCmNsYXNzIFB5bG9uQ0FOUHJvdG9jb2woSW52ZXJ0ZXJCYXNlKToKICAgICIiIlB5bG9uIENBTiBwcm90b2NvbCBpbXBsZW1lbnRhdGlvbgogICAgCiAgICBTZW5kcyBiYXR0ZXJ5IGRhdGEgdG8gaW52ZXJ0ZXIgdXNpbmcgUHlsb24gQ0FOIG1lc3NhZ2UgZm9ybWF0LgogICAgIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1YXJ0X3BvcnQ9MiwgYmF1ZHJhdGU9Tm9uZSk6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBQeWxvbiBDQU4gcHJvdG9jb2wKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICB1YXJ0X3BvcnQ6IFVBUlQgcG9ydCBudW1iZXIgKGRlZmF1bHQ6IDIpCiAgICAgICAgICAgIGJhdWRyYXRlOiBCYXVkIHJhdGUgKGRlZmF1bHQ6IGZyb20gc2V0dGluZ3Mgb3IgOTYwMCkKICAgICAgICAiIiIKICAgICAgICBzdXBlcigpLl9faW5pdF9fKHVhcnRfcG9ydCwgYmF1ZHJhdGUpCiAgICAgICAgCiAgICAgICAgIyBDb25maWd1cmF0aW9uIG9wdGlvbnMgKGZyb20gc2V0dGluZ3MpCiAgICAgICAgc2VsZi5weWxvbl9zZW5kID0gc2V0dGluZ3MuZ2V0KCdkYmUucHlsb25fc2VuZCcsIDApICAjIDAgb3IgMSAoYmF0dGVyeSBJRCkKICAgICAgICBzZWxmLnB5bG9uXzMwa19vZmZzZXQgPSBzZXR0aW5ncy5nZXQoJ2RiZS5weWxvbl8zMGtfb2Zmc2V0JywgRmFsc2UpCiAgICAgICAgc2VsZi5weWxvbl9pbnZlcnRfYnl0ZW9yZGVyID0gc2V0dGluZ3MuZ2V0KCdkYmUucHlsb25faW52ZXJ0X2J5dGVvcmRlcicsIEZhbHNlKQogICAgICAgIAogICAgICAgICMgVXNlci1jb25maWd1cmFibGUgYmF0dGVyeSBwYXJhbWV0ZXJzCiAgICAgICAgc2VsZi5pbnZlcnRlcl9jZWxscyA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX2NlbGxzJywgOTYpCiAgICAgICAgc2VsZi5pbnZlcnRlcl9tb2R1bGVzID0gc2V0dGluZ3MuZ2V0KCdkYmUuaW52ZXJ0ZXJfbW9kdWxlcycsIDEpCiAgICAgICAgc2VsZi5pbnZlcnRlcl9jZWxsc19wZXJfbW9kdWxlID0gc2V0dGluZ3MuZ2V0KCdkYmUuaW52ZXJ0ZXJfY2VsbHNfcGVyX21vZHVsZScsIDk2KQogICAgICAgIHNlbGYuaW52ZXJ0ZXJfdm9sdGFnZV9sZXZlbCA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX3ZvbHRhZ2VfbGV2ZWwnLCAzNTApCiAgICAgICAgc2VsZi5pbnZlcnRlcl9haF9jYXBhY2l0eSA9IHNldHRpbmdzLmdldCgnZGJlLmludmVydGVyX2FoX2NhcGFjaXR5JywgMTAwKQogICAgICAgIAogICAgICAgICMgVm9sdGFnZSBvZmZzZXQgZm9yIGN1dG9mZiB2b2x0YWdlcyAoZGVjaXZvbHRzKQogICAgICAgIHNlbGYudm9sdGFnZV9vZmZzZXRfZFYgPSA1MCAgIyA1LjBWIG9mZnNldAogICAgICAgIAogICAgICAgICMgQ0FOIG1lc3NhZ2UgSURzICh3aWxsIGJlIHNldCBiYXNlZCBvbiBweWxvbl9zZW5kKQogICAgICAgIHNlbGYuX3NldHVwX2Nhbl9pZHMoKQogICAgICAgIAogICAgICAgICMgQ0FOIG1lc3NhZ2UgYnVmZmVycwogICAgICAgIHNlbGYuUFlMT05fNzMxWCA9IGJ5dGVhcnJheSg4KSAgIyBFbnNlbWJsZSBpbmZvCiAgICAgICAgc2VsZi5QWUxPTl83MzJYID0gYnl0ZWFycmF5KDgpICAjIEJhdHRlcnkgcGFyYW1ldGVycwogICAgICAgIHNlbGYuUFlMT05fNDIxWCA9IGJ5dGVhcnJheSg4KSAgIyBWb2x0YWdlLCBjdXJyZW50LCBTT0MsIFNPSAogICAgICAgIHNlbGYuUFlMT05fNDIyWCA9IGJ5dGVhcnJheSg4KSAgIyBWb2x0YWdlL2N1cnJlbnQgbGltaXRzCiAgICAgICAgc2VsZi5QWUxPTl80MjNYID0gYnl0ZWFycmF5KDgpICAjIENlbGwgdm9sdGFnZXMKICAgICAgICBzZWxmLlBZTE9OXzQyNFggPSBieXRlYXJyYXkoOCkgICMgQ2VsbCB0ZW1wZXJhdHVyZXMKICAgICAgICBzZWxmLlBZTE9OXzQyNVggPSBieXRlYXJyYXkoOCkgICMgU3RhdHVzCiAgICAgICAgc2VsZi5QWUxPTl80MjZYID0gYnl0ZWFycmF5KDgpICAjIEFsYXJtcwogICAgICAgIHNlbGYuUFlMT05fNDI3WCA9IGJ5dGVhcnJheSg4KSAgIyBNb2R1bGUgdGVtcGVyYXR1cmVzCiAgICAgICAgc2VsZi5QWUxPTl80MjhYID0gYnl0ZWFycmF5KDgpICAjIENoYXJnZS9kaXNjaGFyZ2UgZW5hYmxlCiAgICAgICAgc2VsZi5QWUxPTl80MjlYID0gYnl0ZWFycmF5KDgpICAjIFJlc2VydmVkCiAgICAgICAgCiAgICAgICAgIyBJbml0aWFsaXplIHN0YXRpYyBtZXNzYWdlcwogICAgICAgIHNlbGYuX2luaXRfc3RhdGljX21lc3NhZ2VzKCkKICAgICAgICAKICAgICAgICAjIExhc3QgcmVxdWVzdCBmcm9tIGludmVydGVyCiAgICAgICAgc2VsZi5sYXN0X2ludmVydGVyX3JlcXVlc3QgPSAwCiAgICAKICAgIGRlZiBfc2V0dXBfY2FuX2lkcyhzZWxmKToKICAgICAgICAiIiJTZXR1cCBDQU4gbWVzc2FnZSBJRHMgYmFzZWQgb24gcHlsb25fc2VuZCBzZXR0aW5nIiIiCiAgICAgICAgaWYgc2VsZi5weWxvbl9zZW5kID09IDA6CiAgICAgICAgICAgICMgQmF0dGVyeSBJRCAwCiAgICAgICAgICAgIHNlbGYuSURfNzMxWCA9IDB4NzMxMAogICAgICAgICAgICBzZWxmLklEXzczMlggPSAweDczMjAKICAgICAgICAgICAgc2VsZi5JRF80MjFYID0gMHg0MjEwCiAgICAgICAgICAgIHNlbGYuSURfNDIyWCA9IDB4NDIyMAogICAgICAgICAgICBzZWxmLklEXzQyM1ggPSAweDQyMzAKICAgICAgICAgICAgc2VsZi5JRF80MjRYID0gMHg0MjQwCiAgICAgICAgICAgIHNlbGYuSURfNDI1WCA9IDB4NDI1MAogICAgICAgICAgICBzZWxmLklEXzQyNlggPSAweDQyNjAKICAgICAgICAgICAgc2VsZi5JRF80MjdYID0gMHg0MjcwCiAgICAgICAgICAgIHNlbGYuSURfNDI4WCA9IDB4NDI4MAogICAgICAgICAgICBzZWxmLklEXzQyOVggPSAweDQyOTAKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIEJhdHRlcnkgSUQgMQogICAgICAgICAgICBzZWxmLklEXzczMVggPSAweDczMTEKICAgICAgICAgICAgc2VsZi5JRF83MzJYID0gMHg3MzIxCiAgICAgICAgICAgIHNlbGYuSURfNDIxWCA9IDB4NDIxMQogICAgICAgICAgICBzZWxmLklEXzQyMlggPSAweDQyMjEKICAgICAgICAgICAgc2VsZi5JRF80MjNYID0gMHg0MjMxCiAgICAgICAgICAgIHNlbGYuSURfNDI0WCA9IDB4NDI0MQogICAgICAgICAgICBzZWxmLklEXzQyNVggPSAweDQyNTEKICAgICAgICAgICAgc2VsZi5JRF80MjZYID0gMHg0MjYxCiAgICAgICAgICAgIHNlbGYuSURfNDI3WCA9IDB4NDI3MQogICAgICAgICAgICBzZWxmLklEXzQyOFggPSAweDQyODEKICAgICAgICAgICAgc2VsZi5JRF80MjlYID0gMHg0MjkxCiAgICAKICAgIGRlZiBfaW5pdF9zdGF0aWNfbWVzc2FnZXMoc2VsZik6CiAgICAgICAgIiIiSW5pdGlhbGl6ZSBzdGF0aWMgUHlsb24gbWVzc2FnZXMgKGVuc2VtYmxlIGluZm8sIGJhdHRlcnkgcGFyYW1zKSIiIgogICAgICAgICMgMHg3MzEwLzB4NzMxMTogRW5zZW1ibGUgaW5mbyAobWFudWZhY3R1cmVyLCBtb2RlbCwgZXRjLikKICAgICAgICAjICJQWUxPTiIgaW4gQVNDSUkKICAgICAgICBzZWxmLlBZTE9OXzczMVhbMF0gPSBvcmQoJ1AnKQogICAgICAgIHNlbGYuUFlMT05fNzMxWFsxXSA9IG9yZCgnWScpCiAgICAgICAgc2VsZi5QWUxPTl83MzFYWzJdID0gb3JkKCdMJykKICAgICAgICBzZWxmLlBZTE9OXzczMVhbM10gPSBvcmQoJ08nKQogICAgICAgIHNlbGYuUFlMT05fNzMxWFs0XSA9IG9yZCgnTicpCiAgICAgICAgc2VsZi5QWUxPTl83MzFYWzVdID0gMHgwMAogICAgICAgIHNlbGYuUFlMT05fNzMxWFs2XSA9IDB4MDAKICAgICAgICBzZWxmLlBZTE9OXzczMVhbN10gPSAweDAwCiAgICAgICAgCiAgICAgICAgIyAweDczMjAvMHg3MzIxOiBCYXR0ZXJ5IHBhcmFtZXRlcnMKICAgICAgICBzZWxmLlBZTE9OXzczMlhbMF0gPSBzZWxmLmludmVydGVyX2NlbGxzICYgMHhGRgogICAgICAgIHNlbGYuUFlMT05fNzMyWFsxXSA9IChzZWxmLmludmVydGVyX2NlbGxzID4+IDgpICYgMHhGRgogICAgICAgIHNlbGYuUFlMT05fNzMyWFsyXSA9IHNlbGYuaW52ZXJ0ZXJfbW9kdWxlcwogICAgICAgIHNlbGYuUFlMT05fNzMyWFszXSA9IHNlbGYuaW52ZXJ0ZXJfY2VsbHNfcGVyX21vZHVsZQogICAgICAgIHNlbGYuUFlMT05fNzMyWFs0XSA9IHNlbGYuaW52ZXJ0ZXJfdm9sdGFnZV9sZXZlbCAmIDB4RkYKICAgICAgICBzZWxmLlBZTE9OXzczMlhbNV0gPSAoc2VsZi5pbnZlcnRlcl92b2x0YWdlX2xldmVsID4+IDgpICYgMHhGRgogICAgICAgIHNlbGYuUFlMT05fNzMyWFs2XSA9IHNlbGYuaW52ZXJ0ZXJfYWhfY2FwYWNpdHkgJiAweEZGCiAgICAgICAgc2VsZi5QWUxPTl83MzJYWzddID0gKHNlbGYuaW52ZXJ0ZXJfYWhfY2FwYWNpdHkgPj4gOCkgJiAweEZGCiAgICAKICAgIGRlZiB0cmFuc21pdChzZWxmLCBiYXR0ZXJ5X2RhdGEsIGN1cnJlbnRfdGltZV9tcyk6CiAgICAgICAgIiIiU2VuZCBiYXR0ZXJ5IGRhdGEgdG8gaW52ZXJ0ZXIgdmlhIFJTNDg1IChQeWxvbiBDQU4gZnJhbWVzKQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGJhdHRlcnlfZGF0YTogRGljdCBvZiBiYXR0ZXJ5IGRhdGEgZnJvbSBiYXR0ZXJ5LmdldF9kYXRhKCkKICAgICAgICAgICAgY3VycmVudF90aW1lX21zOiBDdXJyZW50IHRpbWUgZnJvbSB0aW1lLnRpY2tzX21zKCkKICAgICAgICAiIiIKICAgICAgICAjIFB5bG9uIHByb3RvY29sIGlzIHJlcXVlc3QtcmVzcG9uc2UgYmFzZWQKICAgICAgICAjIFdlIG9ubHkgc2VuZCBkYXRhIHdoZW4gaW52ZXJ0ZXIgcmVxdWVzdHMgaXQKICAgICAgICAjIEZvciBub3csIHNlbmQgcGVyaW9kaWNhbGx5IGF0IDFIeiAoc2ltcGxpZmllZCkKICAgICAgICAKICAgICAgICBpZiBjdXJyZW50X3RpbWVfbXMgLSBzZWxmLmxhc3RfdHJhbnNtaXRfbXMgPj0gc2VsZi50cmFuc21pdF9pbnRlcnZhbF9tczoKICAgICAgICAgICAgc2VsZi5sYXN0X3RyYW5zbWl0X21zID0gY3VycmVudF90aW1lX21zCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFVwZGF0ZSBtZXNzYWdlcyB3aXRoIGN1cnJlbnQgYmF0dGVyeSBkYXRhCiAgICAgICAgICAgIHNlbGYuX3VwZGF0ZV9tZXNzYWdlcyhiYXR0ZXJ5X2RhdGEpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFNlbmQgc3lzdGVtIGRhdGEgKG1vc3QgY29tbW9uIHJlcXVlc3QpCiAgICAgICAgICAgIHNlbGYuX3NlbmRfc3lzdGVtX2RhdGEoKQogICAgCiAgICBkZWYgX3VwZGF0ZV9tZXNzYWdlcyhzZWxmLCBiYXR0ZXJ5X2RhdGEpOgogICAgICAgICIiIlVwZGF0ZSBQeWxvbiBDQU4gbWVzc2FnZXMgd2l0aCBjdXJyZW50IGJhdHRlcnkgZGF0YQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGJhdHRlcnlfZGF0YTogRGljdCBvZiBiYXR0ZXJ5IGRhdGEKICAgICAgICAiIiIKICAgICAgICAjIEV4dHJhY3QgdmFsdWVzIGZyb20gYmF0dGVyeV9kYXRhCiAgICAgICAgdm9sdGFnZV9kViA9IGJhdHRlcnlfZGF0YS5nZXQoJ3ZvbHRhZ2VfZFYnLCAwKQogICAgICAgIGN1cnJlbnRfZEEgPSBiYXR0ZXJ5X2RhdGEuZ2V0KCdjdXJyZW50X2RBJywgMCkKICAgICAgICBzb2NfcGVyY2VudCA9IGJhdHRlcnlfZGF0YS5nZXQoJ3NvY19wZXJjZW50JywgMCkKICAgICAgICBzb2hfcGVyY2VudCA9IGJhdHRlcnlfZGF0YS5nZXQoJ3NvaF9wZXJjZW50JywgMTAwKQogICAgICAgIHRlbXBfbWF4X2RDID0gYmF0dGVyeV9kYXRhLmdldCgndGVtcF9tYXhfQycsIDI1KSAqIDEwICAjIEMgdG8gZGVjaUMKICAgICAgICB0ZW1wX21pbl9kQyA9IGJhdHRlcnlfZGF0YS5nZXQoJ3RlbXBfbWluX0MnLCAyNSkgKiAxMAogICAgICAgIGNlbGxfbWF4X21WID0gYmF0dGVyeV9kYXRhLmdldCgnY2VsbF9tYXhfbVYnLCAzNzAwKQogICAgICAgIGNlbGxfbWluX21WID0gYmF0dGVyeV9kYXRhLmdldCgnY2VsbF9taW5fbVYnLCAzNzAwKQogICAgICAgIG1heF9jaGFyZ2VfY3VycmVudF9kQSA9IGJhdHRlcnlfZGF0YS5nZXQoJ21heF9jaGFyZ2VfY3VycmVudF9kQScsIDApCiAgICAgICAgbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBID0gYmF0dGVyeV9kYXRhLmdldCgnbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBJywgMCkKICAgICAgICAKICAgICAgICAjIENhbGN1bGF0ZSBjdXRvZmYgdm9sdGFnZXMgKHNpbXBsaWZpZWQgLSB1c2luZyBmaXhlZCBvZmZzZXRzKQogICAgICAgIGNoYXJnZV9jdXRvZmZfdm9sdGFnZV9kViA9IHZvbHRhZ2VfZFYgKyBzZWxmLnZvbHRhZ2Vfb2Zmc2V0X2RWCiAgICAgICAgZGlzY2hhcmdlX2N1dG9mZl92b2x0YWdlX2RWID0gdm9sdGFnZV9kViAtIHNlbGYudm9sdGFnZV9vZmZzZXRfZFYKICAgICAgICAKICAgICAgICAjIDB4NDIxMC8weDQyMTE6IFZvbHRhZ2UsIGN1cnJlbnQsIFNPQywgU09ICiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyMVgsIDAsIHZvbHRhZ2VfZFYpCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyMVgsIDIsIGN1cnJlbnRfZEEpCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyMVgsIDQsIHRlbXBfbWF4X2RDICsgMTAwMCkgICMgQWRkIDEwMDAgb2Zmc2V0CiAgICAgICAgc2VsZi5QWUxPTl80MjFYWzZdID0gc29jX3BlcmNlbnQKICAgICAgICBzZWxmLlBZTE9OXzQyMVhbN10gPSBzb2hfcGVyY2VudAogICAgICAgIAogICAgICAgICMgMHg0MjIwLzB4NDIyMTogVm9sdGFnZS9jdXJyZW50IGxpbWl0cwogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjJYLCAwLCBjaGFyZ2VfY3V0b2ZmX3ZvbHRhZ2VfZFYpCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyMlgsIDIsIGRpc2NoYXJnZV9jdXRvZmZfdm9sdGFnZV9kVikKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDIyWCwgNCwgbWF4X2NoYXJnZV9jdXJyZW50X2RBKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjJYLCA2LCBtYXhfZGlzY2hhcmdlX2N1cnJlbnRfZEEpCiAgICAgICAgCiAgICAgICAgIyAweDQyMzAvMHg0MjMxOiBDZWxsIHZvbHRhZ2VzCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyM1gsIDAsIGNlbGxfbWF4X21WKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjNYLCAyLCBjZWxsX21pbl9tVikKICAgICAgICAKICAgICAgICAjIDB4NDI0MC8weDQyNDE6IENlbGwgdGVtcGVyYXR1cmVzCiAgICAgICAgc2VsZi5fc2V0X3UxNihzZWxmLlBZTE9OXzQyNFgsIDAsIHRlbXBfbWF4X2RDKQogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjRYLCAyLCB0ZW1wX21pbl9kQykKICAgICAgICAKICAgICAgICAjIDB4NDI1MC8weDQyNTE6IFN0YXR1cyAoMD1TbGVlcCwgMT1DaGFyZ2UsIDI9RGlzY2hhcmdlLCAzPUlkbGUpCiAgICAgICAgaWYgY3VycmVudF9kQSA8IDA6CiAgICAgICAgICAgIHNlbGYuUFlMT05fNDI1WFswXSA9IDB4MDEgICMgQ2hhcmdpbmcKICAgICAgICBlbGlmIGN1cnJlbnRfZEEgPiAwOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyNVhbMF0gPSAweDAyICAjIERpc2NoYXJnaW5nCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5QWUxPTl80MjVYWzBdID0gMHgwMyAgIyBJZGxlCiAgICAgICAgCiAgICAgICAgIyAweDQyNjAvMHg0MjYxOiBBbGFybXMgKG5vdCBpbXBsZW1lbnRlZCB5ZXQpCiAgICAgICAgc2VsZi5QWUxPTl80MjZYWzBdID0gMHgwMAogICAgICAgIAogICAgICAgICMgMHg0MjcwLzB4NDI3MTogTW9kdWxlIHRlbXBlcmF0dXJlcwogICAgICAgIHNlbGYuX3NldF91MTYoc2VsZi5QWUxPTl80MjdYLCAwLCB0ZW1wX21heF9kQykKICAgICAgICBzZWxmLl9zZXRfdTE2KHNlbGYuUFlMT05fNDI3WCwgMiwgdGVtcF9taW5fZEMpCiAgICAgICAgCiAgICAgICAgIyAweDQyODAvMHg0MjgxOiBDaGFyZ2UvZGlzY2hhcmdlIGVuYWJsZQogICAgICAgIGlmIG1heF9jaGFyZ2VfY3VycmVudF9kQSA9PSAwOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyOFhbMF0gPSAweEFBICAjIENoYXJnZSBmb3JiaWRkZW4KICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLlBZTE9OXzQyOFhbMF0gPSAweDAwICAjIENoYXJnZSBhbGxvd2VkCiAgICAgICAgCiAgICAgICAgaWYgbWF4X2Rpc2NoYXJnZV9jdXJyZW50X2RBID09IDA6CiAgICAgICAgICAgIHNlbGYuUFlMT05fNDI4WFsxXSA9IDB4QUEgICMgRGlzY2hhcmdlIGZvcmJpZGRlbgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuUFlMT05fNDI4WFsxXSA9IDB4MDAgICMgRGlzY2hhcmdlIGFsbG93ZWQKICAgICAgICAKICAgICAgICAjIEFwcGx5IDMwayBvZmZzZXQgaWYgZW5hYmxlZAogICAgICAgIGlmIHNlbGYucHlsb25fMzBrX29mZnNldDoKICAgICAgICAgICAgc2VsZi5fYXBwbHlfMzBrX29mZnNldChzZWxmLlBZTE9OXzQyMVgsIDIpICAjIEN1cnJlbnQKICAgICAgICAgICAgc2VsZi5fYXBwbHlfMzBrX29mZnNldChzZWxmLlBZTE9OXzQyMlgsIDQpICAjIE1heCBjaGFyZ2UgY3VycmVudAogICAgICAgICAgICBzZWxmLl9hcHBseV8zMGtfb2Zmc2V0KHNlbGYuUFlMT05fNDIyWCwgNikgICMgTWF4IGRpc2NoYXJnZSBjdXJyZW50CiAgICAgICAgCiAgICAgICAgIyBJbnZlcnQgYnl0ZSBvcmRlciBpZiBlbmFibGVkCiAgICAgICAgaWYgc2VsZi5weWxvbl9pbnZlcnRfYnl0ZW9yZGVyOgogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIxWCwgMCkgICMgVm9sdGFnZQogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIxWCwgMikgICMgQ3VycmVudAogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIxWCwgNCkgICMgVGVtcGVyYXR1cmUKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyMlgsIDApICAjIE1heCB2b2x0YWdlCiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjJYLCAyKSAgIyBNaW4gdm9sdGFnZQogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDIyWCwgNCkgICMgTWF4IGNoYXJnZSBjdXJyZW50CiAgICAgICAgICAgIHNlbGYuX3N3YXBfYnl0ZXMoc2VsZi5QWUxPTl80MjJYLCA2KSAgIyBNYXggZGlzY2hhcmdlIGN1cnJlbnQKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyM1gsIDApICAjIE1heCBjZWxsIHZvbHRhZ2UKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyM1gsIDIpICAjIE1pbiBjZWxsIHZvbHRhZ2UKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyNFgsIDApICAjIE1heCBjZWxsIHRlbXAKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyNFgsIDIpICAjIE1pbiBjZWxsIHRlbXAKICAgICAgICAgICAgc2VsZi5fc3dhcF9ieXRlcyhzZWxmLlBZTE9OXzQyN1gsIDApICAjIE1heCBtb2R1bGUgdGVtcAogICAgICAgICAgICBzZWxmLl9zd2FwX2J5dGVzKHNlbGYuUFlMT05fNDI3WCwgMikgICMgTWluIG1vZHVsZSB0ZW1wCiAgICAKICAgIGRlZiBfc2VuZF9zZXR1cF9pbmZvKHNlbGYpOgogICAgICAgICIiIlNlbmQgZW5zZW1ibGUgaW5mb3JtYXRpb24gKG1hbnVmYWN0dXJlciwgYmF0dGVyeSBwYXJhbXMpIiIiCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNzMxWCwgc2VsZi5QWUxPTl83MzFYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzczMlgsIHNlbGYuUFlMT05fNzMyWCkKICAgIAogICAgZGVmIF9zZW5kX3N5c3RlbV9kYXRhKHNlbGYpOgogICAgICAgICIiIlNlbmQgc3lzdGVtIGVxdWlwbWVudCBpbmZvcm1hdGlvbiAoYmF0dGVyeSBkYXRhKSIiIgogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyMVgsIHNlbGYuUFlMT05fNDIxWCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjJYLCBzZWxmLlBZTE9OXzQyMlgpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDIzWCwgc2VsZi5QWUxPTl80MjNYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyNFgsIHNlbGYuUFlMT05fNDI0WCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjVYLCBzZWxmLlBZTE9OXzQyNVgpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDI2WCwgc2VsZi5QWUxPTl80MjZYKQogICAgICAgIHNlbGYuX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLklEXzQyN1gsIHNlbGYuUFlMT05fNDI3WCkKICAgICAgICBzZWxmLl90cmFuc21pdF9jYW5fZnJhbWUoc2VsZi5JRF80MjhYLCBzZWxmLlBZTE9OXzQyOFgpCiAgICAgICAgc2VsZi5fdHJhbnNtaXRfY2FuX2ZyYW1lKHNlbGYuSURfNDI5WCwgc2VsZi5QWUxPTl80MjlYKQogICAgCiAgICBkZWYgX3RyYW5zbWl0X2Nhbl9mcmFtZShzZWxmLCBjYW5faWQsIGRhdGEpOgogICAgICAgICIiIlRyYW5zbWl0IENBTiBmcmFtZSB2aWEgUlM0ODUgKENBTi1vdmVyLVJTNDg1KQogICAgICAgIAogICAgICAgIEZyYW1lIGZvcm1hdDogW0NBTl9JRCAoMiBieXRlcywgYmlnLWVuZGlhbildIFtETEMgKDEgYnl0ZSldIFtEYXRhICgwLTggYnl0ZXMpXQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGNhbl9pZDogQ0FOIG1lc3NhZ2UgSUQgKGludCkKICAgICAgICAgICAgZGF0YTogQ0FOIGRhdGEgYnl0ZXMgKGJ5dGVhcnJheSwgOCBieXRlcykKICAgICAgICAiIiIKICAgICAgICAjIEJ1aWxkIENBTi1vdmVyLVJTNDg1IGZyYW1lCiAgICAgICAgZnJhbWUgPSBieXRlYXJyYXkoMTEpICAjIDIgKElEKSArIDEgKERMQykgKyA4IChkYXRhKQogICAgICAgIAogICAgICAgICMgQ0FOIElEIChiaWctZW5kaWFuKQogICAgICAgIGZyYW1lWzBdID0gKGNhbl9pZCA+PiA4KSAmIDB4RkYKICAgICAgICBmcmFtZVsxXSA9IGNhbl9pZCAmIDB4RkYKICAgICAgICAKICAgICAgICAjIERMQyAoYWx3YXlzIDggZm9yIFB5bG9uKQogICAgICAgIGZyYW1lWzJdID0gOAogICAgICAgIAogICAgICAgICMgRGF0YQogICAgICAgIGZyYW1lWzM6MTFdID0gZGF0YQogICAgICAgIAogICAgICAgICMgVHJhbnNtaXQgdmlhIFVBUlQKICAgICAgICBzZWxmLl90cmFuc21pdF91YXJ0KGZyYW1lKQogICAgCiAgICBkZWYgX3NldF91MTYoc2VsZiwgYnVmZmVyLCBvZmZzZXQsIHZhbHVlKToKICAgICAgICAiIiJTZXQgMTYtYml0IHVuc2lnbmVkIHZhbHVlIGluIGJ1ZmZlciAoYmlnLWVuZGlhbikKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBidWZmZXI6IEJ5dGVhcnJheSB0byB3cml0ZSB0bwogICAgICAgICAgICBvZmZzZXQ6IEJ5dGUgb2Zmc2V0CiAgICAgICAgICAgIHZhbHVlOiAxNi1iaXQgdmFsdWUKICAgICAgICAiIiIKICAgICAgICBidWZmZXJbb2Zmc2V0XSA9ICh2YWx1ZSA+PiA4KSAmIDB4RkYKICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSB2YWx1ZSAmIDB4RkYKICAgIAogICAgZGVmIF9hcHBseV8zMGtfb2Zmc2V0KHNlbGYsIGJ1ZmZlciwgb2Zmc2V0KToKICAgICAgICAiIiJBcHBseSAzMDAwMCBvZmZzZXQgdG8gMTYtYml0IHZhbHVlIGluIGJ1ZmZlcgogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGJ1ZmZlcjogQnl0ZWFycmF5IHRvIG1vZGlmeQogICAgICAgICAgICBvZmZzZXQ6IEJ5dGUgb2Zmc2V0IG9mIDE2LWJpdCB2YWx1ZQogICAgICAgICIiIgogICAgICAgIHZhbHVlID0gKGJ1ZmZlcltvZmZzZXRdIDw8IDgpIHwgYnVmZmVyW29mZnNldCArIDFdCiAgICAgICAgdmFsdWUgKz0gMzAwMDAKICAgICAgICBidWZmZXJbb2Zmc2V0XSA9ICh2YWx1ZSA+PiA4KSAmIDB4RkYKICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSB2YWx1ZSAmIDB4RkYKICAgIAogICAgZGVmIF9zd2FwX2J5dGVzKHNlbGYsIGJ1ZmZlciwgb2Zmc2V0KToKICAgICAgICAiIiJTd2FwIGJ5dGUgb3JkZXIgb2YgMTYtYml0IHZhbHVlIGluIGJ1ZmZlcgogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGJ1ZmZlcjogQnl0ZWFycmF5IHRvIG1vZGlmeQogICAgICAgICAgICBvZmZzZXQ6IEJ5dGUgb2Zmc2V0IG9mIDE2LWJpdCB2YWx1ZQogICAgICAgICIiIgogICAgICAgIGJ1ZmZlcltvZmZzZXRdLCBidWZmZXJbb2Zmc2V0ICsgMV0gPSBidWZmZXJbb2Zmc2V0ICsgMV0sIGJ1ZmZlcltvZmZzZXRdCg=="
};

// Bundled extension code
var r=class{constructor(e,t,s,i){this.device=e,this.emit=t,this.state=s,this.html=i,s.dbe||(s.dbe={config:{enabled:!1,battery_type:"nissan_leaf",rs485_baudrate:9600,inverter_protocol:"pylon_can",poll_interval:1e3,available_batteries:{},available_inverters:{}},mqttConfig:{enabled:!1,topic_prefix:"BE",publish_interval:5,publish_cell_voltages:!0,publish_balancing:!0,ha_autodiscovery:!0},mqttStatus:{connected:!1,messages_published:0,commands_received:0,last_publish_ms:0},metrics:{},status:{state:"stopped",running:!1,error:"",battery_type:"",inverter_protocol:"",frames_rx:0,frames_tx:0,last_update_ms:0},isLoading:!1,configLoaded:!1,mqttConfigLoaded:!1})}async onInstall(){if(!this.state.isConnected)return!1;console.log("[DBE] Installing device files...");try{await this.device.mkdir("/lib/ext/dbe"),await this.device.mkdir("/lib/ext/dbe/battery"),await this.device.mkdir("/lib/ext/dbe/charger"),await this.device.mkdir("/lib/ext/dbe/inverter");for(let[e,t]of Object.entries(this.deviceFiles)){let s=e.split("/").pop();console.log(`[DBE] Writing ${s}...`),await this.device.saveFile(e,t)}return console.log("[DBE] Installation complete! Device may need restart to use extension."),!0}catch(e){return console.error("[DBE] Installation failed:",e),!1}}async getDBEConfig(){if(this.state.dbe.isLoading)return console.log("[DBE] Config already loading, skipping"),this.state.dbe.config||{};try{this.state.dbe.isLoading=!0;let e=await this.device.execute("from lib.DBE.DBE_helpers import getDBEConfig; getDBEConfig()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.config=t),this.state.dbe.configLoaded=!0,this.state.dbe.isLoading=!1,this.emit("render"),this.state.dbe.config||{}}catch(e){return console.error("[DBE] Error getting config:",e),this.state.dbe.isLoading=!1,this.state.dbe.configLoaded=!0,this.state.dbe.config||{}}}async setDBEConfig(e){try{let t=await this.device.execute(`from lib.DBE.DBE_helpers import setDBEConfig; setDBEConfig(${JSON.stringify(e)})`),s=this.device.parseJSON(t);return this.state.dbe.config=e,this.emit("render"),s||{success:!0}}catch(t){return console.error("[DBE] Error setting config:",t),{error:t.message}}}async getDBEMetrics(){try{let e=await this.device.execute("from lib.DBE.DBE_helpers import getDBEMetrics; getDBEMetrics()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.metrics=t,this.emit("render")),t||{}}catch(e){return console.error("[DBE] Error getting metrics:",e),{}}}async getDBEStatus(){try{let e=await this.device.execute("from lib.DBE.DBE_helpers import getDBEStatus; getDBEStatus()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.status=t,this.emit("render")),t||{}}catch(e){return console.error("[DBE] Error getting status:",e),{}}}async startDBE(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.DBE.DBE_helpers import startDBE; startDBE()"),t=this.device.parseJSON(e);return await this.getDBEStatus(),this.state.dbe.isLoading=!1,this.emit("render"),t||{}}catch(e){return console.error("[DBE] Error starting:",e),this.state.dbe.isLoading=!1,this.emit("render"),{error:e.message}}}async stopDBE(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.DBE.DBE_helpers import stopDBE; stopDBE()"),t=this.device.parseJSON(e);return await this.getDBEStatus(),this.state.dbe.isLoading=!1,this.emit("render"),t||{}}catch(e){return console.error("[DBE] Error stopping:",e),this.state.dbe.isLoading=!1,this.emit("render"),{error:e.message}}}async getMqttConfig(){if(this.state.dbe.isLoading)return console.log("[DBE MQTT] Config already loading, skipping"),this.state.dbe.mqttConfig||{};try{this.state.dbe.isLoading=!0;let e=await this.device.execute("from lib.DBE.DBE_helpers import getMqttConfig; getMqttConfig()"),t=this.device.parseJSON(e);return t&&typeof t=="object"&&(this.state.dbe.mqttConfig=t),this.state.dbe.mqttConfigLoaded=!0,this.state.dbe.isLoading=!1,this.emit("render"),this.state.dbe.mqttConfig||{}}catch(e){return console.error("[DBE MQTT] Error getting config:",e),this.state.dbe.isLoading=!1,this.state.dbe.mqttConfigLoaded=!0,this.state.dbe.mqttConfig||{}}}async saveMqttConfig(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=this.state.dbe.mqttConfig,t=await this.device.execute(`from lib.DBE.DBE_helpers import setMqttConfig; setMqttConfig(${JSON.stringify(e)})`),s=this.device.parseJSON(t);this.state.dbe.isLoading=!1,s&&s.success?alert("\u2713 MQTT configuration saved successfully!"):alert("\u2717 Failed to save MQTT configuration: "+(s?.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 Failed to save MQTT configuration: "+e.message),this.emit("render")}}async testMqttConnection(){try{this.state.dbe.isLoading=!0,this.emit("render");let e=await this.device.execute("from lib.DBE.DBE_helpers import testMqtt; testMqtt()"),t=this.device.parseJSON(e);this.state.dbe.isLoading=!1,t&&t.success?alert("\u2713 MQTT connection successful!"):alert("\u2717 MQTT connection failed: "+(t?.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 MQTT test failed: "+e.message),this.emit("render")}}async refreshMqttStatus(){try{let e=await this.device.execute("from lib.DBE.DBE_helpers import getMqttStatus; getMqttStatus()"),t=this.device.parseJSON(e);t&&typeof t=="object"&&(this.state.dbe.mqttStatus=t,this.emit("render"))}catch(e){console.error("[DBE MQTT] Error getting status:",e)}}handleMqttConfigChange(e,t){this.state.dbe.mqttConfig[e]=t,this.emit("render")}renderConfig(){if(!this.state.dbe.configLoaded&&!this.state.dbe.isLoading&&this.state.isConnected&&setTimeout(()=>{this.getDBEConfig().catch(a=>{console.error("[DBE] getDBEConfig() error:",a)})},0),this.state.isConnected&&!this.state.dbe.isLoading){let a=Date.now();(!this.state.dbe.lastStatusRefresh||a-this.state.dbe.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getDBEStatus(),this.state.dbe.lastStatusRefresh=Date.now()},0)}let t=this.state.dbe.config,i=(this.state.dbe.status||{}).running;return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>DBE Configuration</h2>
          <div style="display: flex; gap: 8px;">
            <button 
              class="dbe-button ${i?"stop":"start"}"
              onclick=${()=>i?this.stopDBE():this.startDBE()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading||!t.enabled}
              style="min-width: 120px;"
            >
              ${i?"Stop":"Start"}
            </button>
            <button 
              class="dbe-button"
              onclick=${()=>this.saveConfig()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading}
              style="min-width: 120px;"
            >
              Save
            </button>
          </div>
        </div>
        <div class="dbe-section" style="padding: 20px;">
          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.enabled}
                onchange=${a=>this.handleConfigChange("enabled",a.target.checked)}
              />
              Enable DBE Bridge
            </label>
          </div>

          <div class="dbe-field">
            <label>Battery Type</label>
            <select 
              value="${t.battery_type||"nissan_leaf"}"
              onchange=${a=>this.handleConfigChange("battery_type",a.target.value)}
              disabled=${!this.state.isConnected}
            >
              ${t.available_batteries&&Object.keys(t.available_batteries).length>0?Object.entries(t.available_batteries).map(([a,n])=>this.html`
                  <option value="${a}" ${t.battery_type===a?"selected":""}>${n}</option>
                `):this.html`
                  <option value="nissan_leaf" ${t.battery_type==="nissan_leaf"?"selected":""}>Nissan LEAF (ZE0/AZE0/ZE1)</option>
                `}
            </select>
          </div>

          <div class="dbe-field">
            <label>RS485 Baudrate</label>
            <select 
              value="${t.rs485_baudrate||9600}"
              onchange=${a=>this.handleConfigChange("rs485_baudrate",parseInt(a.target.value))}
              disabled=${!this.state.isConnected}
            >
              <option value="9600">9600</option>
              <option value="19200">19200</option>
              <option value="38400">38400</option>
              <option value="57600">57600</option>
              <option value="115200">115200</option>
            </select>
          </div>

          <div class="dbe-field">
            <label>Inverter Protocol</label>
            <select 
              value="${t.inverter_protocol||"pylon_can"}"
              onchange=${a=>this.handleConfigChange("inverter_protocol",a.target.value)}
              disabled=${!this.state.isConnected}
            >
              ${t.available_inverters&&Object.keys(t.available_inverters).length>0?Object.entries(t.available_inverters).map(([a,n])=>this.html`
                  <option value="${a}" ${t.inverter_protocol===a?"selected":""}>${n}</option>
                `):this.html`
                  <option value="pylon_can" ${t.inverter_protocol==="pylon_can"?"selected":""}>Pylon CAN Protocol</option>
                `}
            </select>
          </div>

          <div class="dbe-field">
            <label>Poll Interval (ms)</label>
            <input 
              type="number" 
              value="${t.poll_interval||1e3}"
              placeholder="1000"
              min="100"
              max="10000"
              step="100"
              oninput=${a=>this.handleConfigChange("poll_interval",parseInt(a.target.value)||1e3)}
              disabled=${!this.state.isConnected}
            />
          </div>

          <div style="margin-top: 20px; padding: 16px; background: var(--dbe-blue-light); border-radius: 8px; border-left: 4px solid var(--dbe-blue);">
            <p style="margin: 0; font-size: 14px; color: var(--text-primary);">
              <strong>Note:</strong> CAN bus settings are configured in the System panel. 
              DBE uses the existing CAN configuration automatically.
            </p>
          </div>
        </div>
      </div>
    `}renderStatus(){if(this.state.isConnected&&!this.state.dbe.isLoading){let s=Date.now();(!this.state.dbe.lastStatusRefresh||s-this.state.dbe.lastStatusRefresh>2e3)&&setTimeout(()=>{this.getDBEStatus(),this.state.dbe.lastStatusRefresh=Date.now()},0)}let e=this.state.dbe.status||{},t=this.state.dbe.config||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Status</h2>
        </div>
        <div class="dbe-status-panel">
          <div class="dbe-status-item">
            <span class="dbe-status-label">Bridge State</span>
            <span class="dbe-status-value ${e.running?"running":e.state==="error"?"error":""}">
              ${e.state||"stopped"}
            </span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Battery Type</span>
            <span class="dbe-status-value">${e.battery_type||t.battery_type||"-"}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Inverter Protocol</span>
            <span class="dbe-status-value">${e.inverter_protocol||t.inverter_protocol||"-"}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">CAN Frames Received</span>
            <span class="dbe-status-value">${e.frames_rx||0}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">CAN Frames Transmitted</span>
            <span class="dbe-status-value">${e.frames_tx||0}</span>
          </div>

          <div class="dbe-status-item">
            <span class="dbe-status-label">Last Update</span>
            <span class="dbe-status-value">
              ${e.last_update_ms?new Date(e.last_update_ms).toLocaleTimeString():"Never"}
            </span>
          </div>

          ${e.error?this.html`
            <div class="dbe-status-item">
              <span class="dbe-status-label">Error</span>
              <span class="dbe-status-value error">${e.error}</span>
            </div>
          `:""}

          <div style="margin-top: 24px; display: flex; gap: 12px;">
            <button 
              class="dbe-button start"
              onclick=${()=>this.startDBE()}
              disabled=${!this.state.isConnected||!t.enabled||e.running||this.state.dbe.isLoading}
            >
              Start Bridge
            </button>
            <button 
              class="dbe-button stop"
              onclick=${()=>this.stopDBE()}
              disabled=${!this.state.isConnected||!e.running||this.state.dbe.isLoading}
            >
              Stop Bridge
            </button>
            <button 
              class="dbe-button secondary"
              onclick=${()=>this.getDBEStatus()}
              disabled=${!this.state.isConnected||this.state.dbe.isLoading}
            >
              Refresh Status
            </button>
          </div>
        </div>
      </div>
    `}renderMetrics(){if(this.state.isConnected&&!this.state.dbe.isLoading){let v=Date.now();(!this.state.dbe.lastMetricsRefresh||v-this.state.dbe.lastMetricsRefresh>2e3)&&setTimeout(()=>{this.getDBEMetrics(),this.state.dbe.lastMetricsRefresh=Date.now()},0)}let e=this.state.dbe.metrics||{},t=this.state.dbe.status||{},s=(e.voltage_dV||0)/10,i=(e.current_dA||0)/10,a=e.power_W||0,n=e.soc_percent||0,l=e.soh_percent||100,o=e.temp_max_C||0,c=e.temp_min_C||0,b=(e.cell_max_mV||0)/1e3,h=(e.cell_min_mV||0)/1e3,u=e.cell_deviation_mV||0,d=e.alarms||0;return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>Battery Metrics</h2>
        </div>
        
        ${t.running?this.html`
          <div style="padding: 20px;">
            <!-- SOC Gauge -->
            <div style="margin-bottom: 24px;">
              <h3 style="margin-bottom: 8px; color: var(--text-primary);">State of Charge</h3>
              <div class="dbe-soc-gauge">
                <div class="dbe-soc-fill" style="width: ${n}%">
                  ${n.toFixed(1)}%
                </div>
              </div>
            </div>

            <!-- Alarms -->
            ${d>0?this.html`
              <div style="margin-bottom: 24px;">
                <h3 style="margin-bottom: 8px; color: var(--dbe-red);">Alarms</h3>
                <div>
                  ${d&1?this.html`<span class="dbe-alarm-badge error">Relay Cut Request</span>`:""}
                  ${d&2?this.html`<span class="dbe-alarm-badge error">Failsafe Active</span>`:""}
                  ${d&4?this.html`<span class="dbe-alarm-badge warning">Interlock Open</span>`:""}
                  ${d&8?this.html`<span class="dbe-alarm-badge error">Battery Empty</span>`:""}
                </div>
              </div>
            `:""}

            <!-- Metrics Grid -->
            <div class="dbe-metrics-grid">
              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Voltage</div>
                <div class="dbe-metric-value">${s.toFixed(1)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Current</div>
                <div class="dbe-metric-value">${i.toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Power</div>
                <div class="dbe-metric-value">${(a/1e3).toFixed(2)}</div>
                <div class="dbe-metric-unit">kW</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">State of Health</div>
                <div class="dbe-metric-value">${l}</div>
                <div class="dbe-metric-unit">%</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Temperature Max</div>
                <div class="dbe-metric-value">${o.toFixed(1)}</div>
                <div class="dbe-metric-unit">C</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Temperature Min</div>
                <div class="dbe-metric-value">${c.toFixed(1)}</div>
                <div class="dbe-metric-unit">C</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Voltage Max</div>
                <div class="dbe-metric-value">${b.toFixed(3)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Voltage Min</div>
                <div class="dbe-metric-value">${h.toFixed(3)}</div>
                <div class="dbe-metric-unit">V</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Cell Deviation</div>
                <div class="dbe-metric-value">${u}</div>
                <div class="dbe-metric-unit">mV</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Max Charge Current</div>
                <div class="dbe-metric-value">${((e.max_charge_current_dA||0)/10).toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Max Discharge Current</div>
                <div class="dbe-metric-value">${((e.max_discharge_current_dA||0)/10).toFixed(1)}</div>
                <div class="dbe-metric-unit">A</div>
              </div>

              <div class="dbe-metric-card">
                <div class="dbe-metric-name">Status</div>
                <div class="dbe-metric-value" style="font-size: 16px;">${e.status||"unknown"}</div>
              </div>
            </div>
          </div>
        `:this.html`
          <div style="padding: 40px 20px; text-align: center; color: var(--text-secondary);">
            ${this.state.isConnected?"Bridge not running. Start the bridge to see metrics.":"Not connected to device."}
          </div>
        `}
      </div>
    `}renderMqtt(){if(!this.state.dbe.mqttConfigLoaded&&!this.state.dbe.isLoading&&this.state.isConnected&&setTimeout(()=>{this.getMqttConfig().catch(i=>{console.error("[DBE MQTT] getMqttConfig() error:",i)})},0),this.state.isConnected&&!this.state.dbe.isLoading){let i=Date.now();(!this.state.dbe.lastMqttStatusRefresh||i-this.state.dbe.lastMqttStatusRefresh>3e3)&&setTimeout(()=>{this.refreshMqttStatus(),this.state.dbe.lastMqttStatusRefresh=Date.now()},0)}let t=this.state.dbe.mqttConfig||{},s=this.state.dbe.mqttStatus||{};return this.html`
      <div class="system-panel">
        <div class="panel-header">
          <h2>MQTT Configuration</h2>
          <button 
            class="dbe-button"
            onclick=${()=>this.saveMqttConfig()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
            style="min-width: 120px;"
          >
            Save
          </button>
        </div>
        
        <div class="dbe-section" style="padding: 20px;">
          <div style="margin-bottom: 20px; padding: 16px; background: var(--bg-secondary); border-radius: 8px; border-left: 4px solid var(--scheme-primary);">
            <p style="margin: 0; font-size: 14px; color: var(--text-primary);">
              <strong>Note:</strong> MQTT broker settings (server, port, credentials) are configured in <strong>Networks  MQTT</strong> panel. 
              This panel configures DBE-specific MQTT settings only.
            </p>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.enabled}
                onchange=${i=>this.handleMqttConfigChange("enabled",i.target.checked)}
              />
              Enable MQTT Publishing
            </label>
          </div>

          <div class="dbe-field">
            <label>Topic Prefix</label>
            <input 
              type="text" 
              value="${t.topic_prefix||"BE"}"
              placeholder="BE"
              oninput=${i=>this.handleMqttConfigChange("topic_prefix",i.target.value)}
              disabled=${!this.state.isConnected}
            />
            <small style="color: var(--text-secondary); font-size: 12px;">
              MQTT topics will be: ${t.topic_prefix||"BE"}/info, ${t.topic_prefix||"BE"}/command/*, etc.
            </small>
          </div>

          <div class="dbe-field">
            <label>Publish Interval (seconds)</label>
            <input 
              type="number" 
              value="${t.publish_interval||5}"
              min="1" max="60"
              oninput=${i=>this.handleMqttConfigChange("publish_interval",parseInt(i.target.value))}
              disabled=${!this.state.isConnected}
            />
            <small style="color: var(--text-secondary); font-size: 12px;">
              How often to publish battery telemetry (default: 5 seconds)
            </small>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.publish_cell_voltages}
                onchange=${i=>this.handleMqttConfigChange("publish_cell_voltages",i.target.checked)}
              />
              Publish All Cell Voltages
            </label>
            <small style="color: var(--text-secondary); font-size: 12px;">
              Publishes individual cell voltages (96+ cells for Nissan LEAF). Disable to reduce bandwidth.
            </small>
          </div>

          <div class="dbe-field">
            <label>
              <input 
                type="checkbox" 
                checked=${t.ha_autodiscovery}
                onchange=${i=>this.handleMqttConfigChange("ha_autodiscovery",i.target.checked)}
              />
              Home Assistant Autodiscovery
            </label>
            <small style="color: var(--text-secondary); font-size: 12px;">
              Automatically creates sensors and buttons in Home Assistant
            </small>
          </div>
        </div>

        <!-- MQTT Status Section -->
        <div class="dbe-section" style="padding: 20px;">
          <h3>MQTT Status</h3>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Connection</span>
            <span class="dbe-status-value ${s.connected?"running":""}">
              ${s.connected?"Connected":"Disconnected"}
            </span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Broker</span>
            <span class="dbe-status-value">${s.server||"Not configured"}:${s.port||1883}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Topic Prefix</span>
            <span class="dbe-status-value">${s.topic_prefix||"BE"}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Messages Published</span>
            <span class="dbe-status-value">${s.messages_published||0}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Commands Received</span>
            <span class="dbe-status-value">${s.commands_received||0}</span>
          </div>
          <div class="dbe-status-item">
            <span class="dbe-status-label">Last Publish</span>
            <span class="dbe-status-value">
              ${s.last_publish_ms?new Date(s.last_publish_ms).toLocaleTimeString():"Never"}
            </span>
          </div>
        </div>

        <!-- Test Buttons -->
        <div style="padding: 20px; display: flex; gap: 12px;">
          <button 
            class="dbe-button start" 
            onclick=${()=>this.testMqttConnection()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
          >
            Test Connection
          </button>
          <button 
            class="dbe-button secondary" 
            onclick=${()=>this.refreshMqttStatus()}
            disabled=${!this.state.isConnected||this.state.dbe.isLoading}
          >
            Refresh Status
          </button>
        </div>
      </div>
    `}handleConfigChange(e,t){this.state.dbe.config[e]=t,this.emit("render")}async saveConfig(){try{if(this.state.dbe.isLoading=!0,this.emit("render"),!this.state.dbe.config.enabled)try{await this.stopDBE()}catch(t){console.warn("[DBE] Error stopping service:",t)}let e=await this.setDBEConfig(this.state.dbe.config);this.state.dbe.isLoading=!1,e.success?alert("\u2713 Configuration saved successfully!"):alert("\u2717 Failed to save configuration: "+(e.error||"Unknown error")),this.emit("render")}catch(e){this.state.dbe.isLoading=!1,alert("\u2717 Failed to save configuration: "+e.message),this.emit("render")}}render(e){switch(e){case"config":return this.renderConfig();case"status":return this.renderStatus();case"metrics":return this.renderMetrics();case"mqtt":return this.renderMqtt();default:return this.renderConfig()}}};export{r as default};

