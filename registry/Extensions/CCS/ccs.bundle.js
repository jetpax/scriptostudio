// === EXTENSION_BUNDLE ===
// Generated by bundle_extensions.js
// Do not edit - regenerated on each build
// BUILD_ID: 2026-02-04T02-38-57

console.log('%c[CCS] BUILD 2026-02-04T02-38-57', 'color: #ff8c00; font-weight: bold');

export const __EXTENSION_META__ = {
  "name": "CCS",
  "id": "ccs",
  "version": [
    0,
    1,
    0
  ],
  "author": "JetPax",
  "description": "CCS/NACS DC Fast Charging - EVSE emulator for contactor closure",
  "icon": "bolt",
  "iconSvg": "<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-bolt\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11\" /></svg>",
  "menu": [
    {
      "id": "config",
      "label": "Configuration"
    },
    {
      "id": "status",
      "label": "Status"
    },
    {
      "id": "V2G",
      "label": "V2G Session"
    }
  ],
  "styles": ".panel { padding: 16px; } .section { margin: 16px 0; padding: 12px; background: var(--bg-secondary); border-radius: 8px; } .section h4 { margin: 0 0 12px 0; color: var(--text-secondary); } .info-row { display: flex; justify-content: space-between; margin: 4px 0; } .label { color: var(--text-secondary); } .value { font-family: monospace; } .warning { color: #ff9800; padding: 8px; background: rgba(255, 152, 0, 0.1); border-radius: 4px; } .form-row { margin: 8px 0; display: flex; align-items: center; gap: 8px; } .form-row label { min-width: 140px; } .form-row input[type=\"number\"] { width: 60px; padding: 4px 8px; } .button-row { display: flex; gap: 8px; } button { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; } button.primary { background: #4caf50; color: white; } button.danger { background: #f44336; color: white; } .status-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 16px 0; } .status-card { background: var(--bg-secondary); padding: 16px; border-radius: 8px; text-align: center; } .status-label { font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; } .status-value { font-size: 18px; font-weight: bold; } .status-value.mono { font-family: monospace; font-size: 14px; } .status-value.success { color: #4caf50; } .success-banner { background: rgba(76, 175, 80, 0.1); border: 1px solid #4caf50; } .success-banner.highlight { background: rgba(76, 175, 80, 0.2); animation: pulse 2s infinite; } .success-banner h4 { color: #4caf50; margin: 0 0 8px 0; } .success-banner p { margin: 0; color: var(--text-secondary); } @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } } .hint { font-size: 12px; color: var(--text-secondary); } .v2g-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 16px 0; } .v2g-card { background: var(--bg-secondary); padding: 16px; border-radius: 8px; text-align: center; } .v2g-card.wide { grid-column: span 2; } .v2g-label { font-size: 12px; color: var(--text-secondary); margin-bottom: 8px; } .v2g-value { font-size: 20px; font-weight: bold; } .v2g-value.mono { font-family: monospace; font-size: 12px; } .progress-bar { height: 20px; background: var(--bg-tertiary); border-radius: 10px; overflow: hidden; margin-top: 8px; } .progress-fill { height: 100%; background: linear-gradient(90deg, #4caf50, #8bc34a); transition: width 0.3s; }",
  "devicePaths": {
    "lib/ccs/__init__.py": "/lib/ext/ccs/__init__.py",
    "lib/ccs/CCS_helpers.py": "/lib/ext/ccs/CCS_helpers.py"
  }
};

export const __DEVICE_FILES__ = {
  "/lib/ext/ccs/__init__.py": "IiIiCkNDUyBFeHRlbnNpb24gLSBDQ1MvTkFDUyBEQyBGYXN0IENoYXJnaW5nIEVWU0UgRW11bGF0b3IKIiIiCgpmcm9tIC5DQ1NfaGVscGVycyBpbXBvcnQgKAogICAgZ2V0Q0NTQ29uZmlnLAogICAgc2V0Q0NTQ29uZmlnLAogICAgc3RhcnRDQ1MsCiAgICBzdG9wQ0NTLAogICAgZ2V0Q0NTU3RhdHVzLAogICAgZ2V0VjJHU2Vzc2lvbiwKKQoKX19hbGxfXyA9IFsKICAgICdnZXRDQ1NDb25maWcnLAogICAgJ3NldENDU0NvbmZpZycsIAogICAgJ3N0YXJ0Q0NTJywKICAgICdzdG9wQ0NTJywKICAgICdnZXRDQ1NTdGF0dXMnLAogICAgJ2dldFYyR1Nlc3Npb24nLApdCg==",
  "/lib/ext/ccs/CCS_helpers.py": "IiIiCkNDUyBIZWxwZXIgRnVuY3Rpb25zCj09PT09PT09PT09PT09PT09PT09CgpEZXZpY2Utc2lkZSBoZWxwZXJzIGZvciBDQ1MvTkFDUyBjaGFyZ2luZyBleHRlbnNpb24uCgpDbGllbnQtY2FsbGFibGUgZnVuY3Rpb25zOgotIGdldENDU0NvbmZpZygpICAgICAgIC0gR2V0IGN1cnJlbnQgY29uZmlndXJhdGlvbgotIHNldENDU0NvbmZpZyhjb25maWcpIC0gU2V0IGNvbmZpZ3VyYXRpb24KLSBzdGFydENDUygpICAgICAgICAgICAtIFN0YXJ0IEVWU0UgZW11bGF0aW9uCi0gc3RvcENDUygpICAgICAgICAgICAgLSBTdG9wIEVWU0UgZW11bGF0aW9uCi0gZ2V0Q0NTU3RhdHVzKCkgICAgICAgLSBHZXQgU0xBQy9WMkcgc3RhdHVzCi0gZ2V0VjJHU2Vzc2lvbigpICAgICAgLSBHZXQgY3VycmVudCBWMkcgc2Vzc2lvbiBkYXRhCgpJbnRlcm5hbCBmdW5jdGlvbnM6Ci0gX29uX3NsYWNfY29tcGxldGUoKSAgLSBDYWxsYmFjayB3aGVuIFNMQUMgZmluaXNoZXMKLSBfdjJnX3NlcnZlcl90YXNrKCkgICAtIFYyRyBUQ1Agc2VydmVyCi0gX2hhbmRsZV92MmdfbWVzc2FnZSgpIC0gUHJvY2VzcyBWMkcgbWVzc2FnZXMKIiIiCgppbXBvcnQganNvbgppbXBvcnQgcGxjCmZyb20gbWFjaGluZSBpbXBvcnQgUFdNLCBQaW4KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIEdsb2JhbCBTdGF0ZQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCl9zdGF0ZSA9IHsKICAgICdlbmFibGVkJzogRmFsc2UsCiAgICAnY3BfcHdtJzogTm9uZSwKICAgICdjcF9waW4nOiA0LAogICAgJ3NsYWNfY29tcGxldGUnOiBGYWxzZSwKICAgICdjYXJfbWFjJzogTm9uZSwKICAgICd2Mmdfc3RhdGUnOiAnSURMRScsCiAgICAnc2Vzc2lvbl9pZCc6IE5vbmUsCiAgICAnc29jJzogTm9uZSwKICAgICd0YXJnZXRfdm9sdGFnZSc6IE5vbmUsCiAgICAndGFyZ2V0X2N1cnJlbnQnOiBOb25lLAogICAgJ2V2c2Vfdm9sdGFnZSc6IDAsCiAgICAnY29udGFjdG9yc19jbG9zZWQnOiBGYWxzZSwKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgQ29uZmlndXJhdGlvbgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBnZXRDQ1NDb25maWcoKToKICAgICIiIkdldCBjdXJyZW50IENDUyBjb25maWd1cmF0aW9uIGZyb20gc2V0dGluZ3MiIiIKICAgIHRyeToKICAgICAgICBmcm9tIGxpYi5zeXMgaW1wb3J0IHNldHRpbmdzCiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoewogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsCiAgICAgICAgICAgICdjb25maWcnOiB7CiAgICAgICAgICAgICAgICAnY3BQaW4nOiBzZXR0aW5ncy5nZXQoJ2Njc19jcF9waW4nLCA0KSwKICAgICAgICAgICAgICAgICdhdXRvU3RhcnQnOiBzZXR0aW5ncy5nZXQoJ2Njc19hdXRvX3N0YXJ0JywgRmFsc2UpLAogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogc3RyKGUpfSkKCmRlZiBzZXRDQ1NDb25maWcoY29uZmlnX2RpY3QpOgogICAgIiIiU2V0IENDUyBjb25maWd1cmF0aW9uIHZpYSBzZXR0aW5ncyBtb2R1bGUiIiIKICAgIHRyeToKICAgICAgICBmcm9tIGxpYi5zeXMgaW1wb3J0IHNldHRpbmdzCiAgICAgICAgCiAgICAgICAgaWYgJ2NwUGluJyBpbiBjb25maWdfZGljdDoKICAgICAgICAgICAgc2V0dGluZ3Muc2V0KCdjY3NfY3BfcGluJywgY29uZmlnX2RpY3RbJ2NwUGluJ10pCiAgICAgICAgICAgIF9zdGF0ZVsnY3BfcGluJ10gPSBjb25maWdfZGljdFsnY3BQaW4nXQogICAgICAgIAogICAgICAgIGlmICdhdXRvU3RhcnQnIGluIGNvbmZpZ19kaWN0OgogICAgICAgICAgICBzZXR0aW5ncy5zZXQoJ2Njc19hdXRvX3N0YXJ0JywgY29uZmlnX2RpY3RbJ2F1dG9TdGFydCddKQogICAgICAgIAogICAgICAgIHNldHRpbmdzLnNhdmUoKQogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWV9KQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU3RhcnQvU3RvcAojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBzdGFydENDUygpOgogICAgIiIiU3RhcnQgQ0NTIEVWU0UgZW11bGF0aW9uIiIiCiAgICBnbG9iYWwgX3N0YXRlCiAgICAKICAgIHRyeToKICAgICAgICAjIENoZWNrIGlmIGFscmVhZHkgcnVubmluZwogICAgICAgIGlmIF9zdGF0ZVsnZW5hYmxlZCddOgogICAgICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBUcnVlLCAnbWVzc2FnZSc6ICdBbHJlYWR5IHJ1bm5pbmcnfSkKICAgICAgICAKICAgICAgICAjIFN0YXJ0IENQIFBXTSBhdCA1JQogICAgICAgIGNwX3BpbiA9IF9zdGF0ZVsnY3BfcGluJ10KICAgICAgICBfc3RhdGVbJ2NwX3B3bSddID0gUFdNKFBpbihjcF9waW4pLCBmcmVxPTEwMDAsIGR1dHlfdTE2PWludCg2NTUzNSAqIDAuMDUpKQogICAgICAgIAogICAgICAgICMgR2VuZXJhdGUgTklEL05NSwogICAgICAgIGltcG9ydCBvcwogICAgICAgIG5pZCA9IG9zLnVyYW5kb20oNykKICAgICAgICBubWsgPSBvcy51cmFuZG9tKDE2KQogICAgICAgIHBsYy5zZXRfa2V5KG5pZCwgbm1rKQogICAgICAgIAogICAgICAgICMgU2V0IFNMQUMgY2FsbGJhY2sKICAgICAgICBwbGMuc2V0X2NhbGxiYWNrKF9vbl9zbGFjX2NvbXBsZXRlKQogICAgICAgIAogICAgICAgICMgU3RhcnQgRVZTRSBtb2RlCiAgICAgICAgcmVzdWx0ID0gcGxjLnN0YXJ0X2V2c2UoKQogICAgICAgIAogICAgICAgIGlmIHJlc3VsdDoKICAgICAgICAgICAgX3N0YXRlWydlbmFibGVkJ10gPSBUcnVlCiAgICAgICAgICAgIF9zdGF0ZVsnc2xhY19jb21wbGV0ZSddID0gRmFsc2UKICAgICAgICAgICAgX3N0YXRlWyd2Mmdfc3RhdGUnXSA9ICdJRExFJwogICAgICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBUcnVlfSkKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIENsZWFuIHVwIG9uIGZhaWx1cmUKICAgICAgICAgICAgX3N0YXRlWydjcF9wd20nXS5kZWluaXQoKQogICAgICAgICAgICBfc3RhdGVbJ2NwX3B3bSddID0gTm9uZQogICAgICAgICAgICByZXR1cm4ganNvbi5kdW1wcyh7J3N1Y2Nlc3MnOiBGYWxzZSwgJ2Vycm9yJzogJ0ZhaWxlZCB0byBzdGFydCBTTEFDJ30pCiAgICAgICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KQoKZGVmIHN0b3BDQ1MoKToKICAgICIiIlN0b3AgQ0NTIEVWU0UgZW11bGF0aW9uIiIiCiAgICBnbG9iYWwgX3N0YXRlCiAgICAKICAgIHRyeToKICAgICAgICAjIFN0b3AgU0xBQwogICAgICAgIHBsYy5zdG9wKCkKICAgICAgICAKICAgICAgICAjIFN0b3AgQ1AgUFdNCiAgICAgICAgaWYgX3N0YXRlWydjcF9wd20nXToKICAgICAgICAgICAgX3N0YXRlWydjcF9wd20nXS5kZWluaXQoKQogICAgICAgICAgICBfc3RhdGVbJ2NwX3B3bSddID0gTm9uZQogICAgICAgIAogICAgICAgICMgUmVzZXQgc3RhdGUKICAgICAgICBfc3RhdGVbJ2VuYWJsZWQnXSA9IEZhbHNlCiAgICAgICAgX3N0YXRlWydzbGFjX2NvbXBsZXRlJ10gPSBGYWxzZQogICAgICAgIF9zdGF0ZVsnY2FyX21hYyddID0gTm9uZQogICAgICAgIF9zdGF0ZVsndjJnX3N0YXRlJ10gPSAnSURMRScKICAgICAgICBfc3RhdGVbJ3Nlc3Npb25faWQnXSA9IE5vbmUKICAgICAgICBfc3RhdGVbJ2NvbnRhY3RvcnNfY2xvc2VkJ10gPSBGYWxzZQogICAgICAgIAogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IFRydWV9KQogICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBqc29uLmR1bXBzKHsnc3VjY2Vzcyc6IEZhbHNlLCAnZXJyb3InOiBzdHIoZSl9KQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU3RhdHVzCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZGVmIGdldENDU1N0YXR1cygpOgogICAgIiIiR2V0IGN1cnJlbnQgQ0NTIHN0YXR1cyIiIgogICAgdHJ5OgogICAgICAgIHBsY19zdGF0dXMgPSBwbGMuZ2V0X3N0YXR1cygpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoewogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsCiAgICAgICAgICAgICdzdGF0dXMnOiB7CiAgICAgICAgICAgICAgICAnZW5hYmxlZCc6IF9zdGF0ZVsnZW5hYmxlZCddLAogICAgICAgICAgICAgICAgJ3NsYWNTdGF0ZSc6IHBsY19zdGF0dXMuZ2V0KCdzdGF0ZScsICdVTktOT1dOJyksCiAgICAgICAgICAgICAgICAndjJnU3RhdGUnOiBfc3RhdGVbJ3YyZ19zdGF0ZSddLAogICAgICAgICAgICAgICAgJ2Nhck1hYyc6IHBsY19zdGF0dXMuZ2V0KCdjYXJfbWFjJywgX3N0YXRlWydjYXJfbWFjJ10pLAogICAgICAgICAgICAgICAgJ3Nlc3Npb25JZCc6IF9zdGF0ZVsnc2Vzc2lvbl9pZCddLAogICAgICAgICAgICAgICAgJ2NvbnRhY3RvcnNDbG9zZWQnOiBfc3RhdGVbJ2NvbnRhY3RvcnNfY2xvc2VkJ10sCiAgICAgICAgICAgICAgICAncnhDb3VudCc6IHBsY19zdGF0dXMuZ2V0KCdyeF9jb3VudCcsIDApLAogICAgICAgICAgICAgICAgJ3R4Q291bnQnOiBwbGNfc3RhdHVzLmdldCgndHhfY291bnQnLCAwKSwKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcmV0dXJuIGpzb24uZHVtcHMoeydzdWNjZXNzJzogRmFsc2UsICdlcnJvcic6IHN0cihlKX0pCgpkZWYgZ2V0VjJHU2Vzc2lvbigpOgogICAgIiIiR2V0IGN1cnJlbnQgVjJHIHNlc3Npb24gZGF0YSIiIgogICAgcmV0dXJuIGpzb24uZHVtcHMoewogICAgICAgICdzdWNjZXNzJzogVHJ1ZSwKICAgICAgICAnc2Vzc2lvbic6IHsKICAgICAgICAgICAgJ3N0YXRlJzogX3N0YXRlWyd2Mmdfc3RhdGUnXSwKICAgICAgICAgICAgJ3Nlc3Npb25JZCc6IF9zdGF0ZVsnc2Vzc2lvbl9pZCddLAogICAgICAgICAgICAnc29jJzogX3N0YXRlWydzb2MnXSwKICAgICAgICAgICAgJ3RhcmdldFZvbHRhZ2UnOiBfc3RhdGVbJ3RhcmdldF92b2x0YWdlJ10sCiAgICAgICAgICAgICd0YXJnZXRDdXJyZW50JzogX3N0YXRlWyd0YXJnZXRfY3VycmVudCddLAogICAgICAgICAgICAnZXZzZVZvbHRhZ2UnOiBfc3RhdGVbJ2V2c2Vfdm9sdGFnZSddLAogICAgICAgICAgICAnY29udGFjdG9yc0Nsb3NlZCc6IF9zdGF0ZVsnY29udGFjdG9yc19jbG9zZWQnXSwKICAgICAgICB9CiAgICB9KQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgU0xBQyBDYWxsYmFjawojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBfb25fc2xhY19jb21wbGV0ZShjYXJfbWFjKToKICAgICIiIkNhbGxlZCBieSBDIG1vZHVsZSB3aGVuIFNMQUMgY29tcGxldGVzIiIiCiAgICBnbG9iYWwgX3N0YXRlCiAgICAKICAgIHByaW50KGYiW0NDU10gU0xBQyBjb21wbGV0ZSEgQ2FyIE1BQzoge2Nhcl9tYWN9IikKICAgIF9zdGF0ZVsnc2xhY19jb21wbGV0ZSddID0gVHJ1ZQogICAgX3N0YXRlWydjYXJfbWFjJ10gPSBjYXJfbWFjCiAgICAKICAgICMgU3RhcnQgVjJHIHNlcnZlcgogICAgaW1wb3J0IF90aHJlYWQKICAgIF90aHJlYWQuc3RhcnRfbmV3X3RocmVhZChfdjJnX3NlcnZlcl90YXNrLCAoKSkKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIFYyRyBTZXJ2ZXIgKFRDUCkKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpkZWYgX3YyZ19zZXJ2ZXJfdGFzaygpOgogICAgIiIiVjJHIFRDUCBzZXJ2ZXIgdGFzayAtIHJ1bnMgaW4gYmFja2dyb3VuZCB0aHJlYWQiIiIKICAgIGdsb2JhbCBfc3RhdGUKICAgIGltcG9ydCBzb2NrZXQKICAgIAogICAgdHJ5OgogICAgICAgICMgQ3JlYXRlIElQdjYgc29ja2V0IGZvciBWMkcKICAgICAgICBzID0gc29ja2V0LnNvY2tldChzb2NrZXQuQUZfSU5FVDYsIHNvY2tldC5TT0NLX1NUUkVBTSkKICAgICAgICBzLnNldHNvY2tvcHQoc29ja2V0LlNPTF9TT0NLRVQsIHNvY2tldC5TT19SRVVTRUFERFIsIDEpCiAgICAgICAgcy5iaW5kKCgnOjonLCAxNTExOCkpCiAgICAgICAgcy5saXN0ZW4oMSkKICAgICAgICAKICAgICAgICBwcmludCgiW0NDU10gVjJHIHNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAxNTExOCIpCiAgICAgICAgX3N0YXRlWyd2Mmdfc3RhdGUnXSA9ICdXQUlUSU5HX0NPTk5FQ1RJT04nCiAgICAgICAgCiAgICAgICAgd2hpbGUgX3N0YXRlWydlbmFibGVkJ106CiAgICAgICAgICAgIHMuc2V0dGltZW91dCgxLjApCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGNvbm4sIGFkZHIgPSBzLmFjY2VwdCgpCiAgICAgICAgICAgICAgICBwcmludChmIltDQ1NdIFYyRyBjb25uZWN0aW9uIGZyb20ge2FkZHJ9IikKICAgICAgICAgICAgICAgIF9oYW5kbGVfdjJnX3Nlc3Npb24oY29ubikKICAgICAgICAgICAgZXhjZXB0IE9TRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGlmIGUuZXJybm8gPT0gMTEwOiAgIyBFVElNRURPVVQKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgcmFpc2UKICAgICAgICAgICAgICAgIAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiW0NDU10gVjJHIHNlcnZlciBlcnJvcjoge2V9IikKICAgIGZpbmFsbHk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzLmNsb3NlKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBfc3RhdGVbJ3YyZ19zdGF0ZSddID0gJ0lETEUnCgpkZWYgX2hhbmRsZV92Mmdfc2Vzc2lvbihjb25uKToKICAgICIiIkhhbmRsZSBhIHNpbmdsZSBWMkcgc2Vzc2lvbiIiIgogICAgZ2xvYmFsIF9zdGF0ZQogICAgaW1wb3J0IG9zCiAgICAKICAgIHRyeToKICAgICAgICBfc3RhdGVbJ3YyZ19zdGF0ZSddID0gJ1NFU1NJT05fU0VUVVAnCiAgICAgICAgX3N0YXRlWydzZXNzaW9uX2lkJ10gPSBvcy51cmFuZG9tKDgpLmhleCgpCiAgICAgICAgX3N0YXRlWydldnNlX3ZvbHRhZ2UnXSA9IDAKICAgICAgICAKICAgICAgICB3aGlsZSBfc3RhdGVbJ2VuYWJsZWQnXToKICAgICAgICAgICAgY29ubi5zZXR0aW1lb3V0KDUuMCkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGF0YSA9IGNvbm4ucmVjdig0MDk2KQogICAgICAgICAgICAgICAgaWYgbm90IGRhdGE6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBQcm9jZXNzIFYyRyBtZXNzYWdlCiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9wcm9jZXNzX3YyZ19tZXNzYWdlKGRhdGEpCiAgICAgICAgICAgICAgICBpZiByZXNwb25zZToKICAgICAgICAgICAgICAgICAgICBjb25uLnNlbmQocmVzcG9uc2UpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yIGFzIGU6CiAgICAgICAgICAgICAgICBpZiBlLmVycm5vID09IDExMDogICMgRVRJTUVET1VUCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIltDQ1NdIFYyRyBzZXNzaW9uIGVycm9yOiB7ZX0iKQogICAgZmluYWxseToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwogICAgICAgIF9zdGF0ZVsndjJnX3N0YXRlJ10gPSAnSURMRScKCmRlZiBfcHJvY2Vzc192MmdfbWVzc2FnZShkYXRhKToKICAgICIiIlByb2Nlc3MgaW5jb21pbmcgVjJHIG1lc3NhZ2UgYW5kIGdlbmVyYXRlIHJlc3BvbnNlIiIiCiAgICBnbG9iYWwgX3N0YXRlCiAgICAKICAgICMgVE9ETzogSW1wbGVtZW50IEVYSSBkZWNvZGluZyB2aWEgQyBtb2R1bGUKICAgICMgRm9yIG5vdywgdGhpcyBpcyBhIHBsYWNlaG9sZGVyCiAgICAKICAgICMgVGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiB3aWxsOgogICAgIyAxLiBEZWNvZGUgRVhJIG1lc3NhZ2U6IG1zZyA9IHBsYy5leGlfZGVjb2RlKGRhdGEpCiAgICAjIDIuIEhhbmRsZSBiYXNlZCBvbiBtZXNzYWdlIHR5cGUKICAgICMgMy4gRW5jb2RlIHJlc3BvbnNlOiByZXNwID0gcGxjLmV4aV9lbmNvZGUodHlwZSwgcGFyYW1zKQogICAgCiAgICBwcmludChmIltDQ1NdIFYyRyBtZXNzYWdlIHJlY2VpdmVkOiB7bGVuKGRhdGEpfSBieXRlcyIpCiAgICAKICAgICMgUGxhY2Vob2xkZXIgLSB3aGVuIEVYSSBpcyBpbXBsZW1lbnRlZDoKICAgICMgaWYgbXNnWyd0eXBlJ10gPT0gJ1ByZUNoYXJnZVJlcSc6CiAgICAjICAgICB0YXJnZXQgPSBtc2dbJ0VWVGFyZ2V0Vm9sdGFnZSddCiAgICAjICAgICBfc3RhdGVbJ3RhcmdldF92b2x0YWdlJ10gPSB0YXJnZXQKICAgICMgICAgIGlmIF9zdGF0ZVsnZXZzZV92b2x0YWdlJ10gPCB0YXJnZXQgLSAyMDoKICAgICMgICAgICAgICBfc3RhdGVbJ2V2c2Vfdm9sdGFnZSddICs9IDIwCiAgICAjICAgICBlbHNlOgogICAgIyAgICAgICAgIF9zdGF0ZVsnZXZzZV92b2x0YWdlJ10gPSB0YXJnZXQKICAgICMgICAgIF9zdGF0ZVsndjJnX3N0YXRlJ10gPSAnUFJFQ0hBUkdFJwogICAgIyAgICAgcmV0dXJuIHBsYy5leGlfZW5jb2RlKCdQcmVDaGFyZ2VSZXMnLCB7J0VWU0VQcmVzZW50Vm9sdGFnZSc6IF9zdGF0ZVsnZXZzZV92b2x0YWdlJ119KQogICAgCiAgICAjIGlmIG1zZ1sndHlwZSddID09ICdQb3dlckRlbGl2ZXJ5UmVxJyBhbmQgbXNnWydDaGFyZ2VQcm9ncmVzcyddID09ICdTdGFydCc6CiAgICAjICAgICBfc3RhdGVbJ2NvbnRhY3RvcnNfY2xvc2VkJ10gPSBUcnVlCiAgICAjICAgICBfc3RhdGVbJ3YyZ19zdGF0ZSddID0gJ1BPV0VSX0RFTElWRVJZJwogICAgCiAgICByZXR1cm4gTm9uZQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgSW5pdGlhbGl6YXRpb24KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpkZWYgX2luaXQoKToKICAgICIiIkluaXRpYWxpemUgQ0NTIG1vZHVsZSBvbiBib290IiIiCiAgICB0cnk6CiAgICAgICAgZnJvbSBsaWIuc3lzIGltcG9ydCBzZXR0aW5ncwogICAgICAgIAogICAgICAgICMgTG9hZCBzYXZlZCBjb25maWcKICAgICAgICBfc3RhdGVbJ2NwX3BpbiddID0gc2V0dGluZ3MuZ2V0KCdjY3NfY3BfcGluJywgNCkKICAgICAgICAKICAgICAgICAjIEF1dG8tc3RhcnQgaWYgZW5hYmxlZAogICAgICAgIGlmIHNldHRpbmdzLmdldCgnY2NzX2F1dG9fc3RhcnQnLCBGYWxzZSk6CiAgICAgICAgICAgIHN0YXJ0Q0NTKCkKICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJbQ0NTXSBJbml0IGVycm9yOiB7ZX0iKQo="
};

// Bundled extension code
var a=class{constructor(t,s,e,i){this.device=t,this.emit=s,this.state=e,this.html=i,e.ccs||(e.ccs={config:{cpPin:4,autoStart:!1},status:{enabled:!1,slacState:"IDLE",v2gState:"IDLE",carMac:null,sessionId:null},v2g:{soc:null,targetVoltage:null,targetCurrent:null,evseVoltage:0,contactorsClosed:!1},modem:null}),this.statusInterval=null}async onInstall(){if(!this.state.isConnected)return!1;console.log("[CCS] Installing device files...");try{await this.device.mkdir("/lib/ext/ccs");for(let[t,s]of Object.entries(this.deviceFiles)){let e=t.split("/").pop();console.log(`[CCS] Writing ${e}...`),await this.device.saveFile(t,s)}return console.log("[CCS] Installation complete! Device may need restart to use extension."),!0}catch(t){return console.error("[CCS] Installation failed:",t),!1}}async getModemInfo(){try{let t=await this.device.exec("import plc; print(plc.get_modem_info())");if(t&&t!=="None"){let s=JSON.parse(t.replace(/'/g,'"'));return this.state.ccs.modem=s,s}return null}catch(t){return console.error("getModemInfo error:",t),null}}async getStatus(){try{let t=await this.device.exec("import plc; import json; print(json.dumps(plc.get_status()))");if(t){let s=JSON.parse(t);return this.state.ccs.status.enabled=s.enabled,this.state.ccs.status.slacState=s.state,this.state.ccs.status.carMac=s.car_mac||null,s}}catch(t){console.error("getStatus error:",t)}return null}async startCCS(){try{let t=this.state.ccs.config.cpPin;return await this.device.exec(`
from machine import PWM, Pin
import plc
import os

# Start CP PWM at 5%
cp = PWM(Pin(${t}), freq=1000, duty_u16=int(65535 * 0.05))

# Generate NID/NMK
nid = os.urandom(7)
nmk = os.urandom(16)
plc.set_key(nid, nmk)

# Start EVSE mode
result = plc.start_evse()
print(result)
`),this.state.ccs.status.enabled=!0,this.emit("extensionEvent",{type:"ccs_started"}),{success:!0}}catch(t){return console.error("startCCS error:",t),{success:!1,error:t.message}}}async stopCCS(){try{return await this.device.exec(`
import plc
from machine import PWM, Pin

# Stop SLAC
plc.stop()

# Stop CP PWM
try:
    cp = PWM(Pin(${this.state.ccs.config.cpPin}))
    cp.deinit()
except:
    pass

print('stopped')
`),this.state.ccs.status.enabled=!1,this.state.ccs.status.slacState="IDLE",this.emit("extensionEvent",{type:"ccs_stopped"}),{success:!0}}catch(t){return console.error("stopCCS error:",t),{success:!1,error:t.message}}}async getV2GSession(){try{let t=await this.device.exec(`
from lib.ext.ccs.CCS_helpers import getV2GSession
print(getV2GSession())
`);if(t)return JSON.parse(t)}catch(t){console.error("getV2GSession error:",t)}return null}renderConfig(){let t=this.state.ccs.config,s=this.state.ccs.modem;return this.html`
      <div class="panel">
        <h3>‚ö° CCS/NACS Configuration</h3>
        
        <div class="section">
          <h4>Modem Status</h4>
          ${s?this.html`
            <div class="info-row">
              <span class="label">MAC:</span>
              <span class="value">${s.mac||"Unknown"}</span>
            </div>
            <div class="info-row">
              <span class="label">Firmware:</span>
              <span class="value">${s.firmware?s.firmware.substring(0,32)+"...":"Unknown"}</span>
            </div>
          `:this.html`
            <div class="warning">Modem not detected</div>
          `}
          <button onclick=${()=>this.getModemInfo().then(()=>this.emit("render"))}>
            üîÑ Refresh Modem
          </button>
        </div>

        <div class="section">
          <h4>Hardware Settings</h4>
          <div class="form-row">
            <label>CP PWM GPIO Pin:</label>
            <input type="number" 
                   value=${t.cpPin} 
                   onchange=${e=>{this.state.ccs.config.cpPin=parseInt(e.target.value)}}
                   min="0" max="48" />
          </div>
          <div class="form-row">
            <label>
              <input type="checkbox" 
                     checked=${t.autoStart}
                     onchange=${e=>{this.state.ccs.config.autoStart=e.target.checked}} />
              Auto-start on boot
            </label>
          </div>
        </div>

        <div class="section">
          <h4>Control</h4>
          <div class="button-row">
            ${this.state.ccs.status.enabled?this.html`
              <button class="danger" onclick=${()=>this.stopCCS().then(()=>this.emit("render"))}>
                ‚èπÔ∏è Stop CCS
              </button>
            `:this.html`
              <button class="primary" onclick=${()=>this.startCCS().then(()=>this.emit("render"))}>
                ‚ñ∂Ô∏è Start CCS
              </button>
            `}
          </div>
        </div>
      </div>
    `}renderStatus(){let t=this.state.ccs.status,s=this.state.ccs.v2g,e={IDLE:"#888",WAIT_PARAM_REQ:"#ff9800",WAIT_ATTEN_CHAR:"#ff9800",WAIT_MATCH_REQ:"#ff9800",MATCHED:"#4caf50",ERROR:"#f44336"};return this.html`
      <div class="panel">
        <h3>üìä CCS Status</h3>

        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">SLAC State</div>
            <div class="status-value" style="color: ${e[t.slacState]||"#888"}">
              ${t.slacState}
            </div>
          </div>

          <div class="status-card">
            <div class="status-label">V2G State</div>
            <div class="status-value">${t.v2gState}</div>
          </div>

          <div class="status-card">
            <div class="status-label">Car MAC</div>
            <div class="status-value mono">${t.carMac||"\u2014"}</div>
          </div>

          <div class="status-card">
            <div class="status-label">Contactors</div>
            <div class="status-value ${s.contactorsClosed?"success":""}">
              ${s.contactorsClosed?"\u{1F7E2} CLOSED":"\u26AA OPEN"}
            </div>
          </div>
        </div>

        ${t.slacState==="MATCHED"?this.html`
          <div class="section success-banner">
            <h4>üéâ SLAC Complete!</h4>
            <p>Vehicle connected. Ready for V2G session.</p>
          </div>
        `:""}

        ${s.contactorsClosed?this.html`
          <div class="section success-banner highlight">
            <h4>‚ö° Contactors Closed!</h4>
            <p>Battery voltage now available on CCS pins.</p>
          </div>
        `:""}

        <div class="section">
          <button onclick=${()=>this.getStatus().then(()=>this.emit("render"))}>
            üîÑ Refresh Status
          </button>
        </div>
      </div>
    `}renderV2G(){let t=this.state.ccs.v2g,s=this.state.ccs.status;return this.html`
      <div class="panel">
        <h3>üîå V2G Session</h3>

        ${s.slacState!=="MATCHED"?this.html`
          <div class="section warning">
            <p>‚è≥ Waiting for SLAC to complete...</p>
            <p class="hint">Connect vehicle to CCS port and ensure CP is at 5% PWM.</p>
          </div>
        `:this.html`
          <div class="v2g-grid">
            <div class="v2g-card">
              <div class="v2g-label">Session ID</div>
              <div class="v2g-value mono">${s.sessionId||"\u2014"}</div>
            </div>

            <div class="v2g-card">
              <div class="v2g-label">Vehicle SOC</div>
              <div class="v2g-value">${t.soc!==null?t.soc+"%":"\u2014"}</div>
            </div>

            <div class="v2g-card">
              <div class="v2g-label">Target Voltage</div>
              <div class="v2g-value">${t.targetVoltage!==null?t.targetVoltage+"V":"\u2014"}</div>
            </div>

            <div class="v2g-card">
              <div class="v2g-label">EVSE Voltage</div>
              <div class="v2g-value">${t.evseVoltage}V</div>
            </div>

            <div class="v2g-card">
              <div class="v2g-label">Target Current</div>
              <div class="v2g-value">${t.targetCurrent!==null?t.targetCurrent+"A":"\u2014"}</div>
            </div>

            <div class="v2g-card wide">
              <div class="v2g-label">V2G Protocol State</div>
              <div class="v2g-value">${s.v2gState}</div>
            </div>
          </div>

          <div class="section">
            <h4>PreCharge Simulation</h4>
            <p class="hint">Simulated EVSE voltage ramps toward target to trigger contactor closure.</p>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${t.targetVoltage?t.evseVoltage/t.targetVoltage*100:0}%"></div>
            </div>
          </div>
        `}

        <div class="section">
          <button onclick=${()=>this.getV2GSession().then(e=>{e&&Object.assign(this.state.ccs.v2g,e),this.emit("render")})}>
            üîÑ Refresh V2G
          </button>
        </div>
      </div>
    `}render(t){switch(!this.statusInterval&&this.state.ccs.status.enabled&&(this.statusInterval=setInterval(()=>{this.getStatus()},2e3)),t){case"config":return this.renderConfig();case"status":return this.renderStatus();case"v2g":return this.renderV2G();default:return this.renderConfig()}}},c=a;export{c as default};

