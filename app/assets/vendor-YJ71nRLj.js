function dc(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function pc(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var gc=mc;function mc(i,e){if(i)try{var t=document.querySelector(i);t&&t.scrollIntoView(e)}catch{}}var bc=yc;function yc(i){if(typeof document>"u")throw new Error("document-ready only runs in the browser");var e=document.readyState;if(e==="complete"||e==="interactive")return setTimeout(i,0);document.addEventListener("DOMContentLoaded",function(){i()})}nn.notEqual=vc;nn.notOk=kc;nn.equal=wc;nn.ok=nn;var Tt=nn;function wc(i,e,t){nn(i==e,t)}function vc(i,e,t){nn(i!=e,t)}function kc(i,e){nn(!i,e)}function nn(i,e){if(!i)throw new Error(e||"AssertionError")}var Sc=Tt,xc=typeof window<"u";function Ac(){var i;return xc?(window._nanoScheduler||(window._nanoScheduler=new Fi(!0)),i=window._nanoScheduler):i=new Fi,i}function Fi(i){this.hasWindow=i,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}Fi.prototype.push=function(i){Sc.equal(typeof i,"function","nanoscheduler.push: cb should be type function"),this.queue.push(i),this.schedule()};Fi.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var i=this;this.method(function(e){for(var t;i.queue.length&&e.timeRemaining()>0;)t=i.queue.shift(),t(e);i.scheduled=!1,i.queue.length&&i.schedule()})}};Fi.prototype.setTimeout=function(i){setTimeout(i,0,{timeRemaining:function(){return 1}})};var Ec=Ac,vh=Ec(),_c=Tt,an;is.disabled=!0;try{an=window.performance,is.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!an.mark}catch{}var zo=is;function is(i){if(_c.equal(typeof i,"string","nanotiming: name should be type string"),is.disabled)return Tc;var e=(an.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,t="start-"+e+"-"+i;an.mark(t);function n(r){var s="end-"+e+"-"+i;an.mark(s),vh.push(function(){var o=null;try{var a=i+" ["+e+"]";an.measure(a,t,s),an.clearMarks(t),an.clearMarks(s)}catch(l){o=l}r&&r(o,i)})}return n.uuid=e,n}function Tc(i){i&&vh.push(function(){i(new Error("nanotiming: performance API unavailable"))})}var Fr=Tt,Cc=Xn;function Xn(){if(!(this instanceof Xn))return new Xn;this.trie={nodes:{}}}Xn.prototype.create=function(i){Fr.equal(typeof i,"string","route should be a string");var e=i.replace(/^\//,"").split("/");function t(n,r){var s=Tr(e,n)&&e[n];if(s===!1)return r;var o=null;return/^:|^\*/.test(s)?(Tr(r.nodes,"$$")?o=r.nodes.$$:(o={nodes:{}},r.nodes.$$=o),s[0]==="*"&&(r.wildcard=!0),r.name=s.replace(/^:|^\*/,"")):Tr(r.nodes,s)?o=r.nodes[s]:(o={nodes:{}},r.nodes[s]=o),t(n+1,o)}return t(0,this.trie)};Xn.prototype.match=function(i){Fr.equal(typeof i,"string","route should be a string");var e=i.replace(/^\//,"").split("/"),t={};function n(s,o){if(o!==void 0){var a=e[s];if(a===void 0)return o;if(Tr(o.nodes,a))return n(s+1,o.nodes[a]);if(o.name){try{t[o.name]=decodeURIComponent(a)}catch{return n(s,void 0)}return n(s+1,o.nodes.$$)}else if(o.wildcard){try{t.wildcard=decodeURIComponent(e.slice(s).join("/"))}catch{return n(s,void 0)}return o.nodes.$$}else return n(s+1)}}var r=n(0,this.trie);if(r)return r=Object.assign({},r),r.params=t,r};Xn.prototype.mount=function(i,e){Fr.equal(typeof i,"string","route should be a string"),Fr.equal(typeof e,"object","trie should be a object");var t=i.replace(/^\//,"").split("/"),n=null,r=null;if(t.length===1)r=t[0],n=this.create(r);else{var s=t.join("/");r=t[0],n=this.create(s)}Object.assign(n.nodes,e.nodes),e.name&&(n.name=e.name),n.nodes[""]&&(Object.keys(n.nodes[""]).forEach(function(o){o!=="nodes"&&(n[o]=n.nodes[""][o])}),Object.assign(n.nodes,n.nodes[""].nodes),delete n.nodes[""].nodes)};function Tr(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var Ss=Tt,Rc=Cc,Mc=Ks;function Ks(i){if(!(this instanceof Ks))return new Ks(i);var e=(i||"").replace(/^\//,""),t=Rc();return r._trie=t,r.on=n,r.emit=r,r.match=s,r._wayfarer=!0,r;function n(a,l){if(Ss.equal(typeof a,"string"),Ss.equal(typeof l,"function"),a=a||"/",l._wayfarer&&l._trie)t.mount(a,l._trie.trie);else{var h=t.create(a);h.cb=l,h.route=a}return r}function r(a){var l=s(a),h=new Array(arguments.length);h[0]=l.params;for(var u=1;u<h.length;u++)h[u]=arguments[u];return l.cb.apply(l.cb,h)}function s(a){Ss.notEqual(a,void 0,"'route' must be defined");var l=t.match(a);if(l&&l.cb)return new o(l);var h=t.match(e);if(h&&h.cb)return new o(h);throw new Error("route '"+a+"' did not match")}function o(a){this.cb=a.cb,this.route=a.route,this.params=a.params}}var qo=Tt,Ic=Mc,kh=/file:\/\//.test(typeof window=="object"&&window.location&&window.location.origin),Bc="^(file://|/)(.*.html?/?)?",Oc="^(http(s)?(://))?(www.)?",Lc="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",Dc="[?].*$",Nc=new RegExp(Bc),Pc=new RegExp(Oc+Lc),Fc=new RegExp("#"),$c=new RegExp(Dc),Wc=Jn;function Jn(i){if(!(this instanceof Jn))return new Jn(i);i=i||{},this.router=Ic(i.default||"/404")}Jn.prototype.on=function(i,e){qo.equal(typeof i,"string"),i=i.replace(/^[#/]/,""),this.router.on(i,e)};Jn.prototype.emit=function(i){return qo.equal(typeof i,"string"),i=Sh(i,kh),this.router.emit(i)};Jn.prototype.match=function(i){return qo.equal(typeof i,"string"),i=Sh(i,kh),this.router.match(i)};function Sh(i,e){return e?i=i.replace(Nc,""):i=i.replace(Pc,""),decodeURI(i.replace($c,"").replace(Fc,"/"))}var Uc=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],xh=Uc,jc=xh.length,Hc=1,Vc=3,zc=8,qc=Gc;function Gc(i,e){var t=i.nodeType,n=i.nodeName;t===Hc&&Kc(i,e),(t===Vc||t===zc)&&e.nodeValue!==i.nodeValue&&(e.nodeValue=i.nodeValue),n==="INPUT"?Jc(i,e):n==="OPTION"?Xc(i,e):n==="TEXTAREA"&&Zc(i,e),Yc(i,e)}function Kc(i,e){for(var t=e.attributes,n=i.attributes,r=null,s=null,o=null,a=null,l=null,h=n.length-1;h>=0;--h)l=n[h],a=l.name,r=l.namespaceURI,s=l.value,r?(a=l.localName||a,o=e.getAttributeNS(r,a),o!==s&&e.setAttributeNS(r,a,s)):e.hasAttribute(a)?(o=e.getAttribute(a),o!==s&&(s==="null"||s==="undefined"?e.removeAttribute(a):e.setAttribute(a,s))):e.setAttribute(a,s);for(var u=t.length-1;u>=0;--u)l=t[u],l.specified!==!1&&(a=l.name,r=l.namespaceURI,r?(a=l.localName||a,i.hasAttributeNS(r,a)||e.removeAttributeNS(r,a)):i.hasAttributeNS(null,a)||e.removeAttribute(a))}function Yc(i,e){for(var t=0;t<jc;t++){var n=xh[t];i[n]?e[n]=i[n]:e[n]&&(e[n]=void 0)}}function Xc(i,e){Ys(i,e,"selected")}function Jc(i,e){var t=i.value,n=e.value;Ys(i,e,"checked"),Ys(i,e,"disabled"),i.indeterminate!==e.indeterminate&&(e.indeterminate=i.indeterminate),e.type!=="file"&&(t!==n&&(e.setAttribute("value",t),e.value=t),t==="null"&&(e.value="",e.removeAttribute("value")),i.hasAttributeNS(null,"value")?e.type==="range"&&(e.value=t):e.removeAttribute("value"))}function Zc(i,e){var t=i.value;if(t!==e.value&&(e.value=t),e.firstChild&&e.firstChild.nodeValue!==t){if(t===""&&e.firstChild.nodeValue===e.placeholder)return;e.firstChild.nodeValue=t}}function Ys(i,e,t){i[t]!==e[t]&&(e[t]=i[t],i[t]?e.setAttribute(t,""):e.removeAttribute(t))}var xs=Tt,Qc=qc,ed=3,Ah=td;function td(i,e,t){return xs.equal(typeof i,"object","nanomorph: oldTree should be an object"),xs.equal(typeof e,"object","nanomorph: newTree should be an object"),t&&t.childrenOnly?(Eh(e,i),i):(xs.notEqual(e.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),Cr(e,i))}function Cr(i,e){return e?i?i.isSameNode&&i.isSameNode(e)?e:i.tagName!==e.tagName||Wl(i)!==Wl(e)?i:(Qc(i,e),Eh(i,e),e):null:i}function Wl(i){return i.dataset?i.dataset.nanomorphComponentId:void 0}function Eh(i,e){for(var t,n,r,s,o=0,a=0;t=e.childNodes[a],n=i.childNodes[a-o],!(!t&&!n);a++)if(!n)e.removeChild(t),a--;else if(!t)e.appendChild(n),o++;else if(Ul(n,t))r=Cr(n,t),r!==t&&(e.replaceChild(r,t),o++);else{s=null;for(var l=a;l<e.childNodes.length;l++)if(Ul(e.childNodes[l],n)){s=e.childNodes[l];break}s?(r=Cr(n,s),r!==s&&o++,e.insertBefore(r,t)):!n.id&&!t.id?(r=Cr(n,t),r!==t&&(e.replaceChild(r,t),o++)):(e.insertBefore(n,t),o++)}}function Ul(i,e){return i.id?i.id===e.id:i.isSameNode?i.isSameNode(e):i.tagName!==e.tagName?!1:i.type===ed?i.nodeValue===e.nodeValue:!1}var nd=/([^?=&]+)(=([^&]*))?/g,id=Tt,rd=sd;function sd(i){id.equal(typeof i,"string","nanoquery: url should be type string");var e={};return i.replace(/^.*\?/,"").replace(nd,function(t,n,r,s){var o=decodeURIComponent(s),a=decodeURIComponent(n);e.hasOwnProperty(a)?Array.isArray(e[a])?e[a].push(o):e[a]=[e[a],o]:e[a]=o}),e}var As=Tt,od=/(noopener|noreferrer) (noopener|noreferrer)/,ld=/^[\w-_]+:/,ad=hd;function hd(i,e){As.notEqual(typeof window,"undefined","nanohref: expected window to exist"),e=e||window.document,As.equal(typeof i,"function","nanohref: cb should be type function"),As.equal(typeof e,"object","nanohref: root should be type object"),window.addEventListener("click",function(t){if(!(t.button&&t.button!==0||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.defaultPrevented)){var n=function r(s){if(!(!s||s===e))return s.localName!=="a"||s.href===void 0?r(s.parentNode):s}(t.target);n&&(window.location.protocol!==n.protocol||window.location.hostname!==n.hostname||window.location.port!==n.port||n.hasAttribute("data-nanohref-ignore")||n.hasAttribute("download")||n.getAttribute("target")==="_blank"&&od.test(n.getAttribute("rel"))||ld.test(n.getAttribute("href"))||(t.preventDefault(),i(n)))}})}var jl=Tt,ud=fd;function fd(i,e){jl.equal(typeof i,"function","nanoraf: render should be a function"),jl.ok(typeof e=="function"||typeof e>"u","nanoraf: raf should be a function or undefined"),e||(e=window.requestAnimationFrame);var t=!1,n=null;return function(){n===null&&!t&&(t=!0,e(function(){t=!1;for(var o=n.length,a=new Array(o),l=0;l<o;l++)a[l]=n[l];i.apply(i,a),n=null})),n=arguments}}var cd=function(e,t,n){var r,s=e.length;if(!(t>=s||n===0)){n=t+n>s?s-t:n;var o=s-n;for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}},dd=cd,pd=zo,Lt=Tt,gd=wt;function wt(i){if(!(this instanceof wt))return new wt(i);this._name=i||"nanobus",this._starListeners=[],this._listeners={}}wt.prototype.emit=function(i){Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.emit: eventName should be type string or symbol");for(var e=[],t=1,n=arguments.length;t<n;t++)e.push(arguments[t]);var r=pd(this._name+"('"+i.toString()+"')"),s=this._listeners[i];return s&&s.length>0&&this._emit(this._listeners[i],e),this._starListeners.length>0&&this._emit(this._starListeners,i,e,r.uuid),r(),this};wt.prototype.on=wt.prototype.addListener=function(i,e){return Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.on: eventName should be type string or symbol"),Lt.equal(typeof e,"function","nanobus.on: listener should be type function"),i==="*"?this._starListeners.push(e):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].push(e)),this};wt.prototype.prependListener=function(i,e){return Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependListener: eventName should be type string or symbol"),Lt.equal(typeof e,"function","nanobus.prependListener: listener should be type function"),i==="*"?this._starListeners.unshift(e):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].unshift(e)),this};wt.prototype.once=function(i,e){Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.once: eventName should be type string or symbol"),Lt.equal(typeof e,"function","nanobus.once: listener should be type function");var t=this;this.on(i,n);function n(){e.apply(t,arguments),t.removeListener(i,n)}return this};wt.prototype.prependOnceListener=function(i,e){Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),Lt.equal(typeof e,"function","nanobus.prependOnceListener: listener should be type function");var t=this;this.prependListener(i,n);function n(){e.apply(t,arguments),t.removeListener(i,n)}return this};wt.prototype.removeListener=function(i,e){if(Lt.ok(typeof i=="string"||typeof i=="symbol","nanobus.removeListener: eventName should be type string or symbol"),Lt.equal(typeof e,"function","nanobus.removeListener: listener should be type function"),i==="*")return this._starListeners=this._starListeners.slice(),t(this._starListeners,e);return typeof this._listeners[i]<"u"&&(this._listeners[i]=this._listeners[i].slice()),t(this._listeners[i],e);function t(n,r){if(n){var s=n.indexOf(r);if(s!==-1)return dd(n,s,1),!0}}};wt.prototype.removeAllListeners=function(i){return i?i==="*"?this._starListeners=[]:this._listeners[i]=[]:(this._starListeners=[],this._listeners={}),this};wt.prototype.listeners=function(i){var e=i!=="*"?this._listeners[i]:this._starListeners,t=[];if(e)for(var n=e.length,r=0;r<n;r++)t.push(e[r]);return t};wt.prototype._emit=function(i,e,t,n){if(!(typeof i>"u")&&i.length!==0){t===void 0&&(t=e,e=null),e&&(n!==void 0?t=[e].concat(t,n):t=[e].concat(t));for(var r=i.length,s=0;s<r;s++){var o=i[s];o.apply(o,t)}}};var md=Et;function Et(i){if(!(this instanceof Et))return new Et(i);typeof i=="number"&&(i={max:i}),i||(i={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=i.max||1e3,this.maxAge=i.maxAge||0}Object.defineProperty(Et.prototype,"keys",{get:function(){return Object.keys(this.cache)}});Et.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};Et.prototype.remove=function(i){if(typeof i!="string"&&(i=""+i),!!this.cache.hasOwnProperty(i)){var e=this.cache[i];return delete this.cache[i],this._unlink(i,e.prev,e.next),e.value}};Et.prototype._unlink=function(i,e,t){this.length--,this.length===0?this.head=this.tail=null:this.head===i?(this.head=e,this.cache[this.head].next=null):this.tail===i?(this.tail=t,this.cache[this.tail].prev=null):(this.cache[e].next=t,this.cache[t].prev=e)};Et.prototype.peek=function(i){if(this.cache.hasOwnProperty(i)){var e=this.cache[i];if(this._checkAge(i,e))return e.value}};Et.prototype.set=function(i,e){typeof i!="string"&&(i=""+i);var t;if(this.cache.hasOwnProperty(i)){if(t=this.cache[i],t.value=e,this.maxAge&&(t.modified=Date.now()),i===this.head)return e;this._unlink(i,t.prev,t.next)}else t={value:e,modified:0,next:null,prev:null},this.maxAge&&(t.modified=Date.now()),this.cache[i]=t,this.length===this.max&&this.evict();return this.length++,t.next=null,t.prev=this.head,this.head&&(this.cache[this.head].next=i),this.head=i,this.tail||(this.tail=i),e};Et.prototype._checkAge=function(i,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(i),!1):!0};Et.prototype.get=function(i){if(typeof i!="string"&&(i=""+i),!!this.cache.hasOwnProperty(i)){var e=this.cache[i];if(this._checkAge(i,e))return this.head!==i&&(i===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=i,e.prev=this.head,e.next=null,this.head=i),e.value}};Et.prototype.evict=function(){this.tail&&this.remove(this.tail)};var Ci=Tt,Hl=md,bd=Go;function Go(i,e,t){Ci.ok(this instanceof Go,"ChooComponentCache should be created with `new`"),Ci.equal(typeof i,"object","ChooComponentCache: state should be type object"),Ci.equal(typeof e,"function","ChooComponentCache: emit should be type function"),typeof t=="number"?this.cache=new Hl(t):this.cache=t||new Hl(100),this.state=i,this.emit=e}Go.prototype.render=function(i,e){Ci.equal(typeof i,"function","ChooComponentCache.render: Component should be type function"),Ci.ok(typeof e=="string"||typeof e=="number","ChooComponentCache.render: id should be type string or type number");var t=this.cache.get(e);if(!t){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);n.unshift(i,e,this.state,this.emit),t=Vl.apply(Vl,n),this.cache.set(e,t)}return t};function Vl(i){return new(i.bind.apply(i,arguments))}var zl=gc,_h=bc,Yt=zo,yd=Wc,Th=Ah,wd=rd,vd=ad,kd=ud,Sd=gd,qe=Tt,xd=bd,Ad=Dt,ql={};function Dt(i){var e=Yt("choo.constructor");if(!(this instanceof Dt))return new Dt(i);i=i||{},qe.equal(typeof i,"object","choo: opts should be type object");var t=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=i.history===void 0?!0:i.history,this._hrefEnabled=i.href===void 0?!0:i.href,this._hashEnabled=i.hash===void 0?!1:i.hash,this._hasWindow=typeof window<"u",this._cache=i.cache,this._loaded=!1,this._stores=[r],this._tree=null;var n={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,n):n,delete window.initialState):this.state=n,this.router=yd({curry:!0}),this.emitter=Sd("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title);function r(s){t.emitter.prependListener(t._events.DOMTITLECHANGE,function(o){qe.equal(typeof o,"string","events.DOMTitleChange: title should be type string"),s.title=o,t._hasWindow&&(document.title=o)})}e()}Dt.prototype.route=function(i,e){var t=Yt("choo.route('"+i+"')");qe.equal(typeof i,"string","choo.route: route should be type string"),qe.equal(typeof e,"function","choo.handler: route should be type function"),this.router.on(i,e),t()};Dt.prototype.use=function(i){qe.equal(typeof i,"function","choo.use: cb should be type function");var e=this;this._stores.push(function(t){var n="choo.use";n=i.storeName?n+"("+i.storeName+")":n;var r=Yt(n);i(t,e.emitter,e),r()})};Dt.prototype.start=function(){qe.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var i=Yt("choo.start"),e=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){e._matchRoute(e.state),e._loaded&&(e.emitter.emit(e._events.RENDER),setTimeout(zl.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(t){qe.equal(typeof t,"string","events.pushState: href should be type string"),window.history.pushState(ql,null,t),e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(t){qe.equal(typeof t,"string","events.replaceState: href should be type string"),window.history.replaceState(ql,null,t),e.emitter.emit(e._events.NAVIGATE)}),window.onpopstate=function(){e.emitter.emit(e._events.POPSTATE)},e._hrefEnabled&&vd(function(t){var n=t.href,r=t.hash;if(n===window.location.href){!e._hashEnabled&&r&&zl(r);return}e.emitter.emit(e._events.PUSHSTATE,n)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(t){t(e.state)}),this._tree=this._prerender(this.state),qe.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(e._events.RENDER,kd(function(){var t=Yt("choo.render"),n=e._prerender(e.state);qe.ok(n,"choo.render: no valid DOM node returned for location "+e.state.href),qe.equal(e._tree.nodeName,n.nodeName,"choo.render: The target node <"+e._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+n.nodeName.toLowerCase()+">.");var r=Yt("choo.morph");Th(e._tree,n),r(),t()})),_h(function(){e.emitter.emit(e._events.DOMCONTENTLOADED),e._loaded=!0}),i(),this._tree};Dt.prototype.mount=function(e){var t=Yt("choo.mount('"+e+"')");if(typeof window!="object")return qe.ok(typeof e=="string","choo.mount: selector should be type String"),this.selector=e,t(),this;qe.ok(typeof e=="string"||typeof e=="object","choo.mount: selector should be type String or HTMLElement");var n=this;_h(function(){var r=Yt("choo.render"),s=n.start();typeof e=="string"?n._tree=document.querySelector(e):n._tree=e,qe.ok(n._tree,"choo.mount: could not query selector: "+e),qe.equal(n._tree.nodeName,s.nodeName,"choo.mount: The target node <"+n._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+s.nodeName.toLowerCase()+">.");var o=Yt("choo.morph");Th(n._tree,s),o(),r()}),t()};Dt.prototype.toString=function(i,e){e=e||{},e.components=e.components||{},e.events=Object.assign({},e.events,this._events),qe.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),qe.equal(typeof i,"string","choo.toString: location should be type string"),qe.equal(typeof e,"object","choo.toString: state should be type object"),this._setCache(e),this._matchRoute(e,i),this.emitter.removeAllListeners(),this._stores.forEach(function(n){n(e)});var t=this._prerender(e);return qe.ok(t,"choo.toString: no valid value returned for the route "+i),qe(!Array.isArray(t),"choo.toString: return value was an array for the route "+i),typeof t.outerHTML=="string"?t.outerHTML:t.toString()};Dt.prototype._matchRoute=function(i,e){var t,n;e?(t=e.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(t=t.replace(/#.+$/,"")),n=e):(t=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(t+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var r=this.router.match(t);this._handler=r.cb,i.href=t,i.query=wd(n),i.route=r.route,i.params=r.params};Dt.prototype._prerender=function(i){var e=Yt("choo.prerender('"+i.route+"')"),t=this._handler(i,this.emit);return e(),t};Dt.prototype._setCache=function(i){var e=new xd(i,this.emitter.emit.bind(this.emitter),this._cache);i.cache=t;function t(n,r){qe.equal(typeof n,"function","choo.state.cache: Component should be type function");for(var s=[],o=0,a=arguments.length;o<a;o++)s.push(arguments[o]);return e.render.apply(e,s)}t.toJSON=function(){return null}};const Xy=Ji(Ad);var Ed=_d,Gl={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function _d(i){return function(e,t,n){for(var r in t)r in Gl&&(t[Gl[r]]=t[r],delete t[r]);return i(e,t,n)}}var Td=Ed,$n=0,Ft=1,ut=2,ir=3,Mt=4,je=5,Es=6,kn=7,Ye=8,jn=9,Hn=10,ci=11,Sn=12,Wn=13,Cd=function(i,e){e||(e={});var t=e.concat||function(r,s){return String(r)+String(s)};return e.attrToProp!==!1&&(i=Td(i)),function(r){for(var s=Ft,o="",a=arguments.length,l=[],h=0;h<r.length;h++)if(h<a-1){var u=arguments[h+1],c=y(r[h]),p=s;p===Hn&&(p=Ye),p===jn&&(p=Ye),p===kn&&(p=Ye),p===Mt&&(p=je),p===ut?o==="/"?(c.push([ut,"/",u]),o=""):c.push([ut,u]):p===Wn&&e.comments?o+=String(u):p!==Wn&&c.push([$n,p,u]),l.push.apply(l,c)}else l.push.apply(l,y(r[h]));for(var m=[null,{},[]],f=[[m,-1]],h=0;h<l.length;h++){var g=f[f.length-1][0],c=l[h],w=c[0];if(w===ut&&/^\//.test(c[1])){var _=f[f.length-1][1];f.length>1&&(f.pop(),f[f.length-1][0][2][_]=i(g[0],g[1],g[2].length?g[2]:void 0))}else if(w===ut){var M=[c[1],{},[]];g[2].push(M),f.push([M,g[2].length-1])}else if(w===je||w===$n&&c[1]===je){for(var x="",E;h<l.length;h++)if(l[h][0]===je)x=t(x,l[h][1]);else if(l[h][0]===$n&&l[h][1]===je)if(typeof l[h][2]=="object"&&!x)for(E in l[h][2])l[h][2].hasOwnProperty(E)&&!g[1][E]&&(g[1][E]=l[h][2][E]);else x=t(x,l[h][2]);else break;l[h][0]===ci&&h++;for(var A=h;h<l.length;h++)if(l[h][0]===Ye||l[h][0]===je)g[1][x]?l[h][1]===""||(g[1][x]=t(g[1][x],l[h][1])):g[1][x]=n(l[h][1]);else if(l[h][0]===$n&&(l[h][1]===Ye||l[h][1]===je))g[1][x]?l[h][2]===""||(g[1][x]=t(g[1][x],l[h][2])):g[1][x]=n(l[h][2]);else{x.length&&!g[1][x]&&h===A&&(l[h][0]===ir||l[h][0]===Sn)&&(g[1][x]=x.toLowerCase()),l[h][0]===ir&&h--;break}}else if(w===je)g[1][c[1]]=!0;else if(w===$n&&c[1]===je)g[1][c[2]]=!0;else if(w===ir){if(Id(g[0])&&f.length){var _=f[f.length-1][1];f.pop(),f[f.length-1][0][2][_]=i(g[0],g[1],g[2].length?g[2]:void 0)}}else if(w===$n&&c[1]===Ft)c[2]===void 0||c[2]===null?c[2]="":c[2]||(c[2]=t("",c[2])),Array.isArray(c[2][0])?g[2].push.apply(g[2],c[2]):g[2].push(c[2]);else if(w===Ft)g[2].push(c[1]);else if(!(w===ci||w===Sn))throw new Error("unhandled: "+w)}if(m[2].length>1&&/^\s*$/.test(m[2][0])&&m[2].shift(),m[2].length>2||m[2].length===2&&/\S/.test(m[2][1])){if(e.createFragment)return e.createFragment(m[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(m[2][0])&&typeof m[2][0][0]=="string"&&Array.isArray(m[2][0][2])&&(m[2][0]=i(m[2][0][0],m[2][0][1],m[2][0][2])),m[2][0];function y(k){var R=[];s===kn&&(s=Mt);for(var I=0;I<k.length;I++){var z=k.charAt(I);s===Ft&&z==="<"?(o.length&&R.push([Ft,o]),o="",s=ut):z===">"&&!Rd(s)&&s!==Wn?(s===ut&&o.length?R.push([ut,o]):s===je?R.push([je,o]):s===Ye&&o.length&&R.push([Ye,o]),R.push([ir]),o="",s=Ft):s===Wn&&/-$/.test(o)&&z==="-"?(e.comments&&R.push([Ye,o.substr(0,o.length-1)]),o="",s=Ft):s===ut&&/^!--$/.test(o)?(e.comments&&R.push([ut,o],[je,"comment"],[ci]),o=z,s=Wn):s===Ft||s===Wn?o+=z:s===ut&&z==="/"&&o.length||(s===ut&&/\s/.test(z)?(o.length&&R.push([ut,o]),o="",s=Mt):s===ut?o+=z:s===Mt&&/[^\s"'=/]/.test(z)?(s=je,o=z):s===Mt&&/\s/.test(z)?(o.length&&R.push([je,o]),R.push([Sn])):s===je&&/\s/.test(z)?(R.push([je,o]),o="",s=Es):s===je&&z==="="?(R.push([je,o],[ci]),o="",s=kn):s===je?o+=z:(s===Es||s===Mt)&&z==="="?(R.push([ci]),s=kn):(s===Es||s===Mt)&&!/\s/.test(z)?(R.push([Sn]),/[\w-]/.test(z)?(o+=z,s=je):s=Mt):s===kn&&z==='"'?s=Hn:s===kn&&z==="'"?s=jn:s===Hn&&z==='"'?(R.push([Ye,o],[Sn]),o="",s=Mt):s===jn&&z==="'"?(R.push([Ye,o],[Sn]),o="",s=Mt):s===kn&&!/\s/.test(z)?(s=Ye,I--):s===Ye&&/\s/.test(z)?(R.push([Ye,o],[Sn]),o="",s=Mt):(s===Ye||s===jn||s===Hn)&&(o+=z))}return s===Ft&&o.length?(R.push([Ft,o]),o=""):s===Ye&&o.length?(R.push([Ye,o]),o=""):s===Hn&&o.length?(R.push([Ye,o]),o=""):s===jn&&o.length?(R.push([Ye,o]),o=""):s===je&&(R.push([je,o]),o=""),R}};function n(r){return typeof r=="function"||typeof r=="string"||r&&typeof r=="object"||r==null?r:t("",r)}};function Rd(i){return i===jn||i===Hn}var Md=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$");function Id(i){return Md.test(i)}var rr=/\n[\s]+$/,sr=/^\n[\s]+/,Kl=/[\s]+$/,Yl=/^[\s]+/,or=/[\n\s]+/g,Xl=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],lr=["code","pre","textarea"],Bd=function i(e,t){if(Array.isArray(t))for(var n=e.nodeName.toLowerCase(),r=!1,s,o,a=0,l=t.length;a<l;a++){var h=t[a];if(Array.isArray(h)){i(e,h);continue}(typeof h=="number"||typeof h=="boolean"||typeof h=="function"||h instanceof Date||h instanceof RegExp)&&(h=h.toString());var u=e.childNodes[e.childNodes.length-1];if(typeof h=="string")r=!0,u&&u.nodeName==="#text"?u.nodeValue+=h:(h=e.ownerDocument.createTextNode(h),e.appendChild(h),u=h),a===l-1&&(r=!1,Xl.indexOf(n)===-1&&lr.indexOf(n)===-1?(s=u.nodeValue.replace(sr,"").replace(Kl,"").replace(rr,"").replace(or," "),s===""?e.removeChild(u):u.nodeValue=s):lr.indexOf(n)===-1&&(o=a===0?"":" ",s=u.nodeValue.replace(sr,o).replace(Yl," ").replace(Kl,"").replace(rr,"").replace(or," "),u.nodeValue=s));else if(h&&h.nodeType){r&&(r=!1,Xl.indexOf(n)===-1&&lr.indexOf(n)===-1?(s=u.nodeValue.replace(sr,"").replace(rr," ").replace(or," "),s===""?e.removeChild(u):u.nodeValue=s):lr.indexOf(n)===-1&&(s=u.nodeValue.replace(Yl," ").replace(sr,"").replace(rr," ").replace(or," "),u.nodeValue=s));var c=h.nodeName;c&&(n=c.toLowerCase()),e.appendChild(h)}}},Od=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ld=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],Dd=["indeterminate"],Nd=Cd,Pd=Bd,Fd=Od,$d=Ld,Wd=Dd,Ud="http://www.w3.org/2000/svg",jd="http://www.w3.org/1999/xlink",Hd="!--",Vd=function(i){function e(r,s,o){var a;Fd.indexOf(r)!==-1&&(s.namespace=Ud);var l=!1;s.namespace&&(l=s.namespace,delete s.namespace);var h=!1;if(s.is&&(h=s.is,delete s.is),l)h?a=i.createElementNS(l,r,{is:h}):a=i.createElementNS(l,r);else{if(r===Hd)return i.createComment(s.comment);h?a=i.createElement(r,{is:h}):a=i.createElement(r)}for(var u in s)if(s.hasOwnProperty(u)){var c=u.toLowerCase(),p=s[u];if(c==="classname"&&(c="class",u="class"),u==="htmlFor"&&(u="for"),$d.indexOf(c)!==-1){if(String(p)==="true")p=c;else if(String(p)==="false")continue}c.slice(0,2)==="on"||Wd.indexOf(c)!==-1?a[u]=p:l?u==="xlink:href"?a.setAttributeNS(jd,u,p):/^xmlns($|:)/i.test(u)||a.setAttributeNS(null,u,p):a.setAttribute(u,p)}return Pd(a,o),a}function t(r){for(var s=i.createDocumentFragment(),o=0;o<r.length;o++)r[o]!=null&&(Array.isArray(r[o])?s.appendChild(t(r[o])):(typeof r[o]=="string"&&(r[o]=i.createTextNode(r[o])),s.appendChild(r[o])));return s}var n=Nd(e,{comments:!0,createFragment:t});return n.default=n,n.createComment=e,n},zd=Vd(document),qd=zd;const Jy=Ji(qd);function Gd(i){var e=document.createElement("div");return e.innerHTML=i,Kd(e.childNodes)}function Kd(i){return Array.isArray(i)?i:[].slice.call(i)}var Yd=Gd,Xd=Yd;const Zy=Ji(Xd),Jd={},Zd=Object.freeze(Object.defineProperty({__proto__:null,default:Jd},Symbol.toStringTag,{value:"Module"})),Qd=pc(Zd);var Jl=typeof Ht<"u"?Ht:typeof window<"u"?window:{},ep=Qd,wi;typeof document<"u"?wi=document:(wi=Jl["__GLOBAL_DOCUMENT_CACHE@4"],wi||(wi=Jl["__GLOBAL_DOCUMENT_CACHE@4"]=ep));var Ch=wi,rs={exports:{}},vi;typeof window<"u"?vi=window:typeof Ht<"u"?vi=Ht:typeof self<"u"?vi=self:vi={};var tp=vi,_s=Ch,Zl=tp,et=Object.create(null),Rh="onloadid"+Math.random().toString(36).slice(2),Rn="data-"+Rh,Ts=0;if(Zl&&Zl.MutationObserver){var np=new MutationObserver(function(i){if(!(Object.keys(et).length<1))for(var e=0;e<i.length;e++){if(i[e].attributeName===Rn){ip(i[e],Ql,ea);continue}Xs(i[e].removedNodes,function(t,n){_s.documentElement.contains(n)||ea(t,n)}),Xs(i[e].addedNodes,function(t,n){_s.documentElement.contains(n)&&Ql(t,n)})}});np.observe(_s.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[Rn]})}rs.exports=function i(e,t,n,r){return t=t||function(){},n=n||function(){},e.setAttribute(Rn,"o"+Ts),et["o"+Ts]=[t,n,0,r||i.caller],Ts+=1,e};rs.exports.KEY_ATTR=Rn;rs.exports.KEY_ID=Rh;function Ql(i,e){et[i][0]&&et[i][2]===0&&(et[i][0](e),et[i][2]=1)}function ea(i,e){et[i][1]&&et[i][2]===1&&(et[i][1](e),et[i][2]=0)}function ip(i,e,t){var n=i.target.getAttribute(Rn);if(rp(i.oldValue,n)){et[n]=et[i.oldValue];return}et[i.oldValue]&&t(i.oldValue,i.target),et[n]&&e(n,i.target)}function rp(i,e){return!i||!e?!1:et[i][3]===et[e][3]}function Xs(i,e){for(var t=Object.keys(et),n=0;n<i.length;n++){if(i[n]&&i[n].getAttribute&&i[n].getAttribute(Rn)){var r=i[n].getAttribute(Rn);t.forEach(function(s){r===s&&e(s,i[n])})}i[n]&&i[n].childNodes.length>0&&Xs(i[n].childNodes,e)}}var sp=rs.exports,op=Ih;class Mh extends Error{}Mh.prototype.name="AssertionError";function Ih(i,e){if(!i){var t=new Mh(e);throw Error.captureStackTrace&&Error.captureStackTrace(t,Ih),t}}const Bh=Ch,ki=zo,lp=Ah,Ko=sp,Js=op,ap=Ko.KEY_ID,hp=Ko.KEY_ATTR;var up=dt;function fp(){return"ncid-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)}dt.makeID=fp;function dt(i){this._hasWindow=typeof window<"u",this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=i||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];const e=this;Object.defineProperty(this,"element",{get:function(){const t=Bh.getElementById(e._id);if(t)return t.dataset.nanocomponent===e._ncID?t:void 0}})}dt.prototype.render=function(){const i=ki(this._name+".render"),e=this,t=new Array(arguments.length);let n;for(let r=0;r<arguments.length;r++)t[r]=arguments[r];if(this._hasWindow)if(this.element){n=this.element;const r=ki(this._name+".update"),s=this._rerender||this.update.apply(this,t);if(r(),this._rerender&&(this._rerender=!1),s){const o=this._handleRender(t),a=ki(this._name+".morph");lp(n,o),a(),this.afterupdate&&this.afterupdate(n)}return this._proxy||(this._proxy=this._createProxy()),i(),this._proxy}else return this._reset(),n=this._handleRender(t),this.beforerender&&this.beforerender(n),(this.load||this.unload||this.afterreorder)&&(Ko(n,e._handleLoad,e._handleUnload,e._ncID),this._olID=n.dataset[ap]),i(),n;else{const r=ki(this._name+".create");return n=this.createElement.apply(this,t),r(),i(),n}};dt.prototype.rerender=function(){Js(this.element,"nanocomponent: cant rerender on an unmounted dom node"),this._rerender=!0,this.render.apply(this,this._arguments)};dt.prototype._handleRender=function(i){const e=ki(this._name+".createElement"),t=this.createElement.apply(this,i);return e(),this._rootNodeName||(this._rootNodeName=t.nodeName),Js(t instanceof window.Element,"nanocomponent: createElement should return a single DOM node"),Js(this._rootNodeName===t.nodeName,"nanocomponent: root node types cannot differ between re-renders"),this._arguments=i,this._brandNode(this._ensureID(t))};dt.prototype._createProxy=function(){const i=Bh.createElement(this._rootNodeName),e=this;return this._brandNode(i),i.id=this._id,i.setAttribute("data-proxy",""),i.isSameNode=function(t){return t&&t.dataset.nanocomponent===e._ncID},i};dt.prototype._reset=function(){this._ncID=dt.makeID(),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null};dt.prototype._brandNode=function(i){return i.setAttribute("data-nanocomponent",this._ncID),this._olID&&i.setAttribute(hp,this._olID),i};dt.prototype._ensureID=function(i){return i.id?this._id=i.id:i.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),i};dt.prototype._handleLoad=function(i){if(this._loaded){this.afterreorder&&this.afterreorder(i);return}this._loaded=!0,this.load&&this.load(i)};dt.prototype._handleUnload=function(i){this.element||(this._loaded=!1,this.unload&&this.unload(i))};dt.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")};dt.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};const Qy=Ji(up);var Oh={exports:{}};/*! For license information please see cbor.js.LICENSE.txt */(function(i,e){(function(t,n){i.exports=n()})(Ht,()=>(()=>{var t={207:(o,a,l)=>{const h=l(2893),u=l(9744),{Buffer:c}=l(8287);class p extends h{constructor(f){super(f),this.valueSharing=new u}_pushObject(f,g){if(f!==null){const w=this.valueSharing.check(f);switch(w){case u.FIRST:this._pushTag(28);break;case u.NEVER:break;default:return this._pushTag(29)&&this._pushIntNum(w)}}return super._pushObject(f,g)}stopRecording(){this.valueSharing.stop()}clearRecording(){this.valueSharing.clear()}static encode(...f){const g=new p;g.on("data",()=>{});for(const w of f)g.pushAny(w);return g.stopRecording(),g.removeAllListeners("data"),g._encodeAll(f)}static encodeCanonical(...f){throw new Error("Cannot encode canonically in a SharedValueEncoder, which serializes objects multiple times.")}static encodeOne(f,g){const w=new p(g);return w.on("data",()=>{}),w.pushAny(f),w.stopRecording(),w.removeAllListeners("data"),w._encodeAll([f])}static encodeAsync(f,g){return new Promise((w,_)=>{const M=[],x=new p(g);x.on("data",()=>{}),x.on("error",_),x.on("finish",()=>w(c.concat(M))),x.pushAny(f),x.stopRecording(),x.removeAllListeners("data"),x.on("data",E=>M.push(E)),x.pushAny(f),x.end()})}}o.exports=p},251:(o,a)=>{a.read=function(l,h,u,c,p){var m,f,g=8*p-c-1,w=(1<<g)-1,_=w>>1,M=-7,x=u?p-1:0,E=u?-1:1,A=l[h+x];for(x+=E,m=A&(1<<-M)-1,A>>=-M,M+=g;M>0;m=256*m+l[h+x],x+=E,M-=8);for(f=m&(1<<-M)-1,m>>=-M,M+=c;M>0;f=256*f+l[h+x],x+=E,M-=8);if(m===0)m=1-_;else{if(m===w)return f?NaN:1/0*(A?-1:1);f+=Math.pow(2,c),m-=_}return(A?-1:1)*f*Math.pow(2,m-c)},a.write=function(l,h,u,c,p,m){var f,g,w,_=8*m-p-1,M=(1<<_)-1,x=M>>1,E=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=c?0:m-1,y=c?1:-1,k=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(g=isNaN(h)?1:0,f=M):(f=Math.floor(Math.log(h)/Math.LN2),h*(w=Math.pow(2,-f))<1&&(f--,w*=2),(h+=f+x>=1?E/w:E*Math.pow(2,1-x))*w>=2&&(f++,w/=2),f+x>=M?(g=0,f=M):f+x>=1?(g=(h*w-1)*Math.pow(2,p),f+=x):(g=h*Math.pow(2,x-1)*Math.pow(2,p),f=0));p>=8;l[u+A]=255&g,A+=y,g/=256,p-=8);for(f=f<<p|g,_+=p;_>0;l[u+A]=255&f,A+=y,f/=256,_-=8);l[u+A-y]|=128*k}},277:(o,a,l)=>{const{ArrayIsArray:h,ArrayPrototypeIncludes:u,ArrayPrototypeJoin:c,ArrayPrototypeMap:p,NumberIsInteger:m,NumberIsNaN:f,NumberMAX_SAFE_INTEGER:g,NumberMIN_SAFE_INTEGER:w,NumberParseInt:_,ObjectPrototypeHasOwnProperty:M,RegExpPrototypeExec:x,String:E,StringPrototypeToUpperCase:A,StringPrototypeTrim:y}=l(4134),{hideStackFrames:k,codes:{ERR_SOCKET_BAD_PORT:R,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:z,ERR_OUT_OF_RANGE:q,ERR_UNKNOWN_SIGNAL:D}}=l(6371),{normalizeEncoding:J}=l(7760),{isAsyncFunction:P,isArrayBufferView:$}=l(7760).types,C={},K=/^[0-7]+$/,j=k((F,re,te=w,me=g)=>{if(typeof F!="number")throw new I(re,"number",F);if(!m(F))throw new q(re,"an integer",F);if(F<te||F>me)throw new q(re,`>= ${te} && <= ${me}`,F)}),G=k((F,re,te=-2147483648,me=2147483647)=>{if(typeof F!="number")throw new I(re,"number",F);if(!m(F))throw new q(re,"an integer",F);if(F<te||F>me)throw new q(re,`>= ${te} && <= ${me}`,F)}),le=k((F,re,te=!1)=>{if(typeof F!="number")throw new I(re,"number",F);if(!m(F))throw new q(re,"an integer",F);const me=te?1:0,H=4294967295;if(F<me||F>H)throw new q(re,`>= ${me} && <= ${H}`,F)});function T(F,re){if(typeof F!="string")throw new I(re,"string",F)}const W=k((F,re,te)=>{if(!u(te,F)){const me=c(p(te,H=>typeof H=="string"?`'${H}'`:E(H)),", ");throw new z(re,F,"must be one of: "+me)}});function Q(F,re){if(typeof F!="boolean")throw new I(re,"boolean",F)}function U(F,re,te){return F!=null&&M(F,re)?F[re]:te}const X=k((F,re,te=null)=>{const me=U(te,"allowArray",!1),H=U(te,"allowFunction",!1);if(!U(te,"nullable",!1)&&F===null||!me&&h(F)||typeof F!="object"&&(!H||typeof F!="function"))throw new I(re,"Object",F)}),ae=k((F,re)=>{if(F!=null&&typeof F!="object"&&typeof F!="function")throw new I(re,"a dictionary",F)}),ee=k((F,re,te=0)=>{if(!h(F))throw new I(re,"Array",F);if(F.length<te)throw new z(re,F,`must be longer than ${te}`)}),se=k((F,re="buffer")=>{if(!$(F))throw new I(re,["Buffer","TypedArray","DataView"],F)}),Z=k((F,re)=>{if(F!==void 0&&(F===null||typeof F!="object"||!("aborted"in F)))throw new I(re,"AbortSignal",F)}),ue=k((F,re)=>{if(typeof F!="function")throw new I(re,"Function",F)}),oe=k((F,re)=>{if(typeof F!="function"||P(F))throw new I(re,"Function",F)}),xe=k((F,re)=>{if(F!==void 0)throw new I(re,"undefined",F)}),ye=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ke(F,re){if(F===void 0||!x(ye,F))throw new z(re,F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}o.exports={isInt32:function(F){return F===(0|F)},isUint32:function(F){return F===F>>>0},parseFileMode:function(F,re,te){if(F===void 0&&(F=te),typeof F=="string"){if(x(K,F)===null)throw new z(re,F,"must be a 32-bit unsigned integer or an octal string");F=_(F,8)}return le(F,re),F},validateArray:ee,validateStringArray:function(F,re){ee(F,re);for(let te=0;te<F.length;te++)T(F[te],`${re}[${te}]`)},validateBooleanArray:function(F,re){ee(F,re);for(let te=0;te<F.length;te++)Q(F[te],`${re}[${te}]`)},validateAbortSignalArray:function(F,re){ee(F,re);for(let te=0;te<F.length;te++){const me=F[te],H=`${re}[${te}]`;if(me==null)throw new I(H,"AbortSignal",me);Z(me,H)}},validateBoolean:Q,validateBuffer:se,validateDictionary:ae,validateEncoding:function(F,re){const te=J(re),me=F.length;if(te==="hex"&&me%2!=0)throw new z("encoding",re,`is invalid for data of length ${me}`)},validateFunction:ue,validateInt32:G,validateInteger:j,validateNumber:function(F,re,te=void 0,me){if(typeof F!="number")throw new I(re,"number",F);if(te!=null&&F<te||me!=null&&F>me||(te!=null||me!=null)&&f(F))throw new q(re,`${te!=null?`>= ${te}`:""}${te!=null&&me!=null?" && ":""}${me!=null?`<= ${me}`:""}`,F)},validateObject:X,validateOneOf:W,validatePlainFunction:oe,validatePort:function(F,re="Port",te=!0){if(typeof F!="number"&&typeof F!="string"||typeof F=="string"&&y(F).length===0||+F!==+F>>>0||F>65535||F===0&&!te)throw new R(re,F,te);return 0|F},validateSignalName:function(F,re="signal"){if(T(F,re),C[F]===void 0)throw C[A(F)]!==void 0?new D(F+" (signals must use all capital letters)"):new D(F)},validateString:T,validateUint32:le,validateUndefined:xe,validateUnion:function(F,re,te){if(!u(te,F))throw new I(re,`('${c(te,"|")}')`,F)},validateAbortSignal:Z,validateLinkHeaderValue:function(F){if(typeof F=="string")return ke(F,"hints"),F;if(h(F)){const re=F.length;let te="";if(re===0)return te;for(let me=0;me<re;me++){const H=F[me];ke(H,"hints"),te+=H,me!==re-1&&(te+=", ")}return te}throw new z("hints",F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},345:(o,a,l)=>{const{StringPrototypeSlice:h,SymbolIterator:u,TypedArrayPrototypeSet:c,Uint8Array:p}=l(4134),{Buffer:m}=l(8287),{inspect:f}=l(7760);o.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(g){const w={data:g,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}unshift(g){const w={data:g,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}shift(){if(this.length===0)return;const g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}clear(){this.head=this.tail=null,this.length=0}join(g){if(this.length===0)return"";let w=this.head,_=""+w.data;for(;(w=w.next)!==null;)_+=g+w.data;return _}concat(g){if(this.length===0)return m.alloc(0);const w=m.allocUnsafe(g>>>0);let _=this.head,M=0;for(;_;)c(w,_.data,M),M+=_.data.length,_=_.next;return w}consume(g,w){const _=this.head.data;if(g<_.length){const M=_.slice(0,g);return this.head.data=_.slice(g),M}return g===_.length?this.shift():w?this._getString(g):this._getBuffer(g)}first(){return this.head.data}*[u](){for(let g=this.head;g;g=g.next)yield g.data}_getString(g){let w="",_=this.head,M=0;do{const x=_.data;if(!(g>x.length)){g===x.length?(w+=x,++M,_.next?this.head=_.next:this.head=this.tail=null):(w+=h(x,0,g),this.head=_,_.data=h(x,g));break}w+=x,g-=x.length,++M}while((_=_.next)!==null);return this.length-=M,w}_getBuffer(g){const w=m.allocUnsafe(g),_=g;let M=this.head,x=0;do{const E=M.data;if(!(g>E.length)){g===E.length?(c(w,E,_-g),++x,M.next?this.head=M.next:this.head=this.tail=null):(c(w,new p(E.buffer,E.byteOffset,g),_-g),this.head=M,M.data=E.slice(g));break}c(w,E,_-g),g-=E.length,++x}while((M=M.next)!==null);return this.length-=x,w}[Symbol.for("nodejs.util.inspect.custom")](g,w){return f(this,{...w,depth:0,customInspect:!1})}}},672:(o,a,l)=>{const h=l(8310),{Buffer:u}=l(8287),c=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});class p extends h.Transform{constructor(f,g,w={}){let _=null,M=null;switch(typeof f){case"object":u.isBuffer(f)?_=f:f&&(w=f);break;case"string":_=f;break;case"undefined":break;default:throw new TypeError("Invalid input")}switch(typeof g){case"object":g&&(w=g);break;case"string":M=g;break;case"undefined":break;default:throw new TypeError("Invalid inputEncoding")}if(!w||typeof w!="object")throw new TypeError("Invalid options");_==null&&(_=w.input),M==null&&(M=w.inputEncoding),delete w.input,delete w.inputEncoding;const x=w.watchPipe==null||w.watchPipe;delete w.watchPipe;const E=!!w.readError;delete w.readError,super(w),this.readError=E,x&&this.on("pipe",A=>{const y=A._readableState.objectMode;if(this.length>0&&y!==this._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");this._readableState.objectMode=y,this._writableState.objectMode=y}),_!=null&&this.end(_,M)}static isNoFilter(f){return f instanceof this}static compare(f,g){if(!(f instanceof this))throw new TypeError("Arguments must be NoFilters");return f===g?0:f.compare(g)}static concat(f,g){if(!Array.isArray(f))throw new TypeError("list argument must be an Array of NoFilters");if(f.length===0||g===0)return u.alloc(0);g==null&&(g=f.reduce((x,E)=>{if(!(E instanceof p))throw new TypeError("list argument must be an Array of NoFilters");return x+E.length},0));let w=!0,_=!0;const M=f.map(x=>{if(!(x instanceof p))throw new TypeError("list argument must be an Array of NoFilters");const E=x.slice();return u.isBuffer(E)?_=!1:w=!1,E});if(w)return u.concat(M,g);if(_)return[].concat(...M).slice(0,g);throw new Error("Concatenating mixed object and byte streams not supported")}_transform(f,g,w){this._readableState.objectMode||u.isBuffer(f)||(f=u.from(f,g)),this.push(f),w()}_bufArray(){let f=this._readableState.buffer;if(!Array.isArray(f)){let g=f.head;for(f=[];g!=null;)f.push(g.data),g=g.next}return f}read(f){const g=super.read(f);if(g!=null){if(this.emit("read",g),this.readError&&g.length<f)throw new Error(`Read ${g.length}, wanted ${f}`)}else if(this.readError)throw new Error(`No data available, wanted ${f}`);return g}readFull(f){let g=null,w=null,_=null;return new Promise((M,x)=>{this.length>=f?M(this.read(f)):this.writableFinished?x(new Error(`Stream finished before ${f} bytes were available`)):(g=E=>{this.length>=f&&M(this.read(f))},w=()=>{x(new Error(`Stream finished before ${f} bytes were available`))},_=x,this.on("readable",g),this.on("error",_),this.on("finish",w))}).finally(()=>{g&&(this.removeListener("readable",g),this.removeListener("error",_),this.removeListener("finish",w))})}promise(f){let g=!1;return new Promise((w,_)=>{this.on("finish",()=>{const M=this.read();f==null||g||(g=!0,f(null,M)),w(M)}),this.on("error",M=>{f==null||g||(g=!0,f(M)),_(M)})})}compare(f){if(!(f instanceof p))throw new TypeError("Arguments must be NoFilters");if(this===f)return 0;const g=this.slice(),w=f.slice();if(u.isBuffer(g)&&u.isBuffer(w))return g.compare(w);throw new Error("Cannot compare streams in object mode")}equals(f){return this.compare(f)===0}slice(f,g){if(this._readableState.objectMode)return this._bufArray().slice(f,g);const w=this._bufArray();switch(w.length){case 0:return u.alloc(0);case 1:return w[0].slice(f,g);default:return u.concat(w).slice(f,g)}}get(f){return this.slice()[f]}toJSON(){const f=this.slice();return u.isBuffer(f)?f.toJSON():f}toString(f,g,w){const _=this.slice(g,w);return u.isBuffer(_)?f&&f!=="utf8"?_.toString(f):c.decode(_):JSON.stringify(_)}[Symbol.for("nodejs.util.inspect.custom")](f,g){const w=this._bufArray().map(_=>u.isBuffer(_)?g.stylize(_.toString("hex"),"string"):JSON.stringify(_)).join(", ");return`${this.constructor.name} [${w}]`}get length(){return this._readableState.length}writeBigInt(f){let g=f.toString(16);if(f<0){const w=BigInt(Math.floor(g.length/2));g=(f=(BigInt(1)<<w*BigInt(8))+f).toString(16)}return g.length%2&&(g=`0${g}`),this.push(u.from(g,"hex"))}readUBigInt(f){const g=this.read(f);return u.isBuffer(g)?BigInt(`0x${g.toString("hex")}`):null}readBigInt(f){const g=this.read(f);if(!u.isBuffer(g))return null;let w=BigInt(`0x${g.toString("hex")}`);return 128&g[0]&&(w-=BigInt(1)<<BigInt(g.length)*BigInt(8)),w}writeUInt8(f){const g=u.from([f]);return this.push(g)}writeUInt16LE(f){const g=u.alloc(2);return g.writeUInt16LE(f),this.push(g)}writeUInt16BE(f){const g=u.alloc(2);return g.writeUInt16BE(f),this.push(g)}writeUInt32LE(f){const g=u.alloc(4);return g.writeUInt32LE(f),this.push(g)}writeUInt32BE(f){const g=u.alloc(4);return g.writeUInt32BE(f),this.push(g)}writeInt8(f){const g=u.from([f]);return this.push(g)}writeInt16LE(f){const g=u.alloc(2);return g.writeUInt16LE(f),this.push(g)}writeInt16BE(f){const g=u.alloc(2);return g.writeUInt16BE(f),this.push(g)}writeInt32LE(f){const g=u.alloc(4);return g.writeUInt32LE(f),this.push(g)}writeInt32BE(f){const g=u.alloc(4);return g.writeUInt32BE(f),this.push(g)}writeFloatLE(f){const g=u.alloc(4);return g.writeFloatLE(f),this.push(g)}writeFloatBE(f){const g=u.alloc(4);return g.writeFloatBE(f),this.push(g)}writeDoubleLE(f){const g=u.alloc(8);return g.writeDoubleLE(f),this.push(g)}writeDoubleBE(f){const g=u.alloc(8);return g.writeDoubleBE(f),this.push(g)}writeBigInt64LE(f){const g=u.alloc(8);return g.writeBigInt64LE(f),this.push(g)}writeBigInt64BE(f){const g=u.alloc(8);return g.writeBigInt64BE(f),this.push(g)}writeBigUInt64LE(f){const g=u.alloc(8);return g.writeBigUInt64LE(f),this.push(g)}writeBigUInt64BE(f){const g=u.alloc(8);return g.writeBigUInt64BE(f),this.push(g)}readUInt8(){const f=this.read(1);return u.isBuffer(f)?f.readUInt8():null}readUInt16LE(){const f=this.read(2);return u.isBuffer(f)?f.readUInt16LE():null}readUInt16BE(){const f=this.read(2);return u.isBuffer(f)?f.readUInt16BE():null}readUInt32LE(){const f=this.read(4);return u.isBuffer(f)?f.readUInt32LE():null}readUInt32BE(){const f=this.read(4);return u.isBuffer(f)?f.readUInt32BE():null}readInt8(){const f=this.read(1);return u.isBuffer(f)?f.readInt8():null}readInt16LE(){const f=this.read(2);return u.isBuffer(f)?f.readInt16LE():null}readInt16BE(){const f=this.read(2);return u.isBuffer(f)?f.readInt16BE():null}readInt32LE(){const f=this.read(4);return u.isBuffer(f)?f.readInt32LE():null}readInt32BE(){const f=this.read(4);return u.isBuffer(f)?f.readInt32BE():null}readFloatLE(){const f=this.read(4);return u.isBuffer(f)?f.readFloatLE():null}readFloatBE(){const f=this.read(4);return u.isBuffer(f)?f.readFloatBE():null}readDoubleLE(){const f=this.read(8);return u.isBuffer(f)?f.readDoubleLE():null}readDoubleBE(){const f=this.read(8);return u.isBuffer(f)?f.readDoubleBE():null}readBigInt64LE(){const f=this.read(8);return u.isBuffer(f)?f.readBigInt64LE():null}readBigInt64BE(){const f=this.read(8);return u.isBuffer(f)?f.readBigInt64BE():null}readBigUInt64LE(){const f=this.read(8);return u.isBuffer(f)?f.readBigUInt64LE():null}readBigUInt64BE(){const f=this.read(8);return u.isBuffer(f)?f.readBigUInt64BE():null}}o.exports=p},823:(o,a,l)=>{const h=globalThis.AbortController||l(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:u,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:p,ERR_OUT_OF_RANGE:m},AbortError:f}=l(6371),{validateAbortSignal:g,validateInteger:w,validateObject:_}=l(277),M=l(4134).Symbol("kWeak"),x=l(4134).Symbol("kResistStopPropagation"),{finished:E}=l(6238),A=l(7830),{addAbortSignalNoValidate:y}=l(4147),{isWritable:k,isNodeStream:R}=l(6115),{deprecate:I}=l(7760),{ArrayPrototypePush:z,Boolean:q,MathFloor:D,Number:J,NumberIsNaN:P,Promise:$,PromiseReject:C,PromiseResolve:K,PromisePrototypeThen:j,Symbol:G}=l(4134),le=G("kEmpty"),T=G("kEof");function W(ee,se){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);se!=null&&_(se,"options"),se?.signal!=null&&g(se.signal,"options.signal");let Z=1;se?.concurrency!=null&&(Z=D(se.concurrency));let ue=Z-1;return se?.highWaterMark!=null&&(ue=D(se.highWaterMark)),w(Z,"options.concurrency",1),w(ue,"options.highWaterMark",0),ue+=Z,async function*(){const oe=l(7760).AbortSignalAny([se?.signal].filter(q)),xe=this,ye=[],ke={signal:oe};let F,re,te=!1,me=0;function H(){te=!0,ne()}function ne(){me-=1,Y()}function Y(){re&&!te&&me<Z&&ye.length<ue&&(re(),re=null)}(async function(){try{for await(let he of xe){if(te)return;if(oe.aborted)throw new f;try{if(he=ee(he,ke),he===le)continue;he=K(he)}catch(de){he=C(de)}me+=1,j(he,ne,H),ye.push(he),F&&(F(),F=null),!te&&(ye.length>=ue||me>=Z)&&await new $(de=>{re=de})}ye.push(T)}catch(he){const de=C(he);j(de,ne,H),ye.push(de)}finally{te=!0,F&&(F(),F=null)}})();try{for(;;){for(;ye.length>0;){const he=await ye[0];if(he===T)return;if(oe.aborted)throw new f;he!==le&&(yield he),ye.shift(),Y()}await new $(he=>{F=he})}}finally{te=!0,re&&(re(),re=null)}}.call(this)}async function Q(ee,se=void 0){for await(const Z of U.call(this,ee,se))return!0;return!1}function U(ee,se){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);return W.call(this,async function(Z,ue){return await ee(Z,ue)?Z:le},se)}class X extends p{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ae(ee){if(ee=J(ee),P(ee))return 0;if(ee<0)throw new m("number",">= 0",ee);return ee}o.exports.streamReturningOperators={asIndexedPairs:I(function(ee=void 0){return ee!=null&&_(ee,"options"),ee?.signal!=null&&g(ee.signal,"options.signal"),async function*(){let se=0;for await(const ue of this){var Z;if(ee!=null&&(Z=ee.signal)!==null&&Z!==void 0&&Z.aborted)throw new f({cause:ee.signal.reason});yield[se++,ue]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(ee,se=void 0){return se!=null&&_(se,"options"),se?.signal!=null&&g(se.signal,"options.signal"),ee=ae(ee),async function*(){var Z;if(se!=null&&(Z=se.signal)!==null&&Z!==void 0&&Z.aborted)throw new f;for await(const oe of this){var ue;if(se!=null&&(ue=se.signal)!==null&&ue!==void 0&&ue.aborted)throw new f;ee--<=0&&(yield oe)}}.call(this)},filter:U,flatMap:function(ee,se){const Z=W.call(this,ee,se);return async function*(){for await(const ue of Z)yield*ue}.call(this)},map:W,take:function(ee,se=void 0){return se!=null&&_(se,"options"),se?.signal!=null&&g(se.signal,"options.signal"),ee=ae(ee),async function*(){var Z;if(se!=null&&(Z=se.signal)!==null&&Z!==void 0&&Z.aborted)throw new f;for await(const oe of this){var ue;if(se!=null&&(ue=se.signal)!==null&&ue!==void 0&&ue.aborted)throw new f;if(ee-- >0&&(yield oe),ee<=0)return}}.call(this)},compose:function(ee,se){if(se!=null&&_(se,"options"),se?.signal!=null&&g(se.signal,"options.signal"),R(ee)&&!k(ee))throw new u("stream",ee,"must be writable");const Z=A(this,ee);return se!=null&&se.signal&&y(se.signal,Z),Z}},o.exports.promiseReturningOperators={every:async function(ee,se=void 0){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);return!await Q.call(this,async(...Z)=>!await ee(...Z),se)},forEach:async function(ee,se){if(typeof ee!="function")throw new c("fn",["Function","AsyncFunction"],ee);for await(const Z of W.call(this,async function(ue,oe){return await ee(ue,oe),le},se));},reduce:async function(ee,se,Z){var ue;if(typeof ee!="function")throw new c("reducer",["Function","AsyncFunction"],ee);Z!=null&&_(Z,"options"),Z?.signal!=null&&g(Z.signal,"options.signal");let oe=arguments.length>1;if(Z!=null&&(ue=Z.signal)!==null&&ue!==void 0&&ue.aborted){const re=new f(void 0,{cause:Z.signal.reason});throw this.once("error",()=>{}),await E(this.destroy(re)),re}const xe=new h,ye=xe.signal;if(Z!=null&&Z.signal){const re={once:!0,[M]:this,[x]:!0};Z.signal.addEventListener("abort",()=>xe.abort(),re)}let ke=!1;try{for await(const re of this){var F;if(ke=!0,Z!=null&&(F=Z.signal)!==null&&F!==void 0&&F.aborted)throw new f;oe?se=await ee(se,re,{signal:ye}):(se=re,oe=!0)}if(!ke&&!oe)throw new X}finally{xe.abort()}return se},toArray:async function(ee){ee!=null&&_(ee,"options"),ee?.signal!=null&&g(ee.signal,"options.signal");const se=[];for await(const ue of this){var Z;if(ee!=null&&(Z=ee.signal)!==null&&Z!==void 0&&Z.aborted)throw new f(void 0,{cause:ee.signal.reason});z(se,ue)}return se},some:Q,find:async function(ee,se){for await(const Z of U.call(this,ee,se))return Z}}},893:(o,a,l)=>{const h=l(8310),u=l(7328),c=l(3737),p=l(672),{MT:m,NUMBYTES:f,SYMS:g}=l(9452),{Buffer:w}=l(8287);function _(x){return x>1?"s":""}class M extends h.Transform{constructor(E={}){const{depth:A=1,max_depth:y=10,no_summary:k=!1,tags:R={},preferWeb:I,encoding:z,...q}=E;super({...q,readableObjectMode:!1,writableObjectMode:!1}),this.depth=A,this.max_depth=y,this.all=new p,R[24]||(R[24]=this._tag_24.bind(this)),this.parser=new c({tags:R,max_depth:y,preferWeb:I,encoding:z}),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("start-string",this._on_start_string.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("error",this._on_error.bind(this)),k||this.parser.on("data",this._on_data.bind(this)),this.parser.bs.on("read",this._on_read.bind(this))}_tag_24(E){const A=new M({depth:this.depth+1,no_summary:!0});A.on("data",y=>this.push(y)),A.on("error",y=>this.emit("error",y)),A.end(E)}_transform(E,A,y){this.parser.write(E,A,y)}_flush(E){return this.parser._flush(E)}static comment(E,A={},y=null){if(E==null)throw new Error("input required");({options:A,cb:y}=function(D,J){switch(typeof D){case"function":return{options:{},cb:D};case"string":return{options:{encoding:D},cb:J};case"number":return{options:{max_depth:D},cb:J};case"object":return{options:D||{},cb:J};default:throw new TypeError("Unknown option type")}}(A,y));const k=new p,{encoding:R="hex",...I}=A,z=new M(I);let q=null;return typeof y=="function"?(z.on("end",()=>{y(null,k.toString("utf8"))}),z.on("error",y)):q=new Promise((D,J)=>{z.on("end",()=>{D(k.toString("utf8"))}),z.on("error",J)}),z.pipe(k),u.guessEncoding(E,R).pipe(z),q}_on_error(E){this.push("ERROR: "),this.push(E.toString()),this.push(`
`)}_on_read(E){this.all.write(E);const A=E.toString("hex");this.push(new Array(this.depth+1).join("  ")),this.push(A);let y=2*(this.max_depth-this.depth)-A.length;y<1&&(y=1),this.push(new Array(y+1).join(" ")),this.push("-- ")}_on_more(E,A,y,k){let R="";switch(this.depth++,E){case m.POS_INT:R="Positive number,";break;case m.NEG_INT:R="Negative number,";break;case m.ARRAY:R="Array, length";break;case m.MAP:R="Map, count";break;case m.BYTE_STRING:R="Bytes, length";break;case m.UTF8_STRING:R="String, length";break;case m.SIMPLE_FLOAT:R=A===1?"Simple value,":"Float,"}this.push(`${R} next ${A} byte${_(A)}
`)}_on_start_string(E,A,y,k){let R="";switch(this.depth++,E){case m.BYTE_STRING:R=`Bytes, length: ${A}`;break;case m.UTF8_STRING:R=`String, length: ${A.toString()}`}this.push(`${R}
`)}_on_start(E,A,y,k){switch(this.depth++,y){case m.ARRAY:this.push(`[${k}], `);break;case m.MAP:k%2?this.push(`{Val:${Math.floor(k/2)}}, `):this.push(`{Key:${Math.floor(k/2)}}, `)}switch(E){case m.TAG:this.push(`Tag #${A}`),A===24&&this.push(" Encoded CBOR data item");break;case m.ARRAY:A===g.STREAM?this.push("Array (streaming)"):this.push(`Array, ${A} item${_(A)}`);break;case m.MAP:A===g.STREAM?this.push("Map (streaming)"):this.push(`Map, ${A} pair${_(A)}`);break;case m.BYTE_STRING:this.push("Bytes (streaming)");break;case m.UTF8_STRING:this.push("String (streaming)")}this.push(`
`)}_on_stop(E){this.depth--}_on_value(E,A,y,k){if(E!==g.BREAK)switch(A){case m.ARRAY:this.push(`[${y}], `);break;case m.MAP:y%2?this.push(`{Val:${Math.floor(y/2)}}, `):this.push(`{Key:${Math.floor(y/2)}}, `)}const R=u.cborValueToString(E,-1/0);switch(typeof E=="string"||w.isBuffer(E)?(E.length>0&&(this.push(R),this.push(`
`)),this.depth--):(this.push(R),this.push(`
`)),k){case f.ONE:case f.TWO:case f.FOUR:case f.EIGHT:this.depth--}}_on_data(){this.push("0x"),this.push(this.all.read().toString("hex")),this.push(`
`)}}o.exports=M},2861:(o,a,l)=>{var h=l(8287),u=h.Buffer;function c(m,f){for(var g in m)f[g]=m[g]}function p(m,f,g){return u(m,f,g)}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?o.exports=h:(c(h,a),a.Buffer=p),p.prototype=Object.create(u.prototype),c(u,p),p.from=function(m,f,g){if(typeof m=="number")throw new TypeError("Argument must not be a number");return u(m,f,g)},p.alloc=function(m,f,g){if(typeof m!="number")throw new TypeError("Argument must be a number");var w=u(m);return f!==void 0?typeof g=="string"?w.fill(f,g):w.fill(f):w.fill(0),w},p.allocUnsafe=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return u(m)},p.allocUnsafeSlow=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(m)}},2893:(o,a,l)=>{const h=l(8310),u=l(672),c=l(7328),p=l(9452),{MT:m,NUMBYTES:f,SHIFT32:g,SIMPLE:w,SYMS:_,TAG:M,BI:x}=p,{Buffer:E}=l(8287),A=m.SIMPLE_FLOAT<<5|f.TWO,y=m.SIMPLE_FLOAT<<5|f.FOUR,k=m.SIMPLE_FLOAT<<5|f.EIGHT,R=m.SIMPLE_FLOAT<<5|w.TRUE,I=m.SIMPLE_FLOAT<<5|w.FALSE,z=m.SIMPLE_FLOAT<<5|w.UNDEFINED,q=m.SIMPLE_FLOAT<<5|w.NULL,D=E.from([255]),J=E.from("f97e00","hex"),P=E.from("f9fc00","hex"),$=E.from("f97c00","hex"),C=E.from("f98000","hex"),K={};let j={};class G extends h.Transform{constructor(T={}){const{canonical:W=!1,encodeUndefined:Q,disallowUndefinedKeys:U=!1,dateType:X="number",collapseBigIntegers:ae=!1,detectLoops:ee=!1,omitUndefinedProperties:se=!1,genTypes:Z=[],...ue}=T;if(super({...ue,readableObjectMode:!1,writableObjectMode:!0}),this.canonical=W,this.encodeUndefined=Q,this.disallowUndefinedKeys=U,this.dateType=function(oe){if(!oe)return"number";switch(oe.toLowerCase()){case"number":return"number";case"float":return"float";case"int":case"integer":return"int";case"string":return"string"}throw new TypeError(`dateType invalid, got "${oe}"`)}(X),this.collapseBigIntegers=!!this.canonical||ae,this.detectLoops=void 0,typeof ee=="boolean")ee&&(this.detectLoops=new WeakSet);else{if(!(ee instanceof WeakSet))throw new TypeError("detectLoops must be boolean or WeakSet");this.detectLoops=ee}if(this.omitUndefinedProperties=se,this.semanticTypes={...G.SEMANTIC_TYPES},Array.isArray(Z))for(let oe=0,xe=Z.length;oe<xe;oe+=2)this.addSemanticType(Z[oe],Z[oe+1]);else for(const[oe,xe]of Object.entries(Z))this.addSemanticType(oe,xe)}_transform(T,W,Q){Q(this.pushAny(T)===!1?new Error("Push Error"):void 0)}_flush(T){T()}_pushUInt8(T){const W=E.allocUnsafe(1);return W.writeUInt8(T,0),this.push(W)}_pushUInt16BE(T){const W=E.allocUnsafe(2);return W.writeUInt16BE(T,0),this.push(W)}_pushUInt32BE(T){const W=E.allocUnsafe(4);return W.writeUInt32BE(T,0),this.push(W)}_pushFloatBE(T){const W=E.allocUnsafe(4);return W.writeFloatBE(T,0),this.push(W)}_pushDoubleBE(T){const W=E.allocUnsafe(8);return W.writeDoubleBE(T,0),this.push(W)}_pushNaN(){return this.push(J)}_pushInfinity(T){const W=T<0?P:$;return this.push(W)}_pushFloat(T){if(this.canonical){const W=E.allocUnsafe(2);if(c.writeHalf(W,T))return this._pushUInt8(A)&&this.push(W)}return Math.fround(T)===T?this._pushUInt8(y)&&this._pushFloatBE(T):this._pushUInt8(k)&&this._pushDoubleBE(T)}_pushInt(T,W,Q){const U=W<<5;if(T<24)return this._pushUInt8(U|T);if(T<=255)return this._pushUInt8(U|f.ONE)&&this._pushUInt8(T);if(T<=65535)return this._pushUInt8(U|f.TWO)&&this._pushUInt16BE(T);if(T<=4294967295)return this._pushUInt8(U|f.FOUR)&&this._pushUInt32BE(T);let X=Number.MAX_SAFE_INTEGER;return W===m.NEG_INT&&X--,T<=X?this._pushUInt8(U|f.EIGHT)&&this._pushUInt32BE(Math.floor(T/g))&&this._pushUInt32BE(T%g):W===m.NEG_INT?this._pushFloat(Q):this._pushFloat(T)}_pushIntNum(T){return Object.is(T,-0)?this.push(C):T<0?this._pushInt(-T-1,m.NEG_INT,T):this._pushInt(T,m.POS_INT)}_pushNumber(T){return isNaN(T)?this._pushNaN():isFinite(T)?Math.round(T)===T?this._pushIntNum(T):this._pushFloat(T):this._pushInfinity(T)}_pushString(T){const W=E.byteLength(T,"utf8");return this._pushInt(W,m.UTF8_STRING)&&this.push(T,"utf8")}_pushBoolean(T){return this._pushUInt8(T?R:I)}_pushUndefined(T){switch(typeof this.encodeUndefined){case"undefined":return this._pushUInt8(z);case"function":return this.pushAny(this.encodeUndefined(T));case"object":{const W=c.bufferishToBuffer(this.encodeUndefined);if(W)return this.push(W)}}return this.pushAny(this.encodeUndefined)}_pushNull(T){return this._pushUInt8(q)}_pushTag(T){return this._pushInt(T,m.TAG)}_pushJSBigint(T){let W=m.POS_INT,Q=M.POS_BIGINT;if(T<0&&(T=-T+x.MINUS_ONE,W=m.NEG_INT,Q=M.NEG_BIGINT),this.collapseBigIntegers&&T<=x.MAXINT64)return T<=4294967295?this._pushInt(Number(T),W):this._pushUInt8(W<<5|f.EIGHT)&&this._pushUInt32BE(Number(T/x.SHIFT32))&&this._pushUInt32BE(Number(T%x.SHIFT32));let U=T.toString(16);U.length%2&&(U=`0${U}`);const X=E.from(U,"hex");return this._pushTag(Q)&&G._pushBuffer(this,X)}_pushObject(T,W){if(!T)return this._pushNull(T);if(!(W={indefinite:!1,skipTypes:!1,...W}).indefinite&&this.detectLoops){if(this.detectLoops.has(T))throw new Error(`Loop detected while CBOR encoding.
Call removeLoopDetectors before resuming.`);this.detectLoops.add(T)}if(!W.skipTypes){const ae=T.encodeCBOR;if(typeof ae=="function")return ae.call(T,this);const ee=this.semanticTypes[T.constructor.name];if(ee)return ee.call(T,this,T)}const Q=Object.keys(T).filter(ae=>{const ee=typeof T[ae];return ee!=="function"&&(!this.omitUndefinedProperties||ee!=="undefined")}),U={};if(this.canonical&&Q.sort((ae,ee)=>{const se=U[ae]||(U[ae]=G.encode(ae)),Z=U[ee]||(U[ee]=G.encode(ee));return se.compare(Z)}),W.indefinite){if(!this._pushUInt8(m.MAP<<5|f.INDEFINITE))return!1}else if(!this._pushInt(Q.length,m.MAP))return!1;let X=null;for(let ae=0,ee=Q.length;ae<ee;ae++){const se=Q[ae];if(this.canonical&&(X=U[se])){if(!this.push(X))return!1}else if(!this._pushString(se))return!1;if(!this.pushAny(T[se]))return!1}if(W.indefinite){if(!this.push(D))return!1}else this.detectLoops&&this.detectLoops.delete(T);return!0}_encodeAll(T){const W=new u({highWaterMark:this.readableHighWaterMark});this.pipe(W);for(const Q of T)this.pushAny(Q);return this.end(),W.read()}addSemanticType(T,W){const Q=typeof T=="string"?T:T.name,U=this.semanticTypes[Q];if(W){if(typeof W!="function")throw new TypeError("fun must be of type function");this.semanticTypes[Q]=W}else U&&delete this.semanticTypes[Q];return U}pushAny(T){switch(typeof T){case"number":return this._pushNumber(T);case"bigint":return this._pushJSBigint(T);case"string":return this._pushString(T);case"boolean":return this._pushBoolean(T);case"undefined":return this._pushUndefined(T);case"object":return this._pushObject(T);case"symbol":switch(T){case _.NULL:return this._pushNull(null);case _.UNDEFINED:return this._pushUndefined(void 0);default:throw new TypeError(`Unknown symbol: ${T.toString()}`)}default:throw new TypeError(`Unknown type: ${typeof T}, ${typeof T.toString=="function"?T.toString():""}`)}}static pushArray(T,W,Q){Q={indefinite:!1,...Q};const U=W.length;if(Q.indefinite){if(!T._pushUInt8(m.ARRAY<<5|f.INDEFINITE))return!1}else if(!T._pushInt(U,m.ARRAY))return!1;for(let X=0;X<U;X++)if(!T.pushAny(W[X]))return!1;return!(Q.indefinite&&!T.push(D))}removeLoopDetectors(){return!!this.detectLoops&&(this.detectLoops=new WeakSet,!0)}static _pushDate(T,W){switch(T.dateType){case"string":return T._pushTag(M.DATE_STRING)&&T._pushString(W.toISOString());case"int":return T._pushTag(M.DATE_EPOCH)&&T._pushIntNum(Math.round(W.getTime()/1e3));case"float":return T._pushTag(M.DATE_EPOCH)&&T._pushFloat(W.getTime()/1e3);default:return T._pushTag(M.DATE_EPOCH)&&T.pushAny(W.getTime()/1e3)}}static _pushBuffer(T,W){return T._pushInt(W.length,m.BYTE_STRING)&&T.push(W)}static _pushNoFilter(T,W){return G._pushBuffer(T,W.slice())}static _pushRegexp(T,W){return T._pushTag(M.REGEXP)&&T.pushAny(W.source)}static _pushSet(T,W){if(!T._pushTag(M.SET)||!T._pushInt(W.size,m.ARRAY))return!1;for(const Q of W)if(!T.pushAny(Q))return!1;return!0}static _pushURL(T,W){return T._pushTag(M.URI)&&T.pushAny(W.toString())}static _pushBoxed(T,W){return T.pushAny(W.valueOf())}static _pushMap(T,W,Q){Q={indefinite:!1,...Q};let U=[...W.entries()];if(T.omitUndefinedProperties&&(U=U.filter(([X,ae])=>ae!==void 0)),Q.indefinite){if(!T._pushUInt8(m.MAP<<5|f.INDEFINITE))return!1}else if(!T._pushInt(U.length,m.MAP))return!1;if(T.canonical){const X=new G({genTypes:T.semanticTypes,canonical:T.canonical,detectLoops:!!T.detectLoops,dateType:T.dateType,disallowUndefinedKeys:T.disallowUndefinedKeys,collapseBigIntegers:T.collapseBigIntegers}),ae=new u({highWaterMark:T.readableHighWaterMark});X.pipe(ae),U.sort(([ee],[se])=>{X.pushAny(ee);const Z=ae.read();X.pushAny(se);const ue=ae.read();return Z.compare(ue)});for(const[ee,se]of U){if(T.disallowUndefinedKeys&&ee===void 0)throw new Error("Invalid Map key: undefined");if(!T.pushAny(ee)||!T.pushAny(se))return!1}}else for(const[X,ae]of U){if(T.disallowUndefinedKeys&&X===void 0)throw new Error("Invalid Map key: undefined");if(!T.pushAny(X)||!T.pushAny(ae))return!1}return!(Q.indefinite&&!T.push(D))}static _pushTypedArray(T,W){let Q=64,U=W.BYTES_PER_ELEMENT;const{name:X}=W.constructor;return X.startsWith("Float")?(Q|=16,U/=2):X.includes("U")||(Q|=8),(X.includes("Clamped")||U!==1&&!c.isBigEndian())&&(Q|=4),Q|={1:0,2:1,4:2,8:3}[U],!!T._pushTag(Q)&&G._pushBuffer(T,E.from(W.buffer,W.byteOffset,W.byteLength))}static _pushArrayBuffer(T,W){return G._pushBuffer(T,E.from(W))}static encodeIndefinite(T,W,Q={}){if(W==null){if(this==null)throw new Error("No object to encode");W=this}const{chunkSize:U=4096}=Q;let X=!0;const ae=typeof W;let ee=null;if(ae==="string"){X=X&&T._pushUInt8(m.UTF8_STRING<<5|f.INDEFINITE);let se=0;for(;se<W.length;){const Z=se+U;X=X&&T._pushString(W.slice(se,Z)),se=Z}X=X&&T.push(D)}else if(ee=c.bufferishToBuffer(W)){X=X&&T._pushUInt8(m.BYTE_STRING<<5|f.INDEFINITE);let se=0;for(;se<ee.length;){const Z=se+U;X=X&&G._pushBuffer(T,ee.slice(se,Z)),se=Z}X=X&&T.push(D)}else if(Array.isArray(W))X=X&&G.pushArray(T,W,{indefinite:!0});else if(W instanceof Map)X=X&&G._pushMap(T,W,{indefinite:!0});else{if(ae!=="object")throw new Error("Invalid indefinite encoding");X=X&&T._pushObject(W,{indefinite:!0,skipTypes:!0})}return X}static encode(...T){return new G()._encodeAll(T)}static encodeCanonical(...T){return new G({canonical:!0})._encodeAll(T)}static encodeOne(T,W){return new G(W)._encodeAll([T])}static encodeAsync(T,W){return new Promise((Q,U)=>{const X=[],ae=new G(W);ae.on("data",ee=>X.push(ee)),ae.on("error",U),ae.on("finish",()=>Q(E.concat(X))),ae.pushAny(T),ae.end()})}static get SEMANTIC_TYPES(){return j}static set SEMANTIC_TYPES(T){j=T}static reset(){G.SEMANTIC_TYPES={...K}}}Object.assign(K,{Array:G.pushArray,Date:G._pushDate,Buffer:G._pushBuffer,[E.name]:G._pushBuffer,Map:G._pushMap,NoFilter:G._pushNoFilter,[u.name]:G._pushNoFilter,RegExp:G._pushRegexp,Set:G._pushSet,ArrayBuffer:G._pushArrayBuffer,Uint8ClampedArray:G._pushTypedArray,Uint8Array:G._pushTypedArray,Uint16Array:G._pushTypedArray,Uint32Array:G._pushTypedArray,Int8Array:G._pushTypedArray,Int16Array:G._pushTypedArray,Int32Array:G._pushTypedArray,Float32Array:G._pushTypedArray,Float64Array:G._pushTypedArray,URL:G._pushURL,Boolean:G._pushBoxed,Number:G._pushBoxed,String:G._pushBoxed}),typeof BigUint64Array<"u"&&(K[BigUint64Array.name]=G._pushTypedArray),typeof BigInt64Array<"u"&&(K[BigInt64Array.name]=G._pushTypedArray),G.reset(),o.exports=G},2903:(o,a,l)=>{const{Buffer:h}=l(8287),u=l(2893),c=l(3737),{MT:p}=l(9452);class m extends Map{constructor(g){super(g)}static _encode(g){return u.encodeCanonical(g).toString("base64")}static _decode(g){return c.decodeFirstSync(g,"base64")}get(g){return super.get(m._encode(g))}set(g,w){return super.set(m._encode(g),w)}delete(g){return super.delete(m._encode(g))}has(g){return super.has(m._encode(g))}*keys(){for(const g of super.keys())yield m._decode(g)}*entries(){for(const g of super.entries())yield[m._decode(g[0]),g[1]]}[Symbol.iterator](){return this.entries()}forEach(g,w=this){if(typeof g!="function")throw new TypeError("Must be function");for(const _ of super.entries())g.call(w,_[1],m._decode(_[0]),this)}encodeCBOR(g){if(!g._pushInt(this.size,p.MAP))return!1;if(g.canonical){const w=Array.from(super.entries()).map(_=>[h.from(_[0],"base64"),_[1]]);w.sort((_,M)=>_[0].compare(M[0]));for(const _ of w)if(!g.push(_[0])||!g.pushAny(_[1]))return!1}else for(const w of super.entries())if(!g.push(h.from(w[0],"base64"))||!g.pushAny(w[1]))return!1;return!0}}o.exports=m},3095:(o,a,l)=>{const{ArrayPrototypePop:h,Promise:u}=l(4134),{isIterable:c,isNodeStream:p,isWebStream:m}=l(6115),{pipelineImpl:f}=l(7758),{finished:g}=l(6238);l(5506),o.exports={finished:g,pipeline:function(...w){return new u((_,M)=>{let x,E;const A=w[w.length-1];if(A&&typeof A=="object"&&!p(A)&&!c(A)&&!m(A)){const y=h(w);x=y.signal,E=y.end}f(w,(y,k)=>{y?M(y):_(k)},{signal:x,end:E})})}}},3141:(o,a,l)=>{var h=l(2861).Buffer,u=h.isEncoding||function(E){switch((E=""+E)&&E.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(E){var A;switch(this.encoding=function(y){var k=function(R){if(!R)return"utf8";for(var I;;)switch(R){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return R;default:if(I)return;R=(""+R).toLowerCase(),I=!0}}(y);if(typeof k!="string"&&(h.isEncoding===u||!u(y)))throw new Error("Unknown encoding: "+y);return k||y}(E),this.encoding){case"utf16le":this.text=f,this.end=g,A=4;break;case"utf8":this.fillLast=m,A=4;break;case"base64":this.text=w,this.end=_,A=3;break;default:return this.write=M,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(A)}function p(E){return E<=127?0:E>>5==6?2:E>>4==14?3:E>>3==30?4:E>>6==2?-1:-2}function m(E){var A=this.lastTotal-this.lastNeed,y=function(k,R){if((192&R[0])!=128)return k.lastNeed=0,"ï¿½";if(k.lastNeed>1&&R.length>1){if((192&R[1])!=128)return k.lastNeed=1,"ï¿½";if(k.lastNeed>2&&R.length>2&&(192&R[2])!=128)return k.lastNeed=2,"ï¿½"}}(this,E);return y!==void 0?y:this.lastNeed<=E.length?(E.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(E.copy(this.lastChar,A,0,E.length),void(this.lastNeed-=E.length))}function f(E,A){if((E.length-A)%2==0){var y=E.toString("utf16le",A);if(y){var k=y.charCodeAt(y.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=E[E.length-1],E.toString("utf16le",A,E.length-1)}function g(E){var A=E&&E.length?this.write(E):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,y)}return A}function w(E,A){var y=(E.length-A)%3;return y===0?E.toString("base64",A):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=E[E.length-1]:(this.lastChar[0]=E[E.length-2],this.lastChar[1]=E[E.length-1]),E.toString("base64",A,E.length-y))}function _(E){var A=E&&E.length?this.write(E):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function M(E){return E.toString(this.encoding)}function x(E){return E&&E.length?this.write(E):""}a.StringDecoder=c,c.prototype.write=function(E){if(E.length===0)return"";var A,y;if(this.lastNeed){if((A=this.fillLast(E))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<E.length?A?A+this.text(E,y):this.text(E,y):A||""},c.prototype.end=function(E){var A=E&&E.length?this.write(E):"";return this.lastNeed?A+"ï¿½":A},c.prototype.text=function(E,A){var y=function(R,I,z){var q=I.length-1;if(q<z)return 0;var D=p(I[q]);return D>=0?(D>0&&(R.lastNeed=D-1),D):--q<z||D===-2?0:(D=p(I[q]))>=0?(D>0&&(R.lastNeed=D-2),D):--q<z||D===-2?0:(D=p(I[q]))>=0?(D>0&&(D===2?D=0:R.lastNeed=D-3),D):0}(this,E,A);if(!this.lastNeed)return E.toString("utf8",A);this.lastTotal=y;var k=E.length-(y-this.lastNeed);return E.copy(this.lastChar,0,k),E.toString("utf8",A,k)},c.prototype.fillLast=function(E){if(this.lastNeed<=E.length)return E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);E.copy(this.lastChar,this.lastTotal-this.lastNeed,0,E.length),this.lastNeed-=E.length}},3370:(o,a,l)=>{const{ObjectDefineProperties:h,ObjectGetOwnPropertyDescriptor:u,ObjectKeys:c,ObjectSetPrototypeOf:p}=l(4134);o.exports=g;const m=l(7576),f=l(8584);p(g.prototype,m.prototype),p(g,m);{const x=c(f.prototype);for(let E=0;E<x.length;E++){const A=x[E];g.prototype[A]||(g.prototype[A]=f.prototype[A])}}function g(x){if(!(this instanceof g))return new g(x);m.call(this,x),f.call(this,x),x?(this.allowHalfOpen=x.allowHalfOpen!==!1,x.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),x.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let w,_;function M(){return w===void 0&&(w={}),w}h(g.prototype,{writable:{__proto__:null,...u(f.prototype,"writable")},writableHighWaterMark:{__proto__:null,...u(f.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...u(f.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...u(f.prototype,"writableBuffer")},writableLength:{__proto__:null,...u(f.prototype,"writableLength")},writableFinished:{__proto__:null,...u(f.prototype,"writableFinished")},writableCorked:{__proto__:null,...u(f.prototype,"writableCorked")},writableEnded:{__proto__:null,...u(f.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...u(f.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set(x){this._readableState&&this._writableState&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}}}),g.fromWeb=function(x,E){return M().newStreamDuplexFromReadableWritablePair(x,E)},g.toWeb=function(x){return M().newReadableWritablePairFromDuplex(x)},g.from=function(x){return _||(_=l(6706)),_(x,"body")}},3557:(o,a,l)=>{const h=l(9452),u=l(7328),c=Symbol("INTERNAL_JSON");function p(A,y){if(u.isBufferish(A))A.toJSON=y;else if(Array.isArray(A))for(const k of A)p(k,y);else if(A&&typeof A=="object"&&(!(A instanceof E)||A.tag<21||A.tag>23))for(const k of Object.values(A))p(k,y)}function m(){return u.base64(this)}function f(){return u.base64url(this)}function g(){return this.toString("hex")}const w={0:A=>new Date(A),1:A=>new Date(1e3*A),2:A=>u.bufferToBigInt(A),3:A=>h.BI.MINUS_ONE-u.bufferToBigInt(A),21:(A,y)=>(u.isBufferish(A)?y[c]=f:p(A,f),y),22:(A,y)=>(u.isBufferish(A)?y[c]=m:p(A,m),y),23:(A,y)=>(u.isBufferish(A)?y[c]=g:p(A,g),y),32:A=>new URL(A),33:(A,y)=>{if(!A.match(/^[a-zA-Z0-9_-]+$/))throw new Error("Invalid base64url characters");const k=A.length%4;if(k===1)throw new Error("Invalid base64url length");if(k===2){if("AQgw".indexOf(A[A.length-1])===-1)throw new Error("Invalid base64 padding")}else if(k===3&&"AEIMQUYcgkosw048".indexOf(A[A.length-1])===-1)throw new Error("Invalid base64 padding");return y},34:(A,y)=>{const k=A.match(/^[a-zA-Z0-9+/]+(?<padding>={0,2})$/);if(!k)throw new Error("Invalid base64 characters");if(A.length%4!=0)throw new Error("Invalid base64 length");if(k.groups.padding==="="){if("AQgw".indexOf(A[A.length-2])===-1)throw new Error("Invalid base64 padding")}else if(k.groups.padding==="=="&&"AEIMQUYcgkosw048".indexOf(A[A.length-3])===-1)throw new Error("Invalid base64 padding");return y},35:A=>new RegExp(A),258:A=>new Set(A)},_={64:Uint8Array,65:Uint16Array,66:Uint32Array,68:Uint8ClampedArray,69:Uint16Array,70:Uint32Array,72:Int8Array,73:Int16Array,74:Int32Array,77:Int16Array,78:Int32Array,81:Float32Array,82:Float64Array,85:Float32Array,86:Float64Array};function M(A,y){if(!u.isBufferish(A))throw new TypeError("val not a buffer");const{tag:k}=y,R=_[k];if(!R)throw new Error(`Invalid typed array tag: ${k}`);const I=2**(((16&k)>>4)+(3&k));return!(4&k)!==u.isBigEndian()&&I>1&&function(z,q,D,J){const P=new DataView(z),[$,C]={2:[P.getUint16,P.setUint16],4:[P.getUint32,P.setUint32],8:[P.getBigUint64,P.setBigUint64]}[q],K=D+J;for(let j=D;j<K;j+=q)C.call(P,j,$.call(P,j,!0))}(A.buffer,I,A.byteOffset,A.byteLength),new R(A.buffer.slice(A.byteOffset,A.byteOffset+A.byteLength))}typeof BigUint64Array<"u"&&(_[67]=BigUint64Array,_[71]=BigUint64Array),typeof BigInt64Array<"u"&&(_[75]=BigInt64Array,_[79]=BigInt64Array);for(const A of Object.keys(_))w[A]=M;let x={};class E{constructor(y,k,R){if(this.tag=y,this.value=k,this.err=R,typeof this.tag!="number")throw new Error(`Invalid tag type (${typeof this.tag})`);if(this.tag<0||(0|this.tag)!==this.tag)throw new Error(`Tag must be a positive integer: ${this.tag}`)}toJSON(){if(this[c])return this[c].call(this.value);const y={tag:this.tag,value:this.value};return this.err&&(y.err=this.err),y}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(y){return y._pushTag(this.tag),y.pushAny(this.value)}convert(y){let k=y?.[this.tag];if(k===null)return this;if(typeof k!="function"&&(k=E.TAGS[this.tag],typeof k!="function"))return this;try{return k.call(this,this.value,this)}catch(R){return R&&R.message&&R.message.length>0?this.err=R.message:this.err=R,this}}static get TAGS(){return x}static set TAGS(y){x=y}static reset(){E.TAGS={...w}}}E.INTERNAL_JSON=c,E.reset(),o.exports=E},3600:(o,a,l)=>{o.exports=l(5506).PassThrough},3737:(o,a,l)=>{const h=l(4957),u=l(3557),c=l(5059),p=l(7328),m=l(672),f=l(9452),{MT:g,NUMBYTES:w,SYMS:_,BI:M}=f,{Buffer:x}=l(8287),E=Symbol("count"),A=Symbol("major type"),y=Symbol("error"),k=Symbol("not found");function R(J,P,$){const C=[];return C[E]=$,C[_.PARENT]=J,C[A]=P,C}function I(J,P){const $=new m;return $[E]=-1,$[_.PARENT]=J,$[A]=P,$}class z extends Error{constructor(P,$){super(`Unexpected data: 0x${P.toString(16)}`),this.name="UnexpectedDataError",this.byte=P,this.value=$}}function q(J,P){switch(typeof J){case"function":return{options:{},cb:J};case"string":return{options:{encoding:J},cb:P};case"object":return{options:J||{},cb:P};default:throw new TypeError("Unknown option type")}}class D extends h{constructor(P={}){const{tags:$={},max_depth:C=-1,preferMap:K=!1,preferWeb:j=!1,required:G=!1,encoding:le="hex",extendedResults:T=!1,preventDuplicateKeys:W=!1,...Q}=P;super({defaultEncoding:le,...Q}),this.running=!0,this.max_depth=C,this.tags=$,this.preferMap=K,this.preferWeb=j,this.extendedResults=T,this.required=G,this.preventDuplicateKeys=W,T&&(this.bs.on("read",this._onRead.bind(this)),this.valueBytes=new m)}static nullcheck(P){switch(P){case _.NULL:return null;case _.UNDEFINED:return;case k:throw new Error("Value not found");default:return P}}static decodeFirstSync(P,$={}){if(P==null)throw new TypeError("input required");({options:$}=q($));const{encoding:C="hex",...K}=$,j=new D(K),G=p.guessEncoding(P,C),le=j._parse();let T=le.next();for(;!T.done;){const Q=G.read(T.value);if(Q==null||Q.length!==T.value)throw new Error("Insufficient data");j.extendedResults&&j.valueBytes.write(Q),T=le.next(Q)}let W=null;if(j.extendedResults)W=T.value,W.unused=G.read();else if(W=D.nullcheck(T.value),G.length>0){const Q=G.read(1);throw G.unshift(Q),new z(Q[0],W)}return W}static decodeAllSync(P,$={}){if(P==null)throw new TypeError("input required");({options:$}=q($));const{encoding:C="hex",...K}=$,j=new D(K),G=p.guessEncoding(P,C),le=[];for(;G.length>0;){const T=j._parse();let W=T.next();for(;!W.done;){const Q=G.read(W.value);if(Q==null||Q.length!==W.value)throw new Error("Insufficient data");j.extendedResults&&j.valueBytes.write(Q),W=T.next(Q)}le.push(D.nullcheck(W.value))}return le}static decodeFirst(P,$={},C=null){if(P==null)throw new TypeError("input required");({options:$,cb:C}=q($,C));const{encoding:K="hex",required:j=!1,...G}=$,le=new D(G);let T=k;const W=p.guessEncoding(P,K),Q=new Promise((U,X)=>{le.on("data",ae=>{T=D.nullcheck(ae),le.close()}),le.once("error",ae=>le.extendedResults&&ae instanceof z?(T.unused=le.bs.slice(),U(T)):(T!==k&&(ae.value=T),T=y,le.close(),X(ae))),le.once("end",()=>{switch(T){case k:return j?X(new Error("No CBOR found")):U(T);case y:return;default:return U(T)}})});return typeof C=="function"&&Q.then(U=>C(null,U),C),W.pipe(le),Q}static decodeAll(P,$={},C=null){if(P==null)throw new TypeError("input required");({options:$,cb:C}=q($,C));const{encoding:K="hex",...j}=$,G=new D(j),le=[];G.on("data",W=>le.push(D.nullcheck(W)));const T=new Promise((W,Q)=>{G.on("error",Q),G.on("end",()=>W(le))});return typeof C=="function"&&T.then(W=>C(void 0,W),W=>C(W,void 0)),p.guessEncoding(P,K).pipe(G),T}close(){this.running=!1,this.__fresh=!0}_onRead(P){this.valueBytes.write(P)}*_parse(){let P=null,$=0,C=null;for(;;){if(this.max_depth>=0&&$>this.max_depth)throw new Error(`Maximum depth ${this.max_depth} exceeded`);const[K]=yield 1;if(!this.running)throw this.bs.unshift(x.from([K])),new z(K);const j=K>>5,G=31&K,le=P?.[A],T=P?.length;switch(G){case w.ONE:this.emit("more-bytes",j,1,le,T),[C]=yield 1;break;case w.TWO:case w.FOUR:case w.EIGHT:{const Q=1<<G-24;this.emit("more-bytes",j,Q,le,T);const U=yield Q;C=j===g.SIMPLE_FLOAT?U:p.parseCBORint(G,U);break}case 28:case 29:case 30:throw this.running=!1,new Error(`Additional info not implemented: ${G}`);case w.INDEFINITE:switch(j){case g.POS_INT:case g.NEG_INT:case g.TAG:throw new Error(`Invalid indefinite encoding for MT ${j}`)}C=-1;break;default:C=G}switch(j){case g.POS_INT:break;case g.NEG_INT:C=C===Number.MAX_SAFE_INTEGER?M.NEG_MAX:typeof C=="bigint"?M.MINUS_ONE-C:-1-C;break;case g.BYTE_STRING:case g.UTF8_STRING:switch(C){case 0:this.emit("start-string",j,C,le,T),C=j===g.UTF8_STRING?"":this.preferWeb?new Uint8Array(0):x.allocUnsafe(0);break;case-1:this.emit("start",j,_.STREAM,le,T),P=I(P,j),$++;continue;default:this.emit("start-string",j,C,le,T),C=yield C,j===g.UTF8_STRING?C=p.utf8(C):this.preferWeb&&(C=new Uint8Array(C.buffer,C.byteOffset,C.length))}break;case g.ARRAY:case g.MAP:switch(C){case 0:C=j===g.MAP?this.preferMap?new Map:{}:[];break;case-1:this.emit("start",j,_.STREAM,le,T),P=R(P,j,-1),$++;continue;default:this.emit("start",j,C,le,T),P=R(P,j,C*(j-3)),$++;continue}break;case g.TAG:this.emit("start",j,C,le,T),P=R(P,j,1),P.push(C),$++;continue;case g.SIMPLE_FLOAT:if(typeof C=="number"){if(G===w.ONE&&C<32)throw new Error(`Invalid two-byte encoding of simple value ${C}`);const Q=P!=null;C=c.decode(C,Q,Q&&P[E]<0)}else C=p.parseCBORfloat(C)}this.emit("value",C,le,T,G);let W=!1;for(;P!=null;){if(C===_.BREAK)P[E]=1;else if(Array.isArray(P))P.push(C);else{const U=P[A];if(U!=null&&U!==j)throw this.running=!1,new Error("Invalid major type in indefinite encoding");P.write(C)}if(--P[E]!==0){W=!0;break}if(--$,delete P[E],Array.isArray(P))switch(P[A]){case g.ARRAY:C=P;break;case g.MAP:{let U=!this.preferMap;if(P.length%2!=0)throw new Error(`Invalid map length: ${P.length}`);for(let X=0,ae=P.length;U&&X<ae;X+=2)if(typeof P[X]!="string"||P[X]==="__proto__"){U=!1;break}if(U){C={};for(let X=0,ae=P.length;X<ae;X+=2){if(this.preventDuplicateKeys&&Object.prototype.hasOwnProperty.call(C,P[X]))throw new Error("Duplicate keys in a map");C[P[X]]=P[X+1]}}else{C=new Map;for(let X=0,ae=P.length;X<ae;X+=2){if(this.preventDuplicateKeys&&C.has(P[X]))throw new Error("Duplicate keys in a map");C.set(P[X],P[X+1])}}break}case g.TAG:C=new u(P[0],P[1]).convert(this.tags)}else if(P instanceof m)switch(P[A]){case g.BYTE_STRING:C=P.slice(),this.preferWeb&&(C=new Uint8Array(C.buffer,C.byteOffset,C.length));break;case g.UTF8_STRING:C=P.toString("utf-8")}this.emit("stop",P[A]);const Q=P;P=P[_.PARENT],delete Q[_.PARENT],delete Q[A]}if(!W){if(this.extendedResults){const Q=this.valueBytes.slice(),U={value:D.nullcheck(C),bytes:Q,length:Q.length};return this.valueBytes=new m,U}return C}}}}D.NOT_FOUND=k,o.exports=D},4134:o=>{class a extends Error{constructor(h){if(!Array.isArray(h))throw new TypeError("Expected input to be an Array, got "+typeof h);let u="";for(let c=0;c<h.length;c++)u+=`    ${h[c].stack}
`;super(u),this.name="AggregateError",this.errors=h}}o.exports={AggregateError:a,ArrayIsArray:l=>Array.isArray(l),ArrayPrototypeIncludes:(l,h)=>l.includes(h),ArrayPrototypeIndexOf:(l,h)=>l.indexOf(h),ArrayPrototypeJoin:(l,h)=>l.join(h),ArrayPrototypeMap:(l,h)=>l.map(h),ArrayPrototypePop:(l,h)=>l.pop(h),ArrayPrototypePush:(l,h)=>l.push(h),ArrayPrototypeSlice:(l,h,u)=>l.slice(h,u),Error,FunctionPrototypeCall:(l,h,...u)=>l.call(h,...u),FunctionPrototypeSymbolHasInstance:(l,h)=>Function.prototype[Symbol.hasInstance].call(l,h),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(l,h)=>Object.defineProperties(l,h),ObjectDefineProperty:(l,h,u)=>Object.defineProperty(l,h,u),ObjectGetOwnPropertyDescriptor:(l,h)=>Object.getOwnPropertyDescriptor(l,h),ObjectKeys:l=>Object.keys(l),ObjectSetPrototypeOf:(l,h)=>Object.setPrototypeOf(l,h),Promise,PromisePrototypeCatch:(l,h)=>l.catch(h),PromisePrototypeThen:(l,h,u)=>l.then(h,u),PromiseReject:l=>Promise.reject(l),PromiseResolve:l=>Promise.resolve(l),ReflectApply:Reflect.apply,RegExpPrototypeTest:(l,h)=>l.test(h),SafeSet:Set,String,StringPrototypeSlice:(l,h,u)=>l.slice(h,u),StringPrototypeToLowerCase:l=>l.toLowerCase(),StringPrototypeToUpperCase:l=>l.toUpperCase(),StringPrototypeTrim:l=>l.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(l,h,u)=>l.set(h,u),Boolean,Uint8Array}},4147:(o,a,l)=>{const{SymbolDispose:h}=l(4134),{AbortError:u,codes:c}=l(6371),{isNodeStream:p,isWebStream:m,kControllerErrorFunction:f}=l(6115),g=l(6238),{ERR_INVALID_ARG_TYPE:w}=c;let _;o.exports.addAbortSignal=function(M,x){if((E=>{if(typeof E!="object"||!("aborted"in E))throw new w("signal","AbortSignal",E)})(M),!p(x)&&!m(x))throw new w("stream",["ReadableStream","WritableStream","Stream"],x);return o.exports.addAbortSignalNoValidate(M,x)},o.exports.addAbortSignalNoValidate=function(M,x){if(typeof M!="object"||!("aborted"in M))return x;const E=p(x)?()=>{x.destroy(new u(void 0,{cause:M.reason}))}:()=>{x[f](new u(void 0,{cause:M.reason}))};if(M.aborted)E();else{_=_||l(7760).addAbortListener;const A=_(M,E);g(x,A[h])}return x}},4259:(o,a,l)=>{const{ArrayIsArray:h,ObjectSetPrototypeOf:u}=l(4134),{EventEmitter:c}=l(7007);function p(f){c.call(this,f)}function m(f,g,w){if(typeof f.prependListener=="function")return f.prependListener(g,w);f._events&&f._events[g]?h(f._events[g])?f._events[g].unshift(w):f._events[g]=[w,f._events[g]]:f.on(g,w)}u(p.prototype,c.prototype),u(p,c),p.prototype.pipe=function(f,g){const w=this;function _(R){f.writable&&f.write(R)===!1&&w.pause&&w.pause()}function M(){w.readable&&w.resume&&w.resume()}w.on("data",_),f.on("drain",M),f._isStdio||g&&g.end===!1||(w.on("end",E),w.on("close",A));let x=!1;function E(){x||(x=!0,f.end())}function A(){x||(x=!0,typeof f.destroy=="function"&&f.destroy())}function y(R){k(),c.listenerCount(this,"error")===0&&this.emit("error",R)}function k(){w.removeListener("data",_),f.removeListener("drain",M),w.removeListener("end",E),w.removeListener("close",A),w.removeListener("error",y),f.removeListener("error",y),w.removeListener("end",k),w.removeListener("close",k),f.removeListener("close",k)}return m(w,"error",y),m(f,"error",y),w.on("end",k),w.on("close",k),f.on("close",k),f.emit("pipe",w),f},o.exports={Stream:p,prependListener:m}},4610:(o,a,l)=>{o.exports=l(5506).Transform},4957:(o,a,l)=>{const h=l(8310),u=l(672);class c extends h.Transform{constructor(m){super(m),this._writableState.objectMode=!1,this._readableState.objectMode=!0,this.bs=new u,this.__restart()}_transform(m,f,g){for(this.bs.write(m);this.bs.length>=this.__needed;){let w=null;const _=this.__needed===null?void 0:this.bs.read(this.__needed);try{w=this.__parser.next(_)}catch(M){return g(M)}this.__needed&&(this.__fresh=!1),w.done?(this.push(w.value),this.__restart()):this.__needed=w.value||1/0}return g()}*_parse(){throw new Error("Must be implemented in subclass")}__restart(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}_flush(m){m(this.__fresh?null:new Error("unexpected end of input"))}}o.exports=c},5059:(o,a,l)=>{const{MT:h,SIMPLE:u,SYMS:c}=l(9452);class p{constructor(f){if(typeof f!="number")throw new Error("Invalid Simple type: "+typeof f);if(f<0||f>255||(0|f)!==f)throw new Error(`value must be a small positive integer: ${f}`);this.value=f}toString(){return`simple(${this.value})`}[Symbol.for("nodejs.util.inspect.custom")](f,g){return`simple(${this.value})`}encodeCBOR(f){return f._pushInt(this.value,h.SIMPLE_FLOAT)}static isSimple(f){return f instanceof p}static decode(f,g=!0,w=!1){switch(f){case u.FALSE:return!1;case u.TRUE:return!0;case u.NULL:return g?null:c.NULL;case u.UNDEFINED:return g?void 0:c.UNDEFINED;case-1:if(!g||!w)throw new Error("Invalid BREAK");return c.BREAK;default:return new p(f)}}}o.exports=p},5291:(o,a,l)=>{const{MathFloor:h,NumberIsInteger:u}=l(4134),{validateInteger:c}=l(277),{ERR_INVALID_ARG_VALUE:p}=l(6371).codes;let m=16384,f=16;function g(w){return w?f:m}o.exports={getHighWaterMark:function(w,_,M,x){const E=function(A,y,k){return A.highWaterMark!=null?A.highWaterMark:y?A[k]:null}(_,x,M);if(E!=null){if(!u(E)||E<0)throw new p(x?`options.${M}`:"options.highWaterMark",E);return h(E)}return g(w.objectMode)},getDefaultHighWaterMark:g,setDefaultHighWaterMark:function(w,_){c(_,"value",0),w?f=_:m=_}}},5382:(o,a,l)=>{o.exports=l(5506).Duplex},5412:(o,a,l)=>{o.exports=l(5506).Readable},5506:(o,a,l)=>{const{Buffer:h}=l(8287),{ObjectDefineProperty:u,ObjectKeys:c,ReflectApply:p}=l(4134),{promisify:{custom:m}}=l(7760),{streamReturningOperators:f,promiseReturningOperators:g}=l(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:w}}=l(6371),_=l(7830),{setDefaultHighWaterMark:M,getDefaultHighWaterMark:x}=l(5291),{pipeline:E}=l(7758),{destroyer:A}=l(5896),y=l(6238),k=l(3095),R=l(6115),I=o.exports=l(4259).Stream;I.isDestroyed=R.isDestroyed,I.isDisturbed=R.isDisturbed,I.isErrored=R.isErrored,I.isReadable=R.isReadable,I.isWritable=R.isWritable,I.Readable=l(7576);for(const q of c(f)){let J=function(...P){if(new.target)throw w();return I.Readable.from(p(D,this,P))};const D=f[q];u(J,"name",{__proto__:null,value:D.name}),u(J,"length",{__proto__:null,value:D.length}),u(I.Readable.prototype,q,{__proto__:null,value:J,enumerable:!1,configurable:!0,writable:!0})}for(const q of c(g)){let J=function(...P){if(new.target)throw w();return p(D,this,P)};const D=g[q];u(J,"name",{__proto__:null,value:D.name}),u(J,"length",{__proto__:null,value:D.length}),u(I.Readable.prototype,q,{__proto__:null,value:J,enumerable:!1,configurable:!0,writable:!0})}I.Writable=l(8584),I.Duplex=l(3370),I.Transform=l(7382),I.PassThrough=l(6524),I.pipeline=E;const{addAbortSignal:z}=l(4147);I.addAbortSignal=z,I.finished=y,I.destroy=A,I.compose=_,I.setDefaultHighWaterMark=M,I.getDefaultHighWaterMark=x,u(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>k}),u(E,m,{__proto__:null,enumerable:!0,get:()=>k.pipeline}),u(y,m,{__proto__:null,enumerable:!0,get:()=>k.finished}),I.Stream=I,I._isUint8Array=function(q){return q instanceof Uint8Array},I._uint8ArrayToBuffer=function(q){return h.from(q.buffer,q.byteOffset,q.byteLength)}},5568:o=>{const{AbortController:a,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;o.exports=a,o.exports.AbortSignal=l,o.exports.default=a},5606:o=>{var a,l,h=o.exports={};function u(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function p(A){if(a===setTimeout)return setTimeout(A,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(A,0);try{return a(A,0)}catch{try{return a.call(null,A,0)}catch{return a.call(this,A,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:u}catch{a=u}try{l=typeof clearTimeout=="function"?clearTimeout:c}catch{l=c}})();var m,f=[],g=!1,w=-1;function _(){g&&m&&(g=!1,m.length?f=m.concat(f):w=-1,f.length&&M())}function M(){if(!g){var A=p(_);g=!0;for(var y=f.length;y;){for(m=f,f=[];++w<y;)m&&m[w].run();w=-1,y=f.length}m=null,g=!1,function(k){if(l===clearTimeout)return clearTimeout(k);if((l===c||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(k);try{return l(k)}catch{try{return l.call(null,k)}catch{return l.call(this,k)}}}(A)}}function x(A,y){this.fun=A,this.array=y}function E(){}h.nextTick=function(A){var y=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)y[k-1]=arguments[k];f.push(new x(A,y)),f.length!==1||g||p(M)},x.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=E,h.addListener=E,h.once=E,h.off=E,h.removeListener=E,h.removeAllListeners=E,h.emit=E,h.prependListener=E,h.prependOnceListener=E,h.listeners=function(A){return[]},h.binding=function(A){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(A){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},5896:(o,a,l)=>{const h=l(5606),{aggregateTwoErrors:u,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:p}=l(6371),{Symbol:m}=l(4134),{kIsDestroyed:f,isDestroyed:g,isFinished:w,isServerRequest:_}=l(6115),M=m("kDestroy"),x=m("kConstruct");function E($,C,K){$&&($.stack,C&&!C.errored&&(C.errored=$),K&&!K.errored&&(K.errored=$))}function A($,C,K){let j=!1;function G(le){if(j)return;j=!0;const T=$._readableState,W=$._writableState;E(le,W,T),W&&(W.closed=!0),T&&(T.closed=!0),typeof K=="function"&&K(le),le?h.nextTick(y,$,le):h.nextTick(k,$)}try{$._destroy(C||null,G)}catch(le){G(le)}}function y($,C){R($,C),k($)}function k($){const C=$._readableState,K=$._writableState;K&&(K.closeEmitted=!0),C&&(C.closeEmitted=!0),(K!=null&&K.emitClose||C!=null&&C.emitClose)&&$.emit("close")}function R($,C){const K=$._readableState,j=$._writableState;j!=null&&j.errorEmitted||K!=null&&K.errorEmitted||(j&&(j.errorEmitted=!0),K&&(K.errorEmitted=!0),$.emit("error",C))}function I($,C,K){const j=$._readableState,G=$._writableState;if(G!=null&&G.destroyed||j!=null&&j.destroyed)return this;j!=null&&j.autoDestroy||G!=null&&G.autoDestroy?$.destroy(C):C&&(C.stack,G&&!G.errored&&(G.errored=C),j&&!j.errored&&(j.errored=C),K?h.nextTick(R,$,C):R($,C))}function z($){let C=!1;function K(j){if(C)return void I($,j??new c);C=!0;const G=$._readableState,le=$._writableState,T=le||G;G&&(G.constructed=!0),le&&(le.constructed=!0),T.destroyed?$.emit(M,j):j?I($,j,!0):h.nextTick(q,$)}try{$._construct(j=>{h.nextTick(K,j)})}catch(j){h.nextTick(K,j)}}function q($){$.emit(x)}function D($){return $?.setHeader&&typeof $.abort=="function"}function J($){$.emit("close")}function P($,C){$.emit("error",C),h.nextTick(J,$)}o.exports={construct:function($,C){if(typeof $._construct!="function")return;const K=$._readableState,j=$._writableState;K&&(K.constructed=!1),j&&(j.constructed=!1),$.once(x,C),$.listenerCount(x)>1||h.nextTick(z,$)},destroyer:function($,C){$&&!g($)&&(C||w($)||(C=new p),_($)?($.socket=null,$.destroy(C)):D($)?$.abort():D($.req)?$.req.abort():typeof $.destroy=="function"?$.destroy(C):typeof $.close=="function"?$.close():C?h.nextTick(P,$,C):h.nextTick(J,$),$.destroyed||($[f]=!0))},destroy:function($,C){const K=this._readableState,j=this._writableState,G=j||K;return j!=null&&j.destroyed||K!=null&&K.destroyed?(typeof C=="function"&&C(),this):(E($,j,K),j&&(j.destroyed=!0),K&&(K.destroyed=!0),G.constructed?A(this,$,C):this.once(M,function(le){A(this,u(le,$),C)}),this)},undestroy:function(){const $=this._readableState,C=this._writableState;$&&($.constructed=!0,$.closed=!1,$.closeEmitted=!1,$.destroyed=!1,$.errored=null,$.errorEmitted=!1,$.reading=!1,$.ended=$.readable===!1,$.endEmitted=$.readable===!1),C&&(C.constructed=!0,C.destroyed=!1,C.closed=!1,C.closeEmitted=!1,C.errored=null,C.errorEmitted=!1,C.finalCalled=!1,C.prefinished=!1,C.ended=C.writable===!1,C.ending=C.writable===!1,C.finished=C.writable===!1)},errorOrDestroy:I}},6115:(o,a,l)=>{const{SymbolAsyncIterator:h,SymbolIterator:u,SymbolFor:c}=l(4134),p=c("nodejs.stream.destroyed"),m=c("nodejs.stream.errored"),f=c("nodejs.stream.readable"),g=c("nodejs.stream.writable"),w=c("nodejs.stream.disturbed"),_=c("nodejs.webstream.isClosedPromise"),M=c("nodejs.webstream.controllerErrorFunction");function x(C,K=!1){var j;return!(!C||typeof C.pipe!="function"||typeof C.on!="function"||K&&(typeof C.pause!="function"||typeof C.resume!="function")||C._writableState&&((j=C._readableState)===null||j===void 0?void 0:j.readable)===!1||C._writableState&&!C._readableState)}function E(C){var K;return!(!C||typeof C.write!="function"||typeof C.on!="function"||C._readableState&&((K=C._writableState)===null||K===void 0?void 0:K.writable)===!1)}function A(C){return C&&(C._readableState||C._writableState||typeof C.write=="function"&&typeof C.on=="function"||typeof C.pipe=="function"&&typeof C.on=="function")}function y(C){return!(!C||A(C)||typeof C.pipeThrough!="function"||typeof C.getReader!="function"||typeof C.cancel!="function")}function k(C){return!(!C||A(C)||typeof C.getWriter!="function"||typeof C.abort!="function")}function R(C){return!(!C||A(C)||typeof C.readable!="object"||typeof C.writable!="object")}function I(C){if(!A(C))return null;const K=C._writableState,j=C._readableState,G=K||j;return!!(C.destroyed||C[p]||G!=null&&G.destroyed)}function z(C){if(!E(C))return null;if(C.writableEnded===!0)return!0;const K=C._writableState;return(K==null||!K.errored)&&(typeof K?.ended!="boolean"?null:K.ended)}function q(C,K){if(!x(C))return null;const j=C._readableState;return(j==null||!j.errored)&&(typeof j?.endEmitted!="boolean"?null:!!(j.endEmitted||K===!1&&j.ended===!0&&j.length===0))}function D(C){return C&&C[f]!=null?C[f]:typeof C?.readable!="boolean"?null:!I(C)&&x(C)&&C.readable&&!q(C)}function J(C){return C&&C[g]!=null?C[g]:typeof C?.writable!="boolean"?null:!I(C)&&E(C)&&C.writable&&!z(C)}function P(C){return typeof C._closed=="boolean"&&typeof C._defaultKeepAlive=="boolean"&&typeof C._removedConnection=="boolean"&&typeof C._removedContLen=="boolean"}function $(C){return typeof C._sent100=="boolean"&&P(C)}o.exports={isDestroyed:I,kIsDestroyed:p,isDisturbed:function(C){var K;return!(!C||!((K=C[w])!==null&&K!==void 0?K:C.readableDidRead||C.readableAborted))},kIsDisturbed:w,isErrored:function(C){var K,j,G,le,T,W,Q,U,X,ae;return!(!C||!((K=(j=(G=(le=(T=(W=C[m])!==null&&W!==void 0?W:C.readableErrored)!==null&&T!==void 0?T:C.writableErrored)!==null&&le!==void 0?le:(Q=C._readableState)===null||Q===void 0?void 0:Q.errorEmitted)!==null&&G!==void 0?G:(U=C._writableState)===null||U===void 0?void 0:U.errorEmitted)!==null&&j!==void 0?j:(X=C._readableState)===null||X===void 0?void 0:X.errored)!==null&&K!==void 0?K:!((ae=C._writableState)===null||ae===void 0)&&ae.errored))},kIsErrored:m,isReadable:D,kIsReadable:f,kIsClosedPromise:_,kControllerErrorFunction:M,kIsWritable:g,isClosed:function(C){if(!A(C))return null;if(typeof C.closed=="boolean")return C.closed;const K=C._writableState,j=C._readableState;return typeof K?.closed=="boolean"||typeof j?.closed=="boolean"?K?.closed||j?.closed:typeof C._closed=="boolean"&&P(C)?C._closed:null},isDuplexNodeStream:function(C){return!(!C||typeof C.pipe!="function"||!C._readableState||typeof C.on!="function"||typeof C.write!="function")},isFinished:function(C,K){return A(C)?!(!I(C)&&(K?.readable!==!1&&D(C)||K?.writable!==!1&&J(C))):null},isIterable:function(C,K){return C!=null&&(K===!0?typeof C[h]=="function":K===!1?typeof C[u]=="function":typeof C[h]=="function"||typeof C[u]=="function")},isReadableNodeStream:x,isReadableStream:y,isReadableEnded:function(C){if(!x(C))return null;if(C.readableEnded===!0)return!0;const K=C._readableState;return!(!K||K.errored)&&(typeof K?.ended!="boolean"?null:K.ended)},isReadableFinished:q,isReadableErrored:function(C){var K,j;return A(C)?C.readableErrored?C.readableErrored:(K=(j=C._readableState)===null||j===void 0?void 0:j.errored)!==null&&K!==void 0?K:null:null},isNodeStream:A,isWebStream:function(C){return y(C)||k(C)||R(C)},isWritable:J,isWritableNodeStream:E,isWritableStream:k,isWritableEnded:z,isWritableFinished:function(C,K){if(!E(C))return null;if(C.writableFinished===!0)return!0;const j=C._writableState;return(j==null||!j.errored)&&(typeof j?.finished!="boolean"?null:!!(j.finished||K===!1&&j.ended===!0&&j.length===0))},isWritableErrored:function(C){var K,j;return A(C)?C.writableErrored?C.writableErrored:(K=(j=C._writableState)===null||j===void 0?void 0:j.errored)!==null&&K!==void 0?K:null:null},isServerRequest:function(C){var K;return typeof C._consuming=="boolean"&&typeof C._dumped=="boolean"&&((K=C.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0},isServerResponse:$,willEmitClose:function(C){if(!A(C))return null;const K=C._writableState,j=C._readableState,G=K||j;return!G&&$(C)||!!(G&&G.autoDestroy&&G.emitClose&&G.closed===!1)},isTransformStream:R}},6238:(o,a,l)=>{const h=l(5606),{AbortError:u,codes:c}=l(6371),{ERR_INVALID_ARG_TYPE:p,ERR_STREAM_PREMATURE_CLOSE:m}=c,{kEmptyObject:f,once:g}=l(7760),{validateAbortSignal:w,validateFunction:_,validateObject:M,validateBoolean:x}=l(277),{Promise:E,PromisePrototypeThen:A,SymbolDispose:y}=l(4134),{isClosed:k,isReadable:R,isReadableNodeStream:I,isReadableStream:z,isReadableFinished:q,isReadableErrored:D,isWritable:J,isWritableNodeStream:P,isWritableStream:$,isWritableFinished:C,isWritableErrored:K,isNodeStream:j,willEmitClose:G,kIsClosedPromise:le}=l(6115);let T;const W=()=>{};function Q(U,X,ae){var ee,se;if(arguments.length===2?(ae=X,X=f):X==null?X=f:M(X,"options"),_(ae,"callback"),w(X.signal,"options.signal"),ae=g(ae),z(U)||$(U))return function(b,S,L){let N=!1,V=W;if(S.signal)if(V=()=>{N=!0,L.call(b,new u(void 0,{cause:S.signal.reason}))},S.signal.aborted)h.nextTick(V);else{T=T||l(7760).addAbortListener;const ve=T(S.signal,V),_e=L;L=g((...Ce)=>{ve[y](),_e.apply(b,Ce)})}const ie=(...ve)=>{N||h.nextTick(()=>L.apply(b,ve))};return A(b[le].promise,ie,ie),W}(U,X,ae);if(!j(U))throw new p("stream",["ReadableStream","WritableStream","Stream"],U);const Z=(ee=X.readable)!==null&&ee!==void 0?ee:I(U),ue=(se=X.writable)!==null&&se!==void 0?se:P(U),oe=U._writableState,xe=U._readableState,ye=()=>{U.writable||re()};let ke=G(U)&&I(U)===Z&&P(U)===ue,F=C(U,!1);const re=()=>{F=!0,U.destroyed&&(ke=!1),(!ke||U.readable&&!Z)&&(Z&&!te||ae.call(U))};let te=q(U,!1);const me=()=>{te=!0,U.destroyed&&(ke=!1),(!ke||U.writable&&!ue)&&(ue&&!F||ae.call(U))},H=b=>{ae.call(U,b)};let ne=k(U);const Y=()=>{ne=!0;const b=K(U)||D(U);return b&&typeof b!="boolean"?ae.call(U,b):Z&&!te&&I(U,!0)&&!q(U,!1)?ae.call(U,new m):!ue||F||C(U,!1)?void ae.call(U):ae.call(U,new m)},he=()=>{ne=!0;const b=K(U)||D(U);if(b&&typeof b!="boolean")return ae.call(U,b);ae.call(U)},de=()=>{U.req.on("finish",re)};(function(b){return b.setHeader&&typeof b.abort=="function"})(U)?(U.on("complete",re),ke||U.on("abort",Y),U.req?de():U.on("request",de)):ue&&!oe&&(U.on("end",ye),U.on("close",ye)),ke||typeof U.aborted!="boolean"||U.on("aborted",Y),U.on("end",me),U.on("finish",re),X.error!==!1&&U.on("error",H),U.on("close",Y),ne?h.nextTick(Y):oe!=null&&oe.errorEmitted||xe!=null&&xe.errorEmitted?ke||h.nextTick(he):(Z||ke&&!R(U)||!F&&J(U)!==!1)&&(ue||ke&&!J(U)||!te&&R(U)!==!1)?xe&&U.req&&U.aborted&&h.nextTick(he):h.nextTick(he);const d=()=>{ae=W,U.removeListener("aborted",Y),U.removeListener("complete",re),U.removeListener("abort",Y),U.removeListener("request",de),U.req&&U.req.removeListener("finish",re),U.removeListener("end",ye),U.removeListener("close",ye),U.removeListener("finish",re),U.removeListener("end",me),U.removeListener("error",H),U.removeListener("close",Y)};if(X.signal&&!ne){const b=()=>{const S=ae;d(),S.call(U,new u(void 0,{cause:X.signal.reason}))};if(X.signal.aborted)h.nextTick(b);else{T=T||l(7760).addAbortListener;const S=T(X.signal,b),L=ae;ae=g((...N)=>{S[y](),L.apply(U,N)})}}return d}o.exports=Q,o.exports.finished=function(U,X){var ae;let ee=!1;return X===null&&(X=f),(ae=X)!==null&&ae!==void 0&&ae.cleanup&&(x(X.cleanup,"cleanup"),ee=X.cleanup),new E((se,Z)=>{const ue=Q(U,X,oe=>{ee&&ue(),oe?Z(oe):se()})})}},6371:(o,a,l)=>{const{format:h,inspect:u}=l(9231),{AggregateError:c}=l(4134),p=globalThis.AggregateError||c,m=Symbol("kIsNodeError"),f=["string","function","number","object","Function","Object","boolean","bigint","symbol"],g=/^([A-Z][a-z0-9]*)+$/,w={};function _(y,k){if(!y)throw new w.ERR_INTERNAL_ASSERTION(k)}function M(y){let k="",R=y.length;const I=y[0]==="-"?1:0;for(;R>=I+4;R-=3)k=`_${y.slice(R-3,R)}${k}`;return`${y.slice(0,R)}${k}`}function x(y,k,R){R||(R=Error);class I extends R{constructor(...q){super(function(D,J,P){if(typeof J=="function")return _(J.length<=P.length,`Code: ${D}; The provided arguments length (${P.length}) does not match the required ones (${J.length}).`),J(...P);const $=(J.match(/%[dfijoOs]/g)||[]).length;return _($===P.length,`Code: ${D}; The provided arguments length (${P.length}) does not match the required ones (${$}).`),P.length===0?J:h(J,...P)}(y,k,q))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(I.prototype,{name:{value:R.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),I.prototype.code=y,I.prototype[m]=!0,w[y]=I}function E(y){const k="__node_internal_"+y.name;return Object.defineProperty(y,"name",{value:k}),y}class A extends Error{constructor(k="The operation was aborted",R=void 0){if(R!==void 0&&typeof R!="object")throw new w.ERR_INVALID_ARG_TYPE("options","Object",R);super(k,R),this.code="ABORT_ERR",this.name="AbortError"}}x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(y,k,R)=>{_(typeof y=="string","'name' must be a string"),Array.isArray(k)||(k=[k]);let I="The ";y.endsWith(" argument")?I+=`${y} `:I+=`"${y}" ${y.includes(".")?"property":"argument"} `,I+="must be ";const z=[],q=[],D=[];for(const P of k)_(typeof P=="string","All expected entries have to be of type string"),f.includes(P)?z.push(P.toLowerCase()):g.test(P)?q.push(P):(_(P!=="object",'The value "object" should be written as "Object"'),D.push(P));if(q.length>0){const P=z.indexOf("object");P!==-1&&(z.splice(z,P,1),q.push("Object"))}if(z.length>0){switch(z.length){case 1:I+=`of type ${z[0]}`;break;case 2:I+=`one of type ${z[0]} or ${z[1]}`;break;default:{const P=z.pop();I+=`one of type ${z.join(", ")}, or ${P}`}}(q.length>0||D.length>0)&&(I+=" or ")}if(q.length>0){switch(q.length){case 1:I+=`an instance of ${q[0]}`;break;case 2:I+=`an instance of ${q[0]} or ${q[1]}`;break;default:{const P=q.pop();I+=`an instance of ${q.join(", ")}, or ${P}`}}D.length>0&&(I+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(I+="an "),I+=`${D[0]}`;break;case 2:I+=`one of ${D[0]} or ${D[1]}`;break;default:{const P=D.pop();I+=`one of ${D.join(", ")}, or ${P}`}}if(R==null)I+=`. Received ${R}`;else if(typeof R=="function"&&R.name)I+=`. Received function ${R.name}`;else if(typeof R=="object"){var J;(J=R.constructor)!==null&&J!==void 0&&J.name?I+=`. Received an instance of ${R.constructor.name}`:I+=`. Received ${u(R,{depth:-1})}`}else{let P=u(R,{colors:!1});P.length>25&&(P=`${P.slice(0,25)}...`),I+=`. Received type ${typeof R} (${P})`}return I},TypeError),x("ERR_INVALID_ARG_VALUE",(y,k,R="is invalid")=>{let I=u(k);return I.length>128&&(I=I.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${R}. Received ${I}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(y,k,R)=>{var I;return`Expected ${y} to be returned from the "${k}" function but got ${R!=null&&(I=R.constructor)!==null&&I!==void 0&&I.name?`instance of ${R.constructor.name}`:"type "+typeof R}.`},TypeError),x("ERR_MISSING_ARGS",(...y)=>{let k;_(y.length>0,"At least one arg needs to be specified");const R=y.length;switch(y=(Array.isArray(y)?y:[y]).map(I=>`"${I}"`).join(" or "),R){case 1:k+=`The ${y[0]} argument`;break;case 2:k+=`The ${y[0]} and ${y[1]} arguments`;break;default:{const I=y.pop();k+=`The ${y.join(", ")}, and ${I} arguments`}}return`${k} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(y,k,R)=>{let I;if(_(k,'Missing "range" argument'),Number.isInteger(R)&&Math.abs(R)>4294967296)I=M(String(R));else if(typeof R=="bigint"){I=String(R);const z=BigInt(2)**BigInt(32);(R>z||R<-z)&&(I=M(I)),I+="n"}else I=u(R);return`The value of "${y}" is out of range. It must be ${k}. Received ${I}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),o.exports={AbortError:A,aggregateTwoErrors:E(function(y,k){if(y&&k&&y!==k){if(Array.isArray(k.errors))return k.errors.push(y),k;const R=new p([k,y],k.message);return R.code=k.code,R}return y||k}),hideStackFrames:E,codes:w}},6524:(o,a,l)=>{const{ObjectSetPrototypeOf:h}=l(4134);o.exports=c;const u=l(7382);function c(p){if(!(this instanceof c))return new c(p);u.call(this,p)}h(c.prototype,u.prototype),h(c,u),c.prototype._transform=function(p,m,f){f(null,p)}},6532:(o,a,l)=>{const h=l(5606),{PromisePrototypeThen:u,SymbolAsyncIterator:c,SymbolIterator:p}=l(4134),{Buffer:m}=l(8287),{ERR_INVALID_ARG_TYPE:f,ERR_STREAM_NULL_VALUES:g}=l(6371).codes;o.exports=function(w,_,M){let x,E;if(typeof _=="string"||_ instanceof m)return new w({objectMode:!0,...M,read(){this.push(_),this.push(null)}});if(_&&_[c])E=!0,x=_[c]();else{if(!_||!_[p])throw new f("iterable",["Iterable"],_);E=!1,x=_[p]()}const A=new w({objectMode:!0,highWaterMark:1,...M});let y=!1;return A._read=function(){y||(y=!0,async function(){for(;;){try{const{value:k,done:R}=E?await x.next():x.next();if(R)A.push(null);else{const I=k&&typeof k.then=="function"?await k:k;if(I===null)throw y=!1,new g;if(A.push(I))continue;y=!1}}catch(k){A.destroy(k)}break}}())},A._destroy=function(k,R){u(async function(I){const z=I!=null,q=typeof x.throw=="function";if(z&&q){const{value:D,done:J}=await x.throw(I);if(await D,J)return}if(typeof x.return=="function"){const{value:D}=await x.return();await D}}(k),()=>h.nextTick(R,k),I=>h.nextTick(R,I||k))},A}},6698:o=>{typeof Object.create=="function"?o.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(a,l){if(l){a.super_=l;var h=function(){};h.prototype=l.prototype,a.prototype=new h,a.prototype.constructor=a}}},6706:(o,a,l)=>{const h=l(5606),u=l(8287),{isReadable:c,isWritable:p,isIterable:m,isNodeStream:f,isReadableNodeStream:g,isWritableNodeStream:w,isDuplexNodeStream:_,isReadableStream:M,isWritableStream:x}=l(6115),E=l(6238),{AbortError:A,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:k}}=l(6371),{destroyer:R}=l(5896),I=l(3370),z=l(7576),q=l(8584),{createDeferredPromise:D}=l(7760),J=l(6532),P=globalThis.Blob||u.Blob,$=P!==void 0?function(le){return le instanceof P}:function(le){return!1},C=globalThis.AbortController||l(5568).AbortController,{FunctionPrototypeCall:K}=l(4134);class j extends I{constructor(T){super(T),T?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),T?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function G(le){const T=le.readable&&typeof le.readable.read!="function"?z.wrap(le.readable):le.readable,W=le.writable;let Q,U,X,ae,ee,se=!!c(T),Z=!!p(W);function ue(oe){const xe=ae;ae=null,xe?xe(oe):oe&&ee.destroy(oe)}return ee=new j({readableObjectMode:!(T==null||!T.readableObjectMode),writableObjectMode:!(W==null||!W.writableObjectMode),readable:se,writable:Z}),Z&&(E(W,oe=>{Z=!1,oe&&R(T,oe),ue(oe)}),ee._write=function(oe,xe,ye){W.write(oe,xe)?ye():Q=ye},ee._final=function(oe){W.end(),U=oe},W.on("drain",function(){if(Q){const oe=Q;Q=null,oe()}}),W.on("finish",function(){if(U){const oe=U;U=null,oe()}})),se&&(E(T,oe=>{se=!1,oe&&R(T,oe),ue(oe)}),T.on("readable",function(){if(X){const oe=X;X=null,oe()}}),T.on("end",function(){ee.push(null)}),ee._read=function(){for(;;){const oe=T.read();if(oe===null)return void(X=ee._read);if(!ee.push(oe))return}}),ee._destroy=function(oe,xe){oe||ae===null||(oe=new A),X=null,Q=null,U=null,ae===null?xe(oe):(ae=xe,R(W,oe),R(T,oe))},ee}o.exports=function le(T,W){if(_(T))return T;if(g(T))return G({readable:T});if(w(T))return G({writable:T});if(f(T))return G({writable:!1,readable:!1});if(M(T))return G({readable:z.fromWeb(T)});if(x(T))return G({writable:q.fromWeb(T)});if(typeof T=="function"){const{value:U,write:X,final:ae,destroy:ee}=function(Z){let{promise:ue,resolve:oe}=D();const xe=new C,ye=xe.signal;return{value:Z(async function*(){for(;;){const ke=ue;ue=null;const{chunk:F,done:re,cb:te}=await ke;if(h.nextTick(te),re)return;if(ye.aborted)throw new A(void 0,{cause:ye.reason});({promise:ue,resolve:oe}=D()),yield F}}(),{signal:ye}),write(ke,F,re){const te=oe;oe=null,te({chunk:ke,done:!1,cb:re})},final(ke){const F=oe;oe=null,F({done:!0,cb:ke})},destroy(ke,F){xe.abort(),F(ke)}}}(T);if(m(U))return J(j,U,{objectMode:!0,write:X,final:ae,destroy:ee});const se=U?.then;if(typeof se=="function"){let Z;const ue=K(se,U,oe=>{if(oe!=null)throw new k("nully","body",oe)},oe=>{R(Z,oe)});return Z=new j({objectMode:!0,readable:!1,write:X,final(oe){ae(async()=>{try{await ue,h.nextTick(oe,null)}catch(xe){h.nextTick(oe,xe)}})},destroy:ee})}throw new k("Iterable, AsyncIterable or AsyncFunction",W,U)}if($(T))return le(T.arrayBuffer());if(m(T))return J(j,T,{objectMode:!0,writable:!1});if(M(T?.readable)&&x(T?.writable))return j.fromWeb(T);if(typeof T?.writable=="object"||typeof T?.readable=="object")return G({readable:T!=null&&T.readable?g(T?.readable)?T?.readable:le(T.readable):void 0,writable:T!=null&&T.writable?w(T?.writable)?T?.writable:le(T.writable):void 0});const Q=T?.then;if(typeof Q=="function"){let U;return K(Q,T,X=>{X!=null&&U.push(X),U.push(null)},X=>{R(U,X)}),U=new j({objectMode:!0,writable:!1,read(){}})}throw new y(W,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],T)}},6708:(o,a,l)=>{o.exports=l(5506).Writable},7007:o=>{var a,l=typeof Reflect=="object"?Reflect:null,h=l&&typeof l.apply=="function"?l.apply:function(y,k,R){return Function.prototype.apply.call(y,k,R)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:function(y){return Object.getOwnPropertyNames(y)};var u=Number.isNaN||function(y){return y!=y};function c(){c.init.call(this)}o.exports=c,o.exports.once=function(y,k){return new Promise(function(R,I){function z(D){y.removeListener(k,q),I(D)}function q(){typeof y.removeListener=="function"&&y.removeListener("error",z),R([].slice.call(arguments))}A(y,k,q,{once:!0}),k!=="error"&&function(D,J){typeof D.on=="function"&&A(D,"error",J,{once:!0})}(y,z)})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var p=10;function m(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}function f(y){return y._maxListeners===void 0?c.defaultMaxListeners:y._maxListeners}function g(y,k,R,I){var z,q,D,J;if(m(R),(q=y._events)===void 0?(q=y._events=Object.create(null),y._eventsCount=0):(q.newListener!==void 0&&(y.emit("newListener",k,R.listener?R.listener:R),q=y._events),D=q[k]),D===void 0)D=q[k]=R,++y._eventsCount;else if(typeof D=="function"?D=q[k]=I?[R,D]:[D,R]:I?D.unshift(R):D.push(R),(z=f(y))>0&&D.length>z&&!D.warned){D.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=y,P.type=k,P.count=D.length,J=P,console&&console.warn&&console.warn(J)}return y}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(y,k,R){var I={fired:!1,wrapFn:void 0,target:y,type:k,listener:R},z=w.bind(I);return z.listener=R,I.wrapFn=z,z}function M(y,k,R){var I=y._events;if(I===void 0)return[];var z=I[k];return z===void 0?[]:typeof z=="function"?R?[z.listener||z]:[z]:R?function(q){for(var D=new Array(q.length),J=0;J<D.length;++J)D[J]=q[J].listener||q[J];return D}(z):E(z,z.length)}function x(y){var k=this._events;if(k!==void 0){var R=k[y];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}function E(y,k){for(var R=new Array(k),I=0;I<k;++I)R[I]=y[I];return R}function A(y,k,R,I){if(typeof y.on=="function")I.once?y.once(k,R):y.on(k,R);else{if(typeof y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y);y.addEventListener(k,function z(q){I.once&&y.removeEventListener(k,z),R(q)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(y){if(typeof y!="number"||y<0||u(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");p=y}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||u(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(y){for(var k=[],R=1;R<arguments.length;R++)k.push(arguments[R]);var I=y==="error",z=this._events;if(z!==void 0)I=I&&z.error===void 0;else if(!I)return!1;if(I){var q;if(k.length>0&&(q=k[0]),q instanceof Error)throw q;var D=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw D.context=q,D}var J=z[y];if(J===void 0)return!1;if(typeof J=="function")h(J,this,k);else{var P=J.length,$=E(J,P);for(R=0;R<P;++R)h($[R],this,k)}return!0},c.prototype.addListener=function(y,k){return g(this,y,k,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(y,k){return g(this,y,k,!0)},c.prototype.once=function(y,k){return m(k),this.on(y,_(this,y,k)),this},c.prototype.prependOnceListener=function(y,k){return m(k),this.prependListener(y,_(this,y,k)),this},c.prototype.removeListener=function(y,k){var R,I,z,q,D;if(m(k),(I=this._events)===void 0)return this;if((R=I[y])===void 0)return this;if(R===k||R.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete I[y],I.removeListener&&this.emit("removeListener",y,R.listener||k));else if(typeof R!="function"){for(z=-1,q=R.length-1;q>=0;q--)if(R[q]===k||R[q].listener===k){D=R[q].listener,z=q;break}if(z<0)return this;z===0?R.shift():function(J,P){for(;P+1<J.length;P++)J[P]=J[P+1];J.pop()}(R,z),R.length===1&&(I[y]=R[0]),I.removeListener!==void 0&&this.emit("removeListener",y,D||k)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(y){var k,R,I;if((R=this._events)===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[y]),this;if(arguments.length===0){var z,q=Object.keys(R);for(I=0;I<q.length;++I)(z=q[I])!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(k=R[y])=="function")this.removeListener(y,k);else if(k!==void 0)for(I=k.length-1;I>=0;I--)this.removeListener(y,k[I]);return this},c.prototype.listeners=function(y){return M(this,y,!0)},c.prototype.rawListeners=function(y){return M(this,y,!1)},c.listenerCount=function(y,k){return typeof y.listenerCount=="function"?y.listenerCount(k):x.call(y,k)},c.prototype.listenerCount=x,c.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},7328:(o,a,l)=>{const{Buffer:h}=l(8287),u=l(672),c=l(8310),p=l(9452),{NUMBYTES:m,SHIFT32:f,BI:g,SYMS:w}=p,_=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});a.utf8=x=>_.decode(x),a.utf8.checksUTF8=!0,a.isBufferish=function(x){return x&&typeof x=="object"&&(h.isBuffer(x)||x instanceof Uint8Array||x instanceof Uint8ClampedArray||x instanceof ArrayBuffer||x instanceof DataView)},a.bufferishToBuffer=function(x){return h.isBuffer(x)?x:ArrayBuffer.isView(x)?h.from(x.buffer,x.byteOffset,x.byteLength):x instanceof ArrayBuffer?h.from(x):null},a.parseCBORint=function(x,E){switch(x){case m.ONE:return E.readUInt8(0);case m.TWO:return E.readUInt16BE(0);case m.FOUR:return E.readUInt32BE(0);case m.EIGHT:{const A=E.readUInt32BE(0),y=E.readUInt32BE(4);return A>2097151?BigInt(A)*g.SHIFT32+BigInt(y):A*f+y}default:throw new Error(`Invalid additional info for int: ${x}`)}},a.writeHalf=function(x,E){const A=h.allocUnsafe(4);A.writeFloatBE(E,0);const y=A.readUInt32BE(0);if(8191&y)return!1;let k=y>>16&32768;const R=y>>23&255,I=8388607&y;if(R>=113&&R<=142)k+=(R-112<<10)+(I>>13);else{if(!(R>=103&&R<113)||I&(1<<126-R)-1)return!1;k+=I+8388608>>126-R}return x.writeUInt16BE(k),!0},a.parseHalf=function(x){const E=128&x[0]?-1:1,A=(124&x[0])>>2,y=(3&x[0])<<8|x[1];return A?A===31?E*(y?NaN:1/0):E*2**(A-25)*(1024+y):5960464477539063e-23*E*y},a.parseCBORfloat=function(x){switch(x.length){case 2:return a.parseHalf(x);case 4:return x.readFloatBE(0);case 8:return x.readDoubleBE(0);default:throw new Error(`Invalid float size: ${x.length}`)}},a.hex=function(x){return h.from(x.replace(/^0x/,""),"hex")},a.bin=function(x){let E=0,A=(x=x.replace(/\s/g,"")).length%8||8;const y=[];for(;A<=x.length;)y.push(parseInt(x.slice(E,A),2)),E=A,A+=8;return h.from(y)},a.arrayEqual=function(x,E){return x==null&&E==null||x!=null&&E!=null&&x.length===E.length&&x.every((A,y)=>A===E[y])},a.bufferToBigInt=function(x){return BigInt(`0x${x.toString("hex")}`)},a.cborValueToString=function(x,E=-1){switch(typeof x){case"symbol":{switch(x){case w.NULL:return"null";case w.UNDEFINED:return"undefined";case w.BREAK:return"BREAK"}if(x.description)return x.description;const A=x.toString().match(/^Symbol\((?<name>.*)\)/);return A&&A.groups.name?A.groups.name:"Symbol"}case"string":return JSON.stringify(x);case"bigint":return x.toString();case"number":{const A=Object.is(x,-0)?"-0":String(x);return E>0?`${A}_${E}`:A}case"object":{if(!x)return"null";const A=a.bufferishToBuffer(x);if(A){const y=A.toString("hex");return E===-1/0?y:`h'${y}'`}return x&&typeof x[Symbol.for("nodejs.util.inspect.custom")]=="function"?x[Symbol.for("nodejs.util.inspect.custom")]():Array.isArray(x)?"[]":"{}"}}return String(x)},a.guessEncoding=function(x,E){if(typeof x=="string")return new u(x,E??"hex");const A=a.bufferishToBuffer(x);if(A)return new u(A);if((y=x)instanceof c.Readable||["read","on","pipe"].every(k=>typeof y[k]=="function"))return x;var y;throw new Error("Unknown input type")};const M={"=":"","+":"-","/":"_"};a.base64url=function(x){return a.bufferishToBuffer(x).toString("base64").replace(/[=+/]/g,E=>M[E])},a.base64=function(x){return a.bufferishToBuffer(x).toString("base64")},a.isBigEndian=function(){const x=new Uint8Array(4);return!((new Uint32Array(x.buffer)[0]=1)&x[0])}},7382:(o,a,l)=>{const{ObjectSetPrototypeOf:h,Symbol:u}=l(4134);o.exports=g;const{ERR_METHOD_NOT_IMPLEMENTED:c}=l(6371).codes,p=l(3370),{getHighWaterMark:m}=l(5291);h(g.prototype,p.prototype),h(g,p);const f=u("kCallback");function g(M){if(!(this instanceof g))return new g(M);const x=M?m(this,M,"readableHighWaterMark",!0):null;x===0&&(M={...M,highWaterMark:null,readableHighWaterMark:x,writableHighWaterMark:M.writableHighWaterMark||0}),p.call(this,M),this._readableState.sync=!1,this[f]=null,M&&(typeof M.transform=="function"&&(this._transform=M.transform),typeof M.flush=="function"&&(this._flush=M.flush)),this.on("prefinish",_)}function w(M){typeof this._flush!="function"||this.destroyed?(this.push(null),M&&M()):this._flush((x,E)=>{x?M?M(x):this.destroy(x):(E!=null&&this.push(E),this.push(null),M&&M())})}function _(){this._final!==w&&w.call(this)}g.prototype._final=w,g.prototype._transform=function(M,x,E){throw new c("_transform()")},g.prototype._write=function(M,x,E){const A=this._readableState,y=this._writableState,k=A.length;this._transform(M,x,(R,I)=>{R?E(R):(I!=null&&this.push(I),y.ended||k===A.length||A.length<A.highWaterMark?E():this[f]=E)})},g.prototype._read=function(){if(this[f]){const M=this[f];this[f]=null,M()}}},7526:(o,a)=>{a.byteLength=function(w){var _=m(w),M=_[0],x=_[1];return 3*(M+x)/4-x},a.toByteArray=function(w){var _,M,x=m(w),E=x[0],A=x[1],y=new u(function(I,z,q){return 3*(z+q)/4-q}(0,E,A)),k=0,R=A>0?E-4:E;for(M=0;M<R;M+=4)_=h[w.charCodeAt(M)]<<18|h[w.charCodeAt(M+1)]<<12|h[w.charCodeAt(M+2)]<<6|h[w.charCodeAt(M+3)],y[k++]=_>>16&255,y[k++]=_>>8&255,y[k++]=255&_;return A===2&&(_=h[w.charCodeAt(M)]<<2|h[w.charCodeAt(M+1)]>>4,y[k++]=255&_),A===1&&(_=h[w.charCodeAt(M)]<<10|h[w.charCodeAt(M+1)]<<4|h[w.charCodeAt(M+2)]>>2,y[k++]=_>>8&255,y[k++]=255&_),y},a.fromByteArray=function(w){for(var _,M=w.length,x=M%3,E=[],A=16383,y=0,k=M-x;y<k;y+=A)E.push(g(w,y,y+A>k?k:y+A));return x===1?(_=w[M-1],E.push(l[_>>2]+l[_<<4&63]+"==")):x===2&&(_=(w[M-2]<<8)+w[M-1],E.push(l[_>>10]+l[_>>4&63]+l[_<<2&63]+"=")),E.join("")};for(var l=[],h=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0;p<64;++p)l[p]=c[p],h[c.charCodeAt(p)]=p;function m(w){var _=w.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=w.indexOf("=");return M===-1&&(M=_),[M,M===_?0:4-M%4]}function f(w){return l[w>>18&63]+l[w>>12&63]+l[w>>6&63]+l[63&w]}function g(w,_,M){for(var x,E=[],A=_;A<M;A+=3)x=(w[A]<<16&16711680)+(w[A+1]<<8&65280)+(255&w[A+2]),E.push(f(x));return E.join("")}h[45]=62,h[95]=63},7576:(o,a,l)=>{const h=l(5606),{ArrayPrototypeIndexOf:u,NumberIsInteger:c,NumberIsNaN:p,NumberParseInt:m,ObjectDefineProperties:f,ObjectKeys:g,ObjectSetPrototypeOf:w,Promise:_,SafeSet:M,SymbolAsyncDispose:x,SymbolAsyncIterator:E,Symbol:A}=l(4134);o.exports=te,te.ReadableState=re;const{EventEmitter:y}=l(7007),{Stream:k,prependListener:R}=l(4259),{Buffer:I}=l(8287),{addAbortSignal:z}=l(4147),q=l(6238);let D=l(7760).debuglog("stream",B=>{D=B});const J=l(345),P=l(5896),{getHighWaterMark:$,getDefaultHighWaterMark:C}=l(5291),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:j,ERR_METHOD_NOT_IMPLEMENTED:G,ERR_OUT_OF_RANGE:le,ERR_STREAM_PUSH_AFTER_EOF:T,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:Q}=l(6371),{validateObject:U}=l(277),X=A("kPaused"),{StringDecoder:ae}=l(3141),ee=l(6532);w(te.prototype,k.prototype),w(te,k);const se=()=>{},{errorOrDestroy:Z}=P,ue=1,oe=16,xe=32,ye=2048,ke=4096;function F(B){return{enumerable:!1,get(){return(this.state&B)!==0},set(O){O?this.state|=B:this.state&=~B}}}function re(B,O,pe){typeof pe!="boolean"&&(pe=O instanceof l(3370)),this.state=ye|ke|oe|xe,B&&B.objectMode&&(this.state|=ue),pe&&B&&B.readableObjectMode&&(this.state|=ue),this.highWaterMark=B?$(this,B,"readableHighWaterMark",pe):C(!1),this.buffer=new J,this.length=0,this.pipes=[],this.flowing=null,this[X]=null,B&&B.emitClose===!1&&(this.state&=~ye),B&&B.autoDestroy===!1&&(this.state&=~ke),this.errored=null,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,B&&B.encoding&&(this.decoder=new ae(B.encoding),this.encoding=B.encoding)}function te(B){if(!(this instanceof te))return new te(B);const O=this instanceof l(3370);this._readableState=new re(B,this,O),B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&!O&&z(B.signal,this)),k.call(this,B),P.construct(this,()=>{this._readableState.needReadable&&de(this,this._readableState)})}function me(B,O,pe,ce){D("readableAddChunk",O);const Se=B._readableState;let Me;if(!(Se.state&ue)&&(typeof O=="string"?(pe=pe||Se.defaultEncoding,Se.encoding!==pe&&(ce&&Se.encoding?O=I.from(O,pe).toString(Se.encoding):(O=I.from(O,pe),pe=""))):O instanceof I?pe="":k._isUint8Array(O)?(O=k._uint8ArrayToBuffer(O),pe=""):O!=null&&(Me=new j("chunk",["string","Buffer","Uint8Array"],O))),Me)Z(B,Me);else if(O===null)Se.state&=-9,function(it,Je){if(D("onEofChunk"),!Je.ended){if(Je.decoder){const Qt=Je.decoder.end();Qt&&Qt.length&&(Je.buffer.push(Qt),Je.length+=Je.objectMode?1:Qt.length)}Je.ended=!0,Je.sync?Y(it):(Je.needReadable=!1,Je.emittedReadable=!0,he(it))}}(B,Se);else if(Se.state&ue||O&&O.length>0)if(ce)if(4&Se.state)Z(B,new W);else{if(Se.destroyed||Se.errored)return!1;H(B,Se,O,!0)}else if(Se.ended)Z(B,new T);else{if(Se.destroyed||Se.errored)return!1;Se.state&=-9,Se.decoder&&!pe?(O=Se.decoder.write(O),Se.objectMode||O.length!==0?H(B,Se,O,!1):de(B,Se)):H(B,Se,O,!1)}else ce||(Se.state&=-9,de(B,Se));return!Se.ended&&(Se.length<Se.highWaterMark||Se.length===0)}function H(B,O,pe,ce){O.flowing&&O.length===0&&!O.sync&&B.listenerCount("data")>0?(65536&O.state?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,B.emit("data",pe)):(O.length+=O.objectMode?1:pe.length,ce?O.buffer.unshift(pe):O.buffer.push(pe),64&O.state&&Y(B)),de(B,O)}function ne(B,O){return B<=0||O.length===0&&O.ended?0:O.state&ue?1:p(B)?O.flowing&&O.length?O.buffer.first().length:O.length:B<=O.length?B:O.ended?O.length:0}function Y(B){const O=B._readableState;D("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(D("emitReadable",O.flowing),O.emittedReadable=!0,h.nextTick(he,B))}function he(B){const O=B._readableState;D("emitReadable_",O.destroyed,O.length,O.ended),O.destroyed||O.errored||!O.length&&!O.ended||(B.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,N(B)}function de(B,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,h.nextTick(d,B,O))}function d(B,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const pe=O.length;if(D("maybeReadMore read 0"),B.read(0),pe===O.length)break}O.readingMore=!1}function b(B){const O=B._readableState;O.readableListening=B.listenerCount("readable")>0,O.resumeScheduled&&O[X]===!1?O.flowing=!0:B.listenerCount("data")>0?B.resume():O.readableListening||(O.flowing=null)}function S(B){D("readable nexttick read 0"),B.read(0)}function L(B,O){D("resume",O.reading),O.reading||B.read(0),O.resumeScheduled=!1,B.emit("resume"),N(B),O.flowing&&!O.reading&&B.read(0)}function N(B){const O=B._readableState;for(D("flow",O.flowing);O.flowing&&B.read()!==null;);}function V(B,O){typeof B.read!="function"&&(B=te.wrap(B,{objectMode:!0}));const pe=async function*(ce,Se){let Me,it=se;function Je(kt){this===ce?(it(),it=se):it=kt}ce.on("readable",Je);const Qt=q(ce,{writable:!1},kt=>{Me=kt?K(Me,kt):null,it(),it=se});try{for(;;){const kt=ce.destroyed?null:ce.read();if(kt!==null)yield kt;else{if(Me)throw Me;if(Me===null)return;await new _(Je)}}}catch(kt){throw Me=K(Me,kt),Me}finally{!Me&&Se?.destroyOnReturn===!1||Me!==void 0&&!ce._readableState.autoDestroy?(ce.off("readable",Je),Qt()):P.destroyer(ce,null)}}(B,O);return pe.stream=B,pe}function ie(B,O){if(O.length===0)return null;let pe;return O.objectMode?pe=O.buffer.shift():!B||B>=O.length?(pe=O.decoder?O.buffer.join(""):O.buffer.length===1?O.buffer.first():O.buffer.concat(O.length),O.buffer.clear()):pe=O.buffer.consume(B,O.decoder),pe}function ve(B){const O=B._readableState;D("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,h.nextTick(_e,O,B))}function _e(B,O){if(D("endReadableNT",B.endEmitted,B.length),!B.errored&&!B.closeEmitted&&!B.endEmitted&&B.length===0){if(B.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)h.nextTick(Ce,O);else if(B.autoDestroy){const pe=O._writableState;(!pe||pe.autoDestroy&&(pe.finished||pe.writable===!1))&&O.destroy()}}}function Ce(B){B.writable&&!B.writableEnded&&!B.destroyed&&B.end()}let Ee;function Fe(){return Ee===void 0&&(Ee={}),Ee}f(re.prototype,{objectMode:F(ue),ended:F(2),endEmitted:F(4),reading:F(8),constructed:F(oe),sync:F(xe),needReadable:F(64),emittedReadable:F(128),readableListening:F(256),resumeScheduled:F(512),errorEmitted:F(1024),emitClose:F(ye),autoDestroy:F(ke),destroyed:F(8192),closed:F(16384),closeEmitted:F(32768),multiAwaitDrain:F(65536),readingMore:F(131072),dataEmitted:F(262144)}),te.prototype.destroy=P.destroy,te.prototype._undestroy=P.undestroy,te.prototype._destroy=function(B,O){O(B)},te.prototype[y.captureRejectionSymbol]=function(B){this.destroy(B)},te.prototype[x]=function(){let B;return this.destroyed||(B=this.readableEnded?null:new Q,this.destroy(B)),new _((O,pe)=>q(this,ce=>ce&&ce!==B?pe(ce):O(null)))},te.prototype.push=function(B,O){return me(this,B,O,!1)},te.prototype.unshift=function(B,O){return me(this,B,O,!0)},te.prototype.isPaused=function(){const B=this._readableState;return B[X]===!0||B.flowing===!1},te.prototype.setEncoding=function(B){const O=new ae(B);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const pe=this._readableState.buffer;let ce="";for(const Se of pe)ce+=O.write(Se);return pe.clear(),ce!==""&&pe.push(ce),this._readableState.length=ce.length,this},te.prototype.read=function(B){D("read",B),B===void 0?B=NaN:c(B)||(B=m(B,10));const O=this._readableState,pe=B;if(B>O.highWaterMark&&(O.highWaterMark=function(Me){if(Me>1073741824)throw new le("size","<= 1GiB",Me);return Me--,Me|=Me>>>1,Me|=Me>>>2,Me|=Me>>>4,Me|=Me>>>8,Me|=Me>>>16,++Me}(B)),B!==0&&(O.state&=-129),B===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return D("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?ve(this):Y(this),null;if((B=ne(B,O))===0&&O.ended)return O.length===0&&ve(this),null;let ce,Se=!!(64&O.state);if(D("need readable",Se),(O.length===0||O.length-B<O.highWaterMark)&&(Se=!0,D("length less than watermark",Se)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)Se=!1,D("reading, ended or constructing",Se);else if(Se){D("do read"),O.state|=8|xe,O.length===0&&(O.state|=64);try{this._read(O.highWaterMark)}catch(Me){Z(this,Me)}O.state&=~xe,O.reading||(B=ne(pe,O))}return ce=B>0?ie(B,O):null,ce===null?(O.needReadable=O.length<=O.highWaterMark,B=0):(O.length-=B,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),pe!==B&&O.ended&&ve(this)),ce===null||O.errorEmitted||O.closeEmitted||(O.dataEmitted=!0,this.emit("data",ce)),ce},te.prototype._read=function(B){throw new G("_read()")},te.prototype.pipe=function(B,O){const pe=this,ce=this._readableState;ce.pipes.length===1&&(ce.multiAwaitDrain||(ce.multiAwaitDrain=!0,ce.awaitDrainWriters=new M(ce.awaitDrainWriters?[ce.awaitDrainWriters]:[]))),ce.pipes.push(B),D("pipe count=%d opts=%j",ce.pipes.length,O);const Se=O&&O.end===!1||B===h.stdout||B===h.stderr?fi:Me;function Me(){D("onend"),B.end()}let it;ce.endEmitted?h.nextTick(Se):pe.once("end",Se),B.on("unpipe",function Ct(Pt,Rt){D("onunpipe"),Pt===pe&&Rt&&Rt.hasUnpiped===!1&&(Rt.hasUnpiped=!0,D("cleanup"),B.removeListener("close",vs),B.removeListener("finish",ks),it&&B.removeListener("drain",it),B.removeListener("error",ws),B.removeListener("unpipe",Ct),pe.removeListener("end",Me),pe.removeListener("end",fi),pe.removeListener("data",kt),Je=!0,it&&ce.awaitDrainWriters&&(!B._writableState||B._writableState.needDrain)&&it())});let Je=!1;function Qt(){Je||(ce.pipes.length===1&&ce.pipes[0]===B?(D("false write response, pause",0),ce.awaitDrainWriters=B,ce.multiAwaitDrain=!1):ce.pipes.length>1&&ce.pipes.includes(B)&&(D("false write response, pause",ce.awaitDrainWriters.size),ce.awaitDrainWriters.add(B)),pe.pause()),it||(it=function(Ct,Pt){return function(){const Rt=Ct._readableState;Rt.awaitDrainWriters===Pt?(D("pipeOnDrain",1),Rt.awaitDrainWriters=null):Rt.multiAwaitDrain&&(D("pipeOnDrain",Rt.awaitDrainWriters.size),Rt.awaitDrainWriters.delete(Pt)),Rt.awaitDrainWriters&&Rt.awaitDrainWriters.size!==0||!Ct.listenerCount("data")||Ct.resume()}}(pe,B),B.on("drain",it))}function kt(Ct){D("ondata");const Pt=B.write(Ct);D("dest.write",Pt),Pt===!1&&Qt()}function ws(Ct){if(D("onerror",Ct),fi(),B.removeListener("error",ws),B.listenerCount("error")===0){const Pt=B._writableState||B._readableState;Pt&&!Pt.errorEmitted?Z(B,Ct):B.emit("error",Ct)}}function vs(){B.removeListener("finish",ks),fi()}function ks(){D("onfinish"),B.removeListener("close",vs),fi()}function fi(){D("unpipe"),pe.unpipe(B)}return pe.on("data",kt),R(B,"error",ws),B.once("close",vs),B.once("finish",ks),B.emit("pipe",pe),B.writableNeedDrain===!0?Qt():ce.flowing||(D("pipe resume"),pe.resume()),B},te.prototype.unpipe=function(B){const O=this._readableState;if(O.pipes.length===0)return this;if(!B){const ce=O.pipes;O.pipes=[],this.pause();for(let Se=0;Se<ce.length;Se++)ce[Se].emit("unpipe",this,{hasUnpiped:!1});return this}const pe=u(O.pipes,B);return pe===-1||(O.pipes.splice(pe,1),O.pipes.length===0&&this.pause(),B.emit("unpipe",this,{hasUnpiped:!1})),this},te.prototype.on=function(B,O){const pe=k.prototype.on.call(this,B,O),ce=this._readableState;return B==="data"?(ce.readableListening=this.listenerCount("readable")>0,ce.flowing!==!1&&this.resume()):B==="readable"&&(ce.endEmitted||ce.readableListening||(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,D("on readable",ce.length,ce.reading),ce.length?Y(this):ce.reading||h.nextTick(S,this))),pe},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(B,O){const pe=k.prototype.removeListener.call(this,B,O);return B==="readable"&&h.nextTick(b,this),pe},te.prototype.off=te.prototype.removeListener,te.prototype.removeAllListeners=function(B){const O=k.prototype.removeAllListeners.apply(this,arguments);return B!=="readable"&&B!==void 0||h.nextTick(b,this),O},te.prototype.resume=function(){const B=this._readableState;return B.flowing||(D("resume"),B.flowing=!B.readableListening,function(O,pe){pe.resumeScheduled||(pe.resumeScheduled=!0,h.nextTick(L,O,pe))}(this,B)),B[X]=!1,this},te.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[X]=!0,this},te.prototype.wrap=function(B){let O=!1;B.on("data",ce=>{!this.push(ce)&&B.pause&&(O=!0,B.pause())}),B.on("end",()=>{this.push(null)}),B.on("error",ce=>{Z(this,ce)}),B.on("close",()=>{this.destroy()}),B.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&B.resume&&(O=!1,B.resume())};const pe=g(B);for(let ce=1;ce<pe.length;ce++){const Se=pe[ce];this[Se]===void 0&&typeof B[Se]=="function"&&(this[Se]=B[Se].bind(B))}return this},te.prototype[E]=function(){return V(this)},te.prototype.iterator=function(B){return B!==void 0&&U(B,"options"),V(this,B)},f(te.prototype,{readable:{__proto__:null,get(){const B=this._readableState;return!(!B||B.readable===!1||B.destroyed||B.errorEmitted||B.endEmitted)},set(B){this._readableState&&(this._readableState.readable=!!B)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._readableState.readable===!1||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(B){this._readableState&&(this._readableState.destroyed=B)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),f(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[X]!==!1},set(B){this[X]=!!B}}}),te._fromList=ie,te.from=function(B,O){return ee(te,B,O)},te.fromWeb=function(B,O){return Fe().newStreamReadableFromReadableStream(B,O)},te.toWeb=function(B,O){return Fe().newReadableStreamFromStreamReadable(B,O)},te.wrap=function(B,O){var pe,ce;return new te({objectMode:(pe=(ce=B.readableObjectMode)!==null&&ce!==void 0?ce:B.objectMode)===null||pe===void 0||pe,...O,destroy(Se,Me){P.destroyer(B,Se),Me(Se)}}).wrap(B)}},7758:(o,a,l)=>{const h=l(5606),{ArrayIsArray:u,Promise:c,SymbolAsyncIterator:p,SymbolDispose:m}=l(4134),f=l(6238),{once:g}=l(7760),w=l(5896),_=l(3370),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:x,ERR_INVALID_RETURN_VALUE:E,ERR_MISSING_ARGS:A,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:k},AbortError:R}=l(6371),{validateFunction:I,validateAbortSignal:z}=l(277),{isIterable:q,isReadable:D,isReadableNodeStream:J,isNodeStream:P,isTransformStream:$,isWebStream:C,isReadableStream:K,isReadableFinished:j}=l(6115),G=globalThis.AbortController||l(5568).AbortController;let le,T,W;function Q(Z,ue,oe){let xe=!1;return Z.on("close",()=>{xe=!0}),{destroy:ye=>{xe||(xe=!0,w.destroyer(Z,ye||new y("pipe")))},cleanup:f(Z,{readable:ue,writable:oe},ye=>{xe=!ye})}}function U(Z){if(q(Z))return Z;if(J(Z))return async function*(ue){T||(T=l(7576)),yield*T.prototype[p].call(ue)}(Z);throw new x("val",["Readable","Iterable","AsyncIterable"],Z)}async function X(Z,ue,oe,{end:xe}){let ye,ke=null;const F=me=>{if(me&&(ye=me),ke){const H=ke;ke=null,H()}},re=()=>new c((me,H)=>{ye?H(ye):ke=()=>{ye?H(ye):me()}});ue.on("drain",F);const te=f(ue,{readable:!1},F);try{ue.writableNeedDrain&&await re();for await(const me of Z)ue.write(me)||await re();xe&&(ue.end(),await re()),oe()}catch(me){oe(ye!==me?M(ye,me):me)}finally{te(),ue.off("drain",F)}}async function ae(Z,ue,oe,{end:xe}){$(ue)&&(ue=ue.writable);const ye=ue.getWriter();try{for await(const ke of Z)await ye.ready,ye.write(ke).catch(()=>{});await ye.ready,xe&&await ye.close(),oe()}catch(ke){try{await ye.abort(ke),oe(ke)}catch(F){oe(F)}}}function ee(Z,ue,oe){if(Z.length===1&&u(Z[0])&&(Z=Z[0]),Z.length<2)throw new A("streams");const xe=new G,ye=xe.signal,ke=oe?.signal,F=[];function re(){d(new R)}let te,me,H;z(ke,"options.signal"),W=W||l(7760).addAbortListener,ke&&(te=W(ke,re));const ne=[];let Y,he=0;function de(L){d(L,--he===0)}function d(L,N){var V;if(!L||me&&me.code!=="ERR_STREAM_PREMATURE_CLOSE"||(me=L),me||N){for(;ne.length;)ne.shift()(me);(V=te)===null||V===void 0||V[m](),xe.abort(),N&&(me||F.forEach(ie=>ie()),h.nextTick(ue,me,H))}}for(let L=0;L<Z.length;L++){const N=Z[L],V=L<Z.length-1,ie=L>0,ve=V||oe?.end!==!1,_e=L===Z.length-1;if(P(N)){let Ce=function(Ee){Ee&&Ee.name!=="AbortError"&&Ee.code!=="ERR_STREAM_PREMATURE_CLOSE"&&de(Ee)};if(ve){const{destroy:Ee,cleanup:Fe}=Q(N,V,ie);ne.push(Ee),D(N)&&_e&&F.push(Fe)}N.on("error",Ce),D(N)&&_e&&F.push(()=>{N.removeListener("error",Ce)})}if(L===0)if(typeof N=="function"){if(Y=N({signal:ye}),!q(Y))throw new E("Iterable, AsyncIterable or Stream","source",Y)}else Y=q(N)||J(N)||$(N)?N:_.from(N);else if(typeof N=="function"){var b;if(Y=$(Y)?U((b=Y)===null||b===void 0?void 0:b.readable):U(Y),Y=N(Y,{signal:ye}),V){if(!q(Y,!0))throw new E("AsyncIterable",`transform[${L-1}]`,Y)}else{var S;le||(le=l(6524));const Ce=new le({objectMode:!0}),Ee=(S=Y)===null||S===void 0?void 0:S.then;if(typeof Ee=="function")he++,Ee.call(Y,O=>{H=O,O!=null&&Ce.write(O),ve&&Ce.end(),h.nextTick(de)},O=>{Ce.destroy(O),h.nextTick(de,O)});else if(q(Y,!0))he++,X(Y,Ce,de,{end:ve});else{if(!K(Y)&&!$(Y))throw new E("AsyncIterable or Promise","destination",Y);{const O=Y.readable||Y;he++,X(O,Ce,de,{end:ve})}}Y=Ce;const{destroy:Fe,cleanup:B}=Q(Y,!1,!0);ne.push(Fe),_e&&F.push(B)}}else if(P(N)){if(J(Y)){he+=2;const Ce=se(Y,N,de,{end:ve});D(N)&&_e&&F.push(Ce)}else if($(Y)||K(Y)){const Ce=Y.readable||Y;he++,X(Ce,N,de,{end:ve})}else{if(!q(Y))throw new x("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);he++,X(Y,N,de,{end:ve})}Y=N}else if(C(N)){if(J(Y))he++,ae(U(Y),N,de,{end:ve});else if(K(Y)||q(Y))he++,ae(Y,N,de,{end:ve});else{if(!$(Y))throw new x("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);he++,ae(Y.readable,N,de,{end:ve})}Y=N}else Y=_.from(N)}return(ye!=null&&ye.aborted||ke!=null&&ke.aborted)&&h.nextTick(re),Y}function se(Z,ue,oe,{end:xe}){let ye=!1;if(ue.on("close",()=>{ye||oe(new k)}),Z.pipe(ue,{end:!1}),xe){let ke=function(){ye=!0,ue.end()};j(Z)?h.nextTick(ke):Z.once("end",ke)}else oe();return f(Z,{readable:!0,writable:!1},ke=>{const F=Z._readableState;ke&&ke.code==="ERR_STREAM_PREMATURE_CLOSE"&&F&&F.ended&&!F.errored&&!F.errorEmitted?Z.once("end",oe).once("error",oe):oe(ke)}),f(ue,{readable:!1,writable:!0},oe)}o.exports={pipelineImpl:ee,pipeline:function(...Z){return ee(Z,g(function(ue){return I(ue[ue.length-1],"streams[stream.length - 1]"),ue.pop()}(Z)))}}},7760:(o,a,l)=>{const h=l(8287),{format:u,inspect:c}=l(9231),{codes:{ERR_INVALID_ARG_TYPE:p}}=l(6371),{kResistStopPropagation:m,AggregateError:f,SymbolDispose:g}=l(4134),w=globalThis.AbortSignal||l(5568).AbortSignal,_=globalThis.AbortController||l(5568).AbortController,M=Object.getPrototypeOf(async function(){}).constructor,x=globalThis.Blob||h.Blob,E=x!==void 0?function(y){return y instanceof x}:function(y){return!1},A=(y,k)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new p(k,"AbortSignal",y)};o.exports={AggregateError:f,kEmptyObject:Object.freeze({}),once(y){let k=!1;return function(...R){k||(k=!0,y.apply(this,R))}},createDeferredPromise:function(){let y,k;return{promise:new Promise((R,I)=>{y=R,k=I}),resolve:y,reject:k}},promisify:y=>new Promise((k,R)=>{y((I,...z)=>I?R(I):k(...z))}),debuglog:()=>function(){},format:u,inspect:c,types:{isAsyncFunction:y=>y instanceof M,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:E,deprecate:(y,k)=>y,addAbortListener:l(7007).addAbortListener||function(y,k){if(y===void 0)throw new p("signal","AbortSignal",y);let R;return A(y,"signal"),(I=>{if(typeof I!="function")throw new p("listener","Function",I)})(k),y.aborted?queueMicrotask(()=>k()):(y.addEventListener("abort",k,{__proto__:null,once:!0,[m]:!0}),R=()=>{y.removeEventListener("abort",k)}),{__proto__:null,[g](){var I;(I=R)===null||I===void 0||I()}}},AbortSignalAny:w.any||function(y){if(y.length===1)return y[0];const k=new _,R=()=>k.abort();return y.forEach(I=>{A(I,"signals"),I.addEventListener("abort",R,{once:!0})}),k.signal.addEventListener("abort",()=>{y.forEach(I=>I.removeEventListener("abort",R))},{once:!0}),k.signal}},o.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7830:(o,a,l)=>{const{pipeline:h}=l(7758),u=l(3370),{destroyer:c}=l(5896),{isNodeStream:p,isReadable:m,isWritable:f,isWebStream:g,isTransformStream:w,isWritableStream:_,isReadableStream:M}=l(6115),{AbortError:x,codes:{ERR_INVALID_ARG_VALUE:E,ERR_MISSING_ARGS:A}}=l(6371),y=l(6238);o.exports=function(...k){if(k.length===0)throw new A("streams");if(k.length===1)return u.from(k[0]);const R=[...k];if(typeof k[0]=="function"&&(k[0]=u.from(k[0])),typeof k[k.length-1]=="function"){const j=k.length-1;k[j]=u.from(k[j])}for(let j=0;j<k.length;++j)if(p(k[j])||g(k[j])){if(j<k.length-1&&!(m(k[j])||M(k[j])||w(k[j])))throw new E(`streams[${j}]`,R[j],"must be readable");if(j>0&&!(f(k[j])||_(k[j])||w(k[j])))throw new E(`streams[${j}]`,R[j],"must be writable")}let I,z,q,D,J;const P=k[0],$=h(k,function(j){const G=D;D=null,G?G(j):j?J.destroy(j):K||C||J.destroy()}),C=!!(f(P)||_(P)||w(P)),K=!!(m($)||M($)||w($));if(J=new u({writableObjectMode:!(P==null||!P.writableObjectMode),readableObjectMode:!($==null||!$.readableObjectMode),writable:C,readable:K}),C){if(p(P))J._write=function(G,le,T){P.write(G,le)?T():I=T},J._final=function(G){P.end(),z=G},P.on("drain",function(){if(I){const G=I;I=null,G()}});else if(g(P)){const G=(w(P)?P.writable:P).getWriter();J._write=async function(le,T,W){try{await G.ready,G.write(le).catch(()=>{}),W()}catch(Q){W(Q)}},J._final=async function(le){try{await G.ready,G.close().catch(()=>{}),z=le}catch(T){le(T)}}}const j=w($)?$.readable:$;y(j,()=>{if(z){const G=z;z=null,G()}})}if(K){if(p($))$.on("readable",function(){if(q){const j=q;q=null,j()}}),$.on("end",function(){J.push(null)}),J._read=function(){for(;;){const j=$.read();if(j===null)return void(q=J._read);if(!J.push(j))return}};else if(g($)){const j=(w($)?$.readable:$).getReader();J._read=async function(){for(;;)try{const{value:G,done:le}=await j.read();if(!J.push(G))return;if(le)return void J.push(null)}catch{return}}}}return J._destroy=function(j,G){j||D===null||(j=new x),q=null,I=null,z=null,D===null?G(j):(D=G,p($)&&c($,j))},J}},8287:(o,a,l)=>{const h=l(7526),u=l(251),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=f,a.SlowBuffer=function(d){return+d!=d&&(d=0),f.alloc(+d)},a.INSPECT_MAX_BYTES=50;const p=2147483647;function m(d){if(d>p)throw new RangeError('The value "'+d+'" is invalid for option "size"');const b=new Uint8Array(d);return Object.setPrototypeOf(b,f.prototype),b}function f(d,b,S){if(typeof d=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(d)}return g(d,b,S)}function g(d,b,S){if(typeof d=="string")return function(V,ie){if(typeof ie=="string"&&ie!==""||(ie="utf8"),!f.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);const ve=0|A(V,ie);let _e=m(ve);const Ce=_e.write(V,ie);return Ce!==ve&&(_e=_e.slice(0,Ce)),_e}(d,b);if(ArrayBuffer.isView(d))return function(V){if(H(V,Uint8Array)){const ie=new Uint8Array(V);return x(ie.buffer,ie.byteOffset,ie.byteLength)}return M(V)}(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(H(d,ArrayBuffer)||d&&H(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(d,SharedArrayBuffer)||d&&H(d.buffer,SharedArrayBuffer)))return x(d,b,S);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=d.valueOf&&d.valueOf();if(L!=null&&L!==d)return f.from(L,b,S);const N=function(V){if(f.isBuffer(V)){const ie=0|E(V.length),ve=m(ie);return ve.length===0||V.copy(ve,0,0,ie),ve}return V.length!==void 0?typeof V.length!="number"||ne(V.length)?m(0):M(V):V.type==="Buffer"&&Array.isArray(V.data)?M(V.data):void 0}(d);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return f.from(d[Symbol.toPrimitive]("string"),b,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}function w(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function _(d){return w(d),m(d<0?0:0|E(d))}function M(d){const b=d.length<0?0:0|E(d.length),S=m(b);for(let L=0;L<b;L+=1)S[L]=255&d[L];return S}function x(d,b,S){if(b<0||d.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<b+(S||0))throw new RangeError('"length" is outside of buffer bounds');let L;return L=b===void 0&&S===void 0?new Uint8Array(d):S===void 0?new Uint8Array(d,b):new Uint8Array(d,b,S),Object.setPrototypeOf(L,f.prototype),L}function E(d){if(d>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|d}function A(d,b){if(f.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||H(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const S=d.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&S===0)return 0;let N=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return re(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return te(d).length;default:if(N)return L?-1:re(d).length;b=(""+b).toLowerCase(),N=!0}}function y(d,b,S){let L=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(b>>>=0))return"";for(d||(d="utf8");;)switch(d){case"hex":return le(this,b,S);case"utf8":case"utf-8":return C(this,b,S);case"ascii":return j(this,b,S);case"latin1":case"binary":return G(this,b,S);case"base64":return $(this,b,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,b,S);default:if(L)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),L=!0}}function k(d,b,S){const L=d[b];d[b]=d[S],d[S]=L}function R(d,b,S,L,N){if(d.length===0)return-1;if(typeof S=="string"?(L=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),ne(S=+S)&&(S=N?0:d.length-1),S<0&&(S=d.length+S),S>=d.length){if(N)return-1;S=d.length-1}else if(S<0){if(!N)return-1;S=0}if(typeof b=="string"&&(b=f.from(b,L)),f.isBuffer(b))return b.length===0?-1:I(d,b,S,L,N);if(typeof b=="number")return b&=255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(d,b,S):Uint8Array.prototype.lastIndexOf.call(d,b,S):I(d,[b],S,L,N);throw new TypeError("val must be string, number or Buffer")}function I(d,b,S,L,N){let V,ie=1,ve=d.length,_e=b.length;if(L!==void 0&&((L=String(L).toLowerCase())==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(d.length<2||b.length<2)return-1;ie=2,ve/=2,_e/=2,S/=2}function Ce(Ee,Fe){return ie===1?Ee[Fe]:Ee.readUInt16BE(Fe*ie)}if(N){let Ee=-1;for(V=S;V<ve;V++)if(Ce(d,V)===Ce(b,Ee===-1?0:V-Ee)){if(Ee===-1&&(Ee=V),V-Ee+1===_e)return Ee*ie}else Ee!==-1&&(V-=V-Ee),Ee=-1}else for(S+_e>ve&&(S=ve-_e),V=S;V>=0;V--){let Ee=!0;for(let Fe=0;Fe<_e;Fe++)if(Ce(d,V+Fe)!==Ce(b,Fe)){Ee=!1;break}if(Ee)return V}return-1}function z(d,b,S,L){S=Number(S)||0;const N=d.length-S;L?(L=Number(L))>N&&(L=N):L=N;const V=b.length;let ie;for(L>V/2&&(L=V/2),ie=0;ie<L;++ie){const ve=parseInt(b.substr(2*ie,2),16);if(ne(ve))return ie;d[S+ie]=ve}return ie}function q(d,b,S,L){return me(re(b,d.length-S),d,S,L)}function D(d,b,S,L){return me(function(N){const V=[];for(let ie=0;ie<N.length;++ie)V.push(255&N.charCodeAt(ie));return V}(b),d,S,L)}function J(d,b,S,L){return me(te(b),d,S,L)}function P(d,b,S,L){return me(function(N,V){let ie,ve,_e;const Ce=[];for(let Ee=0;Ee<N.length&&!((V-=2)<0);++Ee)ie=N.charCodeAt(Ee),ve=ie>>8,_e=ie%256,Ce.push(_e),Ce.push(ve);return Ce}(b,d.length-S),d,S,L)}function $(d,b,S){return b===0&&S===d.length?h.fromByteArray(d):h.fromByteArray(d.slice(b,S))}function C(d,b,S){S=Math.min(d.length,S);const L=[];let N=b;for(;N<S;){const V=d[N];let ie=null,ve=V>239?4:V>223?3:V>191?2:1;if(N+ve<=S){let _e,Ce,Ee,Fe;switch(ve){case 1:V<128&&(ie=V);break;case 2:_e=d[N+1],(192&_e)==128&&(Fe=(31&V)<<6|63&_e,Fe>127&&(ie=Fe));break;case 3:_e=d[N+1],Ce=d[N+2],(192&_e)==128&&(192&Ce)==128&&(Fe=(15&V)<<12|(63&_e)<<6|63&Ce,Fe>2047&&(Fe<55296||Fe>57343)&&(ie=Fe));break;case 4:_e=d[N+1],Ce=d[N+2],Ee=d[N+3],(192&_e)==128&&(192&Ce)==128&&(192&Ee)==128&&(Fe=(15&V)<<18|(63&_e)<<12|(63&Ce)<<6|63&Ee,Fe>65535&&Fe<1114112&&(ie=Fe))}}ie===null?(ie=65533,ve=1):ie>65535&&(ie-=65536,L.push(ie>>>10&1023|55296),ie=56320|1023&ie),L.push(ie),N+=ve}return function(V){const ie=V.length;if(ie<=K)return String.fromCharCode.apply(String,V);let ve="",_e=0;for(;_e<ie;)ve+=String.fromCharCode.apply(String,V.slice(_e,_e+=K));return ve}(L)}a.kMaxLength=p,f.TYPED_ARRAY_SUPPORT=function(){try{const d=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(d,b),d.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(d,b,S){return g(d,b,S)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(d,b,S){return function(L,N,V){return w(L),L<=0?m(L):N!==void 0?typeof V=="string"?m(L).fill(N,V):m(L).fill(N):m(L)}(d,b,S)},f.allocUnsafe=function(d){return _(d)},f.allocUnsafeSlow=function(d){return _(d)},f.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==f.prototype},f.compare=function(d,b){if(H(d,Uint8Array)&&(d=f.from(d,d.offset,d.byteLength)),H(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength)),!f.isBuffer(d)||!f.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===b)return 0;let S=d.length,L=b.length;for(let N=0,V=Math.min(S,L);N<V;++N)if(d[N]!==b[N]){S=d[N],L=b[N];break}return S<L?-1:L<S?1:0},f.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(d,b){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return f.alloc(0);let S;if(b===void 0)for(b=0,S=0;S<d.length;++S)b+=d[S].length;const L=f.allocUnsafe(b);let N=0;for(S=0;S<d.length;++S){let V=d[S];if(H(V,Uint8Array))N+V.length>L.length?(f.isBuffer(V)||(V=f.from(V)),V.copy(L,N)):Uint8Array.prototype.set.call(L,V,N);else{if(!f.isBuffer(V))throw new TypeError('"list" argument must be an Array of Buffers');V.copy(L,N)}N+=V.length}return L},f.byteLength=A,f.prototype._isBuffer=!0,f.prototype.swap16=function(){const d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<d;b+=2)k(this,b,b+1);return this},f.prototype.swap32=function(){const d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<d;b+=4)k(this,b,b+3),k(this,b+1,b+2);return this},f.prototype.swap64=function(){const d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<d;b+=8)k(this,b,b+7),k(this,b+1,b+6),k(this,b+2,b+5),k(this,b+3,b+4);return this},f.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?C(this,0,d):y.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(d){if(!f.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||f.compare(this,d)===0},f.prototype.inspect=function(){let d="";const b=a.INSPECT_MAX_BYTES;return d=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(d+=" ... "),"<Buffer "+d+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(d,b,S,L,N){if(H(d,Uint8Array)&&(d=f.from(d,d.offset,d.byteLength)),!f.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(b===void 0&&(b=0),S===void 0&&(S=d?d.length:0),L===void 0&&(L=0),N===void 0&&(N=this.length),b<0||S>d.length||L<0||N>this.length)throw new RangeError("out of range index");if(L>=N&&b>=S)return 0;if(L>=N)return-1;if(b>=S)return 1;if(this===d)return 0;let V=(N>>>=0)-(L>>>=0),ie=(S>>>=0)-(b>>>=0);const ve=Math.min(V,ie),_e=this.slice(L,N),Ce=d.slice(b,S);for(let Ee=0;Ee<ve;++Ee)if(_e[Ee]!==Ce[Ee]){V=_e[Ee],ie=Ce[Ee];break}return V<ie?-1:ie<V?1:0},f.prototype.includes=function(d,b,S){return this.indexOf(d,b,S)!==-1},f.prototype.indexOf=function(d,b,S){return R(this,d,b,S,!0)},f.prototype.lastIndexOf=function(d,b,S){return R(this,d,b,S,!1)},f.prototype.write=function(d,b,S,L){if(b===void 0)L="utf8",S=this.length,b=0;else if(S===void 0&&typeof b=="string")L=b,S=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(S)?(S>>>=0,L===void 0&&(L="utf8")):(L=S,S=void 0)}const N=this.length-b;if((S===void 0||S>N)&&(S=N),d.length>0&&(S<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let V=!1;for(;;)switch(L){case"hex":return z(this,d,b,S);case"utf8":case"utf-8":return q(this,d,b,S);case"ascii":case"latin1":case"binary":return D(this,d,b,S);case"base64":return J(this,d,b,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,d,b,S);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),V=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const K=4096;function j(d,b,S){let L="";S=Math.min(d.length,S);for(let N=b;N<S;++N)L+=String.fromCharCode(127&d[N]);return L}function G(d,b,S){let L="";S=Math.min(d.length,S);for(let N=b;N<S;++N)L+=String.fromCharCode(d[N]);return L}function le(d,b,S){const L=d.length;(!b||b<0)&&(b=0),(!S||S<0||S>L)&&(S=L);let N="";for(let V=b;V<S;++V)N+=Y[d[V]];return N}function T(d,b,S){const L=d.slice(b,S);let N="";for(let V=0;V<L.length-1;V+=2)N+=String.fromCharCode(L[V]+256*L[V+1]);return N}function W(d,b,S){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(d+b>S)throw new RangeError("Trying to access beyond buffer length")}function Q(d,b,S,L,N,V){if(!f.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>N||b<V)throw new RangeError('"value" argument is out of bounds');if(S+L>d.length)throw new RangeError("Index out of range")}function U(d,b,S,L,N){xe(b,L,N,d,S,7);let V=Number(b&BigInt(4294967295));d[S++]=V,V>>=8,d[S++]=V,V>>=8,d[S++]=V,V>>=8,d[S++]=V;let ie=Number(b>>BigInt(32)&BigInt(4294967295));return d[S++]=ie,ie>>=8,d[S++]=ie,ie>>=8,d[S++]=ie,ie>>=8,d[S++]=ie,S}function X(d,b,S,L,N){xe(b,L,N,d,S,7);let V=Number(b&BigInt(4294967295));d[S+7]=V,V>>=8,d[S+6]=V,V>>=8,d[S+5]=V,V>>=8,d[S+4]=V;let ie=Number(b>>BigInt(32)&BigInt(4294967295));return d[S+3]=ie,ie>>=8,d[S+2]=ie,ie>>=8,d[S+1]=ie,ie>>=8,d[S]=ie,S+8}function ae(d,b,S,L,N,V){if(S+L>d.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function ee(d,b,S,L,N){return b=+b,S>>>=0,N||ae(d,0,S,4),u.write(d,b,S,L,23,4),S+4}function se(d,b,S,L,N){return b=+b,S>>>=0,N||ae(d,0,S,8),u.write(d,b,S,L,52,8),S+8}f.prototype.slice=function(d,b){const S=this.length;(d=~~d)<0?(d+=S)<0&&(d=0):d>S&&(d=S),(b=b===void 0?S:~~b)<0?(b+=S)<0&&(b=0):b>S&&(b=S),b<d&&(b=d);const L=this.subarray(d,b);return Object.setPrototypeOf(L,f.prototype),L},f.prototype.readUintLE=f.prototype.readUIntLE=function(d,b,S){d>>>=0,b>>>=0,S||W(d,b,this.length);let L=this[d],N=1,V=0;for(;++V<b&&(N*=256);)L+=this[d+V]*N;return L},f.prototype.readUintBE=f.prototype.readUIntBE=function(d,b,S){d>>>=0,b>>>=0,S||W(d,b,this.length);let L=this[d+--b],N=1;for(;b>0&&(N*=256);)L+=this[d+--b]*N;return L},f.prototype.readUint8=f.prototype.readUInt8=function(d,b){return d>>>=0,b||W(d,1,this.length),this[d]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(d,b){return d>>>=0,b||W(d,2,this.length),this[d]|this[d+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(d,b){return d>>>=0,b||W(d,2,this.length),this[d]<<8|this[d+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(d,b){return d>>>=0,b||W(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(d,b){return d>>>=0,b||W(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},f.prototype.readBigUInt64LE=he(function(d){ye(d>>>=0,"offset");const b=this[d],S=this[d+7];b!==void 0&&S!==void 0||ke(d,this.length-8);const L=b+256*this[++d]+65536*this[++d]+this[++d]*2**24,N=this[++d]+256*this[++d]+65536*this[++d]+S*2**24;return BigInt(L)+(BigInt(N)<<BigInt(32))}),f.prototype.readBigUInt64BE=he(function(d){ye(d>>>=0,"offset");const b=this[d],S=this[d+7];b!==void 0&&S!==void 0||ke(d,this.length-8);const L=b*2**24+65536*this[++d]+256*this[++d]+this[++d],N=this[++d]*2**24+65536*this[++d]+256*this[++d]+S;return(BigInt(L)<<BigInt(32))+BigInt(N)}),f.prototype.readIntLE=function(d,b,S){d>>>=0,b>>>=0,S||W(d,b,this.length);let L=this[d],N=1,V=0;for(;++V<b&&(N*=256);)L+=this[d+V]*N;return N*=128,L>=N&&(L-=Math.pow(2,8*b)),L},f.prototype.readIntBE=function(d,b,S){d>>>=0,b>>>=0,S||W(d,b,this.length);let L=b,N=1,V=this[d+--L];for(;L>0&&(N*=256);)V+=this[d+--L]*N;return N*=128,V>=N&&(V-=Math.pow(2,8*b)),V},f.prototype.readInt8=function(d,b){return d>>>=0,b||W(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},f.prototype.readInt16LE=function(d,b){d>>>=0,b||W(d,2,this.length);const S=this[d]|this[d+1]<<8;return 32768&S?4294901760|S:S},f.prototype.readInt16BE=function(d,b){d>>>=0,b||W(d,2,this.length);const S=this[d+1]|this[d]<<8;return 32768&S?4294901760|S:S},f.prototype.readInt32LE=function(d,b){return d>>>=0,b||W(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},f.prototype.readInt32BE=function(d,b){return d>>>=0,b||W(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},f.prototype.readBigInt64LE=he(function(d){ye(d>>>=0,"offset");const b=this[d],S=this[d+7];b!==void 0&&S!==void 0||ke(d,this.length-8);const L=this[d+4]+256*this[d+5]+65536*this[d+6]+(S<<24);return(BigInt(L)<<BigInt(32))+BigInt(b+256*this[++d]+65536*this[++d]+this[++d]*16777216)}),f.prototype.readBigInt64BE=he(function(d){ye(d>>>=0,"offset");const b=this[d],S=this[d+7];b!==void 0&&S!==void 0||ke(d,this.length-8);const L=(b<<24)+65536*this[++d]+256*this[++d]+this[++d];return(BigInt(L)<<BigInt(32))+BigInt(this[++d]*16777216+65536*this[++d]+256*this[++d]+S)}),f.prototype.readFloatLE=function(d,b){return d>>>=0,b||W(d,4,this.length),u.read(this,d,!0,23,4)},f.prototype.readFloatBE=function(d,b){return d>>>=0,b||W(d,4,this.length),u.read(this,d,!1,23,4)},f.prototype.readDoubleLE=function(d,b){return d>>>=0,b||W(d,8,this.length),u.read(this,d,!0,52,8)},f.prototype.readDoubleBE=function(d,b){return d>>>=0,b||W(d,8,this.length),u.read(this,d,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(d,b,S,L){d=+d,b>>>=0,S>>>=0,L||Q(this,d,b,S,Math.pow(2,8*S)-1,0);let N=1,V=0;for(this[b]=255&d;++V<S&&(N*=256);)this[b+V]=d/N&255;return b+S},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(d,b,S,L){d=+d,b>>>=0,S>>>=0,L||Q(this,d,b,S,Math.pow(2,8*S)-1,0);let N=S-1,V=1;for(this[b+N]=255&d;--N>=0&&(V*=256);)this[b+N]=d/V&255;return b+S},f.prototype.writeUint8=f.prototype.writeUInt8=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,1,255,0),this[b]=255&d,b+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,2,65535,0),this[b]=255&d,this[b+1]=d>>>8,b+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,2,65535,0),this[b]=d>>>8,this[b+1]=255&d,b+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,4,4294967295,0),this[b+3]=d>>>24,this[b+2]=d>>>16,this[b+1]=d>>>8,this[b]=255&d,b+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,4,4294967295,0),this[b]=d>>>24,this[b+1]=d>>>16,this[b+2]=d>>>8,this[b+3]=255&d,b+4},f.prototype.writeBigUInt64LE=he(function(d,b=0){return U(this,d,b,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=he(function(d,b=0){return X(this,d,b,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(d,b,S,L){if(d=+d,b>>>=0,!L){const ve=Math.pow(2,8*S-1);Q(this,d,b,S,ve-1,-ve)}let N=0,V=1,ie=0;for(this[b]=255&d;++N<S&&(V*=256);)d<0&&ie===0&&this[b+N-1]!==0&&(ie=1),this[b+N]=(d/V|0)-ie&255;return b+S},f.prototype.writeIntBE=function(d,b,S,L){if(d=+d,b>>>=0,!L){const ve=Math.pow(2,8*S-1);Q(this,d,b,S,ve-1,-ve)}let N=S-1,V=1,ie=0;for(this[b+N]=255&d;--N>=0&&(V*=256);)d<0&&ie===0&&this[b+N+1]!==0&&(ie=1),this[b+N]=(d/V|0)-ie&255;return b+S},f.prototype.writeInt8=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,1,127,-128),d<0&&(d=255+d+1),this[b]=255&d,b+1},f.prototype.writeInt16LE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,2,32767,-32768),this[b]=255&d,this[b+1]=d>>>8,b+2},f.prototype.writeInt16BE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,2,32767,-32768),this[b]=d>>>8,this[b+1]=255&d,b+2},f.prototype.writeInt32LE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,4,2147483647,-2147483648),this[b]=255&d,this[b+1]=d>>>8,this[b+2]=d>>>16,this[b+3]=d>>>24,b+4},f.prototype.writeInt32BE=function(d,b,S){return d=+d,b>>>=0,S||Q(this,d,b,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[b]=d>>>24,this[b+1]=d>>>16,this[b+2]=d>>>8,this[b+3]=255&d,b+4},f.prototype.writeBigInt64LE=he(function(d,b=0){return U(this,d,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=he(function(d,b=0){return X(this,d,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(d,b,S){return ee(this,d,b,!0,S)},f.prototype.writeFloatBE=function(d,b,S){return ee(this,d,b,!1,S)},f.prototype.writeDoubleLE=function(d,b,S){return se(this,d,b,!0,S)},f.prototype.writeDoubleBE=function(d,b,S){return se(this,d,b,!1,S)},f.prototype.copy=function(d,b,S,L){if(!f.isBuffer(d))throw new TypeError("argument should be a Buffer");if(S||(S=0),L||L===0||(L=this.length),b>=d.length&&(b=d.length),b||(b=0),L>0&&L<S&&(L=S),L===S||d.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),d.length-b<L-S&&(L=d.length-b+S);const N=L-S;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,S,L):Uint8Array.prototype.set.call(d,this.subarray(S,L),b),N},f.prototype.fill=function(d,b,S,L){if(typeof d=="string"){if(typeof b=="string"?(L=b,b=0,S=this.length):typeof S=="string"&&(L=S,S=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!f.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(d.length===1){const V=d.charCodeAt(0);(L==="utf8"&&V<128||L==="latin1")&&(d=V)}}else typeof d=="number"?d&=255:typeof d=="boolean"&&(d=Number(d));if(b<0||this.length<b||this.length<S)throw new RangeError("Out of range index");if(S<=b)return this;let N;if(b>>>=0,S=S===void 0?this.length:S>>>0,d||(d=0),typeof d=="number")for(N=b;N<S;++N)this[N]=d;else{const V=f.isBuffer(d)?d:f.from(d,L),ie=V.length;if(ie===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(N=0;N<S-b;++N)this[N+b]=V[N%ie]}return this};const Z={};function ue(d,b,S){Z[d]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}function oe(d){let b="",S=d.length;const L=d[0]==="-"?1:0;for(;S>=L+4;S-=3)b=`_${d.slice(S-3,S)}${b}`;return`${d.slice(0,S)}${b}`}function xe(d,b,S,L,N,V){if(d>S||d<b){const ie=typeof b=="bigint"?"n":"";let ve;throw ve=b===0||b===BigInt(0)?`>= 0${ie} and < 2${ie} ** ${8*(V+1)}${ie}`:`>= -(2${ie} ** ${8*(V+1)-1}${ie}) and < 2 ** ${8*(V+1)-1}${ie}`,new Z.ERR_OUT_OF_RANGE("value",ve,d)}(function(ie,ve,_e){ye(ve,"offset"),ie[ve]!==void 0&&ie[ve+_e]!==void 0||ke(ve,ie.length-(_e+1))})(L,N,V)}function ye(d,b){if(typeof d!="number")throw new Z.ERR_INVALID_ARG_TYPE(b,"number",d)}function ke(d,b,S){throw Math.floor(d)!==d?(ye(d,S),new Z.ERR_OUT_OF_RANGE("offset","an integer",d)):b<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,d)}ue("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ue("ERR_INVALID_ARG_TYPE",function(d,b){return`The "${d}" argument must be of type number. Received type ${typeof b}`},TypeError),ue("ERR_OUT_OF_RANGE",function(d,b,S){let L=`The value of "${d}" is out of range.`,N=S;return Number.isInteger(S)&&Math.abs(S)>4294967296?N=oe(String(S)):typeof S=="bigint"&&(N=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(N=oe(N)),N+="n"),L+=` It must be ${b}. Received ${N}`,L},RangeError);const F=/[^+/0-9A-Za-z-_]/g;function re(d,b){let S;b=b||1/0;const L=d.length;let N=null;const V=[];for(let ie=0;ie<L;++ie){if(S=d.charCodeAt(ie),S>55295&&S<57344){if(!N){if(S>56319){(b-=3)>-1&&V.push(239,191,189);continue}if(ie+1===L){(b-=3)>-1&&V.push(239,191,189);continue}N=S;continue}if(S<56320){(b-=3)>-1&&V.push(239,191,189),N=S;continue}S=65536+(N-55296<<10|S-56320)}else N&&(b-=3)>-1&&V.push(239,191,189);if(N=null,S<128){if((b-=1)<0)break;V.push(S)}else if(S<2048){if((b-=2)<0)break;V.push(S>>6|192,63&S|128)}else if(S<65536){if((b-=3)<0)break;V.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;V.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return V}function te(d){return h.toByteArray(function(b){if((b=(b=b.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;b.length%4!=0;)b+="=";return b}(d))}function me(d,b,S,L){let N;for(N=0;N<L&&!(N+S>=b.length||N>=d.length);++N)b[N+S]=d[N];return N}function H(d,b){return d instanceof b||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===b.name}function ne(d){return d!=d}const Y=function(){const d="0123456789abcdef",b=new Array(256);for(let S=0;S<16;++S){const L=16*S;for(let N=0;N<16;++N)b[L+N]=d[S]+d[N]}return b}();function he(d){return typeof BigInt>"u"?de:d}function de(){throw new Error("BigInt not supported")}},8310:(o,a,l)=>{o.exports=u;var h=l(7007).EventEmitter;function u(){h.call(this)}l(6698)(u,h),u.Readable=l(5412),u.Writable=l(6708),u.Duplex=l(5382),u.Transform=l(4610),u.PassThrough=l(3600),u.finished=l(6238),u.pipeline=l(7758),u.Stream=u,u.prototype.pipe=function(c,p){var m=this;function f(A){c.writable&&c.write(A)===!1&&m.pause&&m.pause()}function g(){m.readable&&m.resume&&m.resume()}m.on("data",f),c.on("drain",g),c._isStdio||p&&p.end===!1||(m.on("end",_),m.on("close",M));var w=!1;function _(){w||(w=!0,c.end())}function M(){w||(w=!0,typeof c.destroy=="function"&&c.destroy())}function x(A){if(E(),h.listenerCount(this,"error")===0)throw A}function E(){m.removeListener("data",f),c.removeListener("drain",g),m.removeListener("end",_),m.removeListener("close",M),m.removeListener("error",x),c.removeListener("error",x),m.removeListener("end",E),m.removeListener("close",E),c.removeListener("close",E)}return m.on("error",x),c.on("error",x),m.on("end",E),m.on("close",E),c.on("close",E),c.emit("pipe",m),c}},8584:(o,a,l)=>{const h=l(5606),{ArrayPrototypeSlice:u,Error:c,FunctionPrototypeSymbolHasInstance:p,ObjectDefineProperty:m,ObjectDefineProperties:f,ObjectSetPrototypeOf:g,StringPrototypeToLowerCase:w,Symbol:_,SymbolHasInstance:M}=l(4134);o.exports=U,U.WritableState=W;const{EventEmitter:x}=l(7007),E=l(4259).Stream,{Buffer:A}=l(8287),y=l(5896),{addAbortSignal:k}=l(4147),{getHighWaterMark:R,getDefaultHighWaterMark:I}=l(5291),{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_MULTIPLE_CALLBACK:D,ERR_STREAM_CANNOT_PIPE:J,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:C,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:j}=l(6371).codes,{errorOrDestroy:G}=y;function le(){}g(U.prototype,E.prototype),g(U,E);const T=_("kOnFinished");function W(H,ne,Y){typeof Y!="boolean"&&(Y=ne instanceof l(3370)),this.objectMode=!(!H||!H.objectMode),Y&&(this.objectMode=this.objectMode||!(!H||!H.writableObjectMode)),this.highWaterMark=H?R(this,H,"writableHighWaterMark",Y):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const he=!(!H||H.decodeStrings!==!1);this.decodeStrings=!he,this.defaultEncoding=H&&H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=se.bind(void 0,ne),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!H||H.emitClose!==!1,this.autoDestroy=!H||H.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[T]=[]}function Q(H){H.buffered=[],H.bufferedIndex=0,H.allBuffers=!0,H.allNoop=!0}function U(H){const ne=this instanceof l(3370);if(!ne&&!p(U,this))return new U(H);this._writableState=new W(H,this,ne),H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev),typeof H.destroy=="function"&&(this._destroy=H.destroy),typeof H.final=="function"&&(this._final=H.final),typeof H.construct=="function"&&(this._construct=H.construct),H.signal&&k(H.signal,this)),E.call(this,H),y.construct(this,()=>{const Y=this._writableState;Y.writing||xe(this,Y),ke(this,Y)})}function X(H,ne,Y,he){const de=H._writableState;if(typeof Y=="function")he=Y,Y=de.defaultEncoding;else{if(Y){if(Y!=="buffer"&&!A.isEncoding(Y))throw new j(Y)}else Y=de.defaultEncoding;typeof he!="function"&&(he=le)}if(ne===null)throw new C;if(!de.objectMode)if(typeof ne=="string")de.decodeStrings!==!1&&(ne=A.from(ne,Y),Y="buffer");else if(ne instanceof A)Y="buffer";else{if(!E._isUint8Array(ne))throw new z("chunk",["string","Buffer","Uint8Array"],ne);ne=E._uint8ArrayToBuffer(ne),Y="buffer"}let d;return de.ending?d=new K:de.destroyed&&(d=new P("write")),d?(h.nextTick(he,d),G(H,d,!0),d):(de.pendingcb++,function(b,S,L,N,V){const ie=S.objectMode?1:L.length;S.length+=ie;const ve=S.length<S.highWaterMark;return ve||(S.needDrain=!0),S.writing||S.corked||S.errored||!S.constructed?(S.buffered.push({chunk:L,encoding:N,callback:V}),S.allBuffers&&N!=="buffer"&&(S.allBuffers=!1),S.allNoop&&V!==le&&(S.allNoop=!1)):(S.writelen=ie,S.writecb=V,S.writing=!0,S.sync=!0,b._write(L,N,S.onwrite),S.sync=!1),ve&&!S.errored&&!S.destroyed}(H,de,ne,Y,he))}function ae(H,ne,Y,he,de,d,b){ne.writelen=he,ne.writecb=b,ne.writing=!0,ne.sync=!0,ne.destroyed?ne.onwrite(new P("write")):Y?H._writev(de,ne.onwrite):H._write(de,d,ne.onwrite),ne.sync=!1}function ee(H,ne,Y,he){--ne.pendingcb,he(Y),oe(ne),G(H,Y)}function se(H,ne){const Y=H._writableState,he=Y.sync,de=Y.writecb;typeof de=="function"?(Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0,ne?(ne.stack,Y.errored||(Y.errored=ne),H._readableState&&!H._readableState.errored&&(H._readableState.errored=ne),he?h.nextTick(ee,H,Y,ne,de):ee(H,Y,ne,de)):(Y.buffered.length>Y.bufferedIndex&&xe(H,Y),he?Y.afterWriteTickInfo!==null&&Y.afterWriteTickInfo.cb===de?Y.afterWriteTickInfo.count++:(Y.afterWriteTickInfo={count:1,cb:de,stream:H,state:Y},h.nextTick(Z,Y.afterWriteTickInfo)):ue(H,Y,1,de))):G(H,new D)}function Z({stream:H,state:ne,count:Y,cb:he}){return ne.afterWriteTickInfo=null,ue(H,ne,Y,he)}function ue(H,ne,Y,he){for(!ne.ending&&!H.destroyed&&ne.length===0&&ne.needDrain&&(ne.needDrain=!1,H.emit("drain"));Y-- >0;)ne.pendingcb--,he();ne.destroyed&&oe(ne),ke(H,ne)}function oe(H){if(H.writing)return;for(let de=H.bufferedIndex;de<H.buffered.length;++de){var ne;const{chunk:d,callback:b}=H.buffered[de],S=H.objectMode?1:d.length;H.length-=S,b((ne=H.errored)!==null&&ne!==void 0?ne:new P("write"))}const Y=H[T].splice(0);for(let de=0;de<Y.length;de++){var he;Y[de]((he=H.errored)!==null&&he!==void 0?he:new P("end"))}Q(H)}function xe(H,ne){if(ne.corked||ne.bufferProcessing||ne.destroyed||!ne.constructed)return;const{buffered:Y,bufferedIndex:he,objectMode:de}=ne,d=Y.length-he;if(!d)return;let b=he;if(ne.bufferProcessing=!0,d>1&&H._writev){ne.pendingcb-=d-1;const S=ne.allNoop?le:N=>{for(let V=b;V<Y.length;++V)Y[V].callback(N)},L=ne.allNoop&&b===0?Y:u(Y,b);L.allBuffers=ne.allBuffers,ae(H,ne,!0,ne.length,L,"",S),Q(ne)}else{do{const{chunk:S,encoding:L,callback:N}=Y[b];Y[b++]=null,ae(H,ne,!1,de?1:S.length,S,L,N)}while(b<Y.length&&!ne.writing);b===Y.length?Q(ne):b>256?(Y.splice(0,b),ne.bufferedIndex=0):ne.bufferedIndex=b}ne.bufferProcessing=!1}function ye(H){return H.ending&&!H.destroyed&&H.constructed&&H.length===0&&!H.errored&&H.buffered.length===0&&!H.finished&&!H.writing&&!H.errorEmitted&&!H.closeEmitted}function ke(H,ne,Y){ye(ne)&&(function(he,de){de.prefinished||de.finalCalled||(typeof he._final!="function"||de.destroyed?(de.prefinished=!0,he.emit("prefinish")):(de.finalCalled=!0,function(d,b){let S=!1;function L(N){if(S)G(d,N??D());else if(S=!0,b.pendingcb--,N){const V=b[T].splice(0);for(let ie=0;ie<V.length;ie++)V[ie](N);G(d,N,b.sync)}else ye(b)&&(b.prefinished=!0,d.emit("prefinish"),b.pendingcb++,h.nextTick(F,d,b))}b.sync=!0,b.pendingcb++;try{d._final(L)}catch(N){L(N)}b.sync=!1}(he,de)))}(H,ne),ne.pendingcb===0&&(Y?(ne.pendingcb++,h.nextTick((he,de)=>{ye(de)?F(he,de):de.pendingcb--},H,ne)):ye(ne)&&(ne.pendingcb++,F(H,ne))))}function F(H,ne){ne.pendingcb--,ne.finished=!0;const Y=ne[T].splice(0);for(let he=0;he<Y.length;he++)Y[he]();if(H.emit("finish"),ne.autoDestroy){const he=H._readableState;(!he||he.autoDestroy&&(he.endEmitted||he.readable===!1))&&H.destroy()}}W.prototype.getBuffer=function(){return u(this.buffered,this.bufferedIndex)},m(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),m(U,M,{__proto__:null,value:function(H){return!!p(this,H)||this===U&&H&&H._writableState instanceof W}}),U.prototype.pipe=function(){G(this,new J)},U.prototype.write=function(H,ne,Y){return X(this,H,ne,Y)===!0},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){const H=this._writableState;H.corked&&(H.corked--,H.writing||xe(this,H))},U.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=w(H)),!A.isEncoding(H))throw new j(H);return this._writableState.defaultEncoding=H,this},U.prototype._write=function(H,ne,Y){if(!this._writev)throw new q("_write()");this._writev([{chunk:H,encoding:ne}],Y)},U.prototype._writev=null,U.prototype.end=function(H,ne,Y){const he=this._writableState;let de;if(typeof H=="function"?(Y=H,H=null,ne=null):typeof ne=="function"&&(Y=ne,ne=null),H!=null){const d=X(this,H,ne);d instanceof c&&(de=d)}return he.corked&&(he.corked=1,this.uncork()),de||(he.errored||he.ending?he.finished?de=new $("end"):he.destroyed&&(de=new P("end")):(he.ending=!0,ke(this,he,!0),he.ended=!0)),typeof Y=="function"&&(de||he.finished?h.nextTick(Y,de):he[T].push(Y)),this},f(U.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(H){this._writableState&&(this._writableState.destroyed=H)}},writable:{__proto__:null,get(){const H=this._writableState;return!(!H||H.writable===!1||H.destroyed||H.errored||H.ending||H.ended)},set(H){this._writableState&&(this._writableState.writable=!!H)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const H=this._writableState;return!!H&&!H.destroyed&&!H.ending&&H.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._writableState.writable===!1||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const re=y.destroy;let te;function me(){return te===void 0&&(te={}),te}U.prototype.destroy=function(H,ne){const Y=this._writableState;return!Y.destroyed&&(Y.bufferedIndex<Y.buffered.length||Y[T].length)&&h.nextTick(oe,Y),re.call(this,H,ne),this},U.prototype._undestroy=y.undestroy,U.prototype._destroy=function(H,ne){ne(H)},U.prototype[x.captureRejectionSymbol]=function(H){this.destroy(H)},U.fromWeb=function(H,ne){return me().newStreamWritableFromWritableStream(H,ne)},U.toWeb=function(H){return me().newWritableStreamFromStreamWritable(H)}},9231:o=>{o.exports={format:(a,...l)=>a.replace(/%([sdifj])/g,function(...[h,u]){const c=l.shift();return u==="f"?c.toFixed(6):u==="j"?JSON.stringify(c):u==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()}),inspect(a){switch(typeof a){case"string":if(a.includes("'")){if(!a.includes('"'))return`"${a}"`;if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}},9452:(o,a)=>{a.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},a.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36,SET:258},a.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},a.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},a.SYMS={NULL:Symbol.for("github.com/hildjj/node-cbor/null"),UNDEFINED:Symbol.for("github.com/hildjj/node-cbor/undef"),PARENT:Symbol.for("github.com/hildjj/node-cbor/parent"),BREAK:Symbol.for("github.com/hildjj/node-cbor/break"),STREAM:Symbol.for("github.com/hildjj/node-cbor/stream")},a.SHIFT32=4294967296,a.BI={MINUS_ONE:BigInt(-1),NEG_MAX:BigInt(-1)-BigInt(Number.MAX_SAFE_INTEGER),MAXINT32:BigInt("0xffffffff"),MAXINT64:BigInt("0xffffffffffffffff"),SHIFT32:BigInt(a.SHIFT32)}},9744:o=>{class a{constructor(){this.clear()}clear(){this.map=new WeakMap,this.count=0,this.recording=!0}stop(){this.recording=!1}check(h){const u=this.map.get(h);if(u)return u.length>1?u[0]||this.recording?u[1]:(u[0]=!0,a.FIRST):this.recording?(u.push(this.count++),u[1]):a.NEVER;if(!this.recording)throw new Error("New object detected when not recording");return this.map.set(h,[!1]),a.NEVER}}a.NEVER=-1,a.FIRST=-2,o.exports=a},9777:(o,a,l)=>{const h=l(8310),u=l(3737),c=l(7328),p=l(672),{MT:m,SYMS:f}=l(9452);class g extends h.Transform{constructor(_={}){const{separator:M=`
`,stream_errors:x=!1,tags:E,max_depth:A,preferWeb:y,encoding:k,...R}=_;super({...R,readableObjectMode:!1,writableObjectMode:!1}),this.float_bytes=-1,this.separator=M,this.stream_errors=x,this.parser=new u({tags:E,max_depth:A,preferWeb:y,encoding:k}),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.on("error",this._on_error.bind(this))}_transform(_,M,x){this.parser.write(_,M,x)}_flush(_){this.parser._flush(M=>this.stream_errors?(M&&this._on_error(M),_()):_(M))}static diagnose(_,M={},x=null){if(_==null)throw new TypeError("input required");({options:M,cb:x}=function(I,z){switch(typeof I){case"function":return{options:{},cb:I};case"string":return{options:{encoding:I},cb:z};case"object":return{options:I||{},cb:z};default:throw new TypeError("Unknown option type")}}(M,x));const{encoding:E="hex",...A}=M,y=new p,k=new g(A);let R=null;return typeof x=="function"?(k.on("end",()=>x(null,y.toString("utf8"))),k.on("error",x)):R=new Promise((I,z)=>{k.on("end",()=>I(y.toString("utf8"))),k.on("error",z)}),k.pipe(y),c.guessEncoding(_,E).pipe(k),R}_on_error(_){this.stream_errors?this.push(_.toString()):this.emit("error",_)}_on_more(_,M,x,E){_===m.SIMPLE_FLOAT&&(this.float_bytes={2:1,4:2,8:3}[M])}_fore(_,M){switch(_){case m.BYTE_STRING:case m.UTF8_STRING:case m.ARRAY:M>0&&this.push(", ");break;case m.MAP:M>0&&(M%2?this.push(": "):this.push(", "))}}_on_value(_,M,x){if(_===f.BREAK)return;this._fore(M,x);const E=this.float_bytes;this.float_bytes=-1,this.push(c.cborValueToString(_,E))}_on_start(_,M,x,E){switch(this._fore(x,E),_){case m.TAG:this.push(`${M}(`);break;case m.ARRAY:this.push("[");break;case m.MAP:this.push("{");break;case m.BYTE_STRING:case m.UTF8_STRING:this.push("(")}M===f.STREAM&&this.push("_ ")}_on_stop(_){switch(_){case m.TAG:this.push(")");break;case m.ARRAY:this.push("]");break;case m.MAP:this.push("}");break;case m.BYTE_STRING:case m.UTF8_STRING:this.push(")")}}_on_data(){this.push(this.separator)}}o.exports=g},9881:(o,a,l)=>{const h=l(893),u=l(9777),c=l(3737),p=l(2893),m=l(5059),f=l(3557),g=l(2903),w=l(207);o.exports={Commented:h,Diagnose:u,Decoder:c,Encoder:p,Simple:m,Tagged:f,Map:g,SharedValueEncoder:w,comment:h.comment,decodeAll:c.decodeAll,decodeFirst:c.decodeFirst,decodeAllSync:c.decodeAllSync,decodeFirstSync:c.decodeFirstSync,diagnose:u.diagnose,encode:p.encode,encodeCanonical:p.encodeCanonical,encodeOne:p.encodeOne,encodeAsync:p.encodeAsync,decode:c.decodeFirstSync,leveldb:{decode:c.decodeFirstSync,encode:p.encode,buffer:!0,name:"cbor"},reset(){p.reset(),f.reset()}}}},n={};function r(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return t[o](l,l.exports,r),l.exports}r.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return r.d(a,{a}),a},r.d=(o,a)=>{for(var l in a)r.o(a,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},r.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{r.r(s);var o=r(9881),a={};for(const l in o)l!=="default"&&(a[l]=()=>o[l]);r.d(s,a)})(),s})())})(Oh);var Lh=Oh.exports;const cp=Ji(Lh),ew=dc({__proto__:null,default:cp},[Lh]);var Dh={exports:{}};(function(i,e){(function(t,n){n()})(Ht,function(){function t(h,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,u,c){var p=new XMLHttpRequest;p.open("GET",h),p.responseType="blob",p.onload=function(){l(p.response,u,c)},p.onerror=function(){console.error("could not download file")},p.send()}function r(h){var u=new XMLHttpRequest;u.open("HEAD",h,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ht=="object"&&Ht.global===Ht?Ht:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,u,c){var p=o.URL||o.webkitURL,m=document.createElement("a");u=u||h.name||"download",m.download=u,m.rel="noopener",typeof h=="string"?(m.href=h,m.origin===location.origin?s(m):r(m.href)?n(h,u,c):s(m,m.target="_blank")):(m.href=p.createObjectURL(h),setTimeout(function(){p.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(h,u,c){if(u=u||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,c),u);else if(r(h))n(h,u,c);else{var p=document.createElement("a");p.href=h,p.target="_blank",setTimeout(function(){s(p)})}}:function(h,u,c,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof h=="string")return n(h,u,c);var m=h.type==="application/octet-stream",f=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||m&&f||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var x=w.result;x=g?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=x:location=x,p=null},w.readAsDataURL(h)}else{var _=o.URL||o.webkitURL,M=_.createObjectURL(h);p?p.location=M:location.href=M,p=null,setTimeout(function(){_.revokeObjectURL(M)},4e4)}});o.saveAs=l.saveAs=l,i.exports=l})})(Dh);var tw=Dh.exports;function Yo(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Nn=Yo();function Nh(i){Nn=i}var En={exec:()=>null};function Be(i,e=""){let t=typeof i=="string"?i:i.source,n={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(at.caret,"$1"),t=t.replace(r,o),n},getRegex:()=>new RegExp(t,e)};return n}var dp=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),at={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}>`)},pp=/^(?:[ \t]*(?:\n|$))+/,gp=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,mp=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Zi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,bp=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Xo=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,Ph=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Fh=Be(Ph).replace(/bull/g,Xo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),yp=Be(Ph).replace(/bull/g,Xo).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Jo=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,wp=/^[^\n]+/,Zo=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,vp=Be(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Zo).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),kp=Be(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Xo).getRegex(),ss="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Qo=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Sp=Be("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Qo).replace("tag",ss).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$h=Be(Jo).replace("hr",Zi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex(),xp=Be(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$h).getRegex(),el={blockquote:xp,code:gp,def:vp,fences:mp,heading:bp,hr:Zi,html:Sp,lheading:Fh,list:kp,newline:pp,paragraph:$h,table:En,text:wp},ta=Be("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Zi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex(),Ap={...el,lheading:yp,table:ta,paragraph:Be(Jo).replace("hr",Zi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ta).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ss).getRegex()},Ep={...el,html:Be(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Qo).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:En,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Be(Jo).replace("hr",Zi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Fh).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_p=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Tp=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Wh=/^( {2,}|\\)\n(?!\s*$)/,Cp=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,os=/[\p{P}\p{S}]/u,tl=/[\s\p{P}\p{S}]/u,Uh=/[^\s\p{P}\p{S}]/u,Rp=Be(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,tl).getRegex(),jh=/(?!~)[\p{P}\p{S}]/u,Mp=/(?!~)[\s\p{P}\p{S}]/u,Ip=/(?:[^\s\p{P}\p{S}]|~)/u,Hh=/(?![*_])[\p{P}\p{S}]/u,Bp=/(?![*_])[\s\p{P}\p{S}]/u,Op=/(?:[^\s\p{P}\p{S}]|[*_])/u,Lp=Be(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",dp?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Vh=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Dp=Be(Vh,"u").replace(/punct/g,os).getRegex(),Np=Be(Vh,"u").replace(/punct/g,jh).getRegex(),zh="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Pp=Be(zh,"gu").replace(/notPunctSpace/g,Uh).replace(/punctSpace/g,tl).replace(/punct/g,os).getRegex(),Fp=Be(zh,"gu").replace(/notPunctSpace/g,Ip).replace(/punctSpace/g,Mp).replace(/punct/g,jh).getRegex(),$p=Be("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Uh).replace(/punctSpace/g,tl).replace(/punct/g,os).getRegex(),Wp=Be(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,Hh).getRegex(),Up="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",jp=Be(Up,"gu").replace(/notPunctSpace/g,Op).replace(/punctSpace/g,Bp).replace(/punct/g,Hh).getRegex(),Hp=Be(/\\(punct)/,"gu").replace(/punct/g,os).getRegex(),Vp=Be(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zp=Be(Qo).replace("(?:-->|$)","-->").getRegex(),qp=Be("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zp).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),$r=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Gp=Be(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",$r).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qh=Be(/^!?\[(label)\]\[(ref)\]/).replace("label",$r).replace("ref",Zo).getRegex(),Gh=Be(/^!?\[(ref)\](?:\[\])?/).replace("ref",Zo).getRegex(),Kp=Be("reflink|nolink(?!\\()","g").replace("reflink",qh).replace("nolink",Gh).getRegex(),na=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,nl={_backpedal:En,anyPunctuation:Hp,autolink:Vp,blockSkip:Lp,br:Wh,code:Tp,del:En,delLDelim:En,delRDelim:En,emStrongLDelim:Dp,emStrongRDelimAst:Pp,emStrongRDelimUnd:$p,escape:_p,link:Gp,nolink:Gh,punctuation:Rp,reflink:qh,reflinkSearch:Kp,tag:qp,text:Cp,url:En},Yp={...nl,link:Be(/^!?\[(label)\]\((.*?)\)/).replace("label",$r).getRegex(),reflink:Be(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$r).getRegex()},Zs={...nl,emStrongRDelimAst:Fp,emStrongLDelim:Np,delLDelim:Wp,delRDelim:jp,url:Be(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",na).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Be(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",na).getRegex()},Xp={...Zs,br:Be(Wh).replace("{2,}","*").getRegex(),text:Be(Zs.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ar={normal:el,gfm:Ap,pedantic:Ep},di={normal:nl,gfm:Zs,breaks:Xp,pedantic:Yp},Jp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ia=i=>Jp[i];function en(i,e){if(e){if(at.escapeTest.test(i))return i.replace(at.escapeReplace,ia)}else if(at.escapeTestNoEncode.test(i))return i.replace(at.escapeReplaceNoEncode,ia);return i}function ra(i){try{i=encodeURI(i).replace(at.percentDecode,"%")}catch{return null}return i}function sa(i,e){let t=i.replace(at.findPipe,(s,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),n=t.split(at.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(at.slashPipe,"|");return n}function pi(i,e,t){let n=i.length;if(n===0)return"";let r=0;for(;r<n&&i.charAt(n-r-1)===e;)r++;return i.slice(0,n-r)}function Zp(i,e){if(i.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===e[0])t++;else if(i[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Qp(i,e=0){let t=e,n="";for(let r of i)if(r==="	"){let s=4-t%4;n+=" ".repeat(s),t+=s}else n+=r,t++;return n}function oa(i,e,t,n,r){let s=e.href,o=e.title||null,a=i[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:i[0].charAt(0)==="!"?"image":"link",raw:t,href:s,title:o,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function eg(i,e,t){let n=i.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(s=>{let o=s.match(t.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var Wr=class{options;rules;lexer;constructor(i){this.options=i||Nn}space(i){let e=this.rules.block.newline.exec(i);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(i){let e=this.rules.block.code.exec(i);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:pi(t,`
`)}}}fences(i){let e=this.rules.block.fences.exec(i);if(e){let t=e[0],n=eg(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(i){let e=this.rules.block.heading.exec(i);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=pi(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(i){let e=this.rules.block.hr.exec(i);if(e)return{type:"hr",raw:pi(e[0],`
`)}}blockquote(i){let e=this.rules.block.blockquote.exec(i);if(e){let t=pi(e[0],`
`).split(`
`),n="",r="",s=[];for(;t.length>0;){let o=!1,a=[],l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))a.push(t[l]),o=!0;else if(!o)a.push(t[l]);else break;t=t.slice(l);let h=a.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${h}`:h,r=r?`${r}
${u}`:u;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=c,t.length===0)break;let p=s.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let m=p,f=m.raw+`
`+t.join(`
`),g=this.blockquote(f);s[s.length-1]=g,n=n.substring(0,n.length-m.raw.length)+g.raw,r=r.substring(0,r.length-m.text.length)+g.text;break}else if(p?.type==="list"){let m=p,f=m.raw+`
`+t.join(`
`),g=this.list(f);s[s.length-1]=g,n=n.substring(0,n.length-p.raw.length)+g.raw,r=r.substring(0,r.length-m.raw.length)+g.raw,t=f.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:s,text:r}}}list(i){let e=this.rules.block.list.exec(i);if(e){let t=e[1].trim(),n=t.length>1,r={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");let s=this.rules.other.listItemRegex(t),o=!1;for(;i;){let l=!1,h="",u="";if(!(e=s.exec(i))||this.rules.block.hr.test(i))break;h=e[0],i=i.substring(h.length);let c=Qp(e[2].split(`
`,1)[0],e[1].length),p=i.split(`
`,1)[0],m=!c.trim(),f=0;if(this.options.pedantic?(f=2,u=c.trimStart()):m?f=e[1].length+1:(f=c.search(this.rules.other.nonSpaceChar),f=f>4?1:f,u=c.slice(f),f+=e[1].length),m&&this.rules.other.blankLine.test(p)&&(h+=p+`
`,i=i.substring(p.length+1),l=!0),!l){let g=this.rules.other.nextBulletRegex(f),w=this.rules.other.hrRegex(f),_=this.rules.other.fencesBeginRegex(f),M=this.rules.other.headingBeginRegex(f),x=this.rules.other.htmlBeginRegex(f),E=this.rules.other.blockquoteBeginRegex(f);for(;i;){let A=i.split(`
`,1)[0],y;if(p=A,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),y=p):y=p.replace(this.rules.other.tabCharGlobal,"    "),_.test(p)||M.test(p)||x.test(p)||E.test(p)||g.test(p)||w.test(p))break;if(y.search(this.rules.other.nonSpaceChar)>=f||!p.trim())u+=`
`+y.slice(f);else{if(m||c.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||_.test(c)||M.test(c)||w.test(c))break;u+=`
`+p}m=!p.trim(),h+=A+`
`,i=i.substring(A.length+1),c=y.slice(f)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(o=!0)),r.items.push({type:"list_item",raw:h,task:!!this.options.gfm&&this.rules.other.listIsTask.test(u),loose:!1,text:u,tokens:[]}),r.raw+=h}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let l of r.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let u=this.lexer.inlineQueue.length-1;u>=0;u--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[u].src)){this.lexer.inlineQueue[u].src=this.lexer.inlineQueue[u].src.replace(this.rules.other.listReplaceTask,"");break}}let h=this.rules.other.listTaskCheckbox.exec(l.raw);if(h){let u={type:"checkbox",raw:h[0]+" ",checked:h[0]!=="[ ]"};l.checked=u.checked,r.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=u.raw+l.tokens[0].raw,l.tokens[0].text=u.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(u)):l.tokens.unshift({type:"paragraph",raw:u.raw,text:u.raw,tokens:[u]}):l.tokens.unshift(u)}}if(!r.loose){let h=l.tokens.filter(c=>c.type==="space"),u=h.length>0&&h.some(c=>this.rules.other.anyLine.test(c.raw));r.loose=u}}if(r.loose)for(let l of r.items){l.loose=!0;for(let h of l.tokens)h.type==="text"&&(h.type="paragraph")}return r}}html(i){let e=this.rules.block.html.exec(i);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(i){let e=this.rules.block.def.exec(i);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(i){let e=this.rules.block.table.exec(i);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=sa(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let o of n)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<t.length;o++)s.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:s.align[o]});for(let o of r)s.rows.push(sa(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(i){let e=this.rules.block.lheading.exec(i);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(i){let e=this.rules.block.paragraph.exec(i);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(i){let e=this.rules.block.text.exec(i);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(i){let e=this.rules.inline.escape.exec(i);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(i){let e=this.rules.inline.tag.exec(i);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(i){let e=this.rules.inline.link.exec(i);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let s=pi(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{let s=Zp(e[2],"()");if(s===-2)return;if(s>-1){let o=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(n);s&&(n=s[1],r=s[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),oa(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(i,e){let t;if((t=this.rules.inline.reflink.exec(i))||(t=this.rules.inline.nolink.exec(i))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let s=t[0].charAt(0);return{type:"text",raw:s,text:s}}return oa(t,r,t[0],this.lexer,this.rules)}}emStrong(i,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(i);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,s,o,a=r,l=0,h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*i.length+r);(n=h.exec(e))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(o=[...s].length,n[3]||n[4]){a+=o;continue}else if((n[5]||n[6])&&r%3&&!((r+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let u=[...n[0]][0].length,c=i.slice(0,r+n.index+u+o);if(Math.min(r,o)%2){let m=c.slice(1,-1);return{type:"em",raw:c,text:m,tokens:this.lexer.inlineTokens(m)}}let p=c.slice(2,-2);return{type:"strong",raw:c,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(i){let e=this.rules.inline.code.exec(i);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(i){let e=this.rules.inline.br.exec(i);if(e)return{type:"br",raw:e[0]}}del(i,e,t=""){let n=this.rules.inline.delLDelim.exec(i);if(n&&(!n[1]||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,s,o,a=r,l=this.rules.inline.delRDelim;for(l.lastIndex=0,e=e.slice(-1*i.length+r);(n=l.exec(e))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s||(o=[...s].length,o!==r))continue;if(n[3]||n[4]){a+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a);let h=[...n[0]][0].length,u=i.slice(0,r+n.index+h+o),c=u.slice(r,-r);return{type:"del",raw:u,text:c,tokens:this.lexer.inlineTokens(c)}}}}autolink(i){let e=this.rules.inline.autolink.exec(i);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(i){let e;if(e=this.rules.inline.url.exec(i)){let t,n;if(e[2]==="@")t=e[0],n="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(i){let e=this.rules.inline.text.exec(i);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},It=class Qs{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nn,this.options.tokenizer=this.options.tokenizer||new Wr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:at,block:ar.normal,inline:di.normal};this.options.pedantic?(t.block=ar.pedantic,t.inline=di.pedantic):this.options.gfm&&(t.block=ar.gfm,this.options.breaks?t.inline=di.breaks:t.inline=di.gfm),this.tokenizer.rules=t}static get rules(){return{block:ar,inline:di}}static lex(e,t){return new Qs(t).lex(e)}static lexInline(e,t){return new Qs(t).inlineTokens(e)}lex(e){e=e.replace(at.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(at.tabCharGlobal,"    ").replace(at.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let o=t.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(h=>{l=h.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let o=t.at(-1);n&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),n=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)s=r[2]?r[2].length:0,n=n.slice(0,r.index+s)+"["+"a".repeat(r[0].length-s-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let o=!1,a="";for(;e;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let u=t.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,n,a)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e,n,a)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let h=e;if(this.options.extensions?.startInline){let u=1/0,c=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},c),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(h=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let u=t.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},Ur=class{options;parser;constructor(i){this.options=i||Nn}space(i){return""}code({text:i,lang:e,escaped:t}){let n=(e||"").match(at.notSpaceStart)?.[0],r=i.replace(at.endingNewline,"")+`
`;return n?'<pre><code class="language-'+en(n)+'">'+(t?r:en(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:en(r,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}def(i){return""}heading({tokens:i,depth:e}){return`<h${e}>${this.parser.parseInline(i)}</h${e}>
`}hr(i){return`<hr>
`}list(i){let e=i.ordered,t=i.start,n="";for(let o=0;o<i.items.length;o++){let a=i.items[o];n+=this.listitem(a)}let r=e?"ol":"ul",s=e&&t!==1?' start="'+t+'"':"";return"<"+r+s+`>
`+n+"</"+r+`>
`}listitem(i){return`<li>${this.parser.parse(i.tokens)}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let e="",t="";for(let r=0;r<i.header.length;r++)t+=this.tablecell(i.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<i.rows.length;r++){let s=i.rows[r];t="";for(let o=0;o<s.length;o++)t+=this.tablecell(s[o]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){let e=this.parser.parseInline(i.tokens),t=i.header?"th":"td";return(i.align?`<${t} align="${i.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${en(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t),r=ra(i);if(r===null)return n;i=r;let s='<a href="'+i+'"';return e&&(s+=' title="'+en(e)+'"'),s+=">"+n+"</a>",s}image({href:i,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=ra(i);if(r===null)return en(t);i=r;let s=`<img src="${i}" alt="${t}"`;return e&&(s+=` title="${en(e)}"`),s+=">",s}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:en(i.text)}},il=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}checkbox({raw:i}){return i}},Bt=class eo{options;renderer;textRenderer;constructor(e){this.options=e||Nn,this.options.renderer=this.options.renderer||new Ur,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new il}static parse(e,t){return new eo(t).parse(e)}static parseInline(e,t){return new eo(t).parseInline(e)}parse(e){let t="";for(let n=0;n<e.length;n++){let r=e[n];if(this.options.extensions?.renderers?.[r.type]){let o=r,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){t+=a||"";continue}}let s=r;switch(s.type){case"space":{t+=this.renderer.space(s);break}case"hr":{t+=this.renderer.hr(s);break}case"heading":{t+=this.renderer.heading(s);break}case"code":{t+=this.renderer.code(s);break}case"table":{t+=this.renderer.table(s);break}case"blockquote":{t+=this.renderer.blockquote(s);break}case"list":{t+=this.renderer.list(s);break}case"checkbox":{t+=this.renderer.checkbox(s);break}case"html":{t+=this.renderer.html(s);break}case"def":{t+=this.renderer.def(s);break}case"paragraph":{t+=this.renderer.paragraph(s);break}case"text":{t+=this.renderer.text(s);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return t}parseInline(e,t=this.renderer){let n="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){n+=a||"";continue}}let o=s;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"checkbox":{n+=t.checkbox(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}},Si=class{options;block;constructor(i){this.options=i||Nn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}emStrongMask(i){return i}provideLexer(){return this.block?It.lex:It.lexInline}provideParser(){return this.block?Bt.parse:Bt.parseInline}},tg=class{defaults=Yo();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Bt;Renderer=Ur;TextRenderer=il;Lexer=It;Tokenizer=Wr;Hooks=Si;constructor(...i){this.use(...i)}walkTokens(i,e){let t=[];for(let n of i)switch(t=t.concat(e.call(this,n)),n.type){case"table":{let r=n;for(let s of r.header)t=t.concat(this.walkTokens(s.tokens,e));for(let s of r.rows)for(let o of s)t=t.concat(this.walkTokens(o.tokens,e));break}case"list":{let r=n;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{let o=r[s].flat(1/0);t=t.concat(this.walkTokens(o,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...i){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let s=e.renderers[r.name];s?e.renderers[r.name]=function(...o){let a=r.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[r.level];s?s.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new Ur(this.defaults);for(let s in t.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=t.renderer[o],l=r[o];r[o]=(...h)=>{let u=a.apply(r,h);return u===!1&&(u=l.apply(r,h)),u||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new Wr(this.defaults);for(let s in t.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=t.tokenizer[o],l=r[o];r[o]=(...h)=>{let u=a.apply(r,h);return u===!1&&(u=l.apply(r,h)),u}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Si;for(let s in t.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=t.hooks[o],l=r[o];Si.passThroughHooks.has(s)?r[o]=h=>{if(this.defaults.async&&Si.passThroughHooksRespectAsync.has(s))return(async()=>{let c=await a.call(r,h);return l.call(r,c)})();let u=a.call(r,h);return l.call(r,u)}:r[o]=(...h)=>{if(this.defaults.async)return(async()=>{let c=await a.apply(r,h);return c===!1&&(c=await l.apply(r,h)),c})();let u=a.apply(r,h);return u===!1&&(u=l.apply(r,h)),u}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,s=t.walkTokens;n.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),r&&(a=a.concat(r.call(this,o))),a}}this.defaults={...this.defaults,...n}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,e){return It.lex(i,e??this.defaults)}parser(i,e){return Bt.parse(i,e??this.defaults)}parseMarkdown(i){return(e,t)=>{let n={...t},r={...this.defaults,...n},s=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=i),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(e):e,a=await(r.hooks?await r.hooks.provideLexer():i?It.lex:It.lexInline)(o,r),l=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(l,r.walkTokens));let h=await(r.hooks?await r.hooks.provideParser():i?Bt.parse:Bt.parseInline)(l,r);return r.hooks?await r.hooks.postprocess(h):h})().catch(s);try{r.hooks&&(e=r.hooks.preprocess(e));let o=(r.hooks?r.hooks.provideLexer():i?It.lex:It.lexInline)(e,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():i?Bt.parse:Bt.parseInline)(o,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(o){return s(o)}}}onError(i,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,i){let n="<p>An error occurred:</p><pre>"+en(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},Mn=new tg;function Ne(i,e){return Mn.parse(i,e)}Ne.options=Ne.setOptions=function(i){return Mn.setOptions(i),Ne.defaults=Mn.defaults,Nh(Ne.defaults),Ne};Ne.getDefaults=Yo;Ne.defaults=Nn;Ne.use=function(...i){return Mn.use(...i),Ne.defaults=Mn.defaults,Nh(Ne.defaults),Ne};Ne.walkTokens=function(i,e){return Mn.walkTokens(i,e)};Ne.parseInline=Mn.parseInline;Ne.Parser=Bt;Ne.parser=Bt.parse;Ne.Renderer=Ur;Ne.TextRenderer=il;Ne.Lexer=It;Ne.lexer=It.lex;Ne.Tokenizer=Wr;Ne.Hooks=Si;Ne.parse=Ne;Ne.options;Ne.setOptions;Ne.use;Ne.walkTokens;Ne.parseInline;Bt.parse;It.lex;let to=[],Kh=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?Kh:to).push(t=t+i[e])})();function ng(i){if(i<768)return!1;for(let e=0,t=to.length;;){let n=e+t>>1;if(i<to[n])t=n;else if(i>=Kh[n])e=n+1;else return!0;if(e==t)return!1}}function la(i){return i>=127462&&i<=127487}const aa=8205;function ig(i,e,t=!0,n=!0){return(t?Yh:rg)(i,e,n)}function Yh(i,e,t){if(e==i.length)return e;e&&Xh(i.charCodeAt(e))&&Jh(i.charCodeAt(e-1))&&e--;let n=Cs(i,e);for(e+=ha(n);e<i.length;){let r=Cs(i,e);if(n==aa||r==aa||t&&ng(r))e+=ha(r),n=r;else if(la(r)){let s=0,o=e-2;for(;o>=0&&la(Cs(i,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function rg(i,e,t){for(;e>0;){let n=Yh(i,e-2,t);if(n<e)return n;e--}return 0}function Cs(i,e){let t=i.charCodeAt(e);if(!Jh(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return Xh(n)?(t-55296<<10)+(n-56320)+65536:t}function Xh(i){return i>=56320&&i<57344}function Jh(i){return i>=55296&&i<56320}function ha(i){return i<65536?1:2}class Le{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Zn(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Vt.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Zn(this,e,t);let n=[];return this.decompose(e,t,n,0),Vt.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Ri(this),s=new Ri(e);for(let o=t,a=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=n)return!0}}iter(e=1){return new Ri(this,e)}iterRange(e,t=this.length){return new Zh(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Qh(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Le.empty:e.length<=32?new Ve(e):Vt.from(Ve.split(e,[]))}}class Ve extends Le{constructor(e,t=sg(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((t?n:a)>=e)return new eu(r,a,n,o);r=a+1,n++}}decompose(e,t,n,r){let s=e<=0&&t>=this.length?this:new Ve(ua(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=n.pop(),a=Rr(s.text,o.text.slice(),0,s.length);if(a.length<=32)n.push(new Ve(a,o.length+s.length));else{let l=a.length>>1;n.push(new Ve(a.slice(0,l)),new Ve(a.slice(l)))}}else n.push(s)}replace(e,t,n){if(!(n instanceof Ve))return super.replace(e,t,n);[e,t]=Zn(this,e,t);let r=Rr(this.text,Rr(n.text,ua(this.text,0,e)),t),s=this.length+n.length-(t-e);return r.length<=32?new Ve(r,s):Vt.from(Ve.split(r,[]),s)}sliceString(e,t=this.length,n=`
`){[e,t]=Zn(this,e,t);let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=n),e<l&&t>s&&(r+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let s of e)n.push(s),r+=s.length+1,n.length==32&&(t.push(new Ve(n,r)),n=[],r=-1);return r>-1&&t.push(new Ve(n,r)),t}}class Vt extends Le{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=n+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,n,r);r=a+1,n=l+1}}decompose(e,t,n,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let h=r&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!h?n.push(a):a.decompose(e-o,t-o,n,h)}o=l+1}}replace(e,t,n){if([e,t]=Zn(this,e,t),n.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,n),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let u=this.children.slice();return u[r]=l,new Vt(u,this.length-(t-e)+n.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=Zn(this,e,t);let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=n),e<l&&t>o&&(r+=a.sliceString(e-o,t-o,n)),o=l+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Vt))return 0;let n=0,[r,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==a)return n;let l=this.children[r],h=e.children[s];if(l!=h)return n+l.scanIdentical(h,t);n+=l.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let m of e)n+=m.lines;if(n<32){let m=[];for(let f of e)f.flatten(m);return new Ve(m,t)}let r=Math.max(32,n>>5),s=r<<1,o=r>>1,a=[],l=0,h=-1,u=[];function c(m){let f;if(m.lines>s&&m instanceof Vt)for(let g of m.children)c(g);else m.lines>o&&(l>o||!l)?(p(),a.push(m)):m instanceof Ve&&l&&(f=u[u.length-1])instanceof Ve&&m.lines+f.lines<=32?(l+=m.lines,h+=m.length+1,u[u.length-1]=new Ve(f.text.concat(m.text),f.length+1+m.length)):(l+m.lines>r&&p(),l+=m.lines,h+=m.length+1,u.push(m))}function p(){l!=0&&(a.push(u.length==1?u[0]:Vt.from(u,h)),h=-1,l=u.length=0)}for(let m of e)c(m);return p(),a.length==1?a[0]:new Vt(a,t)}}Le.empty=new Ve([""],0);function sg(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Rr(i,e,t=0,n=1e9){for(let r=0,s=0,o=!0;s<i.length&&r<=n;s++){let a=i[s],l=r+a.length;l>=t&&(l>n&&(a=a.slice(0,n-r)),r<t&&(a=a.slice(t-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function ua(i,e,t){return Rr(i,[""],e,t)}class Ri{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ve?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],s=this.offsets[n],o=s>>1,a=r instanceof Ve?r.text.length:r.children.length;if(o==(t>0?a:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ve){let l=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Ve?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Zh{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Ri(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Qh{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=function(){return this.iter()},Ri.prototype[Symbol.iterator]=Zh.prototype[Symbol.iterator]=Qh.prototype[Symbol.iterator]=function(){return this});class eu{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function Zn(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function bt(i,e,t=!0,n=!0){return ig(i,e,t,n)}function og(i){return i>=56320&&i<57344}function lg(i){return i>=55296&&i<56320}function rl(i,e){let t=i.charCodeAt(e);if(!lg(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return og(n)?(t-55296<<10)+(n-56320)+65536:t}function ag(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function tu(i){return i<65536?1:2}const no=/\r\n?|\n/;var lt=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(lt||(lt={}));class Xt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,s),r+=s):r+=o,n+=s}}iterChangedRanges(e,t=!1){io(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Xt(e)}composeDesc(e){return this.empty?e:e.empty?this:nu(this,e)}mapDesc(e,t=!1){return e.empty?this:ro(this,e,t)}mapPos(e,t=-1,n=lt.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],h=r+a;if(l<0){if(h>e)return s+(e-r);s+=a}else{if(n!=lt.Simple&&h>=e&&(n==lt.TrackDel&&r<e&&h>e||n==lt.TrackBefore&&r<e||n==lt.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!a)return e==r||t<0?s:s+l;s+=l}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let s=this.sections[n++],o=this.sections[n++],a=r+s;if(o>=0&&r<=t&&a>=e)return r<e&&a>t?"cover":!0;r=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Xt(e)}static create(e){return new Xt(e)}}class Ke extends Xt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return io(this,(t,n,r,s,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return ro(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],a=t[r+1];if(a>=0){t[r]=a,t[r+1]=o;let l=r>>1;for(;n.length<l;)n.push(Le.empty);n.push(o?e.slice(s,s+o):Le.empty)}s+=o}return new Ke(t,n)}compose(e){return this.empty?e:e.empty?this:nu(this,e,!0)}map(e,t=!1){return e.empty?this:ro(this,e,t,!0)}iterChanges(e,t=!1){io(this,e,t)}get desc(){return Xt.create(this.sections)}filter(e){let t=[],n=[],r=[],s=new $i(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);rt(r,u,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;rt(t,u,c),c>0&&cn(n,t,s.text),s.forward(u),a+=u}let h=e[o++];for(;a<h;){if(s.done)break e;let u=Math.min(s.len,h-a);rt(t,u,-1),rt(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Ke(t,n),filtered:Xt.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<t&&rt(r,t-o,-1);let c=new Ke(r,s);a=a?a.compose(c.map(a)):c,r=[],s=[],o=0}function h(u){if(Array.isArray(u))for(let c of u)h(c);else if(u instanceof Ke){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:c,to:p=c,insert:m}=u;if(c>p||c<0||p>t)throw new RangeError(`Invalid change range ${c} to ${p} (in doc of length ${t})`);let f=m?typeof m=="string"?Le.of(m.split(n||no)):m:Le.empty,g=f.length;if(c==p&&g==0)return;c<o&&l(),c>o&&rt(r,c-o,-1),rt(r,p-c,g),cn(s,r,f),o=p}}return h(e),l(!a),a}static empty(e){return new Ke(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;n.length<r;)n.push(Le.empty);n[r]=Le.of(s.slice(1)),t.push(s[0],n[r].length)}}}return new Ke(t,n)}static createSet(e,t){return new Ke(e,t)}}function rt(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:r>=0&&e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function cn(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(Le.empty);i.push(t)}}function io(i,e,t){let n=i.inserted;for(let r=0,s=0,o=0;o<i.sections.length;){let a=i.sections[o++],l=i.sections[o++];if(l<0)r+=a,s+=a;else{let h=r,u=s,c=Le.empty;for(;h+=a,u+=l,l&&n&&(c=c.append(n[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)a=i.sections[o++],l=i.sections[o++];e(r,h,s,u,c),r=h,s=u}}}function ro(i,e,t,n=!1){let r=[],s=n?[]:null,o=new $i(i),a=new $i(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);rt(r,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let h=a.len;for(rt(r,a.ins,-1);h;){let u=Math.min(o.len,h);o.ins>=0&&l<o.i&&o.len<=u&&(rt(r,0,o.ins),s&&cn(s,r,o.text),l=o.i),o.forward(u),h-=u}a.next()}else if(o.ins>=0){let h=0,u=o.len;for(;u;)if(a.ins==-1){let c=Math.min(u,a.len);h+=c,u-=c,a.forward(c)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;rt(r,h,l<o.i?o.ins:0),s&&l<o.i&&cn(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Ke.createSet(r,s):Xt.create(r);throw new Error("Mismatched change set lengths")}}}function nu(i,e,t=!1){let n=[],r=t?[]:null,s=new $i(i),o=new $i(e);for(let a=!1;;){if(s.done&&o.done)return r?Ke.createSet(n,r):Xt.create(n);if(s.ins==0)rt(n,s.len,0,a),s.next();else if(o.len==0&&!o.done)rt(n,0,o.ins,a),r&&cn(r,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),h=n.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;rt(n,l,u,a),r&&u&&cn(r,n,o.text)}else o.ins==-1?(rt(n,s.off?0:s.len,l,a),r&&cn(r,n,s.textBit(l))):(rt(n,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&cn(r,n,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>h),s.forward2(l),o.forward(l)}}}}class $i{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Le.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Le.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class dn{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new dn(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return be.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return be.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return be.range(e.anchor,e.head)}static create(e,t,n){return new dn(e,t,n)}}class be{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:be.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new be([this.main],0)}addRange(e,t=!0){return be.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,be.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new be(e.ranges.map(t=>dn.fromJSON(t)),e.main)}static single(e,t=e){return new be([be.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=n:s.from<n)return be.normalized(e.slice(),t);n=s.to}return new be(e,t)}static cursor(e,t=0,n,r){return dn.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(r??16777215)<<6)}static range(e,t,n,r){let s=(n??16777215)<<6|(r==null?7:Math.min(6,r));return t<e?dn.create(t,e,48|s):dn.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let n=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?be.range(l,a):be.range(a,l))}}return new be(e,t)}}function iu(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let sl=0;class we{constructor(e,t,n,r,s){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=sl++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new we(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:ol),!!e.static,e.enables)}of(e){return new Mr([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Mr(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function ol(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Mr{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=sl++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,h=!1,u=[];for(let c of this.dependencies)c=="doc"?l=!0:c=="selection"?h=!0:((t=e[c.id])!==null&&t!==void 0?t:1)&1||u.push(e[c.id]);return{create(c){return c.values[o]=n(c),1},update(c,p){if(l&&p.docChanged||h&&(p.docChanged||p.selection)||so(c,u)){let m=n(c);if(a?!fa(m,c.values[o],r):!r(m,c.values[o]))return c.values[o]=m,1}return 0},reconfigure:(c,p)=>{let m,f=p.config.address[s];if(f!=null){let g=Hr(p,f);if(this.dependencies.every(w=>w instanceof we?p.facet(w)===c.facet(w):w instanceof vt?p.field(w,!1)==c.field(w,!1):!0)||(a?fa(m=n(c),g,r):r(m=n(c),g)))return c.values[o]=g,0}else m=n(c);return c.values[o]=m,1}}}}function fa(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function so(i,e){let t=!1;for(let n of e)Mi(i,n)&1&&(t=!0);return t}function hg(i,e,t){let n=t.map(l=>i[l.id]),r=t.map(l=>l.type),s=n.filter(l=>!(l&1)),o=i[e.id]>>1;function a(l){let h=[];for(let u=0;u<n.length;u++){let c=Hr(l,n[u]);if(r[u]==2)for(let p of c)h.push(p);else h.push(c)}return e.combine(h)}return{create(l){for(let h of n)Mi(l,h);return l.values[o]=a(l),1},update(l,h){if(!so(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,h){let u=so(l,n),c=h.config.facets[e.id],p=h.facet(e);if(c&&!u&&ol(t,c))return l.values[o]=p,0;let m=a(l);return e.compare(m,p)?(l.values[o]=p,0):(l.values[o]=m,1)}}}const hr=we.define({static:!0});class vt{constructor(e,t,n,r,s){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new vt(sl++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(hr).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let s=n.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(n.values[t]=o,1)},reconfigure:(n,r)=>{let s=n.facet(hr),o=r.facet(hr),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[t]=a.create(n),1):r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,hr.of({field:this,create:e})]}get extension(){return this}}const _n={lowest:4,low:3,default:2,high:1,highest:0};function gi(i){return e=>new ru(e,i)}const oi={highest:gi(_n.highest),high:gi(_n.high),default:gi(_n.default),low:gi(_n.low),lowest:gi(_n.lowest)};class ru{constructor(e,t){this.inner=e,this.prec=t}}class Qi{of(e){return new oo(this,e)}reconfigure(e){return Qi.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class oo{constructor(e,t){this.compartment=e,this.inner=t}}class jr{constructor(e,t,n,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],s=Object.create(null),o=new Map;for(let p of ug(e,t,o))p instanceof vt?r.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],h=[];for(let p of r)a[p.id]=h.length<<1,h.push(m=>p.slot(m));let u=n?.config.facets;for(let p in s){let m=s[p],f=m[0].facet,g=u&&u[p]||[];if(m.every(w=>w.type==0))if(a[f.id]=l.length<<1|1,ol(g,m))l.push(n.facet(f));else{let w=f.combine(m.map(_=>_.value));l.push(n&&f.compare(w,n.facet(f))?n.facet(f):w)}else{for(let w of m)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=h.length<<1,h.push(_=>w.dynamicSlot(_)));a[f.id]=h.length<<1,h.push(w=>hg(w,f,m))}}let c=h.map(p=>p(a));return new jr(e,o,c,a,l,s)}}function ug(i,e,t){let n=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let h=n[l].indexOf(o);h>-1&&n[l].splice(h,1),o instanceof oo&&t.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof oo){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,a)}else if(o instanceof ru)s(o.inner,o.prec);else if(o instanceof vt)n[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Mr)n[a].push(o),o.facet.extensions&&s(o.facet.extensions,_n.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(i,_n.default),n.reduce((o,a)=>o.concat(a))}function Mi(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function Hr(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const su=we.define(),lo=we.define({combine:i=>i.some(e=>e),static:!0}),ou=we.define({combine:i=>i.length?i[0]:void 0,static:!0}),lu=we.define(),au=we.define(),hu=we.define(),uu=we.define({combine:i=>i.length?i[0]:!1});class Pn{constructor(e,t){this.type=e,this.value=t}static define(){return new fu}}class fu{of(e){return new Pn(this,e)}}class cu{constructor(e){this.map=e}of(e){return new De(this,e)}}class De{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new De(this.type,t)}is(e){return this.type==e}static define(e={}){return new cu(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let s=r.map(t);s&&n.push(s)}return n}}De.reconfigure=De.define();De.appendConfig=De.define();class tt{constructor(e,t,n,r,s,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&iu(n,t.newLength),s.some(a=>a.type==tt.time)||(this.annotations=s.concat(tt.time.of(Date.now())))}static create(e,t,n,r,s,o){return new tt(e,t,n,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(tt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}tt.time=Pn.define();tt.userEvent=Pn.define();tt.addToHistory=Pn.define();tt.remote=Pn.define();function fg(i,e){let t=[];for(let n=0,r=0;;){let s,o;if(n<i.length&&(r==e.length||e[r]>=i[n]))s=i[n++],o=i[n++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function du(i,e,t){var n;let r,s,o;return t?(r=e.changes,s=Ke.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:De.mapEffects(i.effects,r).concat(De.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function ao(i,e,t){let n=e.selection,r=qn(e.annotations);return e.userEvent&&(r=r.concat(tt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ke?e.changes:Ke.of(e.changes||[],t,i.facet(ou)),selection:n&&(n instanceof be?n:be.single(n.anchor,n.head)),effects:qn(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function pu(i,e,t){let n=ao(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;n=du(n,ao(i,e[s],o?n.changes.newLength:i.doc.length),o)}let r=tt.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return dg(t?cg(r):r)}function cg(i){let e=i.startState,t=!0;for(let r of e.facet(lu)){let s=r(i);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:fg(t,s))}if(t!==!0){let r,s;if(t===!1)s=i.changes.invertedDesc,r=Ke.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}i=tt.create(e,r,i.selection&&i.selection.map(s),De.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let n=e.facet(au);for(let r=n.length-1;r>=0;r--){let s=n[r](i);s instanceof tt?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof tt?i=s[0]:i=pu(e,qn(s),!1)}return i}function dg(i){let e=i.startState,t=e.facet(hu),n=i;for(let r=t.length-1;r>=0;r--){let s=t[r](i);s&&Object.keys(s).length&&(n=du(n,ao(e,s,i.changes.newLength),!0))}return n==i?i:tt.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const pg=[];function qn(i){return i==null?pg:Array.isArray(i)?i:[i]}var qt=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(qt||(qt={}));const gg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ho;try{ho=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function mg(i){if(ho)return ho.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||gg.test(t)))return!0}return!1}function bg(i){return e=>{if(!/\S/.test(e))return qt.Space;if(mg(e))return qt.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return qt.Word;return qt.Other}}class Oe{constructor(e,t,n,r,s,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Mi(this,a<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Mi(this,n),Hr(this,n)}update(...e){return pu(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let a of e.effects)a.is(Qi.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,h)=>r.set(h,l)),t=null),r.set(a.value.compartment,a.value.extension)):a.is(De.reconfigure)?(t=null,n=a.value):a.is(De.appendConfig)&&(t=null,n=qn(n).concat(a.value));let s;t?s=e.startState.values.slice():(t=jr.resolve(n,r,this),s=new Oe(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values);let o=e.startState.facet(lo)?e.newSelection:e.newSelection.asSingle();new Oe(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:be.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),s=[n.range],o=qn(n.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),h=this.changes(l.changes),u=h.map(r);for(let p=0;p<a;p++)s[p]=s[p].map(u);let c=r.mapDesc(h,!0);s.push(l.range.map(c)),r=r.compose(u),o=De.mapEffects(o,u).concat(De.mapEffects(qn(l.effects),c))}return{changes:r,selection:be.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ke?e:Ke.of(e,this.doc.length,this.facet(Oe.lineSeparator))}toText(e){return Le.of(e.split(this.facet(Oe.lineSeparator)||no))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Mi(this,t),Hr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof vt&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let o=n[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Oe.create({doc:e.doc,selection:be.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=jr.resolve(e.extensions||[],new Map),n=e.doc instanceof Le?e.doc:Le.of((e.doc||"").split(t.staticFacet(Oe.lineSeparator)||no)),r=e.selection?e.selection instanceof be?e.selection:be.single(e.selection.anchor,e.selection.head):be.single(0);return iu(r,n.length),t.staticFacet(lo)||(r=r.asSingle()),new Oe(t,n,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Oe.tabSize)}get lineBreak(){return this.facet(Oe.lineSeparator)||`
`}get readOnly(){return this.facet(uu)}phrase(e,...t){for(let n of this.facet(Oe.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?n:t[s-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let s of this.facet(su))for(let o of s(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return bg(t.length?t[0]:"")}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=bt(t,o,!1);if(s(t.slice(l,o))!=qt.Word)break;o=l}for(;a<r;){let l=bt(t,a);if(s(t.slice(a,l))!=qt.Word)break;a=l}return o==a?null:be.range(o+n,a+n)}}Oe.allowMultipleSelections=lo;Oe.tabSize=we.define({combine:i=>i.length?i[0]:4});Oe.lineSeparator=ou;Oe.readOnly=uu;Oe.phrases=we.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});Oe.languageData=su;Oe.changeFilter=lu;Oe.transactionFilter=au;Oe.transactionExtender=hu;Qi.reconfigure=De.define();function li(i,e,t={}){let n={};for(let r of i)for(let s of Object.keys(r)){let o=r[s],a=n[s];if(a===void 0)n[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))n[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class mn{eq(e){return this==e}range(e,t=e){return Vr.create(e,t,this)}}mn.prototype.startSide=mn.prototype.endSide=0;mn.prototype.point=!1;mn.prototype.mapMode=lt.TrackDel;function ll(i,e){return i==e||i.constructor==e.constructor&&i.eq(e)}let Vr=class gu{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new gu(e,t,n)}};function uo(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class al{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let s=n?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,h=s[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return h>=0?o:a;h>=0?a=l:o=l+1}}between(e,t,n,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let n=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],u=this.from[l]+e,c=this.to[l]+e,p,m;if(u==c){let f=t.mapPos(u,h.startSide,h.mapMode);if(f==null||(p=m=f,h.startSide!=h.endSide&&(m=t.mapPos(u,h.endSide),m<p)))continue}else if(p=t.mapPos(u,h.startSide),m=t.mapPos(c,h.endSide),p>m||p==m&&h.startSide>0&&h.endSide<=0)continue;(m-p||h.endSide-h.startSide)<0||(o<0&&(o=p),h.point&&(a=Math.max(a,m-p)),n.push(h),r.push(p-o),s.push(m-o))}return{mapped:n.length?new al(r,s,n,a):null,pos:o}}}class Re{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Re(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(uo)),this.isEmpty)return t.length?Re.of(t):this;let a=new mu(this,null,-1).goto(0),l=0,h=[],u=new rn;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let c=t[l++];u.addInner(c.from,c.to,c.value)||h.push(c)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||h.push(Vr.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!h.length?Re.empty:this.nextLayer.update({add:h,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],h=e.touchesRange(a,a+l.length);if(h===!1)r=Math.max(r,l.maxPoint),t.push(l),n.push(e.mapPos(a));else if(h===!0){let{mapped:u,pos:c}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),t.push(u),n.push(c))}}let s=this.nextLayer.map(e);return t.length==0?s:new Re(n,t,s||Re.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Wi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Wi.from(e).goto(t)}static compare(e,t,n,r,s=-1){let o=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),l=ca(o,a,n),h=new mi(o,l,s),u=new mi(a,l,s);n.iterGaps((c,p,m)=>da(h,c,u,p,m,r)),n.empty&&n.length==0&&da(h,0,u,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=ca(s,o),l=new mi(s,a,0).goto(n),h=new mi(o,a,0).goto(n);for(;;){if(l.to!=h.to||!fo(l.active,h.active)||l.point&&(!h.point||!ll(l.point,h.point)))return!1;if(l.to>r)return!0;l.next(),h.next()}}static spans(e,t,n,r,s=-1){let o=new mi(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let h=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),c=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,h,o.point,u,c,o.pointRank),l=Math.min(o.openEnd(h),u.length)}else h>a&&(r.span(a,h,o.active,l),l=o.openEnd(h));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,t=!1){let n=new rn;for(let r of e instanceof Vr?[e]:t?yg(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Re.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Re.empty;r=r.nextLayer)t=new Re(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Re.empty=new Re([],[],null,-1);function yg(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(uo(e,n)>0)return i.slice().sort(uo);e=n}return i}Re.empty.nextLayer=Re.empty;class rn{finishChunk(e){this.chunks.push(new al(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new rn)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Re.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Re.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ca(i,e,t){let n=new Map;for(let s of i)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=n.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&r.add(s.chunk[o])}return r}class mu{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Wi{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new mu(o,t,n,s));return r.length==1?r[0]:new Wi(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Rs(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Rs(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Rs(this.heap,0)}}}function Rs(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class mi{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Wi.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ur(this.active,e),ur(this.activeTo,e),ur(this.activeRank,e),this.minActive=pa(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||r-this.activeTo[t])>0;)t++;fr(this.active,t,n),fr(this.activeTo,t,r),fr(this.activeRank,t,s),e&&fr(e,t,this.cursor.from),this.minActive=pa(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&ur(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function da(i,e,t,n,r,s){i.goto(e),t.goto(n);let o=n+r,a=n,l=n-e,h=!!s.boundChange;for(let u=!1;;){let c=i.to+l-t.to,p=c||i.endSide-t.endSide,m=p<0?i.to+l:t.to,f=Math.min(m,o);if(i.point||t.point?(i.point&&t.point&&ll(i.point,t.point)&&fo(i.activeForPoint(i.to),t.activeForPoint(t.to))||s.comparePoint(a,f,i.point,t.point),u=!1):(u&&s.boundChange(a),f>a&&!fo(i.active,t.active)&&s.compareRange(a,f,i.active,t.active),h&&f<o&&(c||i.openEnd(m)!=t.openEnd(m))&&(u=!0)),m>o)break;a=m,p<=0&&i.next(),p>=0&&t.next()}}function fo(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!ll(i[t],e[t]))return!1;return!0}function ur(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function fr(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function pa(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function ls(i,e,t=i.length){let n=0;for(let r=0;r<t&&r<i.length;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=bt(i,r));return n}function zr(i,e,t,n){for(let r=0,s=0;;){if(s>=e)return r;if(r==i.length)break;s+=i.charCodeAt(r)==9?t-s%t:1,r=bt(i,r)}return n===!0?-1:i.length}const nw=Object.freeze(Object.defineProperty({__proto__:null,Annotation:Pn,AnnotationType:fu,ChangeDesc:Xt,ChangeSet:Ke,get CharCategory(){return qt},Compartment:Qi,EditorSelection:be,EditorState:Oe,Facet:we,Line:eu,get MapMode(){return lt},Prec:oi,Range:Vr,RangeSet:Re,RangeSetBuilder:rn,RangeValue:mn,SelectionRange:dn,StateEffect:De,StateEffectType:cu,StateField:vt,Text:Le,Transaction:tt,codePointAt:rl,codePointSize:tu,combineConfig:li,countColumn:ls,findClusterBreak:bt,findColumn:zr,fromCodePoint:ag},Symbol.toStringTag,{value:"Module"})),co="Í¼",ga=typeof Symbol>"u"?"__"+co:Symbol.for(co),po=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class bn{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,h){let u=[],c=/^@(\w+)\b/.exec(o[0]),p=c&&c[1]=="keyframes";if(c&&a==null)return l.push(o[0]+";");for(let m in a){let f=a[m];if(/&/.test(m))s(m.split(/,\s*/).map(g=>o.map(w=>g.replace(/&/,w))).reduce((g,w)=>g.concat(w)),f,l);else if(f&&typeof f=="object"){if(!c)throw new RangeError("The value of a property ("+m+") should be a primitive value.");s(r(m),f,u,p)}else f!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+f+";")}(u.length||p)&&l.push((n&&!c&&!h?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ma[ga]||1;return ma[ga]=e+1,co+e.toString(36)}static mount(e,t,n){let r=e[po],s=n&&n.nonce;r?s&&r.setNonce(s):r=new wg(e,s),r.mount(Array.isArray(t)?t:[t],e)}}let ba=new Map;class wg{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=ba.get(n);if(s)return e[po]=s;this.sheet=new r.CSSStyleSheet,ba.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[po]=this}mount(e,t){let n=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),n)for(let h=0;h<a.rules.length;h++)n.insertRule(a.rules[h],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var yn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ui={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vg=typeof navigator<"u"&&/Mac/.test(navigator.platform),kg=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qe=0;Qe<10;Qe++)yn[48+Qe]=yn[96+Qe]=String(Qe);for(var Qe=1;Qe<=24;Qe++)yn[Qe+111]="F"+Qe;for(var Qe=65;Qe<=90;Qe++)yn[Qe]=String.fromCharCode(Qe+32),Ui[Qe]=String.fromCharCode(Qe);for(var Ms in yn)Ui.hasOwnProperty(Ms)||(Ui[Ms]=yn[Ms]);function Sg(i){var e=vg&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||kg&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Ui:yn)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Un(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)bu(i,arguments[e]);return i}function bu(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)bu(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}let ot=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},go=typeof document<"u"?document:{documentElement:{style:{}}};const mo=/Edge\/(\d+)/.exec(ot.userAgent),yu=/MSIE \d/.test(ot.userAgent),bo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),as=!!(yu||bo||mo),ya=!as&&/gecko\/(\d+)/i.test(ot.userAgent),Is=!as&&/Chrome\/(\d+)/.exec(ot.userAgent),xg="webkitFontSmoothing"in go.documentElement.style,yo=!as&&/Apple Computer/.test(ot.vendor),wa=yo&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2);var ge={mac:wa||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:as,ie_version:yu?go.documentMode||6:bo?+bo[1]:mo?+mo[1]:0,gecko:ya,gecko_version:ya?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!Is,chrome_version:Is?+Is[1]:0,ios:wa,android:/Android\b/.test(ot.userAgent),webkit_version:xg?+(/\bAppleWebKit\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,safari:yo,safari_version:yo?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ot.userAgent)||[0,0])[1]:0,tabSize:go.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function hl(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const qr=Object.create(null);function ul(i,e,t){if(i==e)return!0;i||(i=qr),e||(e=qr);let n=Object.keys(i),r=Object.keys(e);if(n.length-0!=r.length-0)return!1;for(let s of n)if(s!=t&&(r.indexOf(s)==-1||i[s]!==e[s]))return!1;return!0}function Ag(i,e){for(let t=i.attributes.length-1;t>=0;t--){let n=i.attributes[t].name;e[n]==null&&i.removeAttribute(n)}for(let t in e){let n=e[t];t=="style"?i.style.cssText=n:i.getAttribute(t)!=n&&i.setAttribute(t,n)}}function va(i,e,t){let n=!1;if(e)for(let r in e)t&&r in t||(n=!0,r=="style"?i.style.cssText="":i.removeAttribute(r));if(t)for(let r in t)e&&e[r]==t[r]||(n=!0,r=="style"?i.style.cssText=t[r]:i.setAttribute(r,t[r]));return n}function Eg(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}class Zt{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Xe=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Xe||(Xe={}));class Te extends mn{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new er(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new In(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:s,end:o}=wu(e,t);n=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new In(e,n,r,t,e.widget||null,!0)}static line(e){return new tr(e)}static set(e,t=!1){return Re.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Te.none=Re.empty;class er extends Te{constructor(e){let{start:t,end:n}=wu(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?hl(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||qr}eq(e){return this==e||e instanceof er&&this.tagName==e.tagName&&ul(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}er.prototype.point=!1;class tr extends Te{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof tr&&this.spec.class==e.spec.class&&ul(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}tr.prototype.mapMode=lt.TrackBefore;tr.prototype.point=!0;class In extends Te{constructor(e,t,n,r,s,o){super(t,n,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?lt.TrackBefore:lt.TrackAfter:lt.TrackDel}get type(){return this.startSide!=this.endSide?Xe.WidgetRange:this.startSide<=0?Xe.WidgetBefore:Xe.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof In&&_g(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}In.prototype.point=!0;function wu(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function _g(i,e){return i==e||!!(i&&e&&i.compare(e))}function Gn(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class Qn extends mn{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Qn&&this.tagName==e.tagName&&ul(this.attributes,e.attributes)}static create(e){return new Qn(e.tagName,e.attributes||qr)}static set(e,t=!1){return Re.of(e,t)}}Qn.prototype.startSide=Qn.prototype.endSide=-1;function ei(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function wo(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function Ii(i,e){if(!e.anchorNode)return!1;try{return wo(i,e.anchorNode)}catch{return!1}}function Bi(i){return i.nodeType==3?Hi(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Oi(i,e,t,n){return t?ka(i,e,t,n,-1)||ka(i,e,t,n,1):!1}function wn(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function Gr(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function ka(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:sn(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=wn(i)+(r<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?sn(i):0}else return!1}}function sn(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function ji(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function Tg(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function vu(i,e){let t=e.width/i.offsetWidth,n=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-i.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function Cg(i,e,t,n,r,s,o,a){let l=i.ownerDocument,h=l.defaultView||window;for(let u=i,c=!1;u&&!c;)if(u.nodeType==1){let p,m=u==l.body,f=1,g=1;if(m)p=Tg(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(c=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let M=u.getBoundingClientRect();({scaleX:f,scaleY:g}=vu(u,M)),p={left:M.left,right:M.left+u.clientWidth*f,top:M.top,bottom:M.top+u.clientHeight*g}}let w=0,_=0;if(r=="nearest")e.top<p.top?(_=e.top-(p.top+o),t>0&&e.bottom>p.bottom+_&&(_=e.bottom-p.bottom+o)):e.bottom>p.bottom&&(_=e.bottom-p.bottom+o,t<0&&e.top-_<p.top&&(_=e.top-(p.top+o)));else{let M=e.bottom-e.top,x=p.bottom-p.top;_=(r=="center"&&M<=x?e.top+M/2-x/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-x+o)-p.top}if(n=="nearest"?e.left<p.left?(w=e.left-(p.left+s),t>0&&e.right>p.right+w&&(w=e.right-p.right+s)):e.right>p.right&&(w=e.right-p.right+s,t<0&&e.left<p.left+w&&(w=e.left-(p.left+s))):w=(n=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:n=="start"==a?e.left-s:e.right-(p.right-p.left)+s)-p.left,w||_)if(m)h.scrollBy(w,_);else{let M=0,x=0;if(_){let E=u.scrollTop;u.scrollTop+=_/g,x=(u.scrollTop-E)*g}if(w){let E=u.scrollLeft;u.scrollLeft+=w/f,M=(u.scrollLeft-E)*f}e={left:e.left-M,top:e.top-x,right:e.right-M,bottom:e.bottom-x},M&&Math.abs(M-w)<1&&(n="nearest"),x&&Math.abs(x-_)<1&&(r="nearest")}if(m)break;(e.top<p.top||e.bottom>p.bottom||e.left<p.left||e.right>p.right)&&(e={left:Math.max(e.left,p.left),right:Math.min(e.right,p.right),top:Math.max(e.top,p.top),bottom:Math.min(e.bottom,p.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function Rg(i){let e=i.ownerDocument,t,n;for(let r=i.parentNode;r&&!(r==e.body||t&&n);)if(r.nodeType==1)!n&&r.scrollHeight>r.clientHeight&&(n=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:t,y:n}}class Mg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?sn(t):0),n,Math.min(e.focusOffset,n?sn(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let An=null;ge.safari&&ge.safari_version>=26&&(An=!1);function ku(i){if(i.setActive)return i.setActive();if(An)return i.focus(An);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(An==null?{get preventScroll(){return An={preventScroll:!0},!0}}:void 0),!An){An=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],s=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let Sa;function Hi(i,e,t=e){let n=Sa||(Sa=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function Kn(i,e,t,n){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,i.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,i.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Ig(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function Bg(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,sn(t));;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=sn(t))}else{if(t==i)return!0;n=wn(t),t=t.parentNode}}function Su(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function xu(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=sn(t)}else if(t.parentNode&&!Gr(t))n=wn(t),t=t.parentNode;else return null}}function Au(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!Gr(t))n=wn(t)+1,t=t.parentNode;else return null}}class Ot{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Ot(e.parentNode,wn(e),t)}static after(e,t){return new Ot(e.parentNode,wn(e)+1,t)}}var Pe=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(Pe||(Pe={}));const Bn=Pe.LTR,fl=Pe.RTL;function Eu(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const Og=Eu("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Lg=Eu("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vo=Object.create(null),$t=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);vo[e]=t,vo[t]=-e}function _u(i){return i<=247?Og[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?Lg[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const Dg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Gt{get dir(){return this.level%2?fl:Bn}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(s<0||(r!=0?r<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Tu(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let n=i[t],r=e[t];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!Tu(n.inner,r.inner))return!1}return!0}const We=[];function Ng(i,e,t,n,r){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:e,a=s<n.length?n[s].from:t,l=s?256:r;for(let h=o,u=l,c=l;h<a;h++){let p=_u(i.charCodeAt(h));p==512?p=u:p==8&&c==4&&(p=16),We[h]=p==4?2:p,p&7&&(c=p),u=p}for(let h=o,u=l,c=l;h<a;h++){let p=We[h];if(p==128)h<a-1&&u==We[h+1]&&u&24?p=We[h]=u:We[h]=256;else if(p==64){let m=h+1;for(;m<a&&We[m]==64;)m++;let f=h&&u==8||m<t&&We[m]==8?c==1?1:8:256;for(let g=h;g<m;g++)We[g]=f;h=m-1}else p==8&&c==1&&(We[h]=1);u=p,p&7&&(c=p)}}}function Pg(i,e,t,n,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let h=o?n[o-1].to:e,u=o<n.length?n[o].from:t;for(let c=h,p,m,f;c<u;c++)if(m=vo[p=i.charCodeAt(c)])if(m<0){for(let g=a-3;g>=0;g-=3)if($t[g+1]==-m){let w=$t[g+2],_=w&2?r:w&4?w&1?s:r:0;_&&(We[c]=We[$t[g]]=_),a=g;break}}else{if($t.length==189)break;$t[a++]=c,$t[a++]=p,$t[a++]=l}else if((f=We[c])==2||f==1){let g=f==r;l=g?0:1;for(let w=a-3;w>=0;w-=3){let _=$t[w+2];if(_&2)break;if(g)$t[w+2]|=2;else{if(_&4)break;$t[w+2]|=4}}}}}function Fg(i,e,t,n){for(let r=0,s=n;r<=t.length;r++){let o=r?t[r-1].to:i,a=r<t.length?t[r].from:e;for(let l=o;l<a;){let h=We[l];if(h==256){let u=l+1;for(;;)if(u==a){if(r==t.length)break;u=t[r++].to,a=r<t.length?t[r].from:e}else if(We[u]==256)u++;else break;let c=s==1,p=(u<e?We[u]:n)==1,m=c==p?c?1:2:n;for(let f=u,g=r,w=g?t[g-1].to:i;f>l;)f==w&&(f=t[--g].from,w=g?t[g-1].to:i),We[--f]=m;l=u}else s=h,l++}}}function ko(i,e,t,n,r,s,o){let a=n%2?2:1;if(n%2==r%2)for(let l=e,h=0;l<t;){let u=!0,c=!1;if(h==s.length||l<s[h].from){let g=We[l];g!=a&&(u=!1,c=g==16)}let p=!u&&a==1?[]:null,m=u?n:n+1,f=l;e:for(;;)if(h<s.length&&f==s[h].from){if(c)break e;let g=s[h];if(!u)for(let w=g.to,_=h+1;;){if(w==t)break e;if(_<s.length&&s[_].from==w)w=s[_++].to;else{if(We[w]==a)break e;break}}if(h++,p)p.push(g);else{g.from>l&&o.push(new Gt(l,g.from,m));let w=g.direction==Bn!=!(m%2);So(i,w?n+1:n,r,g.inner,g.from,g.to,o),l=g.to}f=g.to}else{if(f==t||(u?We[f]!=a:We[f]==a))break;f++}p?ko(i,l,f,n+1,r,p,o):l<f&&o.push(new Gt(l,f,m)),l=f}else for(let l=t,h=s.length;l>e;){let u=!0,c=!1;if(!h||l>s[h-1].to){let g=We[l-1];g!=a&&(u=!1,c=g==16)}let p=!u&&a==1?[]:null,m=u?n:n+1,f=l;e:for(;;)if(h&&f==s[h-1].to){if(c)break e;let g=s[--h];if(!u)for(let w=g.from,_=h;;){if(w==e)break e;if(_&&s[_-1].to==w)w=s[--_].from;else{if(We[w-1]==a)break e;break}}if(p)p.push(g);else{g.to<l&&o.push(new Gt(g.to,l,m));let w=g.direction==Bn!=!(m%2);So(i,w?n+1:n,r,g.inner,g.from,g.to,o),l=g.from}f=g.from}else{if(f==e||(u?We[f-1]!=a:We[f-1]==a))break;f--}p?ko(i,f,l,n+1,r,p,o):f<l&&o.push(new Gt(f,l,m)),l=f}}function So(i,e,t,n,r,s,o){let a=e%2?2:1;Ng(i,r,s,n,a),Pg(i,r,s,n,a),Fg(r,s,n,a),ko(i,r,s,e,t,n,o)}function Cu(i,e,t){if(!i)return[new Gt(0,0,e==fl?1:0)];if(e==Bn&&!t.length&&!Dg.test(i))return Ru(i.length);if(t.length)for(;i.length>We.length;)We[We.length]=256;let n=[],r=e==Bn?0:1;return So(i,r,r,t,0,i.length,n),n}function Ru(i){return[new Gt(0,i,0)]}let Mu="";function Iu(i,e,t,n,r){var s;let o=n.head-i.from,a=Gt.find(e,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),l=e[a],h=l.side(r,t);if(o==h){let p=a+=r?1:-1;if(p<0||p>=e.length)return null;l=e[a=p],o=l.side(!r,t),h=l.side(r,t)}let u=bt(i.text,o,l.forward(r,t));(u<l.from||u>l.to)&&(u=h),Mu=i.text.slice(Math.min(o,u),Math.max(o,u));let c=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return c&&u==h&&c.level+(r?0:1)<l.level?be.cursor(c.side(!r,t)+i.from,c.forward(r,t)?1:-1,c.level):be.cursor(u+i.from,l.forward(r,t)?-1:1,l.level)}function $g(i,e,t){for(let n=e;n<t;n++){let r=_u(i.charCodeAt(n));if(r==1)return Bn;if(r==2||r==4)return fl}return Bn}const Bu=we.define(),Ou=we.define(),Lu=we.define(),Du=we.define(),xo=we.define(),Nu=we.define(),Pu=we.define(),cl=we.define(),dl=we.define(),Fu=we.define({combine:i=>i.some(e=>e)}),$u=we.define({combine:i=>i.some(e=>e)}),Wu=we.define();class Yn{constructor(e,t="nearest",n="nearest",r=5,s=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Yn(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Yn(be.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const cr=De.define({map:(i,e)=>i.map(e)}),Uu=De.define();function At(i,e,t){let n=i.facet(Du);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const tn=we.define({combine:i=>i.length?i[0]:!0});let Wg=0;const Vn=we.define({combine(i){return i.filter((e,t)=>{for(let n=0;n<t;n++)if(i[n].plugin==e.plugin)return!1;return!0})}});class He{constructor(e,t,n,r,s){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Vn.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Vn.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:s,decorations:o}=t||{};return new He(Wg++,e,n,r,a=>{let l=[];return o&&l.push(us.of(h=>{let u=h.plugin(a);return u?o(u):Te.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return He.define((n,r)=>new e(n,r),t)}}class Bs{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(At(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){At(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){At(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ju=we.define(),hs=we.define(),us=we.define(),Hu=we.define(),pl=we.define(),nr=we.define(),Vu=we.define();function xa(i,e){let t=i.state.facet(Vu);if(!t.length)return t;let n=t.map(s=>s instanceof Function?s(i):s),r=[];return Re.spans(n,e.from,e.to,{point(){},span(s,o,a,l){let h=s-e.from,u=o-e.from,c=r;for(let p=a.length-1;p>=0;p--,l--){let m=a[p].spec.bidiIsolate,f;if(m==null&&(m=$g(e.text,h,u)),l>0&&c.length&&(f=c[c.length-1]).to==h&&f.direction==m)f.to=u,c=f.inner;else{let g={from:h,to:u,direction:m,inner:[]};c.push(g),c=g.inner}}}}),r}const zu=we.define();function gl(i){let e=0,t=0,n=0,r=0;for(let s of i.state.facet(zu)){let o=s(i);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:t,top:n,bottom:r}}const xi=we.define();class yt{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new yt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,s=0,o=0;;){let a=r<e.length?e[r].fromB:1e9,l=s<t.length?t[s]:1e9,h=Math.min(a,l);if(h==1e9)break;let u=h+o,c=h,p=u;for(;;)if(s<t.length&&t[s]<=c){let m=t[s+1];s+=2,c=Math.max(c,m);for(let f=r;f<e.length&&e[f].fromB<=c;f++)o=e[f].toA-e[f].toB;p=Math.max(p,m+o)}else if(r<e.length&&e[r].fromB<=c){let m=e[r++];c=Math.max(c,m.toB),p=Math.max(p,m.toA),o=m.toA-m.toB}else break;n.push(new yt(u,p,h,c))}return n}}class Vi{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Ke.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new yt(s,o,a,l))),this.changedRanges=r}static create(e,t,n){return new Vi(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const Ug=[];class Ge{constructor(e,t,n=0){this.dom=e,this.length=t,this.flags=n,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return Ug}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&Ag(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let n=t;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let n=wn(this.dom),r=this.length?e>0:t>0;return new Ot(this.parent.dom,n+(r?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof cs)return e;return null}static get(e){return e.cmTile}}class fs extends Ge{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,n=null,r,s=e?.node==t?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,r=n?n.nextSibling:t.firstChild,s&&r!=a.dom&&(s.written=!0),a.dom.parentNode==t)for(;r&&r!=a.dom;)r=Aa(r);else t.insertBefore(a.dom,r);n=a.dom}for(r=n?n.nextSibling:t.firstChild,s&&r&&(s.written=!0);r;)r=Aa(r);this.length=o}}function Aa(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class cs extends fs{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=Ge.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],n=this,r=0,s=0;;)if(r==n.children.length){if(!t.length)return;n=n.parent,n.breakAfter&&s++,r=t.pop()}else{let o=n.children[r++];if(o instanceof gn)t.push(r),n=o,r=0;else{let a=s+o.length,l=e(o,s);if(l!==void 0)return l;s=a+o.breakAfter}}}resolveBlock(e,t){let n,r=-1,s,o=-1;if(this.blockTiles((a,l)=>{let h=l+a.length;if(e>=l&&e<=h){if(a.isWidget()&&t>=-1&&t<=1){if(a.flags&32)return!0;a.flags&16&&(n=void 0)}(l<e||e==h&&(t<-1?a.length:a.covers(1)))&&(!n||!a.isWidget()&&n.isWidget())&&(n=a,r=e-l),(h>e||e==l&&(t>1?a.length:a.covers(-1)))&&(!s||!a.isWidget()&&s.isWidget())&&(s=a,o=e-l)}}),!n&&!s)throw new Error("No tile at position "+e);return n&&t<0||!s?{tile:n,offset:r}:{tile:s,offset:o}}}class gn extends fs{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let n=new gn(t||document.createElement(e.tagName),e);return t||(n.flags|=4),n}}class ti extends fs{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,n){let r=new ti(t||document.createElement("div"),e);return(!t||!n)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,n){let r=null,s=-1,o=null,a=-1;function l(u,c){for(let p=0,m=0;p<u.children.length&&m<=c;p++){let f=u.children[p],g=m+f.length;g>=c&&(f.isComposite()?l(f,c-m):(!o||o.isHidden&&(t>0||n&&Hg(o,f)))&&(g>c||f.flags&32)?(o=f,a=c-m):(m<c||f.flags&16&&!f.isHidden)&&(r=f,s=c-m)),m=g}}l(this,e);let h=(t<0?r:o)||r||o;return h?{tile:h,offset:h==r?s:a}:null}coordsIn(e,t){let n=this.resolveInline(e,t,!0);return n?n.tile.coordsIn(Math.max(0,n.offset),t):jg(this)}domIn(e,t){let n=this.resolveInline(e,t);if(n){let{tile:r,offset:s}=n;if(this.dom.contains(r.dom))return r.isText()?new Ot(r.dom,Math.min(r.dom.nodeValue.length,s)):r.domPosFor(s,r.flags&16?1:r.flags&32?-1:t);let o=n.tile.parent,a=!1;for(let l of o.children){if(a)return new Ot(l.dom,0);l==n.tile&&(a=!0)}}return new Ot(this.dom,0)}}function jg(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Bi(e);return t[t.length-1]||null}function Hg(i,e){let t=i.coordsIn(0,1),n=e.coordsIn(0,1);return t&&n&&n.top<t.bottom}class ft extends fs{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let n=new ft(t||document.createElement(e.tagName),e);return t||(n.flags|=4),n}}class Tn extends Ge{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let n=this.dom.nodeValue.length;e>n&&(e=n);let r=e,s=e,o=0;e==0&&t<0||e==n&&t>=0?ge.chrome||ge.gecko||(e?(r--,o=1):s<n&&(s++,o=-1)):t<0?r--:s<n&&s++;let a=Hi(this.dom,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return ge.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,h=>h.width)||l),o?ji(l,o<0):l||null}static of(e,t){let n=new Tn(t||document.createTextNode(e),e);return t||(n.flags|=2),n}}class On extends Ge{constructor(e,t,n,r){super(e,t,r),this.widget=n}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,n){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(n)return ji(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return ji(o,!a)}}get overrideDOMText(){if(!this.length)return Le.empty;let{root:e}=this;if(!e)return Le.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,n,r,s){return s||(s=e.toDOM(t),e.editable||(s.contentEditable="false")),new On(s,n,e,r)}}class Kr extends Ge{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Le.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class Vg{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,n){let{tile:r,index:s,beforeBreak:o,parents:a}=this;for(;e||t>0;)if(r.isComposite())if(o){if(!e)break;n&&n.break(),e--,o=!1}else if(s==r.children.length){if(!e&&!a.length)break;n&&n.leave(r),o=!!r.breakAfter,{tile:r,index:s}=a.pop(),s++}else{let l=r.children[s],h=l.breakAfter;(t>0?l.length<=e:l.length<e)&&(!n||n.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!h,s++,e-=l.length):(a.push({tile:r,index:s}),r=l,s=0,n&&l.isComposite()&&n.enter(l))}else if(s==r.length)o=!!r.breakAfter,{tile:r,index:s}=a.pop(),s++;else if(e){let l=Math.min(e,r.length-s);n&&n.skip(r,s,s+l),e-=l,s+=l}else break;return this.tile=r,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class zg{constructor(e,t,n,r){this.from=e,this.to=t,this.wrapper=n,this.rank=r}}class qg{constructor(e,t,n){this.cache=e,this.root=t,this.blockWrappers=n,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,n,r){var s;this.flushBuffer();let o=this.ensureMarks(t,n),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new Tn(a.dom,a.text+e);l.parent=o}else o.append(r||Tn.of(e,(s=this.cache.find(Tn))===null||s===void 0?void 0:s.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let n=this.curLine;n.dom!=t.line.dom&&(n.setDOM(this.cache.reused.has(t.line)?Os(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=n;for(let a=t.marks.length-1;a>=0;a--){let l=t.marks[a],h=r.lastChild;if(h instanceof ft&&h.mark.eq(l.mark))h.dom!=l.dom&&h.setDOM(Os(l.dom)),r=h;else{if(this.cache.reused.get(l)){let c=Ge.get(l.dom);c&&c.setDOM(Os(l.dom))}let u=ft.of(l.mark,l.dom);r.append(u),r=u}this.cache.reused.set(l,2)}let s=Ge.get(e.text);s&&this.cache.reused.set(s,2);let o=new Tn(e.text,e.text.nodeValue);o.flags|=8,r.append(o)}addInlineWidget(e,t,n){let r=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);r||this.flushBuffer();let s=this.ensureMarks(t,n);!r&&!(e.flags&16)&&s.append(this.getBuffer(1)),s.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,n){this.flushBuffer(),this.ensureMarks(t,n).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var n;e||(e=qu);let r=ti.start(e,t||((n=this.cache.find(ti))===null||n===void 0?void 0:n.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var n;let r=this.curLine;for(let s=e.length-1;s>=0;s--){let o=e[s],a;if(t>0&&(a=r.lastChild)&&a instanceof ft&&a.mark.eq(o))r=a,t--;else{let l=ft.of(o,(n=this.cache.find(ft,h=>h.mark.eq(o)))===null||n===void 0?void 0:n.dom);r.append(l),r=l,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!Ea(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(ge.ios&&Ea(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Ls,0,32)||new On(Ls.toDOM(),0,Ls,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new zg(e.from,e.to,e.value,e.rank),n=this.wrappers.length;for(;n>0&&(this.wrappers[n-1].rank-t.rank||this.wrappers[n-1].to-t.to)<0;)n--;this.wrappers.splice(n,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let n of this.wrappers){let r=t.lastChild;if(n.from<this.pos&&r instanceof gn&&r.wrapper.eq(n.wrapper))t=r;else{let s=gn.of(n.wrapper,(e=this.cache.find(gn,o=>o.wrapper.eq(n.wrapper)))===null||e===void 0?void 0:e.dom);t.append(s),t=s}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),n=this.cache.find(Kr,void 0,1);return n&&(n.flags=t),n||new Kr(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class Gg{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:r,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=r;let a=this.textOff=Math.min(e,r.length);return s?null:r.slice(0,a)}let t=Math.min(this.text.length,this.textOff+e),n=this.text.slice(this.textOff,t);return this.textOff=t,n}}const Yr=[On,ti,Tn,ft,Kr,gn,cs];for(let i=0;i<Yr.length;i++)Yr[i].bucket=i;class Kg{constructor(e){this.view=e,this.buckets=Yr.map(()=>[]),this.index=Yr.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,n=this.buckets[t];n.length<6?n.push(e):n[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,n=2){let r=e.bucket,s=this.buckets[r],o=this.index[r];for(let a=s.length-1;a>=0;a--){let l=(a+o)%s.length,h=s[l];if((!t||t(h))&&!this.reused.has(h))return s.splice(l,1),l<o&&this.index[r]--,this.reused.set(h,n),h}return null}findWidget(e,t,n){let r=this.buckets[0];if(r.length)for(let s=0,o=0;;s++){if(s==r.length){if(o)return null;o=1,s=0}let a=r[s];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return r.splice(s,1),s<this.index[0]&&this.index[0]--,a.widget==e&&a.length==t&&(a.flags&497)==n?(this.reused.set(a,1),a):(this.reused.set(a,2),new On(a.dom,t,e,a.flags&-498|n))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class Yg{constructor(e,t,n,r,s){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new Kg(e),this.text=new Gg(e.state.doc),this.builder=new qg(this.cache,new cs(e,e.contentDOM),Re.iter(n)),this.cache.reused.set(t,2),this.old=new Vg(t),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,t){let n=t&&this.getCompositionContext(t.text);for(let r=0,s=0,o=0;;){let a=o<e.length?e[o++]:null,l=a?a.fromA:this.old.root.length;if(l>r){let h=l-r;this.preserve(h,!o,!a),r=l,s+=h}if(!a)break;t&&a.fromA<=t.range.fromA&&a.toA>=t.range.toA?(this.forward(a.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(s,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,n),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,a.toA),this.emit(t.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(s,a.toB)),s=a.toB,r=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,n){let r=Zg(this.old),s=this.openMarks;this.old.advance(e,n?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let h=l>0||a<o.length?On.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,r,s),s=r.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,r,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),r,s)),s=r.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Kr)this.cache.add(o);else if(o instanceof ft)this.builder.ensureLine(null),this.builder.addMark(o,r,s),this.cache.reused.set(o,1),s=r.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof ft&&r.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?r.length&&(r.length=s=0):o instanceof ft&&(r.shift(),s=Math.min(s,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let n=null,r=this.builder,s=0,o=Re.spans(this.decorations,e,t,{point:(a,l,h,u,c,p)=>{if(h instanceof In){if(this.disallowBlockEffectsFor[p]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=u.length,c>u.length)r.continueWidget(l-a);else{let m=h.widget||(h.block?ni.block:ni.inline),f=Xg(h),g=this.cache.findWidget(m,l-a,f)||On.of(m,this.view,l-a,f);h.block?(h.startSide>0&&r.addLineStartIfNotCovered(n),r.addBlockWidget(g)):(r.ensureLine(n),r.addInlineWidget(g,u,c))}n=null}else n=Jg(n,h);l>a&&this.text.skip(l-a)},span:(a,l,h,u)=>{for(let c=a;c<l;){let p=this.text.next(Math.min(512,l-c));p==null?(r.addLineStartIfNotCovered(n),r.addBreak(),c++):(r.ensureLine(n),r.addText(p,h,u),c+=p.length),n=null}}});r.addLineStartIfNotCovered(n),this.openWidget=o>s,this.openMarks=o}forward(e,t,n=1){t-e<=10?this.old.advance(t-e,n,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,n,this.reuseWalker))}getCompositionContext(e){let t=[],n=null;for(let r=e.parentNode;;r=r.parentNode){let s=Ge.get(r);if(r==this.view.contentDOM)break;s instanceof ft?t.push(s):s?.isLine()?n=s:r.nodeName=="DIV"&&!n&&r!=this.view.contentDOM?n=new ti(r,qu):t.push(ft.of(new er({tagName:r.nodeName.toLowerCase(),attributes:Eg(r)}),r))}return{line:n,marks:t}}}function Ea(i,e){let t=n=>{for(let r of n.children)if((e?r.isText():r.length)||t(r))return!0;return!1};return t(i)}function Xg(i){let e=i.isReplace?(i.startSide<0?64:0)|(i.endSide>0?128:0):i.startSide>0?32:16;return i.block&&(e|=256),e}const qu={class:"cm-line"};function Jg(i,e){let t=e.spec.attributes,n=e.spec.class;return!t&&!n||(i||(i={class:"cm-line"}),t&&hl(t,i),n&&(i.class+=" "+n)),i}function Zg(i){let e=[];for(let t=i.parents.length;t>1;t--){let n=t==i.parents.length?i.tile:i.parents[t].tile;n instanceof ft&&e.push(n.mark)}return e}function Os(i){let e=Ge.get(i);return e&&e.setDOM(i.cloneNode()),i}class ni extends Zt{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ni.inline=new ni("span");ni.block=new ni("div");const Ls=new class extends Zt{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class _a{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Te.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new cs(e,e.contentDOM),this.updateInner([new yt(0,0,0,e.state.doc.length)],null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?r=this.domChanged.newSel.head:!lm(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?em(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:u,to:c}=this.hasComposition;n=new yt(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(ge.ie||ge.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=im(o,this.decorations,e.changes);l.length&&(n=yt.extendWithRanges(n,l));let h=sm(a,this.blockWrappers,e.changes);return h.length&&(n=yt.extendWithRanges(n,h)),s&&!n.some(u=>u.fromA<=s.range.fromA&&u.toA>=s.range.toA)&&(n=s.range.addToSet(n.slice())),this.tile.flags&2&&n.length==0?!1:(this.updateInner(n,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:n}=this.view;n.ignore(()=>{if(t||e.length){let o=this.tile,a=new Yg(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,t),Ao(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ge.chrome||ge.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||n.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof Ds&&r.push(s.dom);n.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(Uu)&&(this.editContextFormatting=n.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:n}=this.tile,r=this.view.root.activeElement,s=r==n,o=!s&&!(this.view.state.facet(tn)||n.tabIndex>-1)&&Ii(n,this.view.observer.selectionRange)&&!(r&&n.contains(r));if(!(s||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h,u;if(l.empty?u=h=this.inlineDOMNearPos(l.anchor,l.assoc||1):(u=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),h=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),ge.gecko&&l.empty&&!this.hasComposition&&Qg(h)){let p=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(p,h.node.childNodes[h.offset]||null)),h=u=new Ot(p,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||(!Oi(h.node,h.offset,c.anchorNode,c.anchorOffset)||!Oi(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{ge.android&&ge.chrome&&n.contains(c.focusNode)&&om(c.focusNode,n)&&(n.blur(),n.focus({preventScroll:!0}));let p=ei(this.view.root);if(p)if(l.empty){if(ge.gecko){let m=tm(h.node,h.offset);if(m&&m!=3){let f=(m==1?xu:Au)(h.node,h.offset);f&&(h=new Ot(f.node,f.offset))}}p.collapse(h.node,h.offset),l.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=l.bidiLevel)}else if(p.extend){p.collapse(h.node,h.offset);try{p.extend(u.node,u.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([h,u]=[u,h]),m.setEnd(u.node,u.offset),m.setStart(h.node,h.offset),p.removeAllRanges(),p.addRange(m)}o&&this.view.root.activeElement==n&&(n.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,u)),this.impreciseAnchor=h.precise?null:new Ot(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Ot(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Oi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=ei(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=this.lineAt(t.head,t.assoc);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!l||!h||l.bottom>h.top)return;let u=this.domAtPos(t.head+t.assoc,t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&n.collapse(r,s)}posFromDOM(e,t){let n=this.tile.nearest(e);if(!n)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let r=n.posAtStart;if(n.isComposite()){let s;if(e==n.dom)s=n.dom.childNodes[t];else{let o=sn(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==n.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?s=e:s=e.nextSibling}if(s==n.dom.firstChild)return r;for(;s&&!Ge.get(s);)s=s.nextSibling;if(!s)return r+n.length;for(let o=0,a=r;;o++){let l=n.children[o];if(l.dom==s)return a;a+=l.length+l.breakAfter}}else return n.isText()?e==n.dom?r+t:r+(t?n.length:0):r}domAtPos(e,t){let{tile:n,offset:r}=this.tile.resolveBlock(e,t);return n.isWidget()?n.domPosFor(e,t):n.domIn(r,t)}inlineDOMNearPos(e,t){let n,r=-1,s=!1,o,a=-1,l=!1;return this.tile.blockTiles((h,u)=>{if(h.isWidget()){if(h.flags&32&&u>=e)return!0;h.flags&16&&(s=!0)}else{let c=u+h.length;if(u<=e&&(n=h,r=e-u,s=c<e),c>=e&&!o&&(o=h,a=e-u,l=u>e),u>e&&o)return!0}}),!n&&!o?this.domAtPos(e,t):(s&&o?n=null:l&&n&&(o=null),n&&t<0||!o?n.domIn(r,t):o.domIn(a,t))}coordsAt(e,t){let{tile:n,offset:r}=this.tile.resolveBlock(e,t);return n.isWidget()?n.widget instanceof Ds?null:n.coordsInWidget(r,t,!0):n.coordsIn(r,t)}lineAt(e,t){let{tile:n}=this.tile.resolveBlock(e,t);return n.isLine()?n:null}coordsForChar(e){let{tile:t,offset:n}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function r(s,o){if(s.isComposite())for(let a of s.children){if(a.length>=o){let l=r(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(s.isText()&&o<s.length){let a=bt(s.text,o);if(a==o)return null;let l=Hi(s.dom,o,a).getClientRects();for(let h=0;h<l.length;h++){let u=l[h];if(h==l.length-1||u.top<u.bottom&&u.left<u.right)return u}}return null}return r(t,n)}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Pe.LTR,h=0,u=(c,p,m)=>{for(let f=0;f<c.children.length&&!(p>r);f++){let g=c.children[f],w=p+g.length,_=g.dom.getBoundingClientRect(),{height:M}=_;if(m&&!f&&(h+=_.top-m.top),g instanceof gn)w>n&&u(g,p,_);else if(p>=n&&(h>0&&t.push(-h),t.push(M+h),h=0,o)){let x=g.dom.lastChild,E=x?Bi(x):[];if(E.length){let A=E[E.length-1],y=l?A.right-_.left:_.right-A.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=p,this.minWidthTo=w)}}m&&f==c.children.length-1&&(h+=m.bottom-_.bottom),p=w+g.breakAfter}};return u(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?Pe.RTL:Pe.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let h of o.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let u=Bi(h.dom);if(u.length!=1)return;a+=u[0].width,l=u[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(e)return e;let t=document.createElement("div"),n,r,s;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let o=Bi(t.firstChild)[0];n=t.getBoundingClientRect().height,r=o&&o.width?o.width/27:7,s=o&&o.height?o.height:n,t.remove()}),{lineHeight:n,charWidth:r,textHeight:s}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.view.state.doc.length;if(o>n){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Te.replace({widget:new Ds(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return Te.set(e)}updateDeco(){let e=1,t=this.view.state.facet(us).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),n=!1,r=this.view.state.facet(pl).map((s,o)=>{let a=typeof s=="function";return a&&(n=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Re.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(Hu).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Wu))try{if(h(this.view,e.range,e))return!0}catch(u){At(this.view.state,u,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let s=gl(this.view),o={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Cg(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Pe.LTR)}lineHasWidget(e){let t=n=>n.isWidget()||n.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){Ao(this.tile)}}function Ao(i,e){let t=e?.get(i);if(t!=1){t==null&&i.destroy();for(let n of i.children)Ao(n,e)}}function Qg(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function Gu(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let n=xu(t.focusNode,t.focusOffset),r=Au(t.focusNode,t.focusOffset),s=n||r;if(r&&n&&r.node!=n.node){let a=Ge.get(r.node);if(!a||a.isText()&&a.text!=r.node.nodeValue)s=r;else if(i.docView.lastCompositionAfterCursor){let l=Ge.get(n.node);!l||l.isText()&&l.text!=n.node.nodeValue||(s=r)}}if(i.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function em(i,e,t){let n=Gu(i,t);if(!n)return null;let{node:r,from:s,to:o}=n,a=r.nodeValue;if(/[\n\r]/.test(a)||i.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc;return{range:new yt(l.mapPos(s),l.mapPos(o),s,o),text:r}}function tm(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let nm=class{constructor(){this.changes=[]}compareRange(e,t){Gn(e,t,this.changes)}comparePoint(e,t){Gn(e,t,this.changes)}boundChange(e){Gn(e,e,this.changes)}};function im(i,e,t){let n=new nm;return Re.compare(i,e,t,n),n.changes}class rm{constructor(){this.changes=[]}compareRange(e,t){Gn(e,t,this.changes)}comparePoint(){}boundChange(e){Gn(e,e,this.changes)}}function sm(i,e,t){let n=new rm;return Re.compare(i,e,t,n),n.changes}function om(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function lm(i,e){let t=!1;return e&&i.iterChangedRanges((n,r)=>{n<e.to&&r>e.from&&(t=!0)}),t}class Ds extends Zt{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function am(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),s=e-r.from;if(r.length==0)return be.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,a=s;t<0?o=bt(r.text,s,!1):a=bt(r.text,s);let l=n(r.text.slice(o,a));for(;o>0;){let h=bt(r.text,o,!1);if(n(r.text.slice(h,o))!=l)break;o=h}for(;a<r.length;){let h=bt(r.text,a);if(n(r.text.slice(a,h))!=l)break;a=h}return be.range(o+r.from,a+r.from)}function hm(i,e,t,n,r){let s=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let a=i.viewState.heightOracle.textHeight,l=Math.floor((r-t.top-(i.defaultLineHeight-a)*.5)/a);s+=l*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+zr(o,s,i.state.tabSize)}function Eo(i,e,t){let n=i.lineBlockAt(e);if(Array.isArray(n.type)){let r;for(let s of n.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==Xe.Text&&(r.type!=s.type||(t<0?s.from<e:s.to>e)))&&(r=s)}}return r||n}return n}function um(i,e,t,n){let r=Eo(i,e.head,e.assoc||-1),s=!n||r.type!=Xe.Text||!(i.lineWrapping||r.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=i.dom.getBoundingClientRect(),a=i.textDirectionAt(r.from),l=i.posAtCoords({x:t==(a==Pe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return be.cursor(l,t?-1:1)}return be.cursor(t?r.to:r.from,t?-1:1)}function Ta(i,e,t,n){let r=i.state.doc.lineAt(e.head),s=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let a=e,l=null;;){let h=Iu(r,s,o,a,t),u=Mu;if(!h){if(r.number==(t?i.state.doc.lines:1))return a;u=`
`,r=i.state.doc.line(r.number+(t?1:-1)),s=i.bidiSpans(r),h=i.visualLineSide(r,!t)}if(l){if(!l(u))return a}else{if(!n)return h;l=n(u)}a=h}}function fm(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return s=>{let o=n(s);return r==qt.Space&&(r=o),r==o}}function cm(i,e,t,n){let r=e.head,s=t?1:-1;if(r==(t?i.state.doc.length:0))return be.cursor(r,e.assoc);let o=e.goalColumn,a,l=i.contentDOM.getBoundingClientRect(),h=i.coordsAtPos(r,e.assoc||-1),u=i.documentTop;if(h)o==null&&(o=h.left-l.left),a=s<0?h.top:h.bottom;else{let f=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,i.defaultCharacterWidth*(r-f.from))),a=(s<0?f.top:f.bottom)+u}let c=l.left+o,p=n??i.viewState.heightOracle.textHeight>>1,m=_o(i,{x:c,y:a+p*s},!1,s);return be.cursor(m.pos,m.assoc,void 0,o)}function Li(i,e,t){for(;;){let n=0;for(let r of i)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=n||t||(e-s<o-e?-1:1);e=l<0?s:o,n=l}});if(!n)return e}}function Ku(i,e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],s=null;if(r.empty){let o=Li(i,r.from,0);o!=r.from&&(s=be.cursor(o,-1))}else{let o=Li(i,r.from,-1),a=Li(i,r.to,1);(o!=r.from||a!=r.to)&&(s=be.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(t||(t=e.ranges.slice()),t[n]=s)}return t?be.create(t,e.mainIndex):e}function Ns(i,e,t){let n=Li(i.state.facet(nr).map(r=>r(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:be.cursor(n,n<t.from?1:-1)}class zt{constructor(e,t){this.pos=e,this.assoc=t}}function _o(i,e,t,n){let r=i.contentDOM.getBoundingClientRect(),s=r.top+i.viewState.paddingTop,{x:o,y:a}=e,l=a-s,h;for(;;){if(l<0)return new zt(0,1);if(l>i.viewState.docHeight)return new zt(i.state.doc.length,-1);if(h=i.elementAtHeight(l),n==null)break;if(h.type==Xe.Text){let p=i.docView.coordsAt(n<0?h.from:h.to,n);if(p&&(n<0?p.top<=l+s:p.bottom>=l+s))break}let c=i.viewState.heightOracle.textHeight/2;l=n>0?h.bottom+c:h.top-c}if(i.viewport.from>=h.to||i.viewport.to<=h.from){if(t)return null;if(h.type==Xe.Text){let c=hm(i,r,h,o,a);return new zt(c,c==h.from?1:-1)}}if(h.type!=Xe.Text)return l<(h.top+h.bottom)/2?new zt(h.from,1):new zt(h.to,-1);let u=i.docView.lineAt(h.from,2);return(!u||u.length!=h.length)&&(u=i.docView.lineAt(h.from,-2)),Yu(i,u,h.from,o,a)}function Yu(i,e,t,n,r){let s=-1,o=null,a=1e9,l=1e9,h=r,u=r,c=(p,m)=>{for(let f=0;f<p.length;f++){let g=p[f];if(g.top==g.bottom)continue;let w=g.left>n?g.left-n:g.right<n?n-g.right:0,_=g.top>r?g.top-r:g.bottom<r?r-g.bottom:0;g.top<=u&&g.bottom>=h&&(h=Math.min(g.top,h),u=Math.max(g.bottom,u),_=0),(s<0||(_-l||w-a)<0)&&(s>=0&&l&&a<w&&o.top<=u-2&&o.bottom>=h+2?l=0:(s=m,a=w,l=_,o=g))}};if(e.isText()){for(let m=0;m<e.length;){let f=bt(e.text,m);if(c(Hi(e.dom,m,f).getClientRects(),m),!a&&!l)break;m=f}return n>(o.left+o.right)/2==(Ca(i,s+t)==Pe.LTR)?new zt(t+bt(e.text,s),-1):new zt(t+s,1)}else{if(!e.length)return new zt(t,1);for(let g=0;g<e.children.length;g++){let w=e.children[g];if(w.flags&48)continue;let _=(w.dom.nodeType==1?w.dom:Hi(w.dom,0,w.length)).getClientRects();if(c(_,g),!a&&!l)break}let p=e.children[s],m=e.posBefore(p,t);return p.isComposite()||p.isText()?Yu(i,p,m,Math.max(o.left,Math.min(o.right,n)),r):n>(o.left+o.right)/2==(Ca(i,s+t)==Pe.LTR)?new zt(m+p.length,-1):new zt(m,1)}}function Ca(i,e){let t=i.state.doc.lineAt(e);return i.bidiSpans(t)[Gt.find(i.bidiSpans(t),e-t.from,-1,1)].dir}const Ai="ï¿¿";class dm{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(Oe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ai}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let s=this.text.length;this.readNode(r);let o=Ge.get(r),a=r.nextSibling;if(a==t){o?.breakAfter&&!a&&n!=this.view.contentDOM&&this.lineBreak();break}let l=Ge.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:Gr(r))||Gr(a)&&(r.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!gm(a,t)&&this.lineBreak(),r=a}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=r.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=s+o}}readNode(e){let t=Ge.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(pm(e,n.node,n.offset)?t:0))}}function pm(i,e,t){for(;;){if(!e||t<sn(e))return!1;if(e==i)return!0;t=wn(e)+1,e=e.parentNode}}function gm(i,e){let t;for(;!(i==e||!i);i=i.nextSibling){let n=Ge.get(i);if(!n?.isWidget())return!1;n&&(t||(t=[])).push(n)}if(t)for(let n of t){let r=n.overrideDOMText;if(r?.length)return!1}return!0}class Ra{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class mm{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=Xu(e.docView.tile,t,n,0))){let a=s||o?[]:ym(e),l=new dm(a,e);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=wm(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!wo(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!wo(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((ge.ios||ge.chrome)&&e.state.selection.main.empty&&l!=h&&(u.from>0||u.to<e.state.doc.length)){let c=Math.min(l,h),p=Math.max(l,h),m=u.from-c,f=u.to-p;(m==0||m==1||c==0)&&(f==0||f==-1||p==e.state.doc.length)&&(l=0,h=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(be.range(h,l)):this.newSel=be.single(h,l)}}}function Xu(i,e,t,n){if(i.isComposite()){let r=-1,s=-1,o=-1,a=-1;for(let l=0,h=n,u=n;l<i.children.length;l++){let c=i.children[l],p=h+c.length;if(h<e&&p>t)return Xu(c,e,t,h);if(p>=e&&r==-1&&(r=l,s=h),h>t&&c.dom.parentNode==i.dom){o=l,a=u;break}u=p,h=p+c.breakAfter}return{from:s,to:a<0?n+i.length:a,startDOM:(r?i.children[r-1].dom.nextSibling:null)||i.dom.firstChild,endDOM:o<i.children.length&&o>=0?i.children[o].dom:null}}else return i.isText()?{from:n,to:n+i.length,startDOM:i.dom,endDOM:i.dom.nextSibling}:null}function Ju(i,e){let t,{newSel:n}=e,r=i.state.selection.main,s=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,h=null;(s===8||ge.android&&e.text.length<a-o)&&(l=r.to,h="end");let u=Zu(i.state.doc.sliceString(o,a,Ai),e.text,l-o,h);u&&(ge.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Ai+Ai&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:Le.of(e.text.slice(u.from,u.toB).split(Ai))})}else n&&(!i.hasFocus&&i.state.facet(tn)||Xr(n,r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:(ge.mac||ge.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=be.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:Le.of([t.insert.toString().replace("."," ")])}):t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:i.state.doc.lineAt(r.from).to<r.to&&i.docView.lineHasWidget(r.to)&&i.inputState.insertingTextAt>Date.now()-50?t={from:r.from,to:r.to,insert:i.state.toText(i.inputState.insertingText)}:ge.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=be.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:Le.of([" "])}),t)return ml(i,t,n,s);if(n&&!Xr(n,r)){let o=!1,a="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(o=!0),a=i.inputState.lastSelectionOrigin,a=="select.pointer"&&(n=Ku(i.state.facet(nr).map(l=>l(i)),n))),i.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function ml(i,e,t,n=-1){if(ge.ios&&i.inputState.flushIOSKey(e))return!0;let r=i.state.selection.main;if(ge.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&i.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Kn(i.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Kn(i.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Kn(i.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let o,a=()=>o||(o=bm(i,e,t));return i.state.facet(Nu).some(l=>l(i,e.from,e.to,s,a))||i.dispatch(a()),!0}function bm(i,e,t){let n,r=i.state,s=r.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,h=l<0?s.from:s.to,u=Li(r.facet(nr).map(c=>c(i)),h,l);e.from==u&&(o=u)}if(o>-1)n={changes:e,selection:be.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",h=s.to>e.to?r.sliceDoc(e.to,s.to):"";n=r.replaceSelection(i.state.toText(l+e.insert.sliceString(0,void 0,i.state.lineBreak)+h))}else{let l=r.changes(e),h=t&&t.main.to<=l.newLength?t.main:void 0;if(r.selection.ranges.length>1&&(i.inputState.composing>=0||i.inputState.compositionPendingChange)&&e.to<=s.to+10&&e.to>=s.to-10){let u=i.state.sliceDoc(e.from,e.to),c,p=t&&Gu(i,t.main.head);if(p){let f=e.insert.length-(e.to-e.from);c={from:p.from,to:p.to-f}}else c=i.state.doc.lineAt(s.head);let m=s.to-e.to;n=r.changeByRange(f=>{if(f.from==s.from&&f.to==s.to)return{changes:l,range:h||f.map(l)};let g=f.to-m,w=g-u.length;if(i.state.sliceDoc(w,g)!=u||g>=c.from&&w<=c.to)return{range:f};let _=r.changes({from:w,to:g,insert:e.insert}),M=f.to-s.to;return{changes:_,range:h?be.range(Math.max(0,h.anchor+M),Math.max(0,h.head+M)):f.map(_)}})}else n={changes:l,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,a+=".compose",i.inputState.compositionFirstChange&&(a+=".start",i.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:a,scrollIntoView:!0})}function Zu(i,e,t,n){let r=Math.min(i.length,e.length),s=0;for(;s<r&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&i.length==e.length)return null;let o=i.length,a=e.length;for(;o>0&&a>0&&i.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&i.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function ym(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:s}=i.observer.selectionRange;return t&&(e.push(new Ra(t,n)),(r!=t||s!=n)&&e.push(new Ra(r,s))),e}function wm(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?be.single(t+e,n+e):null}function Xr(i,e){return e.head==i.main.head&&e.anchor==i.main.anchor}class vm{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ge.safari&&e.contentDOM.addEventListener("input",()=>null),ge.gecko&&Dm(e.contentDOM.ownerDocument)}handleEvent(e){!Cm(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let r of n.observers)r(this.view,t);for(let r of n.handlers){if(t.defaultPrevented)break;if(r(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=km(e),n=this.handlers,r=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=n[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in n)s!="scroll"&&!t[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&ef.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ge.android&&ge.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ge.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Qu.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Sm.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Kn(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:ge.safari&&!ge.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ma(i,e){return(t,n)=>{try{return e.call(i,n,t)}catch(r){At(t.state,r)}}}function km(i){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of i){let r=n.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&t(a).handlers.push(Ma(n.value,l))}if(o)for(let a in o){let l=o[a];l&&t(a).observers.push(Ma(n.value,l))}}for(let n in Nt)t(n).handlers.push(Nt[n]);for(let n in _t)t(n).observers.push(_t[n]);return e}const Qu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Sm="dthko",ef=[16,17,18,20,91,92,224,225],dr=6;function pr(i){return Math.max(0,i)*.7+8}function xm(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class Am{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Rg(e.contentDOM),this.atoms=e.state.facet(nr).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Oe.allowMultipleSelections)&&Em(e,t),this.dragging=Tm(e,t)&&rf(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&xm(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=gl(this.view);e.clientX-l.left<=r+dr?t=-pr(r-e.clientX):e.clientX+l.right>=o-dr&&(t=pr(e.clientX-o)),e.clientY-l.top<=s+dr?n=-pr(s-e.clientY):e.clientY+l.bottom>=a-dr&&(n=pr(e.clientY-a)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=Ku(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Em(i,e){let t=i.state.facet(Bu);return t.length?t[0](e):ge.mac?e.metaKey:e.ctrlKey}function _m(i,e){let t=i.state.facet(Ou);return t.length?t[0](e):ge.mac?!e.altKey:!e.ctrlKey}function Tm(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=ei(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Cm(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Ge.get(t))&&n.isWidget()&&!n.isHidden&&n.widget.ignoreEvent(e))return!1;return!0}const Nt=Object.create(null),_t=Object.create(null),tf=ge.ie&&ge.ie_version<15||ge.ios&&ge.webkit_version<604;function Rm(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),nf(i,t.value)},50)}function ds(i,e,t){for(let n of i.facet(e))t=n(t,i);return t}function nf(i,e){e=ds(i.state,cl,e);let{state:t}=i,n,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(To!=null&&t.selection.ranges.every(l=>l.empty)&&To==s.toString()){let l=-1;n=t.changeByRange(h=>{let u=t.doc.lineAt(h.from);if(u.from==l)return{range:h};l=u.from;let c=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:c},range:be.cursor(h.from+c.length)}})}else o?n=t.changeByRange(l=>{let h=s.line(r++);return{changes:{from:l.from,to:l.to,insert:h.text},range:be.cursor(l.from+h.length)}}):n=t.replaceSelection(s);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}_t.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};Nt.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);_t.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};_t.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};Nt.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of i.state.facet(Lu))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=Im(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new Am(i,e,t,n)),n&&i.observer.ignore(()=>{ku(i.contentDOM);let s=i.root.activeElement;s&&!s.contains(i.contentDOM)&&s.blur()});let r=i.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}else i.inputState.setSelectionOrigin("select.pointer");return!1};function Ia(i,e,t,n){if(n==1)return be.cursor(e,t);if(n==2)return am(i.state,e,t);{let r=i.docView.lineAt(e,t),s=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<i.state.doc.length&&a==s.to&&a++,be.range(o,a)}}const Mm=ge.ie&&ge.ie_version<=11;let Ba=null,Oa=0,La=0;function rf(i){if(!Mm)return i.detail;let e=Ba,t=La;return Ba=i,La=Date.now(),Oa=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Oa+1)%3:1}function Im(i,e){let t=i.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),n=rf(e),r=i.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),r=r.map(s.changes))},get(s,o,a){let l=i.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),h,u=Ia(i,l.pos,l.assoc,n);if(t.pos!=l.pos&&!o){let c=Ia(i,t.pos,t.assoc,n),p=Math.min(c.from,u.from),m=Math.max(c.to,u.to);u=p<u.from?be.range(p,m):be.range(m,p)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&n==1&&r.ranges.length>1&&(h=Bm(r,l.pos))?h:a?r.addRange(u):be.create([u])}}}function Bm(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:r}=i.ranges[t];if(n<=e&&r>=e)return be.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}Nt.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let r=i.docView.tile.nearest(e.target);if(r&&r.isWidget()){let s=r.posAtStart,o=s+r.length;(s>=t.to||o<=t.from)&&(t=be.range(s,o))}}let{inputState:n}=i;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",ds(i.state,dl,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Nt.dragend=i=>(i.inputState.draggedContent=null,!1);function Da(i,e,t,n){if(t=ds(i.state,cl,t),!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=i.inputState,o=n&&s&&_m(i,e)?{from:s.from,to:s.to}:null,a={from:r,insert:t},l=i.state.changes(o?[o,a]:a);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),i.inputState.draggedContent=null}Nt.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),r=0,s=()=>{++r==t.length&&Da(i,e,n.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Da(i,e,n,!0),!0}return!1};Nt.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=tf?null:e.clipboardData;return t?(nf(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Rm(i),!1)};function Om(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function Lm(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of i.selection.ranges){let o=i.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}n=!0}return{text:ds(i,dl,e.join(i.lineBreak)),ranges:t,linewise:n}}let To=null;Nt.copy=Nt.cut=(i,e)=>{let t=ei(i.root);if(t&&!Ii(i.contentDOM,t))return!1;let{text:n,ranges:r,linewise:s}=Lm(i.state);if(!n&&!s)return!1;To=s?n:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=tf?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(Om(i,n),!1)};const sf=Pn.define();function of(i,e){let t=[];for(let n of i.facet(Pu)){let r=n(i,e);r&&t.push(r)}return t.length?i.update({effects:t,annotations:sf.of(!0)}):null}function lf(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=of(i.state,e);t?i.dispatch(t):i.update([])}},10)}_t.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),lf(i)};_t.blur=i=>{i.observer.clearSelectionRange(),lf(i)};_t.compositionstart=_t.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};_t.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,ge.chrome&&ge.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};_t.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};Nt.beforeinput=(i,e)=>{var t,n;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(i.inputState.insertingText=e.data,i.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&i.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=i.posAtDOM(a.startContainer,a.startOffset),h=i.posAtDOM(a.endContainer,a.endOffset);return ml(i,{from:l,to:h,insert:i.state.toText(s)},null),!0}}let r;if(ge.chrome&&ge.android&&(r=Qu.find(s=>s.inputType==e.inputType))&&(i.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return ge.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),ge.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>_t.compositionend(i,e),20),!1};const Na=new Set;function Dm(i){Na.has(i)||(Na.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const Pa=["pre-wrap","normal","pre-line","break-spaces"];let Ln=!1;function Co(){Ln=!1}class af{constructor(e){this.lineWrapping=e,this.doc=Le.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Pa.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,s,o){let a=Pa.indexOf(e)>-1,l=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(n-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let h=0;h<o.length;h++){let u=o[h];u<0?h++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class hf{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class xt{constructor(e,t,n,r,s){this.from=e,this.length=t,this.top=n,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Xe.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof In?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new xt(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var $e=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}($e||($e={}));const Ir=.001;class st{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ir&&(Ln=!0),this.height=e)}replace(e,t,n){return st.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let s=this,o=n.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:u,toB:c}=r[a],p=s.lineAt(l,$e.ByPosNoHeight,n.setDoc(t),0,0),m=p.to>=h?p:s.lineAt(h,$e.ByPosNoHeight,n,0,0);for(c+=m.to-h,h=m.to;a>0&&p.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<p.from&&(p=s.lineAt(l,$e.ByPosNoHeight,n,0,0));u+=p.from-l,l=p.from;let f=bl.build(n.setDoc(o),e,u,c);s=Jr(s,s.replace(l,h,f))}return s.updateHeight(n,0)}static empty(){return new mt(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,s=0;for(;;)if(t==n)if(r>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),n+=1+a.break,r-=a.size}else if(s>r*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[t++];a&&(r+=a.size)}else{let a=e[--n];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new Pm(st.of(e.slice(0,t)),o,st.of(e.slice(n)))}}function Jr(i,e){return i==e?i:(i.constructor!=e.constructor&&(Ln=!0),e)}st.prototype.size=1;const Nm=Te.replace({});class uf extends st{constructor(e,t,n){super(e,t),this.deco=n,this.spaceAbove=0}mainBlock(e,t){return new xt(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,n,r){return this.spaceAbove&&e<n+this.spaceAbove?new xt(r,0,n,this.spaceAbove,Nm):this.mainBlock(n,r)}lineAt(e,t,n,r,s){let o=this.mainBlock(r,s);return this.spaceAbove?this.blockAt(0,n,r,s).join(o):o}forEachLine(e,t,n,r,s,o){e<=s+this.length&&t>=s&&o(this.lineAt(0,$e.ByPos,n,r,s))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class mt extends uf{constructor(e,t,n){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=n}mainBlock(e,t){return new xt(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof mt||r instanceof Ze&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ze?r=new mt(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):st.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(n||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ze extends st{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:n,lastLine:r,perLine:o,perChar:a}}blockAt(e,t,n,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,r);if(t.lineWrapping){let h=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=t.doc.lineAt(h),c=a+u.length*l,p=Math.max(n,e-c/2);return new xt(u.from,u.length,p,c,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-n)/a))),{from:u,length:c}=t.doc.line(s+h);return new xt(u,c,n+a*h,a,0)}}lineAt(e,t,n,r,s){if(t==$e.ByHeight)return this.blockAt(e,n,r,s);if(t==$e.ByPosNoHeight){let{from:m,to:f}=n.doc.lineAt(e);return new xt(m,f-m,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s),h=n.doc.lineAt(e),u=a+h.length*l,c=h.number-o,p=r+a*c+l*(h.from-s-c);return new xt(h.from,h.length,Math.max(r,Math.min(p,r+this.height-u)),u,0)}forEachLine(e,t,n,r,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(n,s);for(let u=e,c=r;u<=t;){let p=n.doc.lineAt(u);if(u==e){let f=p.number-a;c+=l*f+h*(e-s-f)}let m=l+h*p.length;o(new xt(p.from,p.length,c,m,0)),c+=m,u=p.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let s=n[n.length-1];s instanceof Ze?n[n.length-1]=new Ze(s.length+r):n.push(null,new Ze(r-1))}if(e>0){let s=n[0];s instanceof Ze?n[0]=new Ze(e+s.length):n.unshift(new Ze(e-1),null)}return st.of(n)}decomposeLeft(e,t){t.push(new Ze(e-1),null)}decomposeRight(e,t){t.push(null,new Ze(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],a=Math.max(t,r.from),l=-1;for(r.from>t&&o.push(new Ze(r.from-t-1).updateHeight(e,t));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let c=r.heights[r.index++],p=0;c<0&&(p=-c,c=r.heights[r.index++]),l==-1?l=c:Math.abs(c-l)>=Ir&&(l=-2);let m=new mt(u,c,p);m.outdated=!1,o.push(m),a+=u+1}a<=s&&o.push(null,new Ze(s-a).updateHeight(e,a));let h=st.of(o);return(l<0||Math.abs(h.height-this.height)>=Ir||Math.abs(l-this.heightMetrics(e,t).perLine)>=Ir)&&(Ln=!0),Jr(this,h)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Pm extends st{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let s=n+this.left.height;return e<s?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,n,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=t==$e.ByHeight?e<o:e<a,h=l?this.left.lineAt(e,t,n,r,s):this.right.lineAt(e,t,n,o,a);if(this.break||(l?h.to<a:h.from>a))return h;let u=t==$e.ByPosNoHeight?$e.ByPosNoHeight:$e.ByPos;return l?h.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,r,s).join(h)}forEachLine(e,t,n,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,r,s,o),t>=l&&this.right.forEachLine(e,t,n,a,l,o);else{let h=this.lineAt(l,$e.ByPos,n,r,s);e<h.from&&this.left.forEachLine(e,h.from-1,n,r,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,n,a,l,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of n)s.push(a);if(e>0&&Fa(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),Fa(s,a)}return st.of(s)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?st.of(this.break?[e,null,t]:[e,t]):(this.left=Jr(this.left,e),this.right=Jr(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return r&&r.from<=t+s.length&&r.more?l=s=s.updateHeight(e,t,n,r):s.updateHeight(e,t,n),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,n,r):o.updateHeight(e,a,n),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Fa(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Ze&&(n=i[e+1])instanceof Ze&&i.splice(e-1,3,new Ze(t.length+1+n.length))}const Fm=5;class bl{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof mt?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new mt(n-this.pos,-1,0)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new uf(o,r,n)):(o||s||r>=Fm)&&this.addLineDeco(r,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new mt(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let n=new Ze(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof mt)return e;let t=new mt(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof mt)&&!this.isCovered?this.nodes.push(new mt(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof mt&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let s=new bl(n,e);return Re.spans(t,n,r,s,0),s.finish(n)}}function $m(i,e,t){let n=new Wm;return Re.compare(i,e,t,n,0),n.changes}class Wm{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Gn(e,t,this.changes,5)}}function Um(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(r.innerHeight,t.bottom);for(let h=i.parentNode;h&&h!=n.body;)if(h.nodeType==1){let u=h,c=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&c.overflow!="visible"){let p=u.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=Math.min(h==i.parentNode?r.innerHeight:l,p.bottom)}h=c.position=="absolute"||c.position=="fixed"?u.offsetParent:u.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function jm(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Hm(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Ps{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],s=t[n];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,t){return Te.replace({widget:new Vm(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Vm extends Zt{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class $a{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Wa,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(hs).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new af(t),this.stateDeco=Ua(e),this.heightMap=st.empty().applyChanges(this.stateDeco,Le.empty,this.heightOracle.setDoc(e.doc),[new yt(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Te.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new gr(s,o))}}return this.viewports=e.sort((n,r)=>n.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Wa:new yl(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ei(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=Ua(this.state);let r=e.changedRanges,s=yt.extendWithRanges(r,$m(n,this.stateDeco,e?e.changes:Ke.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Co(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ln)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let h=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($u)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Pe.RTL:Pe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,u=0;if(a.width&&a.height){let{scaleX:E,scaleY:A}=vu(t,a);(E>.005&&Math.abs(this.scaleX-E)>.005||A>.005&&Math.abs(this.scaleY-A)>.005)&&(this.scaleX=E,this.scaleY=A,h|=16,o=l=!0)}let c=(parseInt(n.paddingTop)||0)*this.scaleY,p=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=p)&&(this.paddingTop=c,this.paddingBottom=p,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=Su(e.scrollDOM);let f=(this.printing?Hm:Um)(t,this.paddingTop),g=f.top-this.pixelViewport.top,w=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(l=!0)),!this.inView&&!this.scrollTarget&&!jm(e.dom))return 0;let M=a.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),l){let E=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(E)&&(o=!0),o||r.lineWrapping&&Math.abs(M-this.contentDOMWidth)>r.charWidth){let{lineHeight:A,charWidth:y,textHeight:k}=e.docView.measureTextSize();o=A>0&&r.refresh(s,A,y,k,Math.max(5,M/y),E),o&&(e.docView.minWidth=0,h|=16)}g>0&&w>0?u=Math.max(g,w):g<0&&w<0&&(u=Math.min(g,w)),Co();for(let A of this.viewports){let y=A.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(A);this.heightMap=(o?st.empty().applyChanges(this.stateDeco,Le.empty,this.heightOracle,[new yt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new hf(A.from,y))}Ln&&(h|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),h|=this.updateForViewport()),(h&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new gr(r.lineAt(o-n*1e3,$e.ByHeight,s,0,0).from,r.lineAt(a+(1-n)*1e3,$e.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<l.from||h>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=r.lineAt(h,$e.ByPos,s,0,0),p;t.y=="center"?p=(c.top+c.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&h<l.from?p=c.top:p=c.bottom-u,l=new gr(r.lineAt(p-1e3/2,$e.ByHeight,s,0,0).from,r.lineAt(p+u+1e3/2,$e.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new gr(this.heightMap.lineAt(n,$e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,$e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,$e.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(n,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Ps(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Pe.LTR&&!n)return[];let a=[],l=(u,c,p,m)=>{if(c-u<s)return;let f=this.state.selection.main,g=[f.from];f.empty||g.push(f.to);for(let _ of g)if(_>u&&_<c){l(u,_-10,p,m),l(_+10,c,p,m);return}let w=qm(e,_=>_.from>=p.from&&_.to<=p.to&&Math.abs(_.from-u)<s&&Math.abs(_.to-c)<s&&!g.some(M=>_.from<M&&_.to>M));if(!w){if(c<p.to&&t&&n&&t.visibleRanges.some(x=>x.from<=c&&x.to>=c)){let x=t.moveToLineBoundary(be.cursor(c),!1,!0).head;x>u&&(c=x)}let _=this.gapSize(p,u,c,m),M=n||_<2e6?_:2e6;w=new Ps(u,c,_,M)}a.push(w)},h=u=>{if(u.length<o||u.type!=Xe.Text)return;let c=zm(u.from,u.to,this.stateDeco);if(c.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,m,f;if(n){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,_;if(p!=null){let M=br(c,p),x=((this.visibleBottom-this.visibleTop)/2+g)/u.height;w=M-x,_=M+x}else w=(this.visibleTop-u.top-g)/u.height,_=(this.visibleBottom-u.top+g)/u.height;m=mr(c,w),f=mr(c,_)}else{let g=c.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,_=0;if(g>2e6)for(let y of e)y.from>=u.from&&y.from<u.to&&y.size!=y.displaySize&&y.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=y.size-y.displaySize);let M=this.pixelViewport.left+_,x=this.pixelViewport.right+_,E,A;if(p!=null){let y=br(c,p),k=((x-M)/2+w)/g;E=y-k,A=y+k}else E=(M-w)/g,A=(x+w)/g;m=mr(c,E),f=mr(c,A)}m>u.from&&l(u.from,m,u,c),f<u.to&&l(f,u.to,u,c)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(h):h(u);return a}gapSize(e,t,n,r){let s=br(r,n)-br(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Ps.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Te.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Re.spans(t,this.viewport.from,this.viewport.to,{span(s,o){n.push({from:s,to:o})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let s=0;s<n.length&&!(r&8);s++){let o=this.visibleRanges[s],a=n[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ei(this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ei(this.heightMap.lineAt(this.scaler.fromDOM(e),$e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ei(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class gr{constructor(e,t){this.from=e,this.to=t}}function zm(i,e,t){let n=[],r=i,s=0;return Re.spans(t,i,e,{span(){},point(o,a){o>r&&(n.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(n.push({from:r,to:e}),s+=e-r),{total:s,ranges:n}}function mr({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(n<=a)return s+n;n-=a}}function br(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function qm(i,e){for(let t of i)if(e(t))return t}const Wa={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};function Ua(i){let e=i.facet(us).filter(n=>typeof n!="function"),t=i.facet(pl).filter(n=>typeof n!="function");return t.length&&e.push(Re.join(t)),e}class yl{constructor(e,t,n){let r=0,s=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let h=t.lineAt(a,$e.ByPos,e,0,0).top,u=t.lineAt(l,$e.ByPos,e,0,0).bottom;return r+=u-h,{from:a,to:l,top:h,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return n+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,r=s.domBottom}}eq(e){return e instanceof yl?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function Ei(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new xt(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(r=>Ei(r,e)):i._content)}const yr=we.define({combine:i=>i.join(" ")}),Ro=we.define({combine:i=>i.indexOf(!0)>-1}),Mo=bn.newName(),ff=bn.newName(),cf=bn.newName(),df={"&light":"."+ff,"&dark":"."+cf};function Io(i,e,t){return new bn(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const Gm=Io("."+Mo,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},df),Km={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fs=ge.ie&&ge.ie_version<=11;class Ym{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Mg,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(ge.ie&&ge.ie_version<=11||ge.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&ge.android&&e.constructor.EDIT_CONTEXT!==!1&&!(ge.chrome&&ge.chrome_version<126)&&(this.editContext=new Jm(e),e.state.facet(tn)&&(e.contentDOM.editContext=this.editContext.editContext)),Fs&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(tn)?n.root.activeElement!=this.dom:!Ii(this.dom,r))return;let s=r.anchorNode&&n.docView.tile.nearest(r.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ge.ie&&ge.ie_version<=11||ge.android&&ge.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Oi(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ei(e.root);if(!t)return!1;let n=ge.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Xm(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=Ii(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Bg(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Km),Fs&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fs&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Kn(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Ii(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new mm(this.view,e,t,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=Ju(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!Xr(this.view.state.selection,t.newSel.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let n=ja(t,e.previousSibling||e.target.previousSibling,-1),r=ja(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(tn)!=e.state.facet(tn)&&(e.view.contentDOM.editContext=e.state.facet(tn)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ja(i,e,t){for(;e;){let n=Ge.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function Ha(i,e){let t=e.startContainer,n=e.startOffset,r=e.endContainer,s=e.endOffset,o=i.docView.domAtPos(i.state.selection.main.anchor,1);return Oi(o.node,o.offset,r,s)&&([t,n,r,s]=[r,s,t,n]),{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:s}}function Xm(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return Ha(i,r)}let t=null;function n(r){r.preventDefault(),r.stopImmediatePropagation(),t=r.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),t?Ha(i,t):null}class Jm{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let h=l-a>n.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let u=Zu(e.state.sliceDoc(a,l),n.text,(h?r.from:r.to)-a,h?"end":null);if(!u){let p=be.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));Xr(p,r)||e.dispatch({selection:p,userEvent:"select"});return}let c={from:u.from+a,to:u.toA+a,insert:Le.of(n.text.slice(u.from,u.toB).split(`
`))};if((ge.mac||ge.android)&&c.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Le.of([n.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let p=this.to-this.from+(c.to-c.from+c.insert.length);ml(e,c,be.single(this.toEditorPos(n.selectionStart,p),this.toEditorPos(n.selectionEnd,p)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),c.from<c.to&&!c.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(t.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let r=[],s=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=n=>{let r=[];for(let s of n.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(l<h){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Te.mark({attributes:{style:u}}).range(l,h))}}}e.dispatch({effects:Uu.of(Te.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let r=ei(n.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,h)=>{if(n)return;let u=h.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(h)){r=this.pendingContextChange=null,t+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=u}t+=u}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ae{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(s=>n(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ig(e.parent)||document,this.viewState=new $a(e.state||Oe.create(e)),e.scrollTo&&e.scrollTo.is(cr)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Vn).map(r=>new Bs(r));for(let r of this.plugins)r.update(this);this.observer=new Ym(this),this.inputState=new vm(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _a(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof tt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(sf))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=of(s,o),l||(a=1));let h=this.observer.delayedAndroidKey,u=null;if(h?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Oe.phrases)!=this.state.facet(Oe.phrases))return this.setState(s);r=Vi.create(this,s,e),r.flags|=a;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(c&&(c=c.map(p.changes)),p.scrollIntoView){let{main:m}=p.state.selection;c=new Yn(m.empty?m:be.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of p.effects)m.is(cr)&&(c=m.value.clip(this.state))}this.viewState.update(r,c),this.bidiCache=Zr.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(xi)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(yr)!=r.state.facet(yr)&&(this.viewState.mustMeasureContent=!0),(t||n||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!r.empty)for(let p of this.state.facet(xo))try{p(r)}catch(m){At(this.state,m,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Ju(this,u)&&h.force&&Kn(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new $a(e),this.plugins=e.facet(Vn).map(n=>new Bs(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new _a(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Vn),n=e.state.facet(Vn);if(t!=n){let r=[];for(let s of n){let o=t.indexOf(s);if(o<0)r.push(new Bs(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){At(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Su(n))s=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(r);s=m.from,o=m.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];l&4||([this.measureRequests,h]=[h,this.measureRequests]);let u=h.map(m=>{try{return m.read(this)}catch(f){return At(this.state,f),Va}}),c=Vi.create(this,this.state,[]),p=!1;c.flags|=l,t?t.flags|=l:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),p=this.docView.update(c),p&&this.docViewUpdate());for(let m=0;m<h.length;m++)if(u[m]!=Va)try{let f=h[m];f.write&&f.write(u[m],this)}catch(f){At(this.state,f)}if(p&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let f=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(f>1||f<-1){r=r+f,n.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(xo))a(t)}get themeClasses(){return Mo+" "+(this.state.facet(Ro)?cf:ff)+" "+this.state.facet(yr)}updateAttrs(){let e=za(this,ju,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(tn)?"true":"false",class:"cm-content",style:`${ge.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),za(this,hs,t);let n=this.observer.ignore(()=>{let r=va(this.contentDOM,this.contentAttrs,t),s=va(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(Ae.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(xi);let e=this.state.facet(Ae.cspNonce);bn.mount(this.root,this.styleModules.concat(Gm).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Ns(this,e,Ta(this,e,t,n))}moveByGroup(e,t){return Ns(this,e,Ta(this,e,t,n=>fm(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=n[t?n.length-1:0];return be.cursor(s.side(t,r)+e.from,s.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return um(this,e,t,n)}moveVertically(e,t,n){return Ns(this,e,cm(this,e,t,n))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let n=_o(this,e,t);return n&&n.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),_o(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Gt.find(s,e-r.from,-1,t)];return ji(n,o.dir==Pe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Fu)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Zm)return Ru(e.length);let t=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Tu(s.isolates,n=xa(this,e))))return s.order;n||(n=xa(this,e));let r=Cu(e.text,t,n);return this.bidiCache.push(new Zr(e.from,e.to,t,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ge.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{ku(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return cr.of(new Yn(typeof e=="number"?be.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return cr.of(new Yn(be.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return He.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return He.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=bn.newName(),r=[yr.of(n),xi.of(Io(`.${n}`,e))];return t&&t.dark&&r.push(Ro.of(!0)),r}static baseTheme(e){return oi.lowest(xi.of(Io("."+Mo,e,df)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&Ge.get(n)||Ge.get(e);return((t=r?.root)===null||t===void 0?void 0:t.view)||null}}Ae.styleModule=xi;Ae.inputHandler=Nu;Ae.clipboardInputFilter=cl;Ae.clipboardOutputFilter=dl;Ae.scrollHandler=Wu;Ae.focusChangeEffect=Pu;Ae.perLineTextDirection=Fu;Ae.exceptionSink=Du;Ae.updateListener=xo;Ae.editable=tn;Ae.mouseSelectionStyle=Lu;Ae.dragMovesSelection=Ou;Ae.clickAddsSelectionRange=Bu;Ae.decorations=us;Ae.blockWrappers=Hu;Ae.outerDecorations=pl;Ae.atomicRanges=nr;Ae.bidiIsolatedRanges=Vu;Ae.scrollMargins=zu;Ae.darkTheme=Ro;Ae.cspNonce=we.define({combine:i=>i.length?i[0]:""});Ae.contentAttributes=hs;Ae.editorAttributes=ju;Ae.lineWrapping=Ae.contentAttributes.of({class:"cm-lineWrapping"});Ae.announce=De.define();const Zm=4096,Va={};class Zr{constructor(e,t,n,r,s,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:Pe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&n.push(new Zr(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function za(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let s=n[r],o=typeof s=="function"?s(i):s;o&&hl(o,t)}return t}const Qm=ge.mac?"mac":ge.windows?"win":ge.linux?"linux":"key";function e0(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,a;for(let l=0;l<t.length-1;++l){const h=t[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function wr(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const t0=oi.default(Ae.domEventHandlers({keydown(i,e){return mf(gf(e.state),i,e,"editor")}})),pf=we.define({enables:t0}),qa=new WeakMap;function gf(i){let e=i.facet(pf),t=qa.get(e);return t||qa.set(e,t=r0(e.reduce((n,r)=>n.concat(r),[]))),t}function n0(i,e,t){return mf(gf(i.state),e,i,t)}let fn=null;const i0=4e3;function r0(i,e=Qm){let t=Object.create(null),n=Object.create(null),r=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,h,u)=>{var c,p;let m=t[o]||(t[o]=Object.create(null)),f=a.split(/ (?!$)/).map(_=>e0(_,e));for(let _=1;_<f.length;_++){let M=f.slice(0,_).join(" ");r(M,!0),m[M]||(m[M]={preventDefault:!0,stopPropagation:!1,run:[x=>{let E=fn={view:x,prefix:M,scope:o};return setTimeout(()=>{fn==E&&(fn=null)},i0),!0}]})}let g=f.join(" ");r(g,!1);let w=m[g]||(m[g]={preventDefault:!1,stopPropagation:!1,run:((p=(c=m._any)===null||c===void 0?void 0:c.run)===null||p===void 0?void 0:p.slice())||[]});l&&w.run.push(l),h&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of i){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let u=t[h]||(t[h]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=o;for(let p in u)u[p].run.push(m=>c(m,Bo))}let l=o[e]||o.key;if(l)for(let h of a)s(h,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let Bo=null;function mf(i,e,t,n){Bo=e;let r=Sg(e),s=rl(r,0),o=tu(s)==r.length&&r!=" ",a="",l=!1,h=!1,u=!1;fn&&fn.view==t&&fn.scope==n&&(a=fn.prefix+" ",ef.indexOf(e.keyCode)<0&&(h=!0,fn=null));let c=new Set,p=w=>{if(w){for(let _ of w.run)if(!c.has(_)&&(c.add(_),_(t)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),h=!0)}return!1},m=i[n],f,g;return m&&(p(m[a+wr(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ge.windows&&e.ctrlKey&&e.altKey)&&!(ge.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(f=yn[e.keyCode])&&f!=r?(p(m[a+wr(f,e,!0)])||e.shiftKey&&(g=Ui[e.keyCode])!=r&&g!=f&&p(m[a+wr(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(m[a+wr(r,e,!0)])&&(l=!0),!l&&p(m._any)&&(l=!0)),h&&(l=!0),l&&u&&e.stopPropagation(),Bo=null,l}class ai{constructor(e,t,n,r,s){this.className=e,this.left=t,this.top=n,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let s=bf(e);return[new ai(t,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return s0(e,t,n)}}function bf(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==Pe.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function Ga(i,e,t,n){let r=i.coordsAtPos(e,t*2);if(!r)return n;let s=i.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=i.posAtCoords({x:s.left+1,y:o}),l=i.posAtCoords({x:s.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function s0(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),r=Math.min(t.to,i.viewport.to),s=i.textDirection==Pe.LTR,o=i.contentDOM,a=o.getBoundingClientRect(),l=bf(i),h=o.querySelector(".cm-line"),u=h&&window.getComputedStyle(h),c=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=a.right-(u?parseInt(u.paddingRight):0),m=Eo(i,n,1),f=Eo(i,r,-1),g=m.type==Xe.Text?m:null,w=f.type==Xe.Text?f:null;if(g&&(i.lineWrapping||m.widgetLineBreaks)&&(g=Ga(i,n,1,g)),w&&(i.lineWrapping||f.widgetLineBreaks)&&(w=Ga(i,r,-1,w)),g&&w&&g.from==w.from&&g.to==w.to)return M(x(t.from,t.to,g));{let A=g?x(t.from,null,g):E(m,!1),y=w?x(null,t.to,w):E(f,!0),k=[];return(g||m).to<(w||f).from-(g&&w?1:0)||m.widgetLineBreaks>1&&A.bottom+i.defaultLineHeight/2<y.top?k.push(_(c,A.bottom,p,y.top)):A.bottom<y.top&&i.elementAtHeight((A.bottom+y.top)/2).type==Xe.Text&&(A.bottom=y.top=(A.bottom+y.top)/2),M(A).concat(k).concat(M(y))}function _(A,y,k,R){return new ai(e,A-l.left,y-l.top,k-A,R-y)}function M({top:A,bottom:y,horizontal:k}){let R=[];for(let I=0;I<k.length;I+=2)R.push(_(k[I],A,k[I+1],y));return R}function x(A,y,k){let R=1e9,I=-1e9,z=[];function q(P,$,C,K,j){let G=i.coordsAtPos(P,P==k.to?-2:2),le=i.coordsAtPos(C,C==k.from?2:-2);!G||!le||(R=Math.min(G.top,le.top,R),I=Math.max(G.bottom,le.bottom,I),j==Pe.LTR?z.push(s&&$?c:G.left,s&&K?p:le.right):z.push(!s&&K?c:le.left,!s&&$?p:G.right))}let D=A??k.from,J=y??k.to;for(let P of i.visibleRanges)if(P.to>D&&P.from<J)for(let $=Math.max(P.from,D),C=Math.min(P.to,J);;){let K=i.state.doc.lineAt($);for(let j of i.bidiSpans(K)){let G=j.from+K.from,le=j.to+K.from;if(G>=C)break;le>$&&q(Math.max(G,$),A==null&&G<=D,Math.min(le,C),y==null&&le>=J,j.dir)}if($=K.to+1,$>=C)break}return z.length==0&&q(D,A==null,J,y==null,i.textDirection),{top:R,bottom:I,horizontal:z}}function E(A,y){let k=a.top+(y?A.top:A.bottom);return{top:k,bottom:k,horizontal:[]}}}function o0(i,e){return i.constructor==e.constructor&&i.eq(e)}class l0{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Br)!=e.state.facet(Br)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(Br);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!o0(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e,ge.safari&&ge.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Br=we.define();function wl(i){return[He.define(e=>new l0(e,i)),Br.of(i)]}const ii=we.define({combine(i){return li(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function a0(i={}){return[ii.of(i),u0,f0,c0,$u.of(!0)]}function h0(i){return i.facet(ii)}function yf(i){return i.startState.facet(ii)!=i.state.facet(ii)}const u0=wl({above:!0,markers(i){let{state:e}=i,t=e.facet(ii),n=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:be.cursor(r.head,r.head>r.anchor?-1:1);for(let l of ai.forRange(i,o,a))n.push(l)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=yf(i);return t&&Ka(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){Ka(e.state,i)},class:"cm-cursorLayer"});function Ka(i,e){e.style.animationDuration=i.facet(ii).cursorBlinkRate+"ms"}const f0=wl({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:ai.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||yf(i)},class:"cm-selectionLayer"}),c0=oi.highest(Ae.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),wf=De.define({map(i,e){return i==null?null:e.mapPos(i)}}),_i=vt.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,n)=>n.is(wf)?n.value:t,i)}}),d0=He.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(_i);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(_i)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(_i),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let n=i.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-n.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(_i)!=i&&this.view.dispatch({effects:wf.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function p0(){return[_i,d0]}function Ya(i,e,t,n,r){e.lastIndex=0;for(let s=i.iterRange(t,n),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function g0(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:s}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=s:n.push({from:r,to:s});return n}class ps{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(a,l,h,u)=>r(u,h,h+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,h,u)=>{let c=n(a,l,h);c&&u(h,h+a[0].length,c)};else if(n)this.addMatch=(a,l,h,u)=>u(h,h+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new rn,n=t.add.bind(t);for(let{from:r,to:s}of g0(e,this.maxLength))Ya(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(n=Math.min(a,n),r=Math.max(l,r))}),e.viewportMoved||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let s of e.visibleRanges){let o=Math.max(s.from,n),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),h=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),c=Math.min(s.to,h.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){c=a;break}}let p=[],m,f=(g,w,_)=>p.push(_.range(g,w));if(l==h)for(this.regexp.lastIndex=u-l.from;(m=this.regexp.exec(l.text))&&m.index<c-l.from;)this.addMatch(m,e,m.index+l.from,f);else Ya(e.state.doc,this.regexp,u,c,(g,w)=>this.addMatch(w,e,g,f));t=t.update({filterFrom:u,filterTo:c,filter:(g,w)=>g<u||w>c,add:p})}}return t}}const Oo=/x/.unicode!=null?"gu":"g",m0=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,Oo),b0={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $s=null;function y0(){var i;if($s==null&&typeof document<"u"&&document.body){let e=document.body.style;$s=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return $s||!1}const Or=we.define({combine(i){let e=li(i,{render:null,specialChars:m0,addSpecialChars:null});return(e.replaceTabs=!y0())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Oo)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Oo)),e}});function w0(i={}){return[Or.of(i),v0()]}let Xa=null;function v0(){return Xa||(Xa=He.fromClass(class{constructor(i){this.view=i,this.decorations=Te.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Or)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new ps({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,s=rl(e[0],0);if(s==9){let o=r.lineAt(n),a=t.state.tabSize,l=ls(o.text,a,n-o.from);return Te.replace({widget:new A0((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Te.replace({widget:new x0(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Or);i.startState.facet(Or)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const k0="â¢";function S0(i){return i>=32?k0:i==10?"â¤":String.fromCharCode(9216+i)}class x0 extends Zt{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=S0(this.code),n=e.state.phrase("Control character")+" "+(b0[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class A0 extends Zt{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Ja=He.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(i){let{view:e}=i,t=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;t>=0&&t!=this.height&&(this.height=t,this.attrs={style:`padding-bottom: ${t}px`})}});function E0(){return[Ja,hs.of(i=>{var e;return((e=i.plugin(Ja))===null||e===void 0?void 0:e.attrs)||null})]}function _0(){return C0}const T0=Te.line({class:"cm-activeLine"}),C0=He.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let n of i.state.selection.ranges){let r=i.lineBlockAt(n.head);r.from>e&&(t.push(T0.range(r.from)),e=r.from)}return Te.set(t)}},{decorations:i=>i.decorations});class R0 extends Zt{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Bi(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=ji(t[0],n.direction!="rtl"),s=parseInt(n.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function M0(i){let e=He.fromClass(class{constructor(t){this.view=t,this.placeholder=i?Te.set([Te.widget({widget:new R0(i),side:1}).range(0)]):Te.none}get decorations(){return this.view.state.doc.length?Te.none:this.placeholder}},{decorations:t=>t.decorations});return typeof i=="string"?[e,Ae.contentAttributes.of({"aria-placeholder":i})]:e}const Lo=2e3;function I0(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>Lo||t.off>Lo||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=n;l<=r;l++){let h=i.doc.line(l);h.length<=a&&s.push(be.range(h.from+o,h.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=n;l<=r;l++){let h=i.doc.line(l),u=zr(h.text,o,i.tabSize,!0);if(u<0)s.push(be.cursor(h.to));else{let c=zr(h.text,a,i.tabSize);s.push(be.range(h.from+u,h.from+c))}}}return s}function B0(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function Za(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,s=r>Lo?-1:r==n.length?B0(i,e.clientX):ls(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:s,off:r}}function O0(i,e){let t=Za(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(r.changes)}},get(r,s,o){let a=Za(i,r);if(!a)return n;let l=I0(i.state,t,a);return l.length?o?be.create(l.concat(n.ranges)):be.create(l):n}}:null}function L0(i){let e=i?.eventFilter||(t=>t.altKey&&t.button==0);return Ae.mouseSelectionStyle.of((t,n)=>e(n)?O0(t,n):null)}const D0={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},N0={style:"cursor: crosshair"};function P0(i={}){let[e,t]=D0[i.key||"Alt"],n=He.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,Ae.contentAttributes.of(r=>{var s;return!((s=r.plugin(n))===null||s===void 0)&&s.isDown?N0:null})]}const vr="-10000px";class vf{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=n(o,s))}update(e,t){var n;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let h=s[l],u=-1;if(h){for(let c=0;c<this.tooltips.length;c++){let p=this.tooltips[c];p&&p.create==h.create&&(u=c)}if(u<0)o[l]=this.createTooltipView(h,l?o[l-1]:null),a&&(a[l]=!!h.above);else{let c=o[l]=this.tooltipViews[u];a&&(a[l]=t[u]),c.update&&c.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(a.forEach((l,h)=>t[h]=l),t.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function F0(i={}){return Lr.of(i)}function $0(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Lr=we.define({combine:i=>{var e,t,n;return{position:ge.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||$0}}}),Qa=new WeakMap,gs=He.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(Lr);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new vf(i,vl,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(Lr);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",t.dom.appendChild(r)}return t.dom.style.position=this.position,t.dom.style.top=vr,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(ge.safari){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else t=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(i=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),r=gl(this.view);return{visible:{left:n.left+r.left,top:n.top+r.top,right:n.right-r.right,bottom:n.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Lr).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:n,scaleX:r,scaleY:s}=i,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:u}=h,c=i.pos[a],p=i.size[a];if(!c||l.clip!==!1&&(c.bottom<=Math.max(t.top,n.top)||c.top>=Math.min(t.bottom,n.bottom)||c.right<Math.max(t.left,n.left)-.1||c.left>Math.min(t.right,n.right)+.1)){u.style.top=vr;continue}let m=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,f=m?7:0,g=p.right-p.left,w=(e=Qa.get(h))!==null&&e!==void 0?e:p.bottom-p.top,_=h.offset||U0,M=this.view.textDirection==Pe.LTR,x=p.width>n.right-n.left?M?n.left:n.right-p.width:M?Math.max(n.left,Math.min(c.left-(m?14:0)+_.x,n.right-g)):Math.min(Math.max(n.left,c.left-g+(m?14:0)-_.x),n.right-g),E=this.above[a];!l.strictSide&&(E?c.top-w-f-_.y<n.top:c.bottom+w+f+_.y>n.bottom)&&E==n.bottom-c.bottom>c.top-n.top&&(E=this.above[a]=!E);let A=(E?c.top-n.top:n.bottom-c.bottom)-f;if(A<w&&h.resize!==!1){if(A<this.view.defaultLineHeight){u.style.top=vr;continue}Qa.set(h,w),u.style.height=(w=A)/s+"px"}else u.style.height&&(u.style.height="");let y=E?c.top-w-f-_.y:c.bottom+f+_.y,k=x+g;if(h.overlap!==!0)for(let R of o)R.left<k&&R.right>x&&R.top<y+w&&R.bottom>y&&(y=E?R.top-w-2-f:R.bottom+f+2);if(this.position=="absolute"?(u.style.top=(y-i.parent.top)/s+"px",eh(u,(x-i.parent.left)/r)):(u.style.top=y/s+"px",eh(u,x/r)),m){let R=c.left+(M?_.x:-_.x)-(x+14-7);m.style.left=R/r+"px"}h.overlap!==!0&&o.push({left:x,top:y,right:k,bottom:y+w}),u.classList.toggle("cm-tooltip-above",E),u.classList.toggle("cm-tooltip-below",!E),h.positioned&&h.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=vr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function eh(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}const W0=Ae.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),U0={x:0,y:0},vl=we.define({enables:[gs,W0]}),zi=we.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])});class ms{static create(e){return new ms(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new vf(e,zi,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const j0=vl.compute([zi],i=>{let e=i.facet(zi);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:ms.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class H0{constructor(e,t,n,r,s){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.tile.nearest(t.target);if(!n)return;let r,s=1;if(n.isWidget())r=n.posAtStart;else{if(r=e.posAtCoords(t),r==null)return;let a=e.coordsAtPos(r);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),h=l&&l.dir==Pe.RTL?-1:1;s=t.x<a.left?-h:h}let o=this.source(e,r,s);if(o?.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>At(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(gs),t=e?e.manager.tooltips.findIndex(n=>n.create==ms.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!V0(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(n=(t=r[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!z0(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const kr=4;function V0(i,e){let{left:t,right:n,top:r,bottom:s}=i.getBoundingClientRect(),o;if(o=i.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=t-kr&&e.clientX<=n+kr&&e.clientY>=r-kr&&e.clientY<=s+kr}function z0(i,e,t,n,r,s){let o=i.scrollDOM.getBoundingClientRect(),a=i.documentTop+i.documentPadding.top+i.contentHeight;if(o.left>n||o.right<n||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=i.posAtCoords({x:n,y:r},!1);return l>=e&&l<=t}function q0(i,e={}){let t=De.define(),n=vt.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,lt.TrackDel);if(l!=null){let h=Object.assign(Object.create(null),a);h.pos=l,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}r=o}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(kf)&&(r=[]);return r},provide:r=>zi.from(r)});return{active:n,extension:[n,He.define(r=>new H0(r,i,n,t,e.hoverTime||300)),j0]}}function G0(i,e){let t=i.plugin(gs);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}function K0(i){return i.facet(zi).some(e=>e)}const kf=De.define(),Y0=kf.of(null);function X0(i){let e=i.plugin(gs);e&&e.maybeMeasure()}const Do=we.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function J0(i){return i?[Do.of(i)]:[]}function Sf(i,e){let t=i.plugin(xf),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const xf=He.fromClass(class{constructor(i){this.input=i.state.facet(Qr),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(Do);this.top=new Sr(i,!0,e.topContainer),this.bottom=new Sr(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(Do);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Sr(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sr(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(Qr);if(t!=this.input){let n=t.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of n){let h=this.specs.indexOf(l),u;h<0?(u=l(i.view),a.push(u)):(u=this.panels[h],u.update&&u.update(i)),r.push(u),(u.top?s:o).push(u)}this.specs=n,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>Ae.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Sr{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=th(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=th(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function th(i){let e=i.nextSibling;return i.remove(),e}const Qr=we.define({enables:xf});function Z0(i,e){let t,n=new Promise(o=>t=o),r=o=>eb(o,e,t);i.state.field(Dr,!1)?i.dispatch({effects:Af.of(r)}):i.dispatch({effects:De.appendConfig.of(Dr.init(()=>[r]))});let s=Ef.of(r);return{close:s,result:n.then(o=>((i.win.queueMicrotask||(l=>i.win.setTimeout(l,10)))(()=>{i.state.field(Dr).indexOf(r)>-1&&i.dispatch({effects:s})}),o))}}function Q0(i,e){let t=i.state.field(Dr,!1)||[];for(let n of t){let r=Sf(i,n);if(r&&r.dom.classList.contains(e))return r}return null}const Dr=vt.define({create(){return[]},update(i,e){for(let t of e.effects)t.is(Af)?i=[t.value].concat(i):t.is(Ef)&&(i=i.filter(n=>n!=t.value));return i},provide:i=>Qr.computeN([i],e=>e.field(i))}),Af=De.define(),Ef=De.define();function eb(i,e,t){let n=e.content?e.content(i,()=>o(null)):null;if(!n){if(n=Un("form"),e.input){let a=Un("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),n.appendChild(Un("label",(e.label||"")+": ",a))}else n.appendChild(document.createTextNode(e.label||""));n.appendChild(document.createTextNode(" ")),n.appendChild(Un("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let r=n.nodeName=="FORM"?[n]:n.querySelectorAll("form");for(let a=0;a<r.length;a++){let l=r[a];l.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),o(null)):h.keyCode==13&&(h.preventDefault(),o(l))}),l.addEventListener("submit",h=>{h.preventDefault(),o(l)})}let s=Un("div",n,Un("button",{onclick:()=>o(null),"aria-label":i.state.phrase("close"),class:"cm-dialog-close",type:"button"},["Ã"]));e.class&&(s.className=e.class),s.classList.add("cm-dialog");function o(a){s.contains(s.ownerDocument.activeElement)&&i.focus(),t(a)}return{dom:s,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=n.querySelector(e.focus):a=n.querySelector("input")||n.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class Jt extends mn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Jt.prototype.elementClass="";Jt.prototype.toDOM=void 0;Jt.prototype.mapMode=lt.TrackBefore;Jt.prototype.startSide=Jt.prototype.endSide=-1;Jt.prototype.point=!0;const Di=we.define(),_f=we.define(),tb={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Re.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ni=we.define();function Tf(i){return[kl(),Ni.of({...tb,...i})]}const No=we.define({combine:i=>i.some(e=>e)});function kl(i){let e=[nb];return i&&i.fixed===!1&&e.push(No.of(!0)),e}const nb=He.fromClass(class{constructor(i){this.view=i,this.domAfter=null,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(Ni).map(e=>new ih(i,e)),this.fixed=!i.state.facet(No);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}if(i.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(No)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Re.iter(this.view.state.facet(Di),this.view.viewport.from),n=[],r=this.gutters.map(s=>new ib(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Xe.Text&&o){Po(t,n,a.from);for(let l of r)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Xe.Text){Po(t,n,s.from);for(let o of r)o.line(this.view,s,n)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();i&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(i){let e=i.startState.facet(Ni),t=i.state.facet(Ni),n=i.docChanged||i.heightChanged||i.viewportChanged||!Re.eq(i.startState.facet(Di),i.state.facet(Di),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new ih(this.view,s)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:i=>Ae.scrollMargins.of(e=>{let t=e.plugin(i);if(!t||t.gutters.length==0||!t.fixed)return null;let n=t.dom.offsetWidth*e.scaleX,r=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Pe.LTR?{left:n,right:r}:{right:n,left:r}})});function nh(i){return Array.isArray(i)?i:[i]}function Po(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class ib{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Re.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let a=new Cf(e,o,s,n);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];Po(this.cursor,r,t.from),n.length&&(r=r.concat(n));let s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let s of e.state.facet(_f)){let o=s(e,t.widget,t);o&&(r||(r=[])).push(o)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class ih{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,a,r)&&r.preventDefault()});this.markers=nh(t.markers(e)),t.initialSpacer&&(this.spacer=new Cf(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=nh(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!Re.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Cf{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),rb(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,h=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let c=o;c<this.markers.length;c++)if(this.markers[c].compare(l)){a=c,h=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let c=r.nextSibling;r.remove(),r=c}}if(!l)break;l.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),h&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function rb(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const Rf=we.define(),Mf=we.define(),zn=we.define({combine(i){return li(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let s=n[r],o=t[r];n[r]=s?(a,l,h)=>s(a,l,h)||o(a,l,h):o}return n}})}});class Ws extends Jt{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Us(i,e){return i.state.facet(zn).formatNumber(e,i.state)}const sb=Ni.compute([zn],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Rf)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new Ws(Us(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let r of e.state.facet(Mf)){let s=r(e,t,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(zn)!=e.state.facet(zn),initialSpacer(e){return new Ws(Us(e,rh(e.state.doc.lines)))},updateSpacer(e,t){let n=Us(t.view,rh(t.view.state.doc.lines));return n==e.number?e:new Ws(n)},domEventHandlers:i.facet(zn).domEventHandlers,side:"before"}));function ob(i={}){return[zn.of(i),kl(),sb]}function rh(i){let e=9;for(;e<i;)e=e*10+9;return e}const lb=new class extends Jt{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ab=Di.compute(["selection"],i=>{let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.head).from;r>t&&(t=r,e.push(lb.range(r)))}return Re.of(e)});function hb(){return ab}function If(i){return He.define(e=>({decorations:i.createDeco(e),update(t){this.decorations=i.updateDeco(t,this.decorations)}}),{decorations:e=>e.decorations})}const ub=Te.mark({class:"cm-highlightTab"}),fb=Te.mark({class:"cm-highlightSpace"}),cb=If(new ps({regexp:/\t| /g,decoration:i=>i[0]=="	"?ub:fb,boundary:/\S/}));function db(){return cb}const pb=If(new ps({regexp:/\s+$/g,decoration:Te.mark({class:"cm-trailingSpace"})}));function gb(){return pb}const mb={HeightMap:st,HeightOracle:af,MeasuredHeights:hf,QueryType:$e,ChangedRange:yt,computeOrder:Cu,moveVisually:Iu,clearHeightChangeFlag:Co,getHeightChangeFlag:()=>Ln},rw=Object.freeze(Object.defineProperty({__proto__:null,BidiSpan:Gt,BlockInfo:xt,get BlockType(){return Xe},BlockWrapper:Qn,Decoration:Te,get Direction(){return Pe},EditorView:Ae,GutterMarker:Jt,MatchDecorator:ps,RectangleMarker:ai,ViewPlugin:He,ViewUpdate:Vi,WidgetType:Zt,__test:mb,closeHoverTooltips:Y0,crosshairCursor:P0,drawSelection:a0,dropCursor:p0,getDialog:Q0,getDrawSelectionConfig:h0,getPanel:Sf,getTooltip:G0,gutter:Tf,gutterLineClass:Di,gutterWidgetClass:_f,gutters:kl,hasHoverTooltips:K0,highlightActiveLine:_0,highlightActiveLineGutter:hb,highlightSpecialChars:w0,highlightTrailingWhitespace:gb,highlightWhitespace:db,hoverTooltip:q0,keymap:pf,layer:wl,lineNumberMarkers:Rf,lineNumberWidgetMarker:Mf,lineNumbers:ob,logException:At,panels:J0,placeholder:M0,rectangularSelection:L0,repositionTooltips:X0,runScopeHandlers:n0,scrollPastEnd:E0,showDialog:Z0,showPanel:Qr,showTooltip:vl,tooltips:F0},Symbol.toStringTag,{value:"Module"})),bb=1024;let yb=0;class js{constructor(e,t){this.from=e,this.to=t}}class Ie{constructor(e={}){this.id=yb++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=pt.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Ie.closedBy=new Ie({deserialize:i=>i.split(" ")});Ie.openedBy=new Ie({deserialize:i=>i.split(" ")});Ie.group=new Ie({deserialize:i=>i.split(" ")});Ie.isolate=new Ie({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});Ie.contextHash=new Ie({perNode:!0});Ie.lookAhead=new Ie({perNode:!0});Ie.mounted=new Ie({perNode:!0});class Pi{constructor(e,t,n,r=!1){this.tree=e,this.overlay=t,this.parser=n,this.bracketed=r}static get(e){return e&&e.props&&e.props[Ie.mounted.id]}}const wb=Object.create(null);class pt{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):wb,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new pt(e.name||"",t,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ie.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(Ie.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?n.name:r[s]];if(o)return o}}}}pt.none=new pt("",Object.create(null),0,8);class Sl{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let s of e){let o=s(n);if(o){r||(r=Object.assign({},n.props));let a=o[1],l=o[0];l.combine&&l.id in r&&(a=l.combine(r[l.id],a)),r[l.id]=a}}t.push(r?new pt(n.name,r,n.id,n.flags):n)}return new Sl(t)}}const xr=new WeakMap,sh=new WeakMap;var ze;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays",i[i.EnterBracketed=16]="EnterBracketed"})(ze||(ze={}));class Ue{constructor(e,t,n,r,s){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Pi.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new $o(this.topNode,e)}cursorAt(e,t=0,n=0){let r=xr.get(this)||this.topNode,s=new $o(r);return s.moveTo(e,t),xr.set(this,s._tree),s}get topNode(){return new ct(this,0,0,null)}resolve(e,t=0){let n=qi(xr.get(this)||this.topNode,e,t,!1);return xr.set(this,n),n}resolveInner(e,t=0){let n=qi(sh.get(this)||this.topNode,e,t,!0);return sh.set(this,n),n}resolveStack(e,t=0){return Sb(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&ze.IncludeAnonymous)>0;for(let l=this.cursor(o|ze.IncludeAnonymous);;){let h=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;h=!0}for(;h&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:El(pt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new Ue(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new Ue(pt.none,t,n,r)))}static build(e){return xb(e)}}Ue.empty=new Ue(pt.none,[],[],0);class xl{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xl(this.buffer,this.index)}}class vn{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return pt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,n,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Bf(s,r,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,t,n){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=r[a++],s[l++]=r[a++]-n;let h=s[l++]=r[a++]-n;s[l++]=r[a++]-e,o=Math.max(o,h)}return new vn(s,o,this.set)}}function Bf(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function qi(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof ct&&i.index<0?null:i.parent;if(!o)return i;i=o}let s=n?0:ze.IgnoreOverlays;if(n)for(let o=i,a=o.parent;a;o=a,a=o.parent)o instanceof ct&&o.index<0&&((r=a.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(i=a);for(;;){let o=i.enter(e,t,s);if(!o)return i;i=o}}class Of{cursor(e=0){return new $o(this,e)}getChild(e,t=null,n=null){let r=oh(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return oh(this,e,t,n)}resolve(e,t=0){return qi(this,e,t,!1)}resolveInner(e,t=0){return qi(this,e,t,!0)}matchContext(e){return Fo(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}}class ct extends Of{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,s=0){var o;for(let a=this;;){for(let{children:l,positions:h}=a._tree,u=t>0?l.length:-1;e!=u;e+=t){let c=l[e],p=h[e]+a.from;if(!(!(s&ze.EnterBracketed&&c instanceof Ue&&((o=Pi.get(c))===null||o===void 0?void 0:o.overlay)===null&&(p>=n||p+c.length<=n))&&!Bf(r,n,p,p+c.length))){if(c instanceof vn){if(s&ze.ExcludeBuffers)continue;let m=c.findChild(0,c.buffer.length,t,n-p,r);if(m>-1)return new Kt(new vb(a,c,e,p),null,m)}else if(s&ze.IncludeAnonymous||!c.type.isAnonymous||Al(c)){let m;if(!(s&ze.IgnoreMounts)&&(m=Pi.get(c))&&!m.overlay)return new ct(m.tree,p,e,a);let f=new ct(c,p,e,a);return s&ze.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?c.children.length-1:0,t,n,r,s)}}}if(s&ze.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,n=0){let r;if(!(n&ze.IgnoreOverlays)&&(r=Pi.get(this._tree))&&r.overlay){let s=e-this.from,o=n&ze.EnterBracketed&&r.bracketed;for(let{from:a,to:l}of r.overlay)if((t>0||o?a<=s:a<s)&&(t<0||o?l>=s:l>s))return new ct(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function oh(i,e,t,n){let r=i.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=r.type.is(t),!r.nextSibling())return s}for(;;){if(n!=null&&r.type.is(n))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return n==null?s:[]}}function Fo(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class vb{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Kt extends Of{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return s<0?null:new Kt(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,n=0){if(n&ze.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Kt(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Kt(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Kt(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,s=n.buffer[this.index+3];if(s>r){let o=n.buffer[this.index+1];e.push(n.slice(r,s,o)),t.push(0)}return new Ue(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Lf(i){if(!i.length)return null;let e=0,t=i[0];for(let s=1;s<i.length;s++){let o=i[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let n=t instanceof ct&&t.index<0?null:t.parent,r=i.slice();return n?r[e]=n:r.splice(e,1),new kb(r,t)}class kb{constructor(e,t){this.heads=e,this.node=t}get next(){return Lf(this.heads)}}function Sb(i,e,t){let n=i.resolveInner(e,t),r=null;for(let s=n instanceof ct?n:n.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[n])).push(o.resolve(e,t)),s=o}else{let o=Pi.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new ct(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[n])).push(qi(a,e,t,!1))}}return r?Lf(r):n}class $o{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~ze.EnterBracketed,e instanceof ct)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof ct?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&ze.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ze.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ze.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let s=t+e,o=e<0?-1:n._tree.children.length;s!=o;s+=e){let a=n._tree.children[s];if(this.mode&ze.IncludeAnonymous||a instanceof vn||!a.type.isAnonymous||Al(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=s+1;break e}r=this.stack[--s]}for(let r=n;r<this.stack.length;r++)t=new Kt(this.buffer,t,this.stack[r]);return this.bufferNode=new Kt(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Fo(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Fo(this._tree,e,r);let o=n[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Al(i){return i.children.some(e=>e instanceof vn||!e.type.isAnonymous||Al(e))}function xb(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=bb,reused:s=[],minRepeatType:o=n.types.length}=i,a=Array.isArray(t)?new xl(t,t.length):t,l=n.types,h=0,u=0;function c(A,y,k,R,I,z){let{id:q,start:D,end:J,size:P}=a,$=u,C=h;if(P<0)if(a.next(),P==-1){let T=s[q];k.push(T),R.push(D-A);return}else if(P==-3){h=q;return}else if(P==-4){u=q;return}else throw new RangeError(`Unrecognized record size: ${P}`);let K=l[q],j,G,le=D-A;if(J-D<=r&&(G=w(a.pos-y,I))){let T=new Uint16Array(G.size-G.skip),W=a.pos-G.size,Q=T.length;for(;a.pos>W;)Q=_(G.start,T,Q);j=new vn(T,J-G.start,n),le=G.start-A}else{let T=a.pos-P;a.next();let W=[],Q=[],U=q>=o?q:-1,X=0,ae=J;for(;a.pos>T;)U>=0&&a.id==U&&a.size>=0?(a.end<=ae-r&&(f(W,Q,D,X,a.end,ae,U,$,C),X=W.length,ae=a.end),a.next()):z>2500?p(D,T,W,Q):c(D,T,W,Q,U,z+1);if(U>=0&&X>0&&X<W.length&&f(W,Q,D,X,D,ae,U,$,C),W.reverse(),Q.reverse(),U>-1&&X>0){let ee=m(K,C);j=El(K,W,Q,0,W.length,0,J-D,ee,ee)}else j=g(K,W,Q,J-D,$-J,C)}k.push(j),R.push(le)}function p(A,y,k,R){let I=[],z=0,q=-1;for(;a.pos>y;){let{id:D,start:J,end:P,size:$}=a;if($>4)a.next();else{if(q>-1&&J<q)break;q<0&&(q=P-r),I.push(D,J,P),z++,a.next()}}if(z){let D=new Uint16Array(z*4),J=I[I.length-2];for(let P=I.length-3,$=0;P>=0;P-=3)D[$++]=I[P],D[$++]=I[P+1]-J,D[$++]=I[P+2]-J,D[$++]=$;k.push(new vn(D,I[2]-J,n)),R.push(J-A)}}function m(A,y){return(k,R,I)=>{let z=0,q=k.length-1,D,J;if(q>=0&&(D=k[q])instanceof Ue){if(!q&&D.type==A&&D.length==I)return D;(J=D.prop(Ie.lookAhead))&&(z=R[q]+D.length+J)}return g(A,k,R,I,z,y)}}function f(A,y,k,R,I,z,q,D,J){let P=[],$=[];for(;A.length>R;)P.push(A.pop()),$.push(y.pop()+k-I);A.push(g(n.types[q],P,$,z-I,D-z,J)),y.push(I-k)}function g(A,y,k,R,I,z,q){if(z){let D=[Ie.contextHash,z];q=q?[D].concat(q):[D]}if(I>25){let D=[Ie.lookAhead,I];q=q?[D].concat(q):[D]}return new Ue(A,y,k,R,q)}function w(A,y){let k=a.fork(),R=0,I=0,z=0,q=k.end-r,D={size:0,start:0,skip:0};e:for(let J=k.pos-A;k.pos>J;){let P=k.size;if(k.id==y&&P>=0){D.size=R,D.start=I,D.skip=z,z+=4,R+=4,k.next();continue}let $=k.pos-P;if(P<0||$<J||k.start<q)break;let C=k.id>=o?4:0,K=k.start;for(k.next();k.pos>$;){if(k.size<0)if(k.size==-3||k.size==-4)C+=4;else break e;else k.id>=o&&(C+=4);k.next()}I=K,R+=P,z+=C}return(y<0||R==A)&&(D.size=R,D.start=I,D.skip=z),D.size>4?D:void 0}function _(A,y,k){let{id:R,start:I,end:z,size:q}=a;if(a.next(),q>=0&&R<o){let D=k;if(q>4){let J=a.pos-(q-4);for(;a.pos>J;)k=_(A,y,k)}y[--k]=D,y[--k]=z-A,y[--k]=I-A,y[--k]=R}else q==-3?h=R:q==-4&&(u=R);return k}let M=[],x=[];for(;a.pos>0;)c(i.start||0,i.bufferStart||0,M,x,-1,0);let E=(e=i.length)!==null&&e!==void 0?e:M.length?x[0]+M[0].length:0;return new Ue(l[i.topID],M.reverse(),x.reverse(),E)}const lh=new WeakMap;function Nr(i,e){if(!i.isAnonymous||e instanceof vn||e.type!=i)return 1;let t=lh.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof Ue)){t=1;break}t+=Nr(i,n)}lh.set(e,t)}return t}function El(i,e,t,n,r,s,o,a,l){let h=0;for(let f=n;f<r;f++)h+=Nr(i,e[f]);let u=Math.ceil(h*1.5/8),c=[],p=[];function m(f,g,w,_,M){for(let x=w;x<_;){let E=x,A=g[x],y=Nr(i,f[x]);for(x++;x<_;x++){let k=Nr(i,f[x]);if(y+k>=u)break;y+=k}if(x==E+1){if(y>u){let k=f[E];m(k.children,k.positions,0,k.children.length,g[E]+M);continue}c.push(f[E])}else{let k=g[x-1]+f[x-1].length-A;c.push(El(i,f,g,E,x,A,k,null,l))}p.push(A+M-s)}}return m(e,t,n,r,0),(a||l)(c,p,o)}class sw{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof Kt?this.setBuffer(e.context.buffer,e.index,t):e instanceof ct&&this.map.set(e.tree,t)}get(e){return e instanceof Kt?this.getBuffer(e.context.buffer,e.index):e instanceof ct?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Cn{constructor(e,t,n,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new Cn(0,e.length,e,0,!1,n)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,h=0;;a++){let u=a<t.length?t[a]:null,c=u?u.fromA:1e9;if(c-l>=n)for(;o&&o.from<c;){let p=o;if(l>=p.from||c<=p.to||h){let m=Math.max(p.from,l)-h,f=Math.min(p.to,c)-h;p=m>=f?null:new Cn(m,f,p.tree,p.offset+h,a>0,!!u)}if(p&&r.push(p),o.to>c)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,h=u.toA-u.toB}return r}}class Df{startParse(e,t,n){return typeof e=="string"&&(e=new Ab(e)),n=n?n.length?n.map(r=>new js(r.from,r.to)):[new js(0,0)]:[new js(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let s=r.advance();if(s)return s}}}class Ab{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ie({perNode:!0});let Eb=0;class St{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=Eb++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof St&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let r=new St(n,[],null,[]);if(r.set.push(r),t)for(let s of t.set)r.set.push(s);return r}static defineModifier(e){let t=new es(e);return n=>n.modified.indexOf(t)>-1?n:es.get(n.base||n,n.modified.concat(t).sort((r,s)=>r.id-s.id))}}let _b=0;class es{constructor(e){this.name=e,this.instances=[],this.id=_b++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&Tb(t,a.modified));if(n)return n;let r=[],s=new St(e.name,r,e,t);for(let a of t)a.instances.push(s);let o=Cb(t);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(es.get(a,l));return s}}function Tb(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function Cb(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function Rb(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let s=[],o=2,a=r;for(let c=0;;){if(a=="..."&&c>0&&c+3==r.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+r);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),c+=p[0].length,c==r.length)break;let m=r[c++];if(c==r.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+r);a=r.slice(c)}let l=s.length-1,h=s[l];if(!h)throw new RangeError("Invalid path: "+r);let u=new Gi(n,o,l>0?s.slice(0,l):null);e[h]=u.sort(e[h])}}return Nf.add(e)}const Nf=new Ie({combine(i,e){let t,n,r;for(;i||e;){if(!i||e&&i.depth>=e.depth?(r=e,e=e.next):(r=i,i=i.next),t&&t.mode==r.mode&&!r.context&&!t.context)continue;let s=new Gi(r.tags,r.mode,r.context);t?t.next=s:n=s,t=s}return n}});class Gi{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gi.empty=new Gi([],2,null);function Pf(i,e){let t=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:n,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let h=t[l.id];if(h){o=o?o+" "+h:h;break}}return o},scope:n}}function Mb(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function Ib(i,e,t,n=0,r=i.length){let s=new Bb(n,Array.isArray(e)?e:[e],t);s.highlightRange(i.cursor(),n,r,"",s.highlighters),s.flush(r)}class Bb{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,s){let{type:o,from:a,to:l}=e;if(a>=n||l<=t)return;o.isTop&&(s=this.highlighters.filter(m=>!m.scope||m.scope(o)));let h=r,u=Ob(e)||Gi.empty,c=Mb(s,u.tags);if(c&&(h&&(h+=" "),h+=c,u.mode==1&&(r+=(r?" ":"")+c)),this.startSpan(Math.max(t,a),h),u.opaque)return;let p=e.tree&&e.tree.prop(Ie.mounted);if(p&&p.overlay){let m=e.node.enter(p.overlay[0].from+a,1),f=this.highlighters.filter(w=>!w.scope||w.scope(p.tree.type)),g=e.firstChild();for(let w=0,_=a;;w++){let M=w<p.overlay.length?p.overlay[w]:null,x=M?M.from+a:l,E=Math.max(t,_),A=Math.min(n,x);if(E<A&&g)for(;e.from<A&&(this.highlightRange(e,E,A,r,s),this.startSpan(Math.min(A,e.to),h),!(e.to>=x||!e.nextSibling())););if(!M||x>n)break;_=M.to+a,_>t&&(this.highlightRange(m.cursor(),Math.max(t,M.from+a),Math.min(n,_),"",f),this.startSpan(Math.min(n,_),h))}g&&e.parent()}else if(e.firstChild()){p&&(r="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,s),this.startSpan(Math.min(n,e.to),h)}while(e.nextSibling());e.parent()}}}function Ob(i){let e=i.type.prop(Nf);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const fe=St.define,Ar=fe(),hn=fe(),ah=fe(hn),hh=fe(hn),un=fe(),Er=fe(un),Hs=fe(un),jt=fe(),xn=fe(jt),Wt=fe(),Ut=fe(),Wo=fe(),bi=fe(Wo),_r=fe(),v={comment:Ar,lineComment:fe(Ar),blockComment:fe(Ar),docComment:fe(Ar),name:hn,variableName:fe(hn),typeName:ah,tagName:fe(ah),propertyName:hh,attributeName:fe(hh),className:fe(hn),labelName:fe(hn),namespace:fe(hn),macroName:fe(hn),literal:un,string:Er,docString:fe(Er),character:fe(Er),attributeValue:fe(Er),number:Hs,integer:fe(Hs),float:fe(Hs),bool:fe(un),regexp:fe(un),escape:fe(un),color:fe(un),url:fe(un),keyword:Wt,self:fe(Wt),null:fe(Wt),atom:fe(Wt),unit:fe(Wt),modifier:fe(Wt),operatorKeyword:fe(Wt),controlKeyword:fe(Wt),definitionKeyword:fe(Wt),moduleKeyword:fe(Wt),operator:Ut,derefOperator:fe(Ut),arithmeticOperator:fe(Ut),logicOperator:fe(Ut),bitwiseOperator:fe(Ut),compareOperator:fe(Ut),updateOperator:fe(Ut),definitionOperator:fe(Ut),typeOperator:fe(Ut),controlOperator:fe(Ut),punctuation:Wo,separator:fe(Wo),bracket:bi,angleBracket:fe(bi),squareBracket:fe(bi),paren:fe(bi),brace:fe(bi),content:jt,heading:xn,heading1:fe(xn),heading2:fe(xn),heading3:fe(xn),heading4:fe(xn),heading5:fe(xn),heading6:fe(xn),contentSeparator:fe(jt),list:fe(jt),quote:fe(jt),emphasis:fe(jt),strong:fe(jt),link:fe(jt),monospace:fe(jt),strikethrough:fe(jt),inserted:fe(),deleted:fe(),changed:fe(),invalid:fe(),meta:_r,documentMeta:fe(_r),annotation:fe(_r),processingInstruction:fe(_r),definition:St.defineModifier("definition"),constant:St.defineModifier("constant"),function:St.defineModifier("function"),standard:St.defineModifier("standard"),local:St.defineModifier("local"),special:St.defineModifier("special")};for(let i in v){let e=v[i];e instanceof St&&(e.name=i)}Pf([{tag:v.link,class:"tok-link"},{tag:v.heading,class:"tok-heading"},{tag:v.emphasis,class:"tok-emphasis"},{tag:v.strong,class:"tok-strong"},{tag:v.keyword,class:"tok-keyword"},{tag:v.atom,class:"tok-atom"},{tag:v.bool,class:"tok-bool"},{tag:v.url,class:"tok-url"},{tag:v.labelName,class:"tok-labelName"},{tag:v.inserted,class:"tok-inserted"},{tag:v.deleted,class:"tok-deleted"},{tag:v.literal,class:"tok-literal"},{tag:v.string,class:"tok-string"},{tag:v.number,class:"tok-number"},{tag:[v.regexp,v.escape,v.special(v.string)],class:"tok-string2"},{tag:v.variableName,class:"tok-variableName"},{tag:v.local(v.variableName),class:"tok-variableName tok-local"},{tag:v.definition(v.variableName),class:"tok-variableName tok-definition"},{tag:v.special(v.variableName),class:"tok-variableName2"},{tag:v.definition(v.propertyName),class:"tok-propertyName tok-definition"},{tag:v.typeName,class:"tok-typeName"},{tag:v.namespace,class:"tok-namespace"},{tag:v.className,class:"tok-className"},{tag:v.macroName,class:"tok-macroName"},{tag:v.propertyName,class:"tok-propertyName"},{tag:v.operator,class:"tok-operator"},{tag:v.comment,class:"tok-comment"},{tag:v.meta,class:"tok-meta"},{tag:v.invalid,class:"tok-invalid"},{tag:v.punctuation,class:"tok-punctuation"}]);var Vs;const pn=new Ie;function _l(i){return we.define({combine:i?e=>e.concat(i):void 0})}const Ff=new Ie;class ht{constructor(e,t,n=[],r=""){this.data=e,this.name=r,Oe.prototype.hasOwnProperty("tree")||Object.defineProperty(Oe.prototype,"tree",{get(){return gt(this)}}),this.parser=t,this.extension=[on.of(this),Oe.languageData.of((s,o,a)=>{let l=uh(s,o,a),h=l.type.prop(pn);if(!h)return[];let u=s.facet(h),c=l.type.prop(Ff);if(c){let p=l.resolve(o-l.from,a);for(let m of c)if(m.test(p,s)){let f=s.facet(m.facet);return m.type=="replace"?f:f.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return uh(e,t,n).type.prop(pn)==this.data}findRegions(e){let t=e.facet(on);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(s,o)=>{if(s.prop(pn)==this.data){n.push({from:o,to:o+s.length});return}let a=s.prop(Ie.mounted);if(a){if(a.tree.prop(pn)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+s.length});return}else if(a.overlay){let l=n.length;if(r(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<s.children.length;l++){let h=s.children[l];h instanceof Ue&&r(h,s.positions[l]+o)}};return r(gt(e),0),n}get allowsNesting(){return!0}}ht.setState=De.define();function uh(i,e,t){let n=i.facet(on),r=gt(i).topNode;if(!n||n.allowsNesting)for(let s=r;s;s=s.enter(e,t,ze.ExcludeBuffers|ze.EnterBracketed))s.type.isTop&&(r=s);return r}class ts extends ht{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=_l(e.languageData);return new ts(t,e.parser.configure({props:[pn.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new ts(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function gt(i){let e=i.field(ht.state,!1);return e?e.tree:Ue.empty}function $f(i,e,t=50){var n;let r=(n=i.field(ht.state,!1))===null||n===void 0?void 0:n.context;if(!r)return null;let s=r.viewport;r.updateViewport({from:0,to:e});let o=r.isDone(e)||r.work(t,e)?r.tree:null;return r.updateViewport(s),o}function Lb(i,e=i.doc.length){var t;return((t=i.field(ht.state,!1))===null||t===void 0?void 0:t.context.isDone(e))||!1}function Db(i,e=i.viewport.to,t=100){let n=$f(i.state,e,t);return n!=gt(i.state)&&i.dispatch({}),!!n}function Nb(i){var e;return((e=i.plugin(jf))===null||e===void 0?void 0:e.isWorking())||!1}class Wf{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let yi=null;class Dn{constructor(e,t,n=[],r,s,o,a,l){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Dn(e,t,[],Ue.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Wf(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ue.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Cn.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Cn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=yi;yi=this;try{return e()}finally{yi=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=fh(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((h,u,c,p)=>l.push({fromA:h,toA:u,fromB:c,toB:p})),n=Cn.applyChanges(n,l),r=Ue.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let u=e.mapPos(h.from,1),c=e.mapPos(h.to,-1);u<c&&a.push({from:u,to:c})}}}return new Dn(this.parser,t,n,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:s}=this.skipped[n];r<e.to&&s>e.from&&(this.fragments=fh(this.fragments,r,s),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Df{createParse(t,n,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=yi;if(l){for(let h of r)l.tempSkipped.push(h);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ue(pt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return yi}}function fh(i,e,t){return Cn.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class ri{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new ri(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Dn.create(e.facet(on).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new ri(n)}}ht.state=vt.define({create:ri.init,update(i,e){for(let t of e.effects)if(t.is(ht.setState))return t.value;return e.startState.facet(on)!=e.state.facet(on)?ri.init(e.state):i.apply(e)}});let Uf=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Uf=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const zs=typeof navigator<"u"&&(!((Vs=navigator.scheduling)===null||Vs===void 0)&&Vs.isInputPending)?()=>navigator.scheduling.isInputPending():null,jf=He.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ht.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ht.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Uf(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,s=n.field(ht.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!zs?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&n.doc.length>r+1e3,l=s.context.work(()=>zs&&zs()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ht.setState.of(new ri(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>At(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),on=we.define({combine(i){return i.length?i[0]:null},enables:i=>[ht.state,jf,Ae.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class Pb{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class Tl{constructor(e,t,n,r,s,o=void 0){this.name=e,this.alias=t,this.extensions=n,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new Tl(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let n=/\.([^.]+)$/.exec(t);if(n){for(let r of e)if(r.extensions.indexOf(n[1])>-1)return r}return null}static matchLanguageName(e,t,n=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(s=>s==t))return r;if(n)for(let r of e)for(let s of r.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return r}return null}}const Hf=we.define(),Cl=we.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Ki(i){let e=i.facet(Cl);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Rl(i,e){let t="",n=i.tabSize,r=i.facet(Cl)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let s=0;s<e;s++)t+=r;return t}function Ml(i,e){i instanceof Oe&&(i=new bs(i));for(let n of i.state.facet(Hf)){let r=n(i,e);if(r!==void 0)return r}let t=gt(i.state);return t.length>=e?$b(i,t,e):null}function Fb(i,e,t){let n=Object.create(null),r=new bs(i,{overrideIndentation:o=>{var a;return(a=n[o])!==null&&a!==void 0?a:-1}}),s=[];for(let o=e;o<=t;){let a=i.doc.lineAt(o);o=a.to+1;let l=Ml(r,a.from);if(l==null)continue;/\S/.test(a.text)||(l=0);let h=/^\s*/.exec(a.text)[0],u=Rl(i,l);h!=u&&(n[a.from]=l,s.push({from:a.from,to:a.from+h.length,insert:u}))}return i.changes(s)}class bs{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ki(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=n.from&&r<=n.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,t=e.length){return ls(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Il=new Ie;function $b(i,e,t){let n=e.resolveStack(t),r=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(r!=n.node){let s=[];for(let o=r;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)n={node:s[o],next:n}}return Vf(n,i,t)}function Vf(i,e,t){for(let n=i;n;n=n.next){let r=Ub(n.node);if(r)return r(ys.create(e,t,n))}return 0}function Wb(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function Ub(i){let e=i.type.prop(Il);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(Ie.closedBy))){let r=i.lastChild,s=r&&n.indexOf(r.name)>-1;return o=>zf(o,!0,1,void 0,s&&!Wb(o)?r.from:void 0)}return i.parent==null?jb:null}function jb(){return 0}class ys extends bs{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new ys(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(Hb(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return Vf(this.context.next,this.base,this.pos)}}function Hb(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function Vb(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,s=i.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}a=l.to}}function zb({closing:i,align:e=!0,units:t=1}){return n=>zf(n,e,t,i)}function zf(i,e,t,n,r){let s=i.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||r==i.pos+o,l=e?Vb(i):null;return l?a?i.column(l.from):i.column(l.to):i.baseIndent+(a?0:i.unit*t)}const qb=i=>i.baseIndent;function Gb({except:i,units:e=1}={}){return t=>{let n=i&&i.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const Kb=200;function Yb(){return Oe.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+Kb)return i;let s=t.sliceString(r.from,n);if(!e.some(h=>h.test(s)))return i;let{state:o}=i,a=-1,l=[];for(let{head:h}of o.selection.ranges){let u=o.doc.lineAt(h);if(u.from==a)continue;a=u.from;let c=Ml(o,u.from);if(c==null)continue;let p=/^\s*/.exec(u.text)[0],m=Rl(o,c);p!=m&&l.push({from:u.from,to:u.from+p.length,insert:m})}return l.length?[i,{changes:l,sequential:!0}]:i})}const qf=we.define(),Gf=new Ie;function Xb(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}function Jb(i,e,t){let n=gt(i);if(n.length<t)return null;let r=n.resolveStack(t,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let l=a.type.prop(Gf);if(l&&(a.to<n.length-50||n.length==i.doc.length||!Zb(a))){let h=l(a,i);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function Zb(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function si(i,e,t){for(let n of i.facet(qf)){let r=n(i,e,t);if(r)return r}return Jb(i,e,t)}function Kf(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const hi=De.define({map:Kf}),Fn=De.define({map:Kf});function Bl(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const ln=vt.define({create(){return Te.none},update(i,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,n)=>i=ch(i,t,n)),i=i.map(e.changes);for(let t of e.effects)if(t.is(hi)&&!ey(i,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(Ll),r=n?Te.replace({widget:new sy(n(e.state,t.value))}):dh;i=i.update({add:[r.range(t.value.from,t.value.to)]})}else t.is(Fn)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(i=ch(i,e.selection.main.head)),i},provide:i=>Ae.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(dh.range(n,r))}return Te.set(e,!0)}});function ch(i,e,t=e){let n=!1;return i.between(e,t,(r,s)=>{r<t&&s>e&&(n=!0)}),n?i.update({filterFrom:e,filterTo:t,filter:(r,s)=>r>=t||s<=e}):i}function Qb(i){return i.field(ln,!1)||Re.empty}function Yi(i,e,t){var n;let r=null;return(n=i.field(ln,!1))===null||n===void 0||n.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function ey(i,e,t){let n=!1;return i.between(e,e,(r,s)=>{r==e&&s==t&&(n=!0)}),n}function Ol(i,e){return i.field(ln,!1)?e:e.concat(De.appendConfig.of(Dl()))}const Yf=i=>{for(let e of Bl(i)){let t=si(i.state,e.from,e.to);if(t)return i.dispatch({effects:Ol(i.state,[hi.of(t),ns(i,t)])}),!0}return!1},Xf=i=>{if(!i.state.field(ln,!1))return!1;let e=[];for(let t of Bl(i)){let n=Yi(i.state,t.from,t.to);n&&e.push(Fn.of(n),ns(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function ns(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return Ae.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const Jf=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),s=si(e,r.from,r.to);s&&t.push(hi.of(s)),n=(s?i.lineBlockAt(s.to):r).to+1}return t.length&&i.dispatch({effects:Ol(i.state,t)}),!!t.length},Zf=i=>{let e=i.state.field(ln,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(Fn.of({from:n,to:r}))}),i.dispatch({effects:t}),!0};function ty(i,e){for(let t=e;;){let n=si(i.state,t.from,t.to);if(n&&n.to>e.from)return n;if(!t.from)return null;t=i.lineBlockAt(t.from-1)}}const ny=i=>{let e=[];for(let t of Bl(i)){let n=Yi(i.state,t.from,t.to);if(n)e.push(Fn.of(n),ns(i,n,!1));else{let r=ty(i,t);r&&e.push(hi.of(r),ns(i,r))}}return e.length>0&&i.dispatch({effects:Ol(i.state,e)}),!!e.length},iy=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Yf},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Xf},{key:"Ctrl-Alt-[",run:Jf},{key:"Ctrl-Alt-]",run:Zf}],ry={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â¦"},Ll=we.define({combine(i){return li(i,ry)}});function Dl(i){let e=[ln,ay];return i&&e.push(Ll.of(i)),e}function Qf(i,e){let{state:t}=i,n=t.facet(Ll),r=o=>{let a=i.lineBlockAt(i.posAtDOM(o.target)),l=Yi(i.state,a.from,a.to);l&&i.dispatch({effects:Fn.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,r,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const dh=Te.replace({widget:new class extends Zt{toDOM(i){return Qf(i,null)}}});class sy extends Zt{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Qf(e,this.value)}}const oy={openText:"â",closedText:"âº",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class qs extends Jt{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function ly(i={}){let e={...oy,...i},t=new qs(e,!0),n=new qs(e,!1),r=He.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(on)!=o.state.facet(on)||o.startState.field(ln,!1)!=o.state.field(ln,!1)||gt(o.startState)!=gt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new rn;for(let l of o.viewportLineBlocks){let h=Yi(o.state,l.from,l.to)?n:si(o.state,l.from,l.to)?t:null;h&&a.add(l.from,l.from,h)}return a.finish()}}),{domEventHandlers:s}=e;return[r,Tf({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||Re.empty},initialSpacer(){return new qs(e,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let h=Yi(o.state,a.from,a.to);if(h)return o.dispatch({effects:Fn.of(h)}),!0;let u=si(o.state,a.from,a.to);return u?(o.dispatch({effects:hi.of(u)}),!0):!1}}}),Dl()]}const ay=Ae.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ui{constructor(e,t){this.specs=e;let n;function r(a){let l=bn.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof ht?a=>a.prop(pn)==o.data:o?a=>a==o:void 0,this.style=Pf(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=n?new bn(n):null,this.themeType=t.themeType}static define(e,t){return new ui(e,t||{})}}const Uo=we.define(),ec=we.define({combine(i){return i.length?[i[0]]:null}});function Pr(i){let e=i.facet(Uo);return e.length?e:i.facet(ec)}function tc(i,e){let t=[fy],n;return i instanceof ui&&(i.module&&t.push(Ae.styleModule.of(i.module)),n=i.themeType),e?.fallback?t.push(ec.of(i)):n?t.push(Uo.computeN([Ae.darkTheme],r=>r.facet(Ae.darkTheme)==(n=="dark")?[i]:[])):t.push(Uo.of(i)),t}function hy(i,e,t){let n=Pr(i),r=null;if(n){for(let s of n)if(!s.scope||t&&s.scope(t)){let o=s.style(e);o&&(r=r?r+" "+o:o)}}return r}class uy{constructor(e){this.markCache=Object.create(null),this.tree=gt(e.state),this.decorations=this.buildDeco(e,Pr(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=gt(e.state),n=Pr(e.state),r=n!=Pr(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!r&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Te.none;let n=new rn;for(let{from:r,to:s}of e.visibleRanges)Ib(this.tree,t,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=Te.mark({class:l})))},r,s);return n.finish()}}const fy=oi.high(He.fromClass(uy,{decorations:i=>i.decorations})),cy=ui.define([{tag:v.meta,color:"#404740"},{tag:v.link,textDecoration:"underline"},{tag:v.heading,textDecoration:"underline",fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.strong,fontWeight:"bold"},{tag:v.strikethrough,textDecoration:"line-through"},{tag:v.keyword,color:"#708"},{tag:[v.atom,v.bool,v.url,v.contentSeparator,v.labelName],color:"#219"},{tag:[v.literal,v.inserted],color:"#164"},{tag:[v.string,v.deleted],color:"#a11"},{tag:[v.regexp,v.escape,v.special(v.string)],color:"#e40"},{tag:v.definition(v.variableName),color:"#00f"},{tag:v.local(v.variableName),color:"#30a"},{tag:[v.typeName,v.namespace],color:"#085"},{tag:v.className,color:"#167"},{tag:[v.special(v.variableName),v.macroName],color:"#256"},{tag:v.definition(v.propertyName),color:"#00c"},{tag:v.comment,color:"#940"},{tag:v.invalid,color:"#f00"}]),dy=Ae.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),nc=1e4,ic="()[]{}",rc=we.define({combine(i){return li(i,{afterCursor:!0,brackets:ic,maxScanDistance:nc,renderMatch:my})}}),py=Te.mark({class:"cm-matchingBracket"}),gy=Te.mark({class:"cm-nonmatchingBracket"});function my(i){let e=[],t=i.matched?py:gy;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const by=vt.define({create(){return Te.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(rc);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=Ti(e.state,r.head,-1,n)||r.head>0&&Ti(e.state,r.head-1,1,n)||n.afterCursor&&(Ti(e.state,r.head,1,n)||r.head<e.state.doc.length&&Ti(e.state,r.head+1,-1,n));s&&(t=t.concat(n.renderMatch(s,e.state)))}return Te.set(t,!0)},provide:i=>Ae.decorations.from(i)}),yy=[by,dy];function wy(i={}){return[rc.of(i),yy]}const sc=new Ie;function jo(i,e,t){let n=i.prop(e<0?Ie.openedBy:Ie.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Ho(i){let e=i.type.prop(sc);return e?e(i.node):i}function Ti(i,e,t,n={}){let r=n.maxScanDistance||nc,s=n.brackets||ic,o=gt(i),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let h=jo(l.type,t,s);if(h&&l.from<l.to){let u=Ho(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return vy(i,e,t,l,u,h,s)}}return ky(i,e,t,o,a.type,r,s)}function vy(i,e,t,n,r,s,o){let a=n.parent,l={from:r.from,to:r.to},h=0,u=a?.cursor();if(u&&(t<0?u.childBefore(n.from):u.childAfter(n.to)))do if(t<0?u.to<=n.from:u.from>=n.to){if(h==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let c=Ho(u);return{start:l,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(jo(u.type,t,o))h++;else if(jo(u.type,-t,o)){if(h==0){let c=Ho(u);return{start:l,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}h--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function ky(i,e,t,n,r,s,o){let a=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},u=i.doc.iterRange(e,t>0?i.doc.length:0),c=0;for(let p=0;!u.next().done&&p<=s;){let m=u.value;t<0&&(p+=m.length);let f=e+p*t;for(let g=t>0?0:m.length-1,w=t>0?m.length:-1;g!=w;g+=t){let _=o.indexOf(m[g]);if(!(_<0||n.resolveInner(f+g,1).type!=r))if(_%2==0==t>0)c++;else{if(c==1)return{start:h,end:{from:f+g,to:f+g+1},matched:_>>1==l>>1};c--}}t>0&&(p+=m.length)}return u.done?{start:h,matched:!1}:null}function ph(i,e,t,n=0,r=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let s=r;for(let o=n;o<e;o++)i.charCodeAt(o)==9?s+=t-s%t:s++;return s}class Nl{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ph(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:ph(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let r=o=>n?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function Sy(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||xy,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||$l,mergeTokens:i.mergeTokens!==!1}}function xy(i){if(typeof i!="object")return i;let e={};for(let t in i){let n=i[t];e[t]=n instanceof Array?n.slice():n}return e}const gh=new WeakMap;class Pl extends ht{constructor(e){let t=_l(e.languageData),n=Sy(e),r,s=new class extends Df{createParse(o,a,l){return new Ey(r,o,a,l)}};super(t,s,[],e.name),this.topNode=Cy(t,this),r=this,this.streamParser=n,this.stateAfter=new Ie({perNode:!0}),this.tokenTable=e.tokenTable?new hc(n.tokenTable):Ty}static define(e){return new Pl(e)}getIndent(e){let t,{overrideIndentation:n}=e.options;n&&(t=gh.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let r=Fl(this,e.node.tree,e.node.from,e.node.from,t??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),h=Math.min(e.pos,l.to);if(l.length){let u=n?n(l.from):-1,c=new Nl(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;c.pos<h-l.from;)lc(this.streamParser.token,c,o)}else this.streamParser.blankLine(o,e.unit);if(h==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return n&&t==null&&gh.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function Fl(i,e,t,n,r){let s=t>=n&&t+e.length<=r&&e.prop(i.stateAfter);if(s)return{state:i.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=t+e.positions[o],h=a instanceof Ue&&l<r&&Fl(i,a,l,n,r);if(h)return h}return null}function oc(i,e,t,n,r){if(r&&t<=0&&n>=e.length)return e;!r&&t==0&&e.type==i.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<n&&a instanceof Ue){if(!(l=oc(i,a,t-o,n-o,r)))break;return r?new Ue(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function Ay(i,e,t,n,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=t&&a>t&&Fl(i,s.tree,0-s.offset,t,a),h;if(l&&l.pos<=n&&(h=oc(i,s.tree,t+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:h}}return{state:i.streamParser.startState(r?Ki(r):4),tree:Ue.empty}}class Ey{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Dn.get(),o=r[0].from,{state:a,tree:l}=Ay(e,n,o,this.to,s?.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let h=0;h<l.children.length;h++)this.chunks.push(l.children[h]),this.chunkPos.push(l.positions[h]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(h=>h.from<=s.viewport.from&&h.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Ki(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Dn.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+512);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=n||(t=t.slice(0,s-(n-t.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);t+=a,n=o+a.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+t;if(n>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(t,r,1),t+=r;let a=this.chunk.length;r=this.skipGapsTo(n,r,-1),n+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=n:this.chunk.push(e,t,n,s),r}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new Nl(t,e?e.state.tabSize:4,e?Ki(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=lc(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ue.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:_y,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Ue(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ue(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function lc(i,e,t){e.start=e.pos;for(let n=0;n<10;n++){let r=i(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const $l=Object.create(null),Xi=[pt.none],_y=new Sl(Xi),mh=[],bh=Object.create(null),ac=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ac[i]=uc($l,e);class hc{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),ac)}resolve(e){return e?this.table[e]||(this.table[e]=uc(this.extra,e)):0}}const Ty=new hc($l);function Gs(i,e){mh.indexOf(i)>-1||(mh.push(i),console.warn(e))}function uc(i,e){let t=[];for(let a of e.split(" ")){let l=[];for(let h of a.split(".")){let u=i[h]||v[h];u?typeof u=="function"?l.length?l=l.map(u):Gs(h,`Modifier ${h} used at start of tag`):l.length?Gs(h,`Tag ${h} used as modifier`):l=Array.isArray(u)?u:[u]:Gs(h,`Unknown highlighting tag ${h}`)}for(let h of l)t.push(h)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),r=n+" "+t.map(a=>a.id),s=bh[r];if(s)return s.id;let o=bh[r]=pt.define({id:Xi.length,name:n,props:[Rb({[n]:t})]});return Xi.push(o),o.id}function Cy(i,e){let t=pt.define({id:Xi.length,name:"Document",props:[pn.add(()=>i),Il.add(()=>n=>e.getIndent(n))],top:!0});return Xi.push(t),t}function fc(i){return i.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(i)}function cc(i){for(let e=i.iter();!e.next().done;)if(fc(e.value))return!0;return!1}function Ry(i){let e=!1;return i.iterChanges((t,n,r,s,o)=>{!e&&cc(o)&&(e=!0)}),e}const Vo=we.define({combine:i=>i.some(e=>e)});function My(i={}){let e=[Iy];return i.alwaysIsolate&&e.push(Vo.of(!0)),e}const Iy=He.fromClass(class{constructor(i){this.always=i.state.facet(Vo)||i.textDirection!=Pe.LTR||i.state.facet(Ae.perLineTextDirection),this.hasRTL=!this.always&&cc(i.state.doc),this.tree=gt(i.state),this.decorations=this.always||this.hasRTL?yh(i,this.tree,this.always):Te.none}update(i){let e=i.state.facet(Vo)||i.view.textDirection!=Pe.LTR||i.state.facet(Ae.perLineTextDirection);if(!e&&!this.hasRTL&&Ry(i.changes)&&(this.hasRTL=!0),!e&&!this.hasRTL)return;let t=gt(i.state);(e!=this.always||t!=this.tree||i.docChanged||i.viewportChanged)&&(this.tree=t,this.always=e,this.decorations=yh(i.view,t,e))}},{provide:i=>{function e(t){var n,r;return(r=(n=t.plugin(i))===null||n===void 0?void 0:n.decorations)!==null&&r!==void 0?r:Te.none}return[Ae.outerDecorations.of(e),oi.lowest(Ae.bidiIsolatedRanges.of(e))]}});function yh(i,e,t){let n=new rn,r=i.visibleRanges;t||(r=By(r,i.state.doc));for(let{from:s,to:o}of r)e.iterate({enter:a=>{let l=a.type.prop(Ie.isolate);l&&n.add(a.from,a.to,Oy[l])},from:s,to:o});return n.finish()}function By(i,e){let t=e.iter(),n=0,r=[],s=null;for(let{from:o,to:a}of i)if(!(s&&s.to>o&&(o=s.to,o>=a)))for(n+t.value.length<o&&(t.next(o-(n+t.value.length)),n=o);;){let l=n,h=n+t.value.length;if(!t.lineBreak&&fc(t.value)&&(s&&s.to>l-10?s.to=Math.min(a,h):r.push(s={from:l,to:Math.min(a,h)})),h>=a)break;n=h,t.next()}return r}const Oy={rtl:Te.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Pe.RTL}),ltr:Te.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Pe.LTR}),auto:Te.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})},lw=Object.freeze(Object.defineProperty({__proto__:null,DocInput:Wf,HighlightStyle:ui,IndentContext:bs,LRLanguage:ts,Language:ht,LanguageDescription:Tl,LanguageSupport:Pb,ParseContext:Dn,StreamLanguage:Pl,StringStream:Nl,TreeIndentContext:ys,bidiIsolates:My,bracketMatching:wy,bracketMatchingHandle:sc,codeFolding:Dl,continuedIndent:Gb,defaultHighlightStyle:cy,defineLanguageFacet:_l,delimitedIndent:zb,ensureSyntaxTree:$f,flatIndent:qb,foldAll:Jf,foldCode:Yf,foldEffect:hi,foldGutter:ly,foldInside:Xb,foldKeymap:iy,foldNodeProp:Gf,foldService:qf,foldState:ln,foldable:si,foldedRanges:Qb,forceParsing:Db,getIndentUnit:Ki,getIndentation:Ml,highlightingFor:hy,indentNodeProp:Il,indentOnInput:Yb,indentRange:Fb,indentService:Hf,indentString:Rl,indentUnit:Cl,language:on,languageDataProp:pn,matchBrackets:Ti,sublanguageProp:Ff,syntaxHighlighting:tc,syntaxParserRunning:Nb,syntaxTree:gt,syntaxTreeAvailable:Lb,toggleFold:ny,unfoldAll:Zf,unfoldCode:Xf,unfoldEffect:Fn},Symbol.toStringTag,{value:"Module"})),nt=({variant:i,settings:e,styles:t})=>{const n=Ae.theme({"&":{backgroundColor:e.background,color:e.foreground},".cm-content":{caretColor:e.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:e.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:e.selection},".cm-activeLine":{backgroundColor:e.lineHighlight},".cm-gutters":{backgroundColor:e.gutterBackground,color:e.gutterForeground},".cm-activeLineGutter":{backgroundColor:e.lineHighlight}},{dark:i==="dark"}),r=ui.define(t);return[n,tc(r)]},Ly=nt({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:v.comment,color:"#404080"},{tag:[v.string,v.regexp],color:"#999999"},{tag:v.number,color:"#7090B0"},{tag:[v.bool,v.null],color:"#8080A0"},{tag:[v.punctuation,v.derefOperator],color:"#805080"},{tag:v.keyword,color:"#60B0FF"},{tag:v.definitionKeyword,color:"#B0FFF0"},{tag:v.moduleKeyword,color:"#60B0FF"},{tag:v.operator,color:"#A0A0FF"},{tag:[v.variableName,v.self],color:"#008080"},{tag:v.operatorKeyword,color:"#A0A0FF"},{tag:v.controlKeyword,color:"#80A0FF"},{tag:v.className,color:"#70E080"},{tag:[v.function(v.propertyName),v.propertyName],color:"#50A0A0"},{tag:v.tagName,color:"#009090"},{tag:v.modifier,color:"#B0FFF0"},{tag:[v.squareBracket,v.attributeName],color:"#D0D0FF"}]}),Dy=nt({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:v.comment,color:"#787b8099"},{tag:v.string,color:"#86b300"},{tag:v.regexp,color:"#4cbf99"},{tag:[v.number,v.bool,v.null],color:"#ffaa33"},{tag:v.variableName,color:"#5c6166"},{tag:[v.definitionKeyword,v.modifier],color:"#fa8d3e"},{tag:[v.keyword,v.special(v.brace)],color:"#fa8d3e"},{tag:v.operator,color:"#ed9366"},{tag:v.separator,color:"#5c6166b3"},{tag:v.punctuation,color:"#5c6166"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#f2ae49"},{tag:[v.className,v.definition(v.typeName)],color:"#22a4e6"},{tag:[v.tagName,v.typeName,v.self,v.labelName],color:"#55b4d4"},{tag:v.angleBracket,color:"#55b4d480"},{tag:v.attributeName,color:"#f2ae49"}]}),Ny=nt({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:v.comment,color:"#6E6E6E"},{tag:[v.string,v.regexp,v.special(v.brace)],color:"#5C81B3"},{tag:v.number,color:"#C1E1B8"},{tag:v.bool,color:"#53667D"},{tag:[v.definitionKeyword,v.modifier,v.function(v.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[v.keyword,v.moduleKeyword,v.operatorKeyword,v.operator],color:"#697A8E",fontWeight:"bold"},{tag:[v.variableName,v.attributeName],color:"#708E67"},{tag:[v.function(v.variableName),v.definition(v.propertyName),v.derefOperator],color:"#fff"},{tag:v.tagName,color:"#A3D295"}]}),Py=nt({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:v.comment,color:"#666666"},{tag:[v.string,v.special(v.brace)],color:"#54BE0D"},{tag:v.regexp,color:"#E9C062"},{tag:v.number,color:"#CF6A4C"},{tag:[v.keyword,v.operator],color:"#5EA6EA"},{tag:v.variableName,color:"#7587A6"},{tag:[v.definitionKeyword,v.modifier],color:"#F9EE98"},{tag:[v.propertyName,v.function(v.variableName)],color:"#937121"},{tag:[v.typeName,v.angleBracket,v.tagName],color:"#9B859D"}]}),Fy=nt({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:v.comment,color:"#6B4E32"},{tag:[v.keyword,v.operator,v.derefOperator],color:"#EF5D32"},{tag:v.className,color:"#EFAC32",fontWeight:"bold"},{tag:[v.typeName,v.propertyName,v.function(v.variableName),v.definition(v.variableName)],color:"#EFAC32"},{tag:v.definition(v.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:v.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[v.number,v.bool],color:"#6C99BB"},{tag:[v.variableName,v.self],color:"#7DAF9C"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#D9D762"},{tag:[v.angleBracket,v.tagName,v.attributeName],color:"#EFCB43"}]}),$y=nt({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:v.comment,color:"#404040"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#00D8FF"},{tag:v.number,color:"#E62286"},{tag:[v.variableName,v.attributeName,v.self],color:"#E62286",fontWeight:"bold"},{tag:v.function(v.variableName),color:"#fff",fontWeight:"bold"}]}),Wy=nt({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:v.comment,color:"#BCC8BA"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#5D90CD"},{tag:[v.number,v.bool,v.null],color:"#46A609"},{tag:v.keyword,color:"#AF956F"},{tag:[v.definitionKeyword,v.modifier],color:"#C52727"},{tag:[v.angleBracket,v.tagName,v.attributeName],color:"#606060"},{tag:v.self,color:"#000"}]}),Uy=nt({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:v.comment,color:"#0088FF"},{tag:v.string,color:"#3AD900"},{tag:v.regexp,color:"#80FFC2"},{tag:[v.number,v.bool,v.null],color:"#FF628C"},{tag:[v.definitionKeyword,v.modifier],color:"#FFEE80"},{tag:v.variableName,color:"#CCCCCC"},{tag:v.self,color:"#FF80E1"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.definition(v.typeName),v.labelName],color:"#FFDD00"},{tag:[v.keyword,v.operator],color:"#FF9D00"},{tag:[v.propertyName,v.typeName],color:"#80FFBB"},{tag:v.special(v.brace),color:"#EDEF7D"},{tag:v.attributeName,color:"#9EFFFF"},{tag:v.derefOperator,color:"#fff"}]}),jy=nt({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:v.comment,color:"#AEAEAE"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#8DFF8E"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.function(v.definition(v.variableName)),v.definition(v.typeName)],color:"#A3EBFF"},{tag:[v.number,v.bool,v.null],color:"#62E9BD"},{tag:[v.keyword,v.operator],color:"#2BF1DC"},{tag:[v.definitionKeyword,v.modifier],color:"#F8FBB1"},{tag:[v.variableName,v.self],color:"#B683CA"},{tag:[v.angleBracket,v.tagName,v.typeName,v.propertyName],color:"#60A4F1"},{tag:v.derefOperator,color:"#E0E0E0"},{tag:v.attributeName,color:"#7BACCA"}]}),Hy=nt({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:v.comment,color:"#6272a4"},{tag:[v.string,v.special(v.brace)],color:"#f1fa8c"},{tag:[v.number,v.self,v.bool,v.null],color:"#bd93f9"},{tag:[v.keyword,v.operator],color:"#ff79c6"},{tag:[v.definitionKeyword,v.typeName],color:"#8be9fd"},{tag:v.definition(v.typeName),color:"#f8f8f2"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.attributeName],color:"#50fa7b"}]}),Vy=nt({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:v.comment,color:"#AAAAAA"},{tag:[v.keyword,v.operator,v.typeName,v.tagName,v.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[v.attributeName,v.definition(v.propertyName)],color:"#4F9FD0"},{tag:[v.className,v.string,v.special(v.brace)],color:"#CF4F5F"},{tag:v.number,color:"#CF4F5F",fontWeight:"bold"},{tag:v.variableName,fontWeight:"bold"}]}),zy=nt({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:v.comment,color:"#9995b7"},{tag:v.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[v.definitionKeyword,v.modifier],color:"#ff5792"},{tag:[v.className,v.tagName,v.definition(v.typeName)],color:"#0094f0"},{tag:[v.number,v.bool,v.null,v.special(v.brace)],color:"#5842ff"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#0095a8"},{tag:v.typeName,color:"#b3694d"},{tag:[v.propertyName,v.variableName],color:"#fa8900"},{tag:v.operator,color:"#ff5792"},{tag:v.self,color:"#e64100"},{tag:[v.string,v.regexp],color:"#00b368"},{tag:[v.paren,v.bracket],color:"#0431fa"},{tag:v.labelName,color:"#00bdd6"},{tag:v.attributeName,color:"#e64100"},{tag:v.angleBracket,color:"#9995b7"}]}),qy=nt({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:v.comment,color:"#9893a5"},{tag:[v.bool,v.null],color:"#286983"},{tag:v.number,color:"#d7827e"},{tag:v.className,color:"#d7827e"},{tag:[v.angleBracket,v.tagName,v.typeName],color:"#56949f"},{tag:v.attributeName,color:"#907aa9"},{tag:v.punctuation,color:"#797593"},{tag:[v.keyword,v.modifier],color:"#286983"},{tag:[v.string,v.regexp],color:"#ea9d34"},{tag:v.variableName,color:"#d7827e"}]}),Gy=nt({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:v.comment,color:"#CFCFCF"},{tag:[v.number,v.bool,v.null],color:"#E66C29"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.labelName,v.definition(v.typeName)],color:"#2EB43B"},{tag:v.keyword,color:"#D8B229"},{tag:v.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[v.definitionKeyword,v.modifier],color:"#925A47"},{tag:v.string,color:"#704D3D"},{tag:v.typeName,color:"#2F8996"},{tag:[v.variableName,v.propertyName],color:"#77ACB0"},{tag:v.self,color:"#77ACB0",fontWeight:"bold"},{tag:v.regexp,color:"#E3965E"},{tag:[v.tagName,v.angleBracket],color:"#BAA827"},{tag:v.attributeName,color:"#B06520"},{tag:v.derefOperator,color:"#000"}]}),Ky=nt({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:v.comment,color:"#93A1A1"},{tag:v.string,color:"#2AA198"},{tag:v.regexp,color:"#D30102"},{tag:v.number,color:"#D33682"},{tag:v.variableName,color:"#268BD2"},{tag:[v.keyword,v.operator,v.punctuation],color:"#859900"},{tag:[v.definitionKeyword,v.modifier],color:"#073642",fontWeight:"bold"},{tag:[v.className,v.self,v.definition(v.propertyName)],color:"#268BD2"},{tag:v.function(v.variableName),color:"#268BD2"},{tag:[v.bool,v.null],color:"#B58900"},{tag:v.tagName,color:"#268BD2",fontWeight:"bold"},{tag:v.angleBracket,color:"#93A1A1"},{tag:v.attributeName,color:"#93A1A1"},{tag:v.typeName,color:"#859900"}]}),Yy=nt({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:v.comment,color:"#8E908C"},{tag:[v.variableName,v.self,v.propertyName,v.attributeName,v.regexp],color:"#C82829"},{tag:[v.number,v.bool,v.null],color:"#F5871F"},{tag:[v.className,v.typeName,v.definition(v.typeName)],color:"#C99E00"},{tag:[v.string,v.special(v.brace)],color:"#718C00"},{tag:v.operator,color:"#3E999F"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#4271AE"},{tag:v.keyword,color:"#8959A8"},{tag:v.derefOperator,color:"#4D4D4C"}]}),aw=Object.freeze(Object.defineProperty({__proto__:null,amy:Ly,ayuLight:Dy,barf:Ny,bespin:Py,birdsOfParadise:Fy,boysAndGirls:$y,clouds:Wy,cobalt:Uy,coolGlow:jy,createTheme:nt,dracula:Hy,espresso:Vy,noctisLilac:zy,rosePineDawn:qy,smoothy:Gy,solarizedLight:Ky,tomorrow:Yy},Symbol.toStringTag,{value:"Module"}));function wh(){return wh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},wh.apply(null,arguments)}export{pf as $,Ae as A,oi as B,ew as C,bb as D,Oe as E,tw as F,Qr as G,li as H,ze as I,Te as J,qt as K,ts as L,Un as M,sw as N,n0 as O,Df as P,bt as Q,rn as R,De as S,Ue as T,Pn as U,He as V,G0 as W,tt as X,Le as Y,vl as Z,At as _,Qy as a,Re as a0,Cl as a1,Pe as a2,lt as a3,mn as a4,Zt as a5,bs as a6,Ml as a7,ls as a8,Rl as a9,Ke as aa,Xt as ab,Ti as ac,Ki as ad,ui as ae,tc as af,wh as ag,Zd as ah,nw as ai,rw as aj,lw as ak,aw as al,Xy as b,Lh as c,gt as d,Pb as e,Gf as f,Ne as g,Jy as h,Il as i,zb as j,Xb as k,Gb as l,Sl as m,pt as n,Ie as o,rl as p,ag as q,Zy as r,Rb as s,v as t,tu as u,vt as v,Sf as w,be as x,we as y,Z0 as z};
