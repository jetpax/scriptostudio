function bu(n,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yu(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),e}var wu=vu;function vu(n,t){if(n)try{var e=document.querySelector(n);e&&e.scrollIntoView(t)}catch{}}var Su=xu;function xu(n){if(typeof document>"u")throw new Error("document-ready only runs in the browser");var t=document.readyState;if(t==="complete"||t==="interactive")return setTimeout(n,0);document.addEventListener("DOMContentLoaded",function(){n()})}Xe.notEqual=Eu;Xe.notOk=ku;Xe.equal=Au;Xe.ok=Xe;var Ee=Xe;function Au(n,t,e){Xe(n==t,e)}function Eu(n,t,e){Xe(n!=t,e)}function ku(n,t){Xe(!n,t)}function Xe(n,t){if(!n)throw new Error(t||"AssertionError")}var _u=Ee,Tu=typeof window<"u";function Cu(){var n;return Tu?(window._nanoScheduler||(window._nanoScheduler=new _n(!0)),n=window._nanoScheduler):n=new _n,n}function _n(n){this.hasWindow=n,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}_n.prototype.push=function(n){_u.equal(typeof n,"function","nanoscheduler.push: cb should be type function"),this.queue.push(n),this.schedule()};_n.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var n=this;this.method(function(t){for(var e;n.queue.length&&t.timeRemaining()>0;)e=n.queue.shift(),e(t);n.scheduled=!1,n.queue.length&&n.schedule()})}};_n.prototype.setTimeout=function(n){setTimeout(n,0,{timeRemaining:function(){return 1}})};var Mu=Cu,Da=Mu(),Ru=Ee,ei;Ur.disabled=!0;try{ei=window.performance,Ur.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!ei.mark}catch{}var Ao=Ur;function Ur(n){if(Ru.equal(typeof n,"string","nanotiming: name should be type string"),Ur.disabled)return Iu;var t=(ei.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,e="start-"+t+"-"+n;ei.mark(e);function i(r){var s="end-"+t+"-"+n;ei.mark(s),Da.push(function(){var o=null;try{var a=n+" ["+t+"]";ei.measure(a,e,s),ei.clearMarks(e),ei.clearMarks(s)}catch(l){o=l}r&&r(o,n)})}return i.uuid=t,i}function Iu(n){n&&Da.push(function(){n(new Error("nanotiming: performance API unavailable"))})}var Er=Ee,Bu=Ui;function Ui(){if(!(this instanceof Ui))return new Ui;this.trie={nodes:{}}}Ui.prototype.create=function(n){Er.equal(typeof n,"string","route should be a string");var t=n.replace(/^\//,"").split("/");function e(i,r){var s=dr(t,i)&&t[i];if(s===!1)return r;var o=null;return/^:|^\*/.test(s)?(dr(r.nodes,"$$")?o=r.nodes.$$:(o={nodes:{}},r.nodes.$$=o),s[0]==="*"&&(r.wildcard=!0),r.name=s.replace(/^:|^\*/,"")):dr(r.nodes,s)?o=r.nodes[s]:(o={nodes:{}},r.nodes[s]=o),e(i+1,o)}return e(0,this.trie)};Ui.prototype.match=function(n){Er.equal(typeof n,"string","route should be a string");var t=n.replace(/^\//,"").split("/"),e={};function i(s,o){if(o!==void 0){var a=t[s];if(a===void 0)return o;if(dr(o.nodes,a))return i(s+1,o.nodes[a]);if(o.name){try{e[o.name]=decodeURIComponent(a)}catch{return i(s,void 0)}return i(s+1,o.nodes.$$)}else if(o.wildcard){try{e.wildcard=decodeURIComponent(t.slice(s).join("/"))}catch{return i(s,void 0)}return o.nodes.$$}else return i(s+1)}}var r=i(0,this.trie);if(r)return r=Object.assign({},r),r.params=e,r};Ui.prototype.mount=function(n,t){Er.equal(typeof n,"string","route should be a string"),Er.equal(typeof t,"object","trie should be a object");var e=n.replace(/^\//,"").split("/"),i=null,r=null;if(e.length===1)r=e[0],i=this.create(r);else{var s=e.join("/");r=e[0],i=this.create(s)}Object.assign(i.nodes,t.nodes),t.name&&(i.name=t.name),i.nodes[""]&&(Object.keys(i.nodes[""]).forEach(function(o){o!=="nodes"&&(i[o]=i.nodes[""][o])}),Object.assign(i.nodes,i.nodes[""].nodes),delete i.nodes[""].nodes)};function dr(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var ns=Ee,Ou=Bu,Lu=Ms;function Ms(n){if(!(this instanceof Ms))return new Ms(n);var t=(n||"").replace(/^\//,""),e=Ou();return r._trie=e,r.on=i,r.emit=r,r.match=s,r._wayfarer=!0,r;function i(a,l){if(ns.equal(typeof a,"string"),ns.equal(typeof l,"function"),a=a||"/",l._wayfarer&&l._trie)e.mount(a,l._trie.trie);else{var h=e.create(a);h.cb=l,h.route=a}return r}function r(a){var l=s(a),h=new Array(arguments.length);h[0]=l.params;for(var f=1;f<h.length;f++)h[f]=arguments[f];return l.cb.apply(l.cb,h)}function s(a){ns.notEqual(a,void 0,"'route' must be defined");var l=e.match(a);if(l&&l.cb)return new o(l);var h=e.match(t);if(h&&h.cb)return new o(h);throw new Error("route '"+a+"' did not match")}function o(a){this.cb=a.cb,this.route=a.route,this.params=a.params}}var Eo=Ee,Nu=Lu,Pa=/file:\/\//.test(typeof window=="object"&&window.location&&window.location.origin),Du="^(file://|/)(.*.html?/?)?",Pu="^(http(s)?(://))?(www.)?",Fu="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",Wu="[?].*$",Uu=new RegExp(Du),ju=new RegExp(Pu+Fu),Hu=new RegExp("#"),Vu=new RegExp(Wu),$u=ji;function ji(n){if(!(this instanceof ji))return new ji(n);n=n||{},this.router=Nu(n.default||"/404")}ji.prototype.on=function(n,t){Eo.equal(typeof n,"string"),n=n.replace(/^[#/]/,""),this.router.on(n,t)};ji.prototype.emit=function(n){return Eo.equal(typeof n,"string"),n=Fa(n,Pa),this.router.emit(n)};ji.prototype.match=function(n){return Eo.equal(typeof n,"string"),n=Fa(n,Pa),this.router.match(n)};function Fa(n,t){return t?n=n.replace(Uu,""):n=n.replace(ju,""),decodeURI(n.replace(Vu,"").replace(Hu,"/"))}var qu=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],Wa=qu,zu=Wa.length,Gu=1,Ku=3,Yu=8,Xu=Ju;function Ju(n,t){var e=n.nodeType,i=n.nodeName;e===Gu&&Qu(n,t),(e===Ku||e===Yu)&&t.nodeValue!==n.nodeValue&&(t.nodeValue=n.nodeValue),i==="INPUT"?ec(n,t):i==="OPTION"?tc(n,t):i==="TEXTAREA"&&ic(n,t),Zu(n,t)}function Qu(n,t){for(var e=t.attributes,i=n.attributes,r=null,s=null,o=null,a=null,l=null,h=i.length-1;h>=0;--h)l=i[h],a=l.name,r=l.namespaceURI,s=l.value,r?(a=l.localName||a,o=t.getAttributeNS(r,a),o!==s&&t.setAttributeNS(r,a,s)):t.hasAttribute(a)?(o=t.getAttribute(a),o!==s&&(s==="null"||s==="undefined"?t.removeAttribute(a):t.setAttribute(a,s))):t.setAttribute(a,s);for(var f=e.length-1;f>=0;--f)l=e[f],l.specified!==!1&&(a=l.name,r=l.namespaceURI,r?(a=l.localName||a,n.hasAttributeNS(r,a)||t.removeAttributeNS(r,a)):n.hasAttributeNS(null,a)||t.removeAttribute(a))}function Zu(n,t){for(var e=0;e<zu;e++){var i=Wa[e];n[i]?t[i]=n[i]:t[i]&&(t[i]=void 0)}}function tc(n,t){Rs(n,t,"selected")}function ec(n,t){var e=n.value,i=t.value;Rs(n,t,"checked"),Rs(n,t,"disabled"),n.indeterminate!==t.indeterminate&&(t.indeterminate=n.indeterminate),t.type!=="file"&&(e!==i&&(t.setAttribute("value",e),t.value=e),e==="null"&&(t.value="",t.removeAttribute("value")),n.hasAttributeNS(null,"value")?t.type==="range"&&(t.value=e):t.removeAttribute("value"))}function ic(n,t){var e=n.value;if(e!==t.value&&(t.value=e),t.firstChild&&t.firstChild.nodeValue!==e){if(e===""&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=e}}function Rs(n,t,e){n[e]!==t[e]&&(t[e]=n[e],n[e]?t.setAttribute(e,""):t.removeAttribute(e))}var rs=Ee,nc=Xu,rc=3,Ua=sc;function sc(n,t,e){return rs.equal(typeof n,"object","nanomorph: oldTree should be an object"),rs.equal(typeof t,"object","nanomorph: newTree should be an object"),e&&e.childrenOnly?(ja(t,n),n):(rs.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),pr(t,n))}function pr(n,t){return t?n?n.isSameNode&&n.isSameNode(t)?t:n.tagName!==t.tagName||hl(n)!==hl(t)?n:(nc(n,t),ja(n,t),t):null:n}function hl(n){return n.dataset?n.dataset.nanomorphComponentId:void 0}function ja(n,t){for(var e,i,r,s,o=0,a=0;e=t.childNodes[a],i=n.childNodes[a-o],!(!e&&!i);a++)if(!i)t.removeChild(e),a--;else if(!e)t.appendChild(i),o++;else if(fl(i,e))r=pr(i,e),r!==e&&(t.replaceChild(r,e),o++);else{s=null;for(var l=a;l<t.childNodes.length;l++)if(fl(t.childNodes[l],i)){s=t.childNodes[l];break}s?(r=pr(i,s),r!==s&&o++,t.insertBefore(r,e)):!i.id&&!e.id?(r=pr(i,e),r!==e&&(t.replaceChild(r,e),o++)):(t.insertBefore(i,e),o++)}}function fl(n,t){return n.id?n.id===t.id:n.isSameNode?n.isSameNode(t):n.tagName!==t.tagName?!1:n.type===rc?n.nodeValue===t.nodeValue:!1}var oc=/([^?=&]+)(=([^&]*))?/g,lc=Ee,ac=hc;function hc(n){lc.equal(typeof n,"string","nanoquery: url should be type string");var t={};return n.replace(/^.*\?/,"").replace(oc,function(e,i,r,s){var o=decodeURIComponent(s),a=decodeURIComponent(i);t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(o):t[a]=[t[a],o]:t[a]=o}),t}var ss=Ee,fc=/(noopener|noreferrer) (noopener|noreferrer)/,uc=/^[\w-_]+:/,cc=dc;function dc(n,t){ss.notEqual(typeof window,"undefined","nanohref: expected window to exist"),t=t||window.document,ss.equal(typeof n,"function","nanohref: cb should be type function"),ss.equal(typeof t,"object","nanohref: root should be type object"),window.addEventListener("click",function(e){if(!(e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.defaultPrevented)){var i=function r(s){if(!(!s||s===t))return s.localName!=="a"||s.href===void 0?r(s.parentNode):s}(e.target);i&&(window.location.protocol!==i.protocol||window.location.hostname!==i.hostname||window.location.port!==i.port||i.hasAttribute("data-nanohref-ignore")||i.hasAttribute("download")||i.getAttribute("target")==="_blank"&&fc.test(i.getAttribute("rel"))||uc.test(i.getAttribute("href"))||(e.preventDefault(),n(i)))}})}var ul=Ee,pc=gc;function gc(n,t){ul.equal(typeof n,"function","nanoraf: render should be a function"),ul.ok(typeof t=="function"||typeof t>"u","nanoraf: raf should be a function or undefined"),t||(t=window.requestAnimationFrame);var e=!1,i=null;return function(){i===null&&!e&&(e=!0,t(function(){e=!1;for(var o=i.length,a=new Array(o),l=0;l<o;l++)a[l]=i[l];n.apply(n,a),i=null})),i=arguments}}var mc=function(t,e,i){var r,s=t.length;if(!(e>=s||i===0)){i=e+i>s?s-e:i;var o=s-i;for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}},bc=mc,yc=Ao,Me=Ee,wc=me;function me(n){if(!(this instanceof me))return new me(n);this._name=n||"nanobus",this._starListeners=[],this._listeners={}}me.prototype.emit=function(n){Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.emit: eventName should be type string or symbol");for(var t=[],e=1,i=arguments.length;e<i;e++)t.push(arguments[e]);var r=yc(this._name+"('"+n.toString()+"')"),s=this._listeners[n];return s&&s.length>0&&this._emit(this._listeners[n],t),this._starListeners.length>0&&this._emit(this._starListeners,n,t,r.uuid),r(),this};me.prototype.on=me.prototype.addListener=function(n,t){return Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.on: eventName should be type string or symbol"),Me.equal(typeof t,"function","nanobus.on: listener should be type function"),n==="*"?this._starListeners.push(t):(this._listeners[n]||(this._listeners[n]=[]),this._listeners[n].push(t)),this};me.prototype.prependListener=function(n,t){return Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.prependListener: eventName should be type string or symbol"),Me.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),n==="*"?this._starListeners.unshift(t):(this._listeners[n]||(this._listeners[n]=[]),this._listeners[n].unshift(t)),this};me.prototype.once=function(n,t){Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.once: eventName should be type string or symbol"),Me.equal(typeof t,"function","nanobus.once: listener should be type function");var e=this;this.on(n,i);function i(){t.apply(e,arguments),e.removeListener(n,i)}return this};me.prototype.prependOnceListener=function(n,t){Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),Me.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var e=this;this.prependListener(n,i);function i(){t.apply(e,arguments),e.removeListener(n,i)}return this};me.prototype.removeListener=function(n,t){if(Me.ok(typeof n=="string"||typeof n=="symbol","nanobus.removeListener: eventName should be type string or symbol"),Me.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),n==="*")return this._starListeners=this._starListeners.slice(),e(this._starListeners,t);return typeof this._listeners[n]<"u"&&(this._listeners[n]=this._listeners[n].slice()),e(this._listeners[n],t);function e(i,r){if(i){var s=i.indexOf(r);if(s!==-1)return bc(i,s,1),!0}}};me.prototype.removeAllListeners=function(n){return n?n==="*"?this._starListeners=[]:this._listeners[n]=[]:(this._starListeners=[],this._listeners={}),this};me.prototype.listeners=function(n){var t=n!=="*"?this._listeners[n]:this._starListeners,e=[];if(t)for(var i=t.length,r=0;r<i;r++)e.push(t[r]);return e};me.prototype._emit=function(n,t,e,i){if(!(typeof n>"u")&&n.length!==0){e===void 0&&(e=t,t=null),t&&(i!==void 0?e=[t].concat(e,i):e=[t].concat(e));for(var r=n.length,s=0;s<r;s++){var o=n[s];o.apply(o,e)}}};var vc=xe;function xe(n){if(!(this instanceof xe))return new xe(n);typeof n=="number"&&(n={max:n}),n||(n={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=n.max||1e3,this.maxAge=n.maxAge||0}Object.defineProperty(xe.prototype,"keys",{get:function(){return Object.keys(this.cache)}});xe.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};xe.prototype.remove=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var t=this.cache[n];return delete this.cache[n],this._unlink(n,t.prev,t.next),t.value}};xe.prototype._unlink=function(n,t,e){this.length--,this.length===0?this.head=this.tail=null:this.head===n?(this.head=t,this.cache[this.head].next=null):this.tail===n?(this.tail=e,this.cache[this.tail].prev=null):(this.cache[t].next=e,this.cache[e].prev=t)};xe.prototype.peek=function(n){if(this.cache.hasOwnProperty(n)){var t=this.cache[n];if(this._checkAge(n,t))return t.value}};xe.prototype.set=function(n,t){typeof n!="string"&&(n=""+n);var e;if(this.cache.hasOwnProperty(n)){if(e=this.cache[n],e.value=t,this.maxAge&&(e.modified=Date.now()),n===this.head)return t;this._unlink(n,e.prev,e.next)}else e={value:t,modified:0,next:null,prev:null},this.maxAge&&(e.modified=Date.now()),this.cache[n]=e,this.length===this.max&&this.evict();return this.length++,e.next=null,e.prev=this.head,this.head&&(this.cache[this.head].next=n),this.head=n,this.tail||(this.tail=n),t};xe.prototype._checkAge=function(n,t){return this.maxAge&&Date.now()-t.modified>this.maxAge?(this.remove(n),!1):!0};xe.prototype.get=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var t=this.cache[n];if(this._checkAge(n,t))return this.head!==n&&(n===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=n,t.prev=this.head,t.next=null,this.head=n),t.value}};xe.prototype.evict=function(){this.tail&&this.remove(this.tail)};var mn=Ee,cl=vc,Sc=ko;function ko(n,t,e){mn.ok(this instanceof ko,"ChooComponentCache should be created with `new`"),mn.equal(typeof n,"object","ChooComponentCache: state should be type object"),mn.equal(typeof t,"function","ChooComponentCache: emit should be type function"),typeof e=="number"?this.cache=new cl(e):this.cache=e||new cl(100),this.state=n,this.emit=t}ko.prototype.render=function(n,t){mn.equal(typeof n,"function","ChooComponentCache.render: Component should be type function"),mn.ok(typeof t=="string"||typeof t=="number","ChooComponentCache.render: id should be type string or type number");var e=this.cache.get(t);if(!e){for(var i=[],r=2,s=arguments.length;r<s;r++)i.push(arguments[r]);i.unshift(n,t,this.state,this.emit),e=dl.apply(dl,i),this.cache.set(t,e)}return e};function dl(n){return new(n.bind.apply(n,arguments))}var pl=wu,Ha=Su,$e=Ao,xc=$u,Va=Ua,Ac=ac,Ec=cc,kc=pc,_c=wc,$t=Ee,Tc=Sc,Cc=Re,gl={};function Re(n){var t=$e("choo.constructor");if(!(this instanceof Re))return new Re(n);n=n||{},$t.equal(typeof n,"object","choo: opts should be type object");var e=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=n.history===void 0?!0:n.history,this._hrefEnabled=n.href===void 0?!0:n.href,this._hashEnabled=n.hash===void 0?!1:n.hash,this._hasWindow=typeof window<"u",this._cache=n.cache,this._loaded=!1,this._stores=[r],this._tree=null;var i={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,i):i,delete window.initialState):this.state=i,this.router=xc({curry:!0}),this.emitter=_c("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title);function r(s){e.emitter.prependListener(e._events.DOMTITLECHANGE,function(o){$t.equal(typeof o,"string","events.DOMTitleChange: title should be type string"),s.title=o,e._hasWindow&&(document.title=o)})}t()}Re.prototype.route=function(n,t){var e=$e("choo.route('"+n+"')");$t.equal(typeof n,"string","choo.route: route should be type string"),$t.equal(typeof t,"function","choo.handler: route should be type function"),this.router.on(n,t),e()};Re.prototype.use=function(n){$t.equal(typeof n,"function","choo.use: cb should be type function");var t=this;this._stores.push(function(e){var i="choo.use";i=n.storeName?i+"("+n.storeName+")":i;var r=$e(i);n(e,t.emitter,t),r()})};Re.prototype.start=function(){$t.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var n=$e("choo.start"),t=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){t._matchRoute(t.state),t._loaded&&(t.emitter.emit(t._events.RENDER),setTimeout(pl.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){$t.equal(typeof e,"string","events.pushState: href should be type string"),window.history.pushState(gl,null,e),t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){$t.equal(typeof e,"string","events.replaceState: href should be type string"),window.history.replaceState(gl,null,e),t.emitter.emit(t._events.NAVIGATE)}),window.onpopstate=function(){t.emitter.emit(t._events.POPSTATE)},t._hrefEnabled&&Ec(function(e){var i=e.href,r=e.hash;if(i===window.location.href){!t._hashEnabled&&r&&pl(r);return}t.emitter.emit(t._events.PUSHSTATE,i)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(e){e(t.state)}),this._tree=this._prerender(this.state),$t.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(t._events.RENDER,kc(function(){var e=$e("choo.render"),i=t._prerender(t.state);$t.ok(i,"choo.render: no valid DOM node returned for location "+t.state.href),$t.equal(t._tree.nodeName,i.nodeName,"choo.render: The target node <"+t._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+i.nodeName.toLowerCase()+">.");var r=$e("choo.morph");Va(t._tree,i),r(),e()})),Ha(function(){t.emitter.emit(t._events.DOMCONTENTLOADED),t._loaded=!0}),n(),this._tree};Re.prototype.mount=function(t){var e=$e("choo.mount('"+t+"')");if(typeof window!="object")return $t.ok(typeof t=="string","choo.mount: selector should be type String"),this.selector=t,e(),this;$t.ok(typeof t=="string"||typeof t=="object","choo.mount: selector should be type String or HTMLElement");var i=this;Ha(function(){var r=$e("choo.render"),s=i.start();typeof t=="string"?i._tree=document.querySelector(t):i._tree=t,$t.ok(i._tree,"choo.mount: could not query selector: "+t),$t.equal(i._tree.nodeName,s.nodeName,"choo.mount: The target node <"+i._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+s.nodeName.toLowerCase()+">.");var o=$e("choo.morph");Va(i._tree,s),o(),r()}),e()};Re.prototype.toString=function(n,t){t=t||{},t.components=t.components||{},t.events=Object.assign({},t.events,this._events),$t.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),$t.equal(typeof n,"string","choo.toString: location should be type string"),$t.equal(typeof t,"object","choo.toString: state should be type object"),this._setCache(t),this._matchRoute(t,n),this.emitter.removeAllListeners(),this._stores.forEach(function(i){i(t)});var e=this._prerender(t);return $t.ok(e,"choo.toString: no valid value returned for the route "+n),$t(!Array.isArray(e),"choo.toString: return value was an array for the route "+n),typeof e.outerHTML=="string"?e.outerHTML:e.toString()};Re.prototype._matchRoute=function(n,t){var e,i;t?(e=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(e=e.replace(/#.+$/,"")),i=t):(e=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(e+=window.location.hash.replace(/^#/,"/")),i=window.location.search);var r=this.router.match(e);this._handler=r.cb,n.href=e,n.query=Ac(i),n.route=r.route,n.params=r.params};Re.prototype._prerender=function(n){var t=$e("choo.prerender('"+n.route+"')"),e=this._handler(n,this.emit);return t(),e};Re.prototype._setCache=function(n){var t=new Tc(n,this.emitter.emit.bind(this.emitter),this._cache);n.cache=e;function e(i,r){$t.equal(typeof i,"function","choo.state.cache: Component should be type function");for(var s=[],o=0,a=arguments.length;o<a;o++)s.push(arguments[o]);return t.render.apply(t,s)}e.toJSON=function(){return null}};const ub=Wn(Cc);var Mc=Rc,ml={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function Rc(n){return function(t,e,i){for(var r in e)r in ml&&(e[ml[r]]=e[r],delete e[r]);return n(t,e,i)}}var Ic=Mc,Mi=0,Oe=1,le=2,$n=3,Te=4,Ut=5,os=6,pi=7,Gt=8,Bi=9,Oi=10,nn=11,gi=12,Ri=13,Bc=function(n,t){t||(t={});var e=t.concat||function(r,s){return String(r)+String(s)};return t.attrToProp!==!1&&(n=Ic(n)),function(r){for(var s=Oe,o="",a=arguments.length,l=[],h=0;h<r.length;h++)if(h<a-1){var f=arguments[h+1],c=y(r[h]),g=s;g===Oi&&(g=Gt),g===Bi&&(g=Gt),g===pi&&(g=Gt),g===Te&&(g=Ut),g===le?o==="/"?(c.push([le,"/",f]),o=""):c.push([le,f]):g===Ri&&t.comments?o+=String(f):g!==Ri&&c.push([Mi,g,f]),l.push.apply(l,c)}else l.push.apply(l,y(r[h]));for(var m=[null,{},[]],u=[[m,-1]],h=0;h<l.length;h++){var p=u[u.length-1][0],c=l[h],w=c[0];if(w===le&&/^\//.test(c[1])){var _=u[u.length-1][1];u.length>1&&(u.pop(),u[u.length-1][0][2][_]=n(p[0],p[1],p[2].length?p[2]:void 0))}else if(w===le){var R=[c[1],{},[]];p[2].push(R),u.push([R,p[2].length-1])}else if(w===Ut||w===Mi&&c[1]===Ut){for(var A="",k;h<l.length;h++)if(l[h][0]===Ut)A=e(A,l[h][1]);else if(l[h][0]===Mi&&l[h][1]===Ut)if(typeof l[h][2]=="object"&&!A)for(k in l[h][2])l[h][2].hasOwnProperty(k)&&!p[1][k]&&(p[1][k]=l[h][2][k]);else A=e(A,l[h][2]);else break;l[h][0]===nn&&h++;for(var E=h;h<l.length;h++)if(l[h][0]===Gt||l[h][0]===Ut)p[1][A]?l[h][1]===""||(p[1][A]=e(p[1][A],l[h][1])):p[1][A]=i(l[h][1]);else if(l[h][0]===Mi&&(l[h][1]===Gt||l[h][1]===Ut))p[1][A]?l[h][2]===""||(p[1][A]=e(p[1][A],l[h][2])):p[1][A]=i(l[h][2]);else{A.length&&!p[1][A]&&h===E&&(l[h][0]===$n||l[h][0]===gi)&&(p[1][A]=A.toLowerCase()),l[h][0]===$n&&h--;break}}else if(w===Ut)p[1][c[1]]=!0;else if(w===Mi&&c[1]===Ut)p[1][c[2]]=!0;else if(w===$n){if(Nc(p[0])&&u.length){var _=u[u.length-1][1];u.pop(),u[u.length-1][0][2][_]=n(p[0],p[1],p[2].length?p[2]:void 0)}}else if(w===Mi&&c[1]===Oe)c[2]===void 0||c[2]===null?c[2]="":c[2]||(c[2]=e("",c[2])),Array.isArray(c[2][0])?p[2].push.apply(p[2],c[2]):p[2].push(c[2]);else if(w===Oe)p[2].push(c[1]);else if(!(w===nn||w===gi))throw new Error("unhandled: "+w)}if(m[2].length>1&&/^\s*$/.test(m[2][0])&&m[2].shift(),m[2].length>2||m[2].length===2&&/\S/.test(m[2][1])){if(t.createFragment)return t.createFragment(m[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(m[2][0])&&typeof m[2][0][0]=="string"&&Array.isArray(m[2][0][2])&&(m[2][0]=n(m[2][0][0],m[2][0][1],m[2][0][2])),m[2][0];function y(S){var M=[];s===pi&&(s=Te);for(var I=0;I<S.length;I++){var q=S.charAt(I);s===Oe&&q==="<"?(o.length&&M.push([Oe,o]),o="",s=le):q===">"&&!Oc(s)&&s!==Ri?(s===le&&o.length?M.push([le,o]):s===Ut?M.push([Ut,o]):s===Gt&&o.length&&M.push([Gt,o]),M.push([$n]),o="",s=Oe):s===Ri&&/-$/.test(o)&&q==="-"?(t.comments&&M.push([Gt,o.substr(0,o.length-1)]),o="",s=Oe):s===le&&/^!--$/.test(o)?(t.comments&&M.push([le,o],[Ut,"comment"],[nn]),o=q,s=Ri):s===Oe||s===Ri?o+=q:s===le&&q==="/"&&o.length||(s===le&&/\s/.test(q)?(o.length&&M.push([le,o]),o="",s=Te):s===le?o+=q:s===Te&&/[^\s"'=/]/.test(q)?(s=Ut,o=q):s===Te&&/\s/.test(q)?(o.length&&M.push([Ut,o]),M.push([gi])):s===Ut&&/\s/.test(q)?(M.push([Ut,o]),o="",s=os):s===Ut&&q==="="?(M.push([Ut,o],[nn]),o="",s=pi):s===Ut?o+=q:(s===os||s===Te)&&q==="="?(M.push([nn]),s=pi):(s===os||s===Te)&&!/\s/.test(q)?(M.push([gi]),/[\w-]/.test(q)?(o+=q,s=Ut):s=Te):s===pi&&q==='"'?s=Oi:s===pi&&q==="'"?s=Bi:s===Oi&&q==='"'?(M.push([Gt,o],[gi]),o="",s=Te):s===Bi&&q==="'"?(M.push([Gt,o],[gi]),o="",s=Te):s===pi&&!/\s/.test(q)?(s=Gt,I--):s===Gt&&/\s/.test(q)?(M.push([Gt,o],[gi]),o="",s=Te):(s===Gt||s===Bi||s===Oi)&&(o+=q))}return s===Oe&&o.length?(M.push([Oe,o]),o=""):s===Gt&&o.length?(M.push([Gt,o]),o=""):s===Oi&&o.length?(M.push([Gt,o]),o=""):s===Bi&&o.length?(M.push([Gt,o]),o=""):s===Ut&&(M.push([Ut,o]),o=""),M}};function i(r){return typeof r=="function"||typeof r=="string"||r&&typeof r=="object"||r==null?r:e("",r)}};function Oc(n){return n===Bi||n===Oi}var Lc=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$");function Nc(n){return Lc.test(n)}var qn=/\n[\s]+$/,zn=/^\n[\s]+/,bl=/[\s]+$/,yl=/^[\s]+/,Gn=/[\n\s]+/g,wl=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Kn=["code","pre","textarea"],Dc=function n(t,e){if(Array.isArray(e))for(var i=t.nodeName.toLowerCase(),r=!1,s,o,a=0,l=e.length;a<l;a++){var h=e[a];if(Array.isArray(h)){n(t,h);continue}(typeof h=="number"||typeof h=="boolean"||typeof h=="function"||h instanceof Date||h instanceof RegExp)&&(h=h.toString());var f=t.childNodes[t.childNodes.length-1];if(typeof h=="string")r=!0,f&&f.nodeName==="#text"?f.nodeValue+=h:(h=t.ownerDocument.createTextNode(h),t.appendChild(h),f=h),a===l-1&&(r=!1,wl.indexOf(i)===-1&&Kn.indexOf(i)===-1?(s=f.nodeValue.replace(zn,"").replace(bl,"").replace(qn,"").replace(Gn," "),s===""?t.removeChild(f):f.nodeValue=s):Kn.indexOf(i)===-1&&(o=a===0?"":" ",s=f.nodeValue.replace(zn,o).replace(yl," ").replace(bl,"").replace(qn,"").replace(Gn," "),f.nodeValue=s));else if(h&&h.nodeType){r&&(r=!1,wl.indexOf(i)===-1&&Kn.indexOf(i)===-1?(s=f.nodeValue.replace(zn,"").replace(qn," ").replace(Gn," "),s===""?t.removeChild(f):f.nodeValue=s):Kn.indexOf(i)===-1&&(s=f.nodeValue.replace(yl," ").replace(zn,"").replace(qn," ").replace(Gn," "),f.nodeValue=s));var c=h.nodeName;c&&(i=c.toLowerCase()),t.appendChild(h)}}},Pc=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Fc=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],Wc=["indeterminate"],Uc=Bc,jc=Dc,Hc=Pc,Vc=Fc,$c=Wc,qc="http://www.w3.org/2000/svg",zc="http://www.w3.org/1999/xlink",Gc="!--",Kc=function(n){function t(r,s,o){var a;Hc.indexOf(r)!==-1&&(s.namespace=qc);var l=!1;s.namespace&&(l=s.namespace,delete s.namespace);var h=!1;if(s.is&&(h=s.is,delete s.is),l)h?a=n.createElementNS(l,r,{is:h}):a=n.createElementNS(l,r);else{if(r===Gc)return n.createComment(s.comment);h?a=n.createElement(r,{is:h}):a=n.createElement(r)}for(var f in s)if(s.hasOwnProperty(f)){var c=f.toLowerCase(),g=s[f];if(c==="classname"&&(c="class",f="class"),f==="htmlFor"&&(f="for"),Vc.indexOf(c)!==-1){if(String(g)==="true")g=c;else if(String(g)==="false")continue}c.slice(0,2)==="on"||$c.indexOf(c)!==-1?a[f]=g:l?f==="xlink:href"?a.setAttributeNS(zc,f,g):/^xmlns($|:)/i.test(f)||a.setAttributeNS(null,f,g):a.setAttribute(f,g)}return jc(a,o),a}function e(r){for(var s=n.createDocumentFragment(),o=0;o<r.length;o++)r[o]!=null&&(Array.isArray(r[o])?s.appendChild(e(r[o])):(typeof r[o]=="string"&&(r[o]=n.createTextNode(r[o])),s.appendChild(r[o])));return s}var i=Uc(t,{comments:!0,createFragment:e});return i.default=i,i.createComment=t,i},Yc=Kc(document),Xc=Yc;const cb=Wn(Xc);function Jc(n){var t=document.createElement("div");return t.innerHTML=n,Qc(t.childNodes)}function Qc(n){return Array.isArray(n)?n:[].slice.call(n)}var Zc=Jc,td=Zc;const db=Wn(td),ed={},id=Object.freeze(Object.defineProperty({__proto__:null,default:ed},Symbol.toStringTag,{value:"Module"})),nd=yu(id);var vl=typeof Fe<"u"?Fe:typeof window<"u"?window:{},rd=nd,an;typeof document<"u"?an=document:(an=vl["__GLOBAL_DOCUMENT_CACHE@4"],an||(an=vl["__GLOBAL_DOCUMENT_CACHE@4"]=rd));var $a=an,jr={exports:{}},hn;typeof window<"u"?hn=window:typeof Fe<"u"?hn=Fe:typeof self<"u"?hn=self:hn={};var sd=hn,ls=$a,Sl=sd,Qt=Object.create(null),qa="onloadid"+Math.random().toString(36).slice(2),Si="data-"+qa,as=0;if(Sl&&Sl.MutationObserver){var od=new MutationObserver(function(n){if(!(Object.keys(Qt).length<1))for(var t=0;t<n.length;t++){if(n[t].attributeName===Si){ld(n[t],xl,Al);continue}Is(n[t].removedNodes,function(e,i){ls.documentElement.contains(i)||Al(e,i)}),Is(n[t].addedNodes,function(e,i){ls.documentElement.contains(i)&&xl(e,i)})}});od.observe(ls.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[Si]})}jr.exports=function n(t,e,i,r){return e=e||function(){},i=i||function(){},t.setAttribute(Si,"o"+as),Qt["o"+as]=[e,i,0,r||n.caller],as+=1,t};jr.exports.KEY_ATTR=Si;jr.exports.KEY_ID=qa;function xl(n,t){Qt[n][0]&&Qt[n][2]===0&&(Qt[n][0](t),Qt[n][2]=1)}function Al(n,t){Qt[n][1]&&Qt[n][2]===1&&(Qt[n][1](t),Qt[n][2]=0)}function ld(n,t,e){var i=n.target.getAttribute(Si);if(ad(n.oldValue,i)){Qt[i]=Qt[n.oldValue];return}Qt[n.oldValue]&&e(n.oldValue,n.target),Qt[i]&&t(i,n.target)}function ad(n,t){return!n||!t?!1:Qt[n][3]===Qt[t][3]}function Is(n,t){for(var e=Object.keys(Qt),i=0;i<n.length;i++){if(n[i]&&n[i].getAttribute&&n[i].getAttribute(Si)){var r=n[i].getAttribute(Si);e.forEach(function(s){r===s&&t(s,n[i])})}n[i]&&n[i].childNodes.length>0&&Is(n[i].childNodes,t)}}var hd=jr.exports,fd=Ga;class za extends Error{}za.prototype.name="AssertionError";function Ga(n,t){if(!n){var e=new za(t);throw Error.captureStackTrace&&Error.captureStackTrace(e,Ga),e}}const Ka=$a,fn=Ao,ud=Ua,_o=hd,Bs=fd,cd=_o.KEY_ID,dd=_o.KEY_ATTR;var pd=fe;function gd(){return"ncid-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)}fe.makeID=gd;function fe(n){this._hasWindow=typeof window<"u",this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=n||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];const t=this;Object.defineProperty(this,"element",{get:function(){const e=Ka.getElementById(t._id);if(e)return e.dataset.nanocomponent===t._ncID?e:void 0}})}fe.prototype.render=function(){const n=fn(this._name+".render"),t=this,e=new Array(arguments.length);let i;for(let r=0;r<arguments.length;r++)e[r]=arguments[r];if(this._hasWindow)if(this.element){i=this.element;const r=fn(this._name+".update"),s=this._rerender||this.update.apply(this,e);if(r(),this._rerender&&(this._rerender=!1),s){const o=this._handleRender(e),a=fn(this._name+".morph");ud(i,o),a(),this.afterupdate&&this.afterupdate(i)}return this._proxy||(this._proxy=this._createProxy()),n(),this._proxy}else return this._reset(),i=this._handleRender(e),this.beforerender&&this.beforerender(i),(this.load||this.unload||this.afterreorder)&&(_o(i,t._handleLoad,t._handleUnload,t._ncID),this._olID=i.dataset[cd]),n(),i;else{const r=fn(this._name+".create");return i=this.createElement.apply(this,e),r(),n(),i}};fe.prototype.rerender=function(){Bs(this.element,"nanocomponent: cant rerender on an unmounted dom node"),this._rerender=!0,this.render.apply(this,this._arguments)};fe.prototype._handleRender=function(n){const t=fn(this._name+".createElement"),e=this.createElement.apply(this,n);return t(),this._rootNodeName||(this._rootNodeName=e.nodeName),Bs(e instanceof window.Element,"nanocomponent: createElement should return a single DOM node"),Bs(this._rootNodeName===e.nodeName,"nanocomponent: root node types cannot differ between re-renders"),this._arguments=n,this._brandNode(this._ensureID(e))};fe.prototype._createProxy=function(){const n=Ka.createElement(this._rootNodeName),t=this;return this._brandNode(n),n.id=this._id,n.setAttribute("data-proxy",""),n.isSameNode=function(e){return e&&e.dataset.nanocomponent===t._ncID},n};fe.prototype._reset=function(){this._ncID=fe.makeID(),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null};fe.prototype._brandNode=function(n){return n.setAttribute("data-nanocomponent",this._ncID),this._olID&&n.setAttribute(dd,this._olID),n};fe.prototype._ensureID=function(n){return n.id?this._id=n.id:n.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),n};fe.prototype._handleLoad=function(n){if(this._loaded){this.afterreorder&&this.afterreorder(n);return}this._loaded=!0,this.load&&this.load(n)};fe.prototype._handleUnload=function(n){this.element||(this._loaded=!1,this.unload&&this.unload(n))};fe.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")};fe.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};const pb=Wn(pd);var Ya={exports:{}};/*! For license information please see cbor.js.LICENSE.txt */(function(n,t){(function(e,i){n.exports=i()})(Fe,()=>(()=>{var e={207:(o,a,l)=>{const h=l(2893),f=l(9744),{Buffer:c}=l(8287);class g extends h{constructor(u){super(u),this.valueSharing=new f}_pushObject(u,p){if(u!==null){const w=this.valueSharing.check(u);switch(w){case f.FIRST:this._pushTag(28);break;case f.NEVER:break;default:return this._pushTag(29)&&this._pushIntNum(w)}}return super._pushObject(u,p)}stopRecording(){this.valueSharing.stop()}clearRecording(){this.valueSharing.clear()}static encode(...u){const p=new g;p.on("data",()=>{});for(const w of u)p.pushAny(w);return p.stopRecording(),p.removeAllListeners("data"),p._encodeAll(u)}static encodeCanonical(...u){throw new Error("Cannot encode canonically in a SharedValueEncoder, which serializes objects multiple times.")}static encodeOne(u,p){const w=new g(p);return w.on("data",()=>{}),w.pushAny(u),w.stopRecording(),w.removeAllListeners("data"),w._encodeAll([u])}static encodeAsync(u,p){return new Promise((w,_)=>{const R=[],A=new g(p);A.on("data",()=>{}),A.on("error",_),A.on("finish",()=>w(c.concat(R))),A.pushAny(u),A.stopRecording(),A.removeAllListeners("data"),A.on("data",k=>R.push(k)),A.pushAny(u),A.end()})}}o.exports=g},251:(o,a)=>{a.read=function(l,h,f,c,g){var m,u,p=8*g-c-1,w=(1<<p)-1,_=w>>1,R=-7,A=f?g-1:0,k=f?-1:1,E=l[h+A];for(A+=k,m=E&(1<<-R)-1,E>>=-R,R+=p;R>0;m=256*m+l[h+A],A+=k,R-=8);for(u=m&(1<<-R)-1,m>>=-R,R+=c;R>0;u=256*u+l[h+A],A+=k,R-=8);if(m===0)m=1-_;else{if(m===w)return u?NaN:1/0*(E?-1:1);u+=Math.pow(2,c),m-=_}return(E?-1:1)*u*Math.pow(2,m-c)},a.write=function(l,h,f,c,g,m){var u,p,w,_=8*m-g-1,R=(1<<_)-1,A=R>>1,k=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=c?0:m-1,y=c?1:-1,S=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(p=isNaN(h)?1:0,u=R):(u=Math.floor(Math.log(h)/Math.LN2),h*(w=Math.pow(2,-u))<1&&(u--,w*=2),(h+=u+A>=1?k/w:k*Math.pow(2,1-A))*w>=2&&(u++,w/=2),u+A>=R?(p=0,u=R):u+A>=1?(p=(h*w-1)*Math.pow(2,g),u+=A):(p=h*Math.pow(2,A-1)*Math.pow(2,g),u=0));g>=8;l[f+E]=255&p,E+=y,p/=256,g-=8);for(u=u<<g|p,_+=g;_>0;l[f+E]=255&u,E+=y,u/=256,_-=8);l[f+E-y]|=128*S}},277:(o,a,l)=>{const{ArrayIsArray:h,ArrayPrototypeIncludes:f,ArrayPrototypeJoin:c,ArrayPrototypeMap:g,NumberIsInteger:m,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:p,NumberMIN_SAFE_INTEGER:w,NumberParseInt:_,ObjectPrototypeHasOwnProperty:R,RegExpPrototypeExec:A,String:k,StringPrototypeToUpperCase:E,StringPrototypeTrim:y}=l(4134),{hideStackFrames:S,codes:{ERR_SOCKET_BAD_PORT:M,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:q,ERR_OUT_OF_RANGE:z,ERR_UNKNOWN_SIGNAL:N}}=l(6371),{normalizeEncoding:J}=l(7760),{isAsyncFunction:P,isArrayBufferView:W}=l(7760).types,C={},K=/^[0-7]+$/,H=S((F,rt,et=w,mt=p)=>{if(typeof F!="number")throw new I(rt,"number",F);if(!m(F))throw new z(rt,"an integer",F);if(F<et||F>mt)throw new z(rt,`>= ${et} && <= ${mt}`,F)}),G=S((F,rt,et=-2147483648,mt=2147483647)=>{if(typeof F!="number")throw new I(rt,"number",F);if(!m(F))throw new z(rt,"an integer",F);if(F<et||F>mt)throw new z(rt,`>= ${et} && <= ${mt}`,F)}),lt=S((F,rt,et=!1)=>{if(typeof F!="number")throw new I(rt,"number",F);if(!m(F))throw new z(rt,"an integer",F);const mt=et?1:0,V=4294967295;if(F<mt||F>V)throw new z(rt,`>= ${mt} && <= ${V}`,F)});function T(F,rt){if(typeof F!="string")throw new I(rt,"string",F)}const U=S((F,rt,et)=>{if(!f(et,F)){const mt=c(g(et,V=>typeof V=="string"?`'${V}'`:k(V)),", ");throw new q(rt,F,"must be one of: "+mt)}});function Z(F,rt){if(typeof F!="boolean")throw new I(rt,"boolean",F)}function j(F,rt,et){return F!=null&&R(F,rt)?F[rt]:et}const X=S((F,rt,et=null)=>{const mt=j(et,"allowArray",!1),V=j(et,"allowFunction",!1);if(!j(et,"nullable",!1)&&F===null||!mt&&h(F)||typeof F!="object"&&(!V||typeof F!="function"))throw new I(rt,"Object",F)}),at=S((F,rt)=>{if(F!=null&&typeof F!="object"&&typeof F!="function")throw new I(rt,"a dictionary",F)}),tt=S((F,rt,et=0)=>{if(!h(F))throw new I(rt,"Array",F);if(F.length<et)throw new q(rt,F,`must be longer than ${et}`)}),st=S((F,rt="buffer")=>{if(!W(F))throw new I(rt,["Buffer","TypedArray","DataView"],F)}),Q=S((F,rt)=>{if(F!==void 0&&(F===null||typeof F!="object"||!("aborted"in F)))throw new I(rt,"AbortSignal",F)}),ft=S((F,rt)=>{if(typeof F!="function")throw new I(rt,"Function",F)}),ot=S((F,rt)=>{if(typeof F!="function"||P(F))throw new I(rt,"Function",F)}),At=S((F,rt)=>{if(F!==void 0)throw new I(rt,"undefined",F)}),yt=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function St(F,rt){if(F===void 0||!A(yt,F))throw new q(rt,F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}o.exports={isInt32:function(F){return F===(0|F)},isUint32:function(F){return F===F>>>0},parseFileMode:function(F,rt,et){if(F===void 0&&(F=et),typeof F=="string"){if(A(K,F)===null)throw new q(rt,F,"must be a 32-bit unsigned integer or an octal string");F=_(F,8)}return lt(F,rt),F},validateArray:tt,validateStringArray:function(F,rt){tt(F,rt);for(let et=0;et<F.length;et++)T(F[et],`${rt}[${et}]`)},validateBooleanArray:function(F,rt){tt(F,rt);for(let et=0;et<F.length;et++)Z(F[et],`${rt}[${et}]`)},validateAbortSignalArray:function(F,rt){tt(F,rt);for(let et=0;et<F.length;et++){const mt=F[et],V=`${rt}[${et}]`;if(mt==null)throw new I(V,"AbortSignal",mt);Q(mt,V)}},validateBoolean:Z,validateBuffer:st,validateDictionary:at,validateEncoding:function(F,rt){const et=J(rt),mt=F.length;if(et==="hex"&&mt%2!=0)throw new q("encoding",rt,`is invalid for data of length ${mt}`)},validateFunction:ft,validateInt32:G,validateInteger:H,validateNumber:function(F,rt,et=void 0,mt){if(typeof F!="number")throw new I(rt,"number",F);if(et!=null&&F<et||mt!=null&&F>mt||(et!=null||mt!=null)&&u(F))throw new z(rt,`${et!=null?`>= ${et}`:""}${et!=null&&mt!=null?" && ":""}${mt!=null?`<= ${mt}`:""}`,F)},validateObject:X,validateOneOf:U,validatePlainFunction:ot,validatePort:function(F,rt="Port",et=!0){if(typeof F!="number"&&typeof F!="string"||typeof F=="string"&&y(F).length===0||+F!==+F>>>0||F>65535||F===0&&!et)throw new M(rt,F,et);return 0|F},validateSignalName:function(F,rt="signal"){if(T(F,rt),C[F]===void 0)throw C[E(F)]!==void 0?new N(F+" (signals must use all capital letters)"):new N(F)},validateString:T,validateUint32:lt,validateUndefined:At,validateUnion:function(F,rt,et){if(!f(et,F))throw new I(rt,`('${c(et,"|")}')`,F)},validateAbortSignal:Q,validateLinkHeaderValue:function(F){if(typeof F=="string")return St(F,"hints"),F;if(h(F)){const rt=F.length;let et="";if(rt===0)return et;for(let mt=0;mt<rt;mt++){const V=F[mt];St(V,"hints"),et+=V,mt!==rt-1&&(et+=", ")}return et}throw new q("hints",F,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},345:(o,a,l)=>{const{StringPrototypeSlice:h,SymbolIterator:f,TypedArrayPrototypeSet:c,Uint8Array:g}=l(4134),{Buffer:m}=l(8287),{inspect:u}=l(7760);o.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(p){const w={data:p,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}unshift(p){const w={data:p,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}shift(){if(this.length===0)return;const p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}clear(){this.head=this.tail=null,this.length=0}join(p){if(this.length===0)return"";let w=this.head,_=""+w.data;for(;(w=w.next)!==null;)_+=p+w.data;return _}concat(p){if(this.length===0)return m.alloc(0);const w=m.allocUnsafe(p>>>0);let _=this.head,R=0;for(;_;)c(w,_.data,R),R+=_.data.length,_=_.next;return w}consume(p,w){const _=this.head.data;if(p<_.length){const R=_.slice(0,p);return this.head.data=_.slice(p),R}return p===_.length?this.shift():w?this._getString(p):this._getBuffer(p)}first(){return this.head.data}*[f](){for(let p=this.head;p;p=p.next)yield p.data}_getString(p){let w="",_=this.head,R=0;do{const A=_.data;if(!(p>A.length)){p===A.length?(w+=A,++R,_.next?this.head=_.next:this.head=this.tail=null):(w+=h(A,0,p),this.head=_,_.data=h(A,p));break}w+=A,p-=A.length,++R}while((_=_.next)!==null);return this.length-=R,w}_getBuffer(p){const w=m.allocUnsafe(p),_=p;let R=this.head,A=0;do{const k=R.data;if(!(p>k.length)){p===k.length?(c(w,k,_-p),++A,R.next?this.head=R.next:this.head=this.tail=null):(c(w,new g(k.buffer,k.byteOffset,p),_-p),this.head=R,R.data=k.slice(p));break}c(w,k,_-p),p-=k.length,++A}while((R=R.next)!==null);return this.length-=A,w}[Symbol.for("nodejs.util.inspect.custom")](p,w){return u(this,{...w,depth:0,customInspect:!1})}}},672:(o,a,l)=>{const h=l(8310),{Buffer:f}=l(8287),c=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});class g extends h.Transform{constructor(u,p,w={}){let _=null,R=null;switch(typeof u){case"object":f.isBuffer(u)?_=u:u&&(w=u);break;case"string":_=u;break;case"undefined":break;default:throw new TypeError("Invalid input")}switch(typeof p){case"object":p&&(w=p);break;case"string":R=p;break;case"undefined":break;default:throw new TypeError("Invalid inputEncoding")}if(!w||typeof w!="object")throw new TypeError("Invalid options");_==null&&(_=w.input),R==null&&(R=w.inputEncoding),delete w.input,delete w.inputEncoding;const A=w.watchPipe==null||w.watchPipe;delete w.watchPipe;const k=!!w.readError;delete w.readError,super(w),this.readError=k,A&&this.on("pipe",E=>{const y=E._readableState.objectMode;if(this.length>0&&y!==this._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");this._readableState.objectMode=y,this._writableState.objectMode=y}),_!=null&&this.end(_,R)}static isNoFilter(u){return u instanceof this}static compare(u,p){if(!(u instanceof this))throw new TypeError("Arguments must be NoFilters");return u===p?0:u.compare(p)}static concat(u,p){if(!Array.isArray(u))throw new TypeError("list argument must be an Array of NoFilters");if(u.length===0||p===0)return f.alloc(0);p==null&&(p=u.reduce((A,k)=>{if(!(k instanceof g))throw new TypeError("list argument must be an Array of NoFilters");return A+k.length},0));let w=!0,_=!0;const R=u.map(A=>{if(!(A instanceof g))throw new TypeError("list argument must be an Array of NoFilters");const k=A.slice();return f.isBuffer(k)?_=!1:w=!1,k});if(w)return f.concat(R,p);if(_)return[].concat(...R).slice(0,p);throw new Error("Concatenating mixed object and byte streams not supported")}_transform(u,p,w){this._readableState.objectMode||f.isBuffer(u)||(u=f.from(u,p)),this.push(u),w()}_bufArray(){let u=this._readableState.buffer;if(!Array.isArray(u)){let p=u.head;for(u=[];p!=null;)u.push(p.data),p=p.next}return u}read(u){const p=super.read(u);if(p!=null){if(this.emit("read",p),this.readError&&p.length<u)throw new Error(`Read ${p.length}, wanted ${u}`)}else if(this.readError)throw new Error(`No data available, wanted ${u}`);return p}readFull(u){let p=null,w=null,_=null;return new Promise((R,A)=>{this.length>=u?R(this.read(u)):this.writableFinished?A(new Error(`Stream finished before ${u} bytes were available`)):(p=k=>{this.length>=u&&R(this.read(u))},w=()=>{A(new Error(`Stream finished before ${u} bytes were available`))},_=A,this.on("readable",p),this.on("error",_),this.on("finish",w))}).finally(()=>{p&&(this.removeListener("readable",p),this.removeListener("error",_),this.removeListener("finish",w))})}promise(u){let p=!1;return new Promise((w,_)=>{this.on("finish",()=>{const R=this.read();u==null||p||(p=!0,u(null,R)),w(R)}),this.on("error",R=>{u==null||p||(p=!0,u(R)),_(R)})})}compare(u){if(!(u instanceof g))throw new TypeError("Arguments must be NoFilters");if(this===u)return 0;const p=this.slice(),w=u.slice();if(f.isBuffer(p)&&f.isBuffer(w))return p.compare(w);throw new Error("Cannot compare streams in object mode")}equals(u){return this.compare(u)===0}slice(u,p){if(this._readableState.objectMode)return this._bufArray().slice(u,p);const w=this._bufArray();switch(w.length){case 0:return f.alloc(0);case 1:return w[0].slice(u,p);default:return f.concat(w).slice(u,p)}}get(u){return this.slice()[u]}toJSON(){const u=this.slice();return f.isBuffer(u)?u.toJSON():u}toString(u,p,w){const _=this.slice(p,w);return f.isBuffer(_)?u&&u!=="utf8"?_.toString(u):c.decode(_):JSON.stringify(_)}[Symbol.for("nodejs.util.inspect.custom")](u,p){const w=this._bufArray().map(_=>f.isBuffer(_)?p.stylize(_.toString("hex"),"string"):JSON.stringify(_)).join(", ");return`${this.constructor.name} [${w}]`}get length(){return this._readableState.length}writeBigInt(u){let p=u.toString(16);if(u<0){const w=BigInt(Math.floor(p.length/2));p=(u=(BigInt(1)<<w*BigInt(8))+u).toString(16)}return p.length%2&&(p=`0${p}`),this.push(f.from(p,"hex"))}readUBigInt(u){const p=this.read(u);return f.isBuffer(p)?BigInt(`0x${p.toString("hex")}`):null}readBigInt(u){const p=this.read(u);if(!f.isBuffer(p))return null;let w=BigInt(`0x${p.toString("hex")}`);return 128&p[0]&&(w-=BigInt(1)<<BigInt(p.length)*BigInt(8)),w}writeUInt8(u){const p=f.from([u]);return this.push(p)}writeUInt16LE(u){const p=f.alloc(2);return p.writeUInt16LE(u),this.push(p)}writeUInt16BE(u){const p=f.alloc(2);return p.writeUInt16BE(u),this.push(p)}writeUInt32LE(u){const p=f.alloc(4);return p.writeUInt32LE(u),this.push(p)}writeUInt32BE(u){const p=f.alloc(4);return p.writeUInt32BE(u),this.push(p)}writeInt8(u){const p=f.from([u]);return this.push(p)}writeInt16LE(u){const p=f.alloc(2);return p.writeUInt16LE(u),this.push(p)}writeInt16BE(u){const p=f.alloc(2);return p.writeUInt16BE(u),this.push(p)}writeInt32LE(u){const p=f.alloc(4);return p.writeUInt32LE(u),this.push(p)}writeInt32BE(u){const p=f.alloc(4);return p.writeUInt32BE(u),this.push(p)}writeFloatLE(u){const p=f.alloc(4);return p.writeFloatLE(u),this.push(p)}writeFloatBE(u){const p=f.alloc(4);return p.writeFloatBE(u),this.push(p)}writeDoubleLE(u){const p=f.alloc(8);return p.writeDoubleLE(u),this.push(p)}writeDoubleBE(u){const p=f.alloc(8);return p.writeDoubleBE(u),this.push(p)}writeBigInt64LE(u){const p=f.alloc(8);return p.writeBigInt64LE(u),this.push(p)}writeBigInt64BE(u){const p=f.alloc(8);return p.writeBigInt64BE(u),this.push(p)}writeBigUInt64LE(u){const p=f.alloc(8);return p.writeBigUInt64LE(u),this.push(p)}writeBigUInt64BE(u){const p=f.alloc(8);return p.writeBigUInt64BE(u),this.push(p)}readUInt8(){const u=this.read(1);return f.isBuffer(u)?u.readUInt8():null}readUInt16LE(){const u=this.read(2);return f.isBuffer(u)?u.readUInt16LE():null}readUInt16BE(){const u=this.read(2);return f.isBuffer(u)?u.readUInt16BE():null}readUInt32LE(){const u=this.read(4);return f.isBuffer(u)?u.readUInt32LE():null}readUInt32BE(){const u=this.read(4);return f.isBuffer(u)?u.readUInt32BE():null}readInt8(){const u=this.read(1);return f.isBuffer(u)?u.readInt8():null}readInt16LE(){const u=this.read(2);return f.isBuffer(u)?u.readInt16LE():null}readInt16BE(){const u=this.read(2);return f.isBuffer(u)?u.readInt16BE():null}readInt32LE(){const u=this.read(4);return f.isBuffer(u)?u.readInt32LE():null}readInt32BE(){const u=this.read(4);return f.isBuffer(u)?u.readInt32BE():null}readFloatLE(){const u=this.read(4);return f.isBuffer(u)?u.readFloatLE():null}readFloatBE(){const u=this.read(4);return f.isBuffer(u)?u.readFloatBE():null}readDoubleLE(){const u=this.read(8);return f.isBuffer(u)?u.readDoubleLE():null}readDoubleBE(){const u=this.read(8);return f.isBuffer(u)?u.readDoubleBE():null}readBigInt64LE(){const u=this.read(8);return f.isBuffer(u)?u.readBigInt64LE():null}readBigInt64BE(){const u=this.read(8);return f.isBuffer(u)?u.readBigInt64BE():null}readBigUInt64LE(){const u=this.read(8);return f.isBuffer(u)?u.readBigUInt64LE():null}readBigUInt64BE(){const u=this.read(8);return f.isBuffer(u)?u.readBigUInt64BE():null}}o.exports=g},823:(o,a,l)=>{const h=globalThis.AbortController||l(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:f,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:g,ERR_OUT_OF_RANGE:m},AbortError:u}=l(6371),{validateAbortSignal:p,validateInteger:w,validateObject:_}=l(277),R=l(4134).Symbol("kWeak"),A=l(4134).Symbol("kResistStopPropagation"),{finished:k}=l(6238),E=l(7830),{addAbortSignalNoValidate:y}=l(4147),{isWritable:S,isNodeStream:M}=l(6115),{deprecate:I}=l(7760),{ArrayPrototypePush:q,Boolean:z,MathFloor:N,Number:J,NumberIsNaN:P,Promise:W,PromiseReject:C,PromiseResolve:K,PromisePrototypeThen:H,Symbol:G}=l(4134),lt=G("kEmpty"),T=G("kEof");function U(tt,st){if(typeof tt!="function")throw new c("fn",["Function","AsyncFunction"],tt);st!=null&&_(st,"options"),st?.signal!=null&&p(st.signal,"options.signal");let Q=1;st?.concurrency!=null&&(Q=N(st.concurrency));let ft=Q-1;return st?.highWaterMark!=null&&(ft=N(st.highWaterMark)),w(Q,"options.concurrency",1),w(ft,"options.highWaterMark",0),ft+=Q,async function*(){const ot=l(7760).AbortSignalAny([st?.signal].filter(z)),At=this,yt=[],St={signal:ot};let F,rt,et=!1,mt=0;function V(){et=!0,it()}function it(){mt-=1,Y()}function Y(){rt&&!et&&mt<Q&&yt.length<ft&&(rt(),rt=null)}(async function(){try{for await(let ht of At){if(et)return;if(ot.aborted)throw new u;try{if(ht=tt(ht,St),ht===lt)continue;ht=K(ht)}catch(dt){ht=C(dt)}mt+=1,H(ht,it,V),yt.push(ht),F&&(F(),F=null),!et&&(yt.length>=ft||mt>=Q)&&await new W(dt=>{rt=dt})}yt.push(T)}catch(ht){const dt=C(ht);H(dt,it,V),yt.push(dt)}finally{et=!0,F&&(F(),F=null)}})();try{for(;;){for(;yt.length>0;){const ht=await yt[0];if(ht===T)return;if(ot.aborted)throw new u;ht!==lt&&(yield ht),yt.shift(),Y()}await new W(ht=>{F=ht})}}finally{et=!0,rt&&(rt(),rt=null)}}.call(this)}async function Z(tt,st=void 0){for await(const Q of j.call(this,tt,st))return!0;return!1}function j(tt,st){if(typeof tt!="function")throw new c("fn",["Function","AsyncFunction"],tt);return U.call(this,async function(Q,ft){return await tt(Q,ft)?Q:lt},st)}class X extends g{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function at(tt){if(tt=J(tt),P(tt))return 0;if(tt<0)throw new m("number",">= 0",tt);return tt}o.exports.streamReturningOperators={asIndexedPairs:I(function(tt=void 0){return tt!=null&&_(tt,"options"),tt?.signal!=null&&p(tt.signal,"options.signal"),async function*(){let st=0;for await(const ft of this){var Q;if(tt!=null&&(Q=tt.signal)!==null&&Q!==void 0&&Q.aborted)throw new u({cause:tt.signal.reason});yield[st++,ft]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(tt,st=void 0){return st!=null&&_(st,"options"),st?.signal!=null&&p(st.signal,"options.signal"),tt=at(tt),async function*(){var Q;if(st!=null&&(Q=st.signal)!==null&&Q!==void 0&&Q.aborted)throw new u;for await(const ot of this){var ft;if(st!=null&&(ft=st.signal)!==null&&ft!==void 0&&ft.aborted)throw new u;tt--<=0&&(yield ot)}}.call(this)},filter:j,flatMap:function(tt,st){const Q=U.call(this,tt,st);return async function*(){for await(const ft of Q)yield*ft}.call(this)},map:U,take:function(tt,st=void 0){return st!=null&&_(st,"options"),st?.signal!=null&&p(st.signal,"options.signal"),tt=at(tt),async function*(){var Q;if(st!=null&&(Q=st.signal)!==null&&Q!==void 0&&Q.aborted)throw new u;for await(const ot of this){var ft;if(st!=null&&(ft=st.signal)!==null&&ft!==void 0&&ft.aborted)throw new u;if(tt-- >0&&(yield ot),tt<=0)return}}.call(this)},compose:function(tt,st){if(st!=null&&_(st,"options"),st?.signal!=null&&p(st.signal,"options.signal"),M(tt)&&!S(tt))throw new f("stream",tt,"must be writable");const Q=E(this,tt);return st!=null&&st.signal&&y(st.signal,Q),Q}},o.exports.promiseReturningOperators={every:async function(tt,st=void 0){if(typeof tt!="function")throw new c("fn",["Function","AsyncFunction"],tt);return!await Z.call(this,async(...Q)=>!await tt(...Q),st)},forEach:async function(tt,st){if(typeof tt!="function")throw new c("fn",["Function","AsyncFunction"],tt);for await(const Q of U.call(this,async function(ft,ot){return await tt(ft,ot),lt},st));},reduce:async function(tt,st,Q){var ft;if(typeof tt!="function")throw new c("reducer",["Function","AsyncFunction"],tt);Q!=null&&_(Q,"options"),Q?.signal!=null&&p(Q.signal,"options.signal");let ot=arguments.length>1;if(Q!=null&&(ft=Q.signal)!==null&&ft!==void 0&&ft.aborted){const rt=new u(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),await k(this.destroy(rt)),rt}const At=new h,yt=At.signal;if(Q!=null&&Q.signal){const rt={once:!0,[R]:this,[A]:!0};Q.signal.addEventListener("abort",()=>At.abort(),rt)}let St=!1;try{for await(const rt of this){var F;if(St=!0,Q!=null&&(F=Q.signal)!==null&&F!==void 0&&F.aborted)throw new u;ot?st=await tt(st,rt,{signal:yt}):(st=rt,ot=!0)}if(!St&&!ot)throw new X}finally{At.abort()}return st},toArray:async function(tt){tt!=null&&_(tt,"options"),tt?.signal!=null&&p(tt.signal,"options.signal");const st=[];for await(const ft of this){var Q;if(tt!=null&&(Q=tt.signal)!==null&&Q!==void 0&&Q.aborted)throw new u(void 0,{cause:tt.signal.reason});q(st,ft)}return st},some:Z,find:async function(tt,st){for await(const Q of j.call(this,tt,st))return Q}}},893:(o,a,l)=>{const h=l(8310),f=l(7328),c=l(3737),g=l(672),{MT:m,NUMBYTES:u,SYMS:p}=l(9452),{Buffer:w}=l(8287);function _(A){return A>1?"s":""}class R extends h.Transform{constructor(k={}){const{depth:E=1,max_depth:y=10,no_summary:S=!1,tags:M={},preferWeb:I,encoding:q,...z}=k;super({...z,readableObjectMode:!1,writableObjectMode:!1}),this.depth=E,this.max_depth=y,this.all=new g,M[24]||(M[24]=this._tag_24.bind(this)),this.parser=new c({tags:M,max_depth:y,preferWeb:I,encoding:q}),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("start-string",this._on_start_string.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("error",this._on_error.bind(this)),S||this.parser.on("data",this._on_data.bind(this)),this.parser.bs.on("read",this._on_read.bind(this))}_tag_24(k){const E=new R({depth:this.depth+1,no_summary:!0});E.on("data",y=>this.push(y)),E.on("error",y=>this.emit("error",y)),E.end(k)}_transform(k,E,y){this.parser.write(k,E,y)}_flush(k){return this.parser._flush(k)}static comment(k,E={},y=null){if(k==null)throw new Error("input required");({options:E,cb:y}=function(N,J){switch(typeof N){case"function":return{options:{},cb:N};case"string":return{options:{encoding:N},cb:J};case"number":return{options:{max_depth:N},cb:J};case"object":return{options:N||{},cb:J};default:throw new TypeError("Unknown option type")}}(E,y));const S=new g,{encoding:M="hex",...I}=E,q=new R(I);let z=null;return typeof y=="function"?(q.on("end",()=>{y(null,S.toString("utf8"))}),q.on("error",y)):z=new Promise((N,J)=>{q.on("end",()=>{N(S.toString("utf8"))}),q.on("error",J)}),q.pipe(S),f.guessEncoding(k,M).pipe(q),z}_on_error(k){this.push("ERROR: "),this.push(k.toString()),this.push(`
`)}_on_read(k){this.all.write(k);const E=k.toString("hex");this.push(new Array(this.depth+1).join("  ")),this.push(E);let y=2*(this.max_depth-this.depth)-E.length;y<1&&(y=1),this.push(new Array(y+1).join(" ")),this.push("-- ")}_on_more(k,E,y,S){let M="";switch(this.depth++,k){case m.POS_INT:M="Positive number,";break;case m.NEG_INT:M="Negative number,";break;case m.ARRAY:M="Array, length";break;case m.MAP:M="Map, count";break;case m.BYTE_STRING:M="Bytes, length";break;case m.UTF8_STRING:M="String, length";break;case m.SIMPLE_FLOAT:M=E===1?"Simple value,":"Float,"}this.push(`${M} next ${E} byte${_(E)}
`)}_on_start_string(k,E,y,S){let M="";switch(this.depth++,k){case m.BYTE_STRING:M=`Bytes, length: ${E}`;break;case m.UTF8_STRING:M=`String, length: ${E.toString()}`}this.push(`${M}
`)}_on_start(k,E,y,S){switch(this.depth++,y){case m.ARRAY:this.push(`[${S}], `);break;case m.MAP:S%2?this.push(`{Val:${Math.floor(S/2)}}, `):this.push(`{Key:${Math.floor(S/2)}}, `)}switch(k){case m.TAG:this.push(`Tag #${E}`),E===24&&this.push(" Encoded CBOR data item");break;case m.ARRAY:E===p.STREAM?this.push("Array (streaming)"):this.push(`Array, ${E} item${_(E)}`);break;case m.MAP:E===p.STREAM?this.push("Map (streaming)"):this.push(`Map, ${E} pair${_(E)}`);break;case m.BYTE_STRING:this.push("Bytes (streaming)");break;case m.UTF8_STRING:this.push("String (streaming)")}this.push(`
`)}_on_stop(k){this.depth--}_on_value(k,E,y,S){if(k!==p.BREAK)switch(E){case m.ARRAY:this.push(`[${y}], `);break;case m.MAP:y%2?this.push(`{Val:${Math.floor(y/2)}}, `):this.push(`{Key:${Math.floor(y/2)}}, `)}const M=f.cborValueToString(k,-1/0);switch(typeof k=="string"||w.isBuffer(k)?(k.length>0&&(this.push(M),this.push(`
`)),this.depth--):(this.push(M),this.push(`
`)),S){case u.ONE:case u.TWO:case u.FOUR:case u.EIGHT:this.depth--}}_on_data(){this.push("0x"),this.push(this.all.read().toString("hex")),this.push(`
`)}}o.exports=R},2861:(o,a,l)=>{var h=l(8287),f=h.Buffer;function c(m,u){for(var p in m)u[p]=m[p]}function g(m,u,p){return f(m,u,p)}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?o.exports=h:(c(h,a),a.Buffer=g),g.prototype=Object.create(f.prototype),c(f,g),g.from=function(m,u,p){if(typeof m=="number")throw new TypeError("Argument must not be a number");return f(m,u,p)},g.alloc=function(m,u,p){if(typeof m!="number")throw new TypeError("Argument must be a number");var w=f(m);return u!==void 0?typeof p=="string"?w.fill(u,p):w.fill(u):w.fill(0),w},g.allocUnsafe=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return f(m)},g.allocUnsafeSlow=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(m)}},2893:(o,a,l)=>{const h=l(8310),f=l(672),c=l(7328),g=l(9452),{MT:m,NUMBYTES:u,SHIFT32:p,SIMPLE:w,SYMS:_,TAG:R,BI:A}=g,{Buffer:k}=l(8287),E=m.SIMPLE_FLOAT<<5|u.TWO,y=m.SIMPLE_FLOAT<<5|u.FOUR,S=m.SIMPLE_FLOAT<<5|u.EIGHT,M=m.SIMPLE_FLOAT<<5|w.TRUE,I=m.SIMPLE_FLOAT<<5|w.FALSE,q=m.SIMPLE_FLOAT<<5|w.UNDEFINED,z=m.SIMPLE_FLOAT<<5|w.NULL,N=k.from([255]),J=k.from("f97e00","hex"),P=k.from("f9fc00","hex"),W=k.from("f97c00","hex"),C=k.from("f98000","hex"),K={};let H={};class G extends h.Transform{constructor(T={}){const{canonical:U=!1,encodeUndefined:Z,disallowUndefinedKeys:j=!1,dateType:X="number",collapseBigIntegers:at=!1,detectLoops:tt=!1,omitUndefinedProperties:st=!1,genTypes:Q=[],...ft}=T;if(super({...ft,readableObjectMode:!1,writableObjectMode:!0}),this.canonical=U,this.encodeUndefined=Z,this.disallowUndefinedKeys=j,this.dateType=function(ot){if(!ot)return"number";switch(ot.toLowerCase()){case"number":return"number";case"float":return"float";case"int":case"integer":return"int";case"string":return"string"}throw new TypeError(`dateType invalid, got "${ot}"`)}(X),this.collapseBigIntegers=!!this.canonical||at,this.detectLoops=void 0,typeof tt=="boolean")tt&&(this.detectLoops=new WeakSet);else{if(!(tt instanceof WeakSet))throw new TypeError("detectLoops must be boolean or WeakSet");this.detectLoops=tt}if(this.omitUndefinedProperties=st,this.semanticTypes={...G.SEMANTIC_TYPES},Array.isArray(Q))for(let ot=0,At=Q.length;ot<At;ot+=2)this.addSemanticType(Q[ot],Q[ot+1]);else for(const[ot,At]of Object.entries(Q))this.addSemanticType(ot,At)}_transform(T,U,Z){Z(this.pushAny(T)===!1?new Error("Push Error"):void 0)}_flush(T){T()}_pushUInt8(T){const U=k.allocUnsafe(1);return U.writeUInt8(T,0),this.push(U)}_pushUInt16BE(T){const U=k.allocUnsafe(2);return U.writeUInt16BE(T,0),this.push(U)}_pushUInt32BE(T){const U=k.allocUnsafe(4);return U.writeUInt32BE(T,0),this.push(U)}_pushFloatBE(T){const U=k.allocUnsafe(4);return U.writeFloatBE(T,0),this.push(U)}_pushDoubleBE(T){const U=k.allocUnsafe(8);return U.writeDoubleBE(T,0),this.push(U)}_pushNaN(){return this.push(J)}_pushInfinity(T){const U=T<0?P:W;return this.push(U)}_pushFloat(T){if(this.canonical){const U=k.allocUnsafe(2);if(c.writeHalf(U,T))return this._pushUInt8(E)&&this.push(U)}return Math.fround(T)===T?this._pushUInt8(y)&&this._pushFloatBE(T):this._pushUInt8(S)&&this._pushDoubleBE(T)}_pushInt(T,U,Z){const j=U<<5;if(T<24)return this._pushUInt8(j|T);if(T<=255)return this._pushUInt8(j|u.ONE)&&this._pushUInt8(T);if(T<=65535)return this._pushUInt8(j|u.TWO)&&this._pushUInt16BE(T);if(T<=4294967295)return this._pushUInt8(j|u.FOUR)&&this._pushUInt32BE(T);let X=Number.MAX_SAFE_INTEGER;return U===m.NEG_INT&&X--,T<=X?this._pushUInt8(j|u.EIGHT)&&this._pushUInt32BE(Math.floor(T/p))&&this._pushUInt32BE(T%p):U===m.NEG_INT?this._pushFloat(Z):this._pushFloat(T)}_pushIntNum(T){return Object.is(T,-0)?this.push(C):T<0?this._pushInt(-T-1,m.NEG_INT,T):this._pushInt(T,m.POS_INT)}_pushNumber(T){return isNaN(T)?this._pushNaN():isFinite(T)?Math.round(T)===T?this._pushIntNum(T):this._pushFloat(T):this._pushInfinity(T)}_pushString(T){const U=k.byteLength(T,"utf8");return this._pushInt(U,m.UTF8_STRING)&&this.push(T,"utf8")}_pushBoolean(T){return this._pushUInt8(T?M:I)}_pushUndefined(T){switch(typeof this.encodeUndefined){case"undefined":return this._pushUInt8(q);case"function":return this.pushAny(this.encodeUndefined(T));case"object":{const U=c.bufferishToBuffer(this.encodeUndefined);if(U)return this.push(U)}}return this.pushAny(this.encodeUndefined)}_pushNull(T){return this._pushUInt8(z)}_pushTag(T){return this._pushInt(T,m.TAG)}_pushJSBigint(T){let U=m.POS_INT,Z=R.POS_BIGINT;if(T<0&&(T=-T+A.MINUS_ONE,U=m.NEG_INT,Z=R.NEG_BIGINT),this.collapseBigIntegers&&T<=A.MAXINT64)return T<=4294967295?this._pushInt(Number(T),U):this._pushUInt8(U<<5|u.EIGHT)&&this._pushUInt32BE(Number(T/A.SHIFT32))&&this._pushUInt32BE(Number(T%A.SHIFT32));let j=T.toString(16);j.length%2&&(j=`0${j}`);const X=k.from(j,"hex");return this._pushTag(Z)&&G._pushBuffer(this,X)}_pushObject(T,U){if(!T)return this._pushNull(T);if(!(U={indefinite:!1,skipTypes:!1,...U}).indefinite&&this.detectLoops){if(this.detectLoops.has(T))throw new Error(`Loop detected while CBOR encoding.
Call removeLoopDetectors before resuming.`);this.detectLoops.add(T)}if(!U.skipTypes){const at=T.encodeCBOR;if(typeof at=="function")return at.call(T,this);const tt=this.semanticTypes[T.constructor.name];if(tt)return tt.call(T,this,T)}const Z=Object.keys(T).filter(at=>{const tt=typeof T[at];return tt!=="function"&&(!this.omitUndefinedProperties||tt!=="undefined")}),j={};if(this.canonical&&Z.sort((at,tt)=>{const st=j[at]||(j[at]=G.encode(at)),Q=j[tt]||(j[tt]=G.encode(tt));return st.compare(Q)}),U.indefinite){if(!this._pushUInt8(m.MAP<<5|u.INDEFINITE))return!1}else if(!this._pushInt(Z.length,m.MAP))return!1;let X=null;for(let at=0,tt=Z.length;at<tt;at++){const st=Z[at];if(this.canonical&&(X=j[st])){if(!this.push(X))return!1}else if(!this._pushString(st))return!1;if(!this.pushAny(T[st]))return!1}if(U.indefinite){if(!this.push(N))return!1}else this.detectLoops&&this.detectLoops.delete(T);return!0}_encodeAll(T){const U=new f({highWaterMark:this.readableHighWaterMark});this.pipe(U);for(const Z of T)this.pushAny(Z);return this.end(),U.read()}addSemanticType(T,U){const Z=typeof T=="string"?T:T.name,j=this.semanticTypes[Z];if(U){if(typeof U!="function")throw new TypeError("fun must be of type function");this.semanticTypes[Z]=U}else j&&delete this.semanticTypes[Z];return j}pushAny(T){switch(typeof T){case"number":return this._pushNumber(T);case"bigint":return this._pushJSBigint(T);case"string":return this._pushString(T);case"boolean":return this._pushBoolean(T);case"undefined":return this._pushUndefined(T);case"object":return this._pushObject(T);case"symbol":switch(T){case _.NULL:return this._pushNull(null);case _.UNDEFINED:return this._pushUndefined(void 0);default:throw new TypeError(`Unknown symbol: ${T.toString()}`)}default:throw new TypeError(`Unknown type: ${typeof T}, ${typeof T.toString=="function"?T.toString():""}`)}}static pushArray(T,U,Z){Z={indefinite:!1,...Z};const j=U.length;if(Z.indefinite){if(!T._pushUInt8(m.ARRAY<<5|u.INDEFINITE))return!1}else if(!T._pushInt(j,m.ARRAY))return!1;for(let X=0;X<j;X++)if(!T.pushAny(U[X]))return!1;return!(Z.indefinite&&!T.push(N))}removeLoopDetectors(){return!!this.detectLoops&&(this.detectLoops=new WeakSet,!0)}static _pushDate(T,U){switch(T.dateType){case"string":return T._pushTag(R.DATE_STRING)&&T._pushString(U.toISOString());case"int":return T._pushTag(R.DATE_EPOCH)&&T._pushIntNum(Math.round(U.getTime()/1e3));case"float":return T._pushTag(R.DATE_EPOCH)&&T._pushFloat(U.getTime()/1e3);default:return T._pushTag(R.DATE_EPOCH)&&T.pushAny(U.getTime()/1e3)}}static _pushBuffer(T,U){return T._pushInt(U.length,m.BYTE_STRING)&&T.push(U)}static _pushNoFilter(T,U){return G._pushBuffer(T,U.slice())}static _pushRegexp(T,U){return T._pushTag(R.REGEXP)&&T.pushAny(U.source)}static _pushSet(T,U){if(!T._pushTag(R.SET)||!T._pushInt(U.size,m.ARRAY))return!1;for(const Z of U)if(!T.pushAny(Z))return!1;return!0}static _pushURL(T,U){return T._pushTag(R.URI)&&T.pushAny(U.toString())}static _pushBoxed(T,U){return T.pushAny(U.valueOf())}static _pushMap(T,U,Z){Z={indefinite:!1,...Z};let j=[...U.entries()];if(T.omitUndefinedProperties&&(j=j.filter(([X,at])=>at!==void 0)),Z.indefinite){if(!T._pushUInt8(m.MAP<<5|u.INDEFINITE))return!1}else if(!T._pushInt(j.length,m.MAP))return!1;if(T.canonical){const X=new G({genTypes:T.semanticTypes,canonical:T.canonical,detectLoops:!!T.detectLoops,dateType:T.dateType,disallowUndefinedKeys:T.disallowUndefinedKeys,collapseBigIntegers:T.collapseBigIntegers}),at=new f({highWaterMark:T.readableHighWaterMark});X.pipe(at),j.sort(([tt],[st])=>{X.pushAny(tt);const Q=at.read();X.pushAny(st);const ft=at.read();return Q.compare(ft)});for(const[tt,st]of j){if(T.disallowUndefinedKeys&&tt===void 0)throw new Error("Invalid Map key: undefined");if(!T.pushAny(tt)||!T.pushAny(st))return!1}}else for(const[X,at]of j){if(T.disallowUndefinedKeys&&X===void 0)throw new Error("Invalid Map key: undefined");if(!T.pushAny(X)||!T.pushAny(at))return!1}return!(Z.indefinite&&!T.push(N))}static _pushTypedArray(T,U){let Z=64,j=U.BYTES_PER_ELEMENT;const{name:X}=U.constructor;return X.startsWith("Float")?(Z|=16,j/=2):X.includes("U")||(Z|=8),(X.includes("Clamped")||j!==1&&!c.isBigEndian())&&(Z|=4),Z|={1:0,2:1,4:2,8:3}[j],!!T._pushTag(Z)&&G._pushBuffer(T,k.from(U.buffer,U.byteOffset,U.byteLength))}static _pushArrayBuffer(T,U){return G._pushBuffer(T,k.from(U))}static encodeIndefinite(T,U,Z={}){if(U==null){if(this==null)throw new Error("No object to encode");U=this}const{chunkSize:j=4096}=Z;let X=!0;const at=typeof U;let tt=null;if(at==="string"){X=X&&T._pushUInt8(m.UTF8_STRING<<5|u.INDEFINITE);let st=0;for(;st<U.length;){const Q=st+j;X=X&&T._pushString(U.slice(st,Q)),st=Q}X=X&&T.push(N)}else if(tt=c.bufferishToBuffer(U)){X=X&&T._pushUInt8(m.BYTE_STRING<<5|u.INDEFINITE);let st=0;for(;st<tt.length;){const Q=st+j;X=X&&G._pushBuffer(T,tt.slice(st,Q)),st=Q}X=X&&T.push(N)}else if(Array.isArray(U))X=X&&G.pushArray(T,U,{indefinite:!0});else if(U instanceof Map)X=X&&G._pushMap(T,U,{indefinite:!0});else{if(at!=="object")throw new Error("Invalid indefinite encoding");X=X&&T._pushObject(U,{indefinite:!0,skipTypes:!0})}return X}static encode(...T){return new G()._encodeAll(T)}static encodeCanonical(...T){return new G({canonical:!0})._encodeAll(T)}static encodeOne(T,U){return new G(U)._encodeAll([T])}static encodeAsync(T,U){return new Promise((Z,j)=>{const X=[],at=new G(U);at.on("data",tt=>X.push(tt)),at.on("error",j),at.on("finish",()=>Z(k.concat(X))),at.pushAny(T),at.end()})}static get SEMANTIC_TYPES(){return H}static set SEMANTIC_TYPES(T){H=T}static reset(){G.SEMANTIC_TYPES={...K}}}Object.assign(K,{Array:G.pushArray,Date:G._pushDate,Buffer:G._pushBuffer,[k.name]:G._pushBuffer,Map:G._pushMap,NoFilter:G._pushNoFilter,[f.name]:G._pushNoFilter,RegExp:G._pushRegexp,Set:G._pushSet,ArrayBuffer:G._pushArrayBuffer,Uint8ClampedArray:G._pushTypedArray,Uint8Array:G._pushTypedArray,Uint16Array:G._pushTypedArray,Uint32Array:G._pushTypedArray,Int8Array:G._pushTypedArray,Int16Array:G._pushTypedArray,Int32Array:G._pushTypedArray,Float32Array:G._pushTypedArray,Float64Array:G._pushTypedArray,URL:G._pushURL,Boolean:G._pushBoxed,Number:G._pushBoxed,String:G._pushBoxed}),typeof BigUint64Array<"u"&&(K[BigUint64Array.name]=G._pushTypedArray),typeof BigInt64Array<"u"&&(K[BigInt64Array.name]=G._pushTypedArray),G.reset(),o.exports=G},2903:(o,a,l)=>{const{Buffer:h}=l(8287),f=l(2893),c=l(3737),{MT:g}=l(9452);class m extends Map{constructor(p){super(p)}static _encode(p){return f.encodeCanonical(p).toString("base64")}static _decode(p){return c.decodeFirstSync(p,"base64")}get(p){return super.get(m._encode(p))}set(p,w){return super.set(m._encode(p),w)}delete(p){return super.delete(m._encode(p))}has(p){return super.has(m._encode(p))}*keys(){for(const p of super.keys())yield m._decode(p)}*entries(){for(const p of super.entries())yield[m._decode(p[0]),p[1]]}[Symbol.iterator](){return this.entries()}forEach(p,w=this){if(typeof p!="function")throw new TypeError("Must be function");for(const _ of super.entries())p.call(w,_[1],m._decode(_[0]),this)}encodeCBOR(p){if(!p._pushInt(this.size,g.MAP))return!1;if(p.canonical){const w=Array.from(super.entries()).map(_=>[h.from(_[0],"base64"),_[1]]);w.sort((_,R)=>_[0].compare(R[0]));for(const _ of w)if(!p.push(_[0])||!p.pushAny(_[1]))return!1}else for(const w of super.entries())if(!p.push(h.from(w[0],"base64"))||!p.pushAny(w[1]))return!1;return!0}}o.exports=m},3095:(o,a,l)=>{const{ArrayPrototypePop:h,Promise:f}=l(4134),{isIterable:c,isNodeStream:g,isWebStream:m}=l(6115),{pipelineImpl:u}=l(7758),{finished:p}=l(6238);l(5506),o.exports={finished:p,pipeline:function(...w){return new f((_,R)=>{let A,k;const E=w[w.length-1];if(E&&typeof E=="object"&&!g(E)&&!c(E)&&!m(E)){const y=h(w);A=y.signal,k=y.end}u(w,(y,S)=>{y?R(y):_(S)},{signal:A,end:k})})}}},3141:(o,a,l)=>{var h=l(2861).Buffer,f=h.isEncoding||function(k){switch((k=""+k)&&k.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(k){var E;switch(this.encoding=function(y){var S=function(M){if(!M)return"utf8";for(var I;;)switch(M){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return M;default:if(I)return;M=(""+M).toLowerCase(),I=!0}}(y);if(typeof S!="string"&&(h.isEncoding===f||!f(y)))throw new Error("Unknown encoding: "+y);return S||y}(k),this.encoding){case"utf16le":this.text=u,this.end=p,E=4;break;case"utf8":this.fillLast=m,E=4;break;case"base64":this.text=w,this.end=_,E=3;break;default:return this.write=R,void(this.end=A)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(E)}function g(k){return k<=127?0:k>>5==6?2:k>>4==14?3:k>>3==30?4:k>>6==2?-1:-2}function m(k){var E=this.lastTotal-this.lastNeed,y=function(S,M){if((192&M[0])!=128)return S.lastNeed=0,"ï¿½";if(S.lastNeed>1&&M.length>1){if((192&M[1])!=128)return S.lastNeed=1,"ï¿½";if(S.lastNeed>2&&M.length>2&&(192&M[2])!=128)return S.lastNeed=2,"ï¿½"}}(this,k);return y!==void 0?y:this.lastNeed<=k.length?(k.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(k.copy(this.lastChar,E,0,k.length),void(this.lastNeed-=k.length))}function u(k,E){if((k.length-E)%2==0){var y=k.toString("utf16le",E);if(y){var S=y.charCodeAt(y.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=k[k.length-1],k.toString("utf16le",E,k.length-1)}function p(k){var E=k&&k.length?this.write(k):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,y)}return E}function w(k,E){var y=(k.length-E)%3;return y===0?k.toString("base64",E):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=k[k.length-1]:(this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1]),k.toString("base64",E,k.length-y))}function _(k){var E=k&&k.length?this.write(k):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function R(k){return k.toString(this.encoding)}function A(k){return k&&k.length?this.write(k):""}a.StringDecoder=c,c.prototype.write=function(k){if(k.length===0)return"";var E,y;if(this.lastNeed){if((E=this.fillLast(k))===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<k.length?E?E+this.text(k,y):this.text(k,y):E||""},c.prototype.end=function(k){var E=k&&k.length?this.write(k):"";return this.lastNeed?E+"ï¿½":E},c.prototype.text=function(k,E){var y=function(M,I,q){var z=I.length-1;if(z<q)return 0;var N=g(I[z]);return N>=0?(N>0&&(M.lastNeed=N-1),N):--z<q||N===-2?0:(N=g(I[z]))>=0?(N>0&&(M.lastNeed=N-2),N):--z<q||N===-2?0:(N=g(I[z]))>=0?(N>0&&(N===2?N=0:M.lastNeed=N-3),N):0}(this,k,E);if(!this.lastNeed)return k.toString("utf8",E);this.lastTotal=y;var S=k.length-(y-this.lastNeed);return k.copy(this.lastChar,0,S),k.toString("utf8",E,S)},c.prototype.fillLast=function(k){if(this.lastNeed<=k.length)return k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,k.length),this.lastNeed-=k.length}},3370:(o,a,l)=>{const{ObjectDefineProperties:h,ObjectGetOwnPropertyDescriptor:f,ObjectKeys:c,ObjectSetPrototypeOf:g}=l(4134);o.exports=p;const m=l(7576),u=l(8584);g(p.prototype,m.prototype),g(p,m);{const A=c(u.prototype);for(let k=0;k<A.length;k++){const E=A[k];p.prototype[E]||(p.prototype[E]=u.prototype[E])}}function p(A){if(!(this instanceof p))return new p(A);m.call(this,A),u.call(this,A),A?(this.allowHalfOpen=A.allowHalfOpen!==!1,A.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),A.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let w,_;function R(){return w===void 0&&(w={}),w}h(p.prototype,{writable:{__proto__:null,...f(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...f(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...f(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...f(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...f(u.prototype,"writableLength")},writableFinished:{__proto__:null,...f(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...f(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...f(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...f(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set(A){this._readableState&&this._writableState&&(this._readableState.destroyed=A,this._writableState.destroyed=A)}}}),p.fromWeb=function(A,k){return R().newStreamDuplexFromReadableWritablePair(A,k)},p.toWeb=function(A){return R().newReadableWritablePairFromDuplex(A)},p.from=function(A){return _||(_=l(6706)),_(A,"body")}},3557:(o,a,l)=>{const h=l(9452),f=l(7328),c=Symbol("INTERNAL_JSON");function g(E,y){if(f.isBufferish(E))E.toJSON=y;else if(Array.isArray(E))for(const S of E)g(S,y);else if(E&&typeof E=="object"&&(!(E instanceof k)||E.tag<21||E.tag>23))for(const S of Object.values(E))g(S,y)}function m(){return f.base64(this)}function u(){return f.base64url(this)}function p(){return this.toString("hex")}const w={0:E=>new Date(E),1:E=>new Date(1e3*E),2:E=>f.bufferToBigInt(E),3:E=>h.BI.MINUS_ONE-f.bufferToBigInt(E),21:(E,y)=>(f.isBufferish(E)?y[c]=u:g(E,u),y),22:(E,y)=>(f.isBufferish(E)?y[c]=m:g(E,m),y),23:(E,y)=>(f.isBufferish(E)?y[c]=p:g(E,p),y),32:E=>new URL(E),33:(E,y)=>{if(!E.match(/^[a-zA-Z0-9_-]+$/))throw new Error("Invalid base64url characters");const S=E.length%4;if(S===1)throw new Error("Invalid base64url length");if(S===2){if("AQgw".indexOf(E[E.length-1])===-1)throw new Error("Invalid base64 padding")}else if(S===3&&"AEIMQUYcgkosw048".indexOf(E[E.length-1])===-1)throw new Error("Invalid base64 padding");return y},34:(E,y)=>{const S=E.match(/^[a-zA-Z0-9+/]+(?<padding>={0,2})$/);if(!S)throw new Error("Invalid base64 characters");if(E.length%4!=0)throw new Error("Invalid base64 length");if(S.groups.padding==="="){if("AQgw".indexOf(E[E.length-2])===-1)throw new Error("Invalid base64 padding")}else if(S.groups.padding==="=="&&"AEIMQUYcgkosw048".indexOf(E[E.length-3])===-1)throw new Error("Invalid base64 padding");return y},35:E=>new RegExp(E),258:E=>new Set(E)},_={64:Uint8Array,65:Uint16Array,66:Uint32Array,68:Uint8ClampedArray,69:Uint16Array,70:Uint32Array,72:Int8Array,73:Int16Array,74:Int32Array,77:Int16Array,78:Int32Array,81:Float32Array,82:Float64Array,85:Float32Array,86:Float64Array};function R(E,y){if(!f.isBufferish(E))throw new TypeError("val not a buffer");const{tag:S}=y,M=_[S];if(!M)throw new Error(`Invalid typed array tag: ${S}`);const I=2**(((16&S)>>4)+(3&S));return!(4&S)!==f.isBigEndian()&&I>1&&function(q,z,N,J){const P=new DataView(q),[W,C]={2:[P.getUint16,P.setUint16],4:[P.getUint32,P.setUint32],8:[P.getBigUint64,P.setBigUint64]}[z],K=N+J;for(let H=N;H<K;H+=z)C.call(P,H,W.call(P,H,!0))}(E.buffer,I,E.byteOffset,E.byteLength),new M(E.buffer.slice(E.byteOffset,E.byteOffset+E.byteLength))}typeof BigUint64Array<"u"&&(_[67]=BigUint64Array,_[71]=BigUint64Array),typeof BigInt64Array<"u"&&(_[75]=BigInt64Array,_[79]=BigInt64Array);for(const E of Object.keys(_))w[E]=R;let A={};class k{constructor(y,S,M){if(this.tag=y,this.value=S,this.err=M,typeof this.tag!="number")throw new Error(`Invalid tag type (${typeof this.tag})`);if(this.tag<0||(0|this.tag)!==this.tag)throw new Error(`Tag must be a positive integer: ${this.tag}`)}toJSON(){if(this[c])return this[c].call(this.value);const y={tag:this.tag,value:this.value};return this.err&&(y.err=this.err),y}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(y){return y._pushTag(this.tag),y.pushAny(this.value)}convert(y){let S=y?.[this.tag];if(S===null)return this;if(typeof S!="function"&&(S=k.TAGS[this.tag],typeof S!="function"))return this;try{return S.call(this,this.value,this)}catch(M){return M&&M.message&&M.message.length>0?this.err=M.message:this.err=M,this}}static get TAGS(){return A}static set TAGS(y){A=y}static reset(){k.TAGS={...w}}}k.INTERNAL_JSON=c,k.reset(),o.exports=k},3600:(o,a,l)=>{o.exports=l(5506).PassThrough},3737:(o,a,l)=>{const h=l(4957),f=l(3557),c=l(5059),g=l(7328),m=l(672),u=l(9452),{MT:p,NUMBYTES:w,SYMS:_,BI:R}=u,{Buffer:A}=l(8287),k=Symbol("count"),E=Symbol("major type"),y=Symbol("error"),S=Symbol("not found");function M(J,P,W){const C=[];return C[k]=W,C[_.PARENT]=J,C[E]=P,C}function I(J,P){const W=new m;return W[k]=-1,W[_.PARENT]=J,W[E]=P,W}class q extends Error{constructor(P,W){super(`Unexpected data: 0x${P.toString(16)}`),this.name="UnexpectedDataError",this.byte=P,this.value=W}}function z(J,P){switch(typeof J){case"function":return{options:{},cb:J};case"string":return{options:{encoding:J},cb:P};case"object":return{options:J||{},cb:P};default:throw new TypeError("Unknown option type")}}class N extends h{constructor(P={}){const{tags:W={},max_depth:C=-1,preferMap:K=!1,preferWeb:H=!1,required:G=!1,encoding:lt="hex",extendedResults:T=!1,preventDuplicateKeys:U=!1,...Z}=P;super({defaultEncoding:lt,...Z}),this.running=!0,this.max_depth=C,this.tags=W,this.preferMap=K,this.preferWeb=H,this.extendedResults=T,this.required=G,this.preventDuplicateKeys=U,T&&(this.bs.on("read",this._onRead.bind(this)),this.valueBytes=new m)}static nullcheck(P){switch(P){case _.NULL:return null;case _.UNDEFINED:return;case S:throw new Error("Value not found");default:return P}}static decodeFirstSync(P,W={}){if(P==null)throw new TypeError("input required");({options:W}=z(W));const{encoding:C="hex",...K}=W,H=new N(K),G=g.guessEncoding(P,C),lt=H._parse();let T=lt.next();for(;!T.done;){const Z=G.read(T.value);if(Z==null||Z.length!==T.value)throw new Error("Insufficient data");H.extendedResults&&H.valueBytes.write(Z),T=lt.next(Z)}let U=null;if(H.extendedResults)U=T.value,U.unused=G.read();else if(U=N.nullcheck(T.value),G.length>0){const Z=G.read(1);throw G.unshift(Z),new q(Z[0],U)}return U}static decodeAllSync(P,W={}){if(P==null)throw new TypeError("input required");({options:W}=z(W));const{encoding:C="hex",...K}=W,H=new N(K),G=g.guessEncoding(P,C),lt=[];for(;G.length>0;){const T=H._parse();let U=T.next();for(;!U.done;){const Z=G.read(U.value);if(Z==null||Z.length!==U.value)throw new Error("Insufficient data");H.extendedResults&&H.valueBytes.write(Z),U=T.next(Z)}lt.push(N.nullcheck(U.value))}return lt}static decodeFirst(P,W={},C=null){if(P==null)throw new TypeError("input required");({options:W,cb:C}=z(W,C));const{encoding:K="hex",required:H=!1,...G}=W,lt=new N(G);let T=S;const U=g.guessEncoding(P,K),Z=new Promise((j,X)=>{lt.on("data",at=>{T=N.nullcheck(at),lt.close()}),lt.once("error",at=>lt.extendedResults&&at instanceof q?(T.unused=lt.bs.slice(),j(T)):(T!==S&&(at.value=T),T=y,lt.close(),X(at))),lt.once("end",()=>{switch(T){case S:return H?X(new Error("No CBOR found")):j(T);case y:return;default:return j(T)}})});return typeof C=="function"&&Z.then(j=>C(null,j),C),U.pipe(lt),Z}static decodeAll(P,W={},C=null){if(P==null)throw new TypeError("input required");({options:W,cb:C}=z(W,C));const{encoding:K="hex",...H}=W,G=new N(H),lt=[];G.on("data",U=>lt.push(N.nullcheck(U)));const T=new Promise((U,Z)=>{G.on("error",Z),G.on("end",()=>U(lt))});return typeof C=="function"&&T.then(U=>C(void 0,U),U=>C(U,void 0)),g.guessEncoding(P,K).pipe(G),T}close(){this.running=!1,this.__fresh=!0}_onRead(P){this.valueBytes.write(P)}*_parse(){let P=null,W=0,C=null;for(;;){if(this.max_depth>=0&&W>this.max_depth)throw new Error(`Maximum depth ${this.max_depth} exceeded`);const[K]=yield 1;if(!this.running)throw this.bs.unshift(A.from([K])),new q(K);const H=K>>5,G=31&K,lt=P?.[E],T=P?.length;switch(G){case w.ONE:this.emit("more-bytes",H,1,lt,T),[C]=yield 1;break;case w.TWO:case w.FOUR:case w.EIGHT:{const Z=1<<G-24;this.emit("more-bytes",H,Z,lt,T);const j=yield Z;C=H===p.SIMPLE_FLOAT?j:g.parseCBORint(G,j);break}case 28:case 29:case 30:throw this.running=!1,new Error(`Additional info not implemented: ${G}`);case w.INDEFINITE:switch(H){case p.POS_INT:case p.NEG_INT:case p.TAG:throw new Error(`Invalid indefinite encoding for MT ${H}`)}C=-1;break;default:C=G}switch(H){case p.POS_INT:break;case p.NEG_INT:C=C===Number.MAX_SAFE_INTEGER?R.NEG_MAX:typeof C=="bigint"?R.MINUS_ONE-C:-1-C;break;case p.BYTE_STRING:case p.UTF8_STRING:switch(C){case 0:this.emit("start-string",H,C,lt,T),C=H===p.UTF8_STRING?"":this.preferWeb?new Uint8Array(0):A.allocUnsafe(0);break;case-1:this.emit("start",H,_.STREAM,lt,T),P=I(P,H),W++;continue;default:this.emit("start-string",H,C,lt,T),C=yield C,H===p.UTF8_STRING?C=g.utf8(C):this.preferWeb&&(C=new Uint8Array(C.buffer,C.byteOffset,C.length))}break;case p.ARRAY:case p.MAP:switch(C){case 0:C=H===p.MAP?this.preferMap?new Map:{}:[];break;case-1:this.emit("start",H,_.STREAM,lt,T),P=M(P,H,-1),W++;continue;default:this.emit("start",H,C,lt,T),P=M(P,H,C*(H-3)),W++;continue}break;case p.TAG:this.emit("start",H,C,lt,T),P=M(P,H,1),P.push(C),W++;continue;case p.SIMPLE_FLOAT:if(typeof C=="number"){if(G===w.ONE&&C<32)throw new Error(`Invalid two-byte encoding of simple value ${C}`);const Z=P!=null;C=c.decode(C,Z,Z&&P[k]<0)}else C=g.parseCBORfloat(C)}this.emit("value",C,lt,T,G);let U=!1;for(;P!=null;){if(C===_.BREAK)P[k]=1;else if(Array.isArray(P))P.push(C);else{const j=P[E];if(j!=null&&j!==H)throw this.running=!1,new Error("Invalid major type in indefinite encoding");P.write(C)}if(--P[k]!==0){U=!0;break}if(--W,delete P[k],Array.isArray(P))switch(P[E]){case p.ARRAY:C=P;break;case p.MAP:{let j=!this.preferMap;if(P.length%2!=0)throw new Error(`Invalid map length: ${P.length}`);for(let X=0,at=P.length;j&&X<at;X+=2)if(typeof P[X]!="string"||P[X]==="__proto__"){j=!1;break}if(j){C={};for(let X=0,at=P.length;X<at;X+=2){if(this.preventDuplicateKeys&&Object.prototype.hasOwnProperty.call(C,P[X]))throw new Error("Duplicate keys in a map");C[P[X]]=P[X+1]}}else{C=new Map;for(let X=0,at=P.length;X<at;X+=2){if(this.preventDuplicateKeys&&C.has(P[X]))throw new Error("Duplicate keys in a map");C.set(P[X],P[X+1])}}break}case p.TAG:C=new f(P[0],P[1]).convert(this.tags)}else if(P instanceof m)switch(P[E]){case p.BYTE_STRING:C=P.slice(),this.preferWeb&&(C=new Uint8Array(C.buffer,C.byteOffset,C.length));break;case p.UTF8_STRING:C=P.toString("utf-8")}this.emit("stop",P[E]);const Z=P;P=P[_.PARENT],delete Z[_.PARENT],delete Z[E]}if(!U){if(this.extendedResults){const Z=this.valueBytes.slice(),j={value:N.nullcheck(C),bytes:Z,length:Z.length};return this.valueBytes=new m,j}return C}}}}N.NOT_FOUND=S,o.exports=N},4134:o=>{class a extends Error{constructor(h){if(!Array.isArray(h))throw new TypeError("Expected input to be an Array, got "+typeof h);let f="";for(let c=0;c<h.length;c++)f+=`    ${h[c].stack}
`;super(f),this.name="AggregateError",this.errors=h}}o.exports={AggregateError:a,ArrayIsArray:l=>Array.isArray(l),ArrayPrototypeIncludes:(l,h)=>l.includes(h),ArrayPrototypeIndexOf:(l,h)=>l.indexOf(h),ArrayPrototypeJoin:(l,h)=>l.join(h),ArrayPrototypeMap:(l,h)=>l.map(h),ArrayPrototypePop:(l,h)=>l.pop(h),ArrayPrototypePush:(l,h)=>l.push(h),ArrayPrototypeSlice:(l,h,f)=>l.slice(h,f),Error,FunctionPrototypeCall:(l,h,...f)=>l.call(h,...f),FunctionPrototypeSymbolHasInstance:(l,h)=>Function.prototype[Symbol.hasInstance].call(l,h),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(l,h)=>Object.defineProperties(l,h),ObjectDefineProperty:(l,h,f)=>Object.defineProperty(l,h,f),ObjectGetOwnPropertyDescriptor:(l,h)=>Object.getOwnPropertyDescriptor(l,h),ObjectKeys:l=>Object.keys(l),ObjectSetPrototypeOf:(l,h)=>Object.setPrototypeOf(l,h),Promise,PromisePrototypeCatch:(l,h)=>l.catch(h),PromisePrototypeThen:(l,h,f)=>l.then(h,f),PromiseReject:l=>Promise.reject(l),PromiseResolve:l=>Promise.resolve(l),ReflectApply:Reflect.apply,RegExpPrototypeTest:(l,h)=>l.test(h),SafeSet:Set,String,StringPrototypeSlice:(l,h,f)=>l.slice(h,f),StringPrototypeToLowerCase:l=>l.toLowerCase(),StringPrototypeToUpperCase:l=>l.toUpperCase(),StringPrototypeTrim:l=>l.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(l,h,f)=>l.set(h,f),Boolean,Uint8Array}},4147:(o,a,l)=>{const{SymbolDispose:h}=l(4134),{AbortError:f,codes:c}=l(6371),{isNodeStream:g,isWebStream:m,kControllerErrorFunction:u}=l(6115),p=l(6238),{ERR_INVALID_ARG_TYPE:w}=c;let _;o.exports.addAbortSignal=function(R,A){if((k=>{if(typeof k!="object"||!("aborted"in k))throw new w("signal","AbortSignal",k)})(R),!g(A)&&!m(A))throw new w("stream",["ReadableStream","WritableStream","Stream"],A);return o.exports.addAbortSignalNoValidate(R,A)},o.exports.addAbortSignalNoValidate=function(R,A){if(typeof R!="object"||!("aborted"in R))return A;const k=g(A)?()=>{A.destroy(new f(void 0,{cause:R.reason}))}:()=>{A[u](new f(void 0,{cause:R.reason}))};if(R.aborted)k();else{_=_||l(7760).addAbortListener;const E=_(R,k);p(A,E[h])}return A}},4259:(o,a,l)=>{const{ArrayIsArray:h,ObjectSetPrototypeOf:f}=l(4134),{EventEmitter:c}=l(7007);function g(u){c.call(this,u)}function m(u,p,w){if(typeof u.prependListener=="function")return u.prependListener(p,w);u._events&&u._events[p]?h(u._events[p])?u._events[p].unshift(w):u._events[p]=[w,u._events[p]]:u.on(p,w)}f(g.prototype,c.prototype),f(g,c),g.prototype.pipe=function(u,p){const w=this;function _(M){u.writable&&u.write(M)===!1&&w.pause&&w.pause()}function R(){w.readable&&w.resume&&w.resume()}w.on("data",_),u.on("drain",R),u._isStdio||p&&p.end===!1||(w.on("end",k),w.on("close",E));let A=!1;function k(){A||(A=!0,u.end())}function E(){A||(A=!0,typeof u.destroy=="function"&&u.destroy())}function y(M){S(),c.listenerCount(this,"error")===0&&this.emit("error",M)}function S(){w.removeListener("data",_),u.removeListener("drain",R),w.removeListener("end",k),w.removeListener("close",E),w.removeListener("error",y),u.removeListener("error",y),w.removeListener("end",S),w.removeListener("close",S),u.removeListener("close",S)}return m(w,"error",y),m(u,"error",y),w.on("end",S),w.on("close",S),u.on("close",S),u.emit("pipe",w),u},o.exports={Stream:g,prependListener:m}},4610:(o,a,l)=>{o.exports=l(5506).Transform},4957:(o,a,l)=>{const h=l(8310),f=l(672);class c extends h.Transform{constructor(m){super(m),this._writableState.objectMode=!1,this._readableState.objectMode=!0,this.bs=new f,this.__restart()}_transform(m,u,p){for(this.bs.write(m);this.bs.length>=this.__needed;){let w=null;const _=this.__needed===null?void 0:this.bs.read(this.__needed);try{w=this.__parser.next(_)}catch(R){return p(R)}this.__needed&&(this.__fresh=!1),w.done?(this.push(w.value),this.__restart()):this.__needed=w.value||1/0}return p()}*_parse(){throw new Error("Must be implemented in subclass")}__restart(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}_flush(m){m(this.__fresh?null:new Error("unexpected end of input"))}}o.exports=c},5059:(o,a,l)=>{const{MT:h,SIMPLE:f,SYMS:c}=l(9452);class g{constructor(u){if(typeof u!="number")throw new Error("Invalid Simple type: "+typeof u);if(u<0||u>255||(0|u)!==u)throw new Error(`value must be a small positive integer: ${u}`);this.value=u}toString(){return`simple(${this.value})`}[Symbol.for("nodejs.util.inspect.custom")](u,p){return`simple(${this.value})`}encodeCBOR(u){return u._pushInt(this.value,h.SIMPLE_FLOAT)}static isSimple(u){return u instanceof g}static decode(u,p=!0,w=!1){switch(u){case f.FALSE:return!1;case f.TRUE:return!0;case f.NULL:return p?null:c.NULL;case f.UNDEFINED:return p?void 0:c.UNDEFINED;case-1:if(!p||!w)throw new Error("Invalid BREAK");return c.BREAK;default:return new g(u)}}}o.exports=g},5291:(o,a,l)=>{const{MathFloor:h,NumberIsInteger:f}=l(4134),{validateInteger:c}=l(277),{ERR_INVALID_ARG_VALUE:g}=l(6371).codes;let m=16384,u=16;function p(w){return w?u:m}o.exports={getHighWaterMark:function(w,_,R,A){const k=function(E,y,S){return E.highWaterMark!=null?E.highWaterMark:y?E[S]:null}(_,A,R);if(k!=null){if(!f(k)||k<0)throw new g(A?`options.${R}`:"options.highWaterMark",k);return h(k)}return p(w.objectMode)},getDefaultHighWaterMark:p,setDefaultHighWaterMark:function(w,_){c(_,"value",0),w?u=_:m=_}}},5382:(o,a,l)=>{o.exports=l(5506).Duplex},5412:(o,a,l)=>{o.exports=l(5506).Readable},5506:(o,a,l)=>{const{Buffer:h}=l(8287),{ObjectDefineProperty:f,ObjectKeys:c,ReflectApply:g}=l(4134),{promisify:{custom:m}}=l(7760),{streamReturningOperators:u,promiseReturningOperators:p}=l(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:w}}=l(6371),_=l(7830),{setDefaultHighWaterMark:R,getDefaultHighWaterMark:A}=l(5291),{pipeline:k}=l(7758),{destroyer:E}=l(5896),y=l(6238),S=l(3095),M=l(6115),I=o.exports=l(4259).Stream;I.isDestroyed=M.isDestroyed,I.isDisturbed=M.isDisturbed,I.isErrored=M.isErrored,I.isReadable=M.isReadable,I.isWritable=M.isWritable,I.Readable=l(7576);for(const z of c(u)){let J=function(...P){if(new.target)throw w();return I.Readable.from(g(N,this,P))};const N=u[z];f(J,"name",{__proto__:null,value:N.name}),f(J,"length",{__proto__:null,value:N.length}),f(I.Readable.prototype,z,{__proto__:null,value:J,enumerable:!1,configurable:!0,writable:!0})}for(const z of c(p)){let J=function(...P){if(new.target)throw w();return g(N,this,P)};const N=p[z];f(J,"name",{__proto__:null,value:N.name}),f(J,"length",{__proto__:null,value:N.length}),f(I.Readable.prototype,z,{__proto__:null,value:J,enumerable:!1,configurable:!0,writable:!0})}I.Writable=l(8584),I.Duplex=l(3370),I.Transform=l(7382),I.PassThrough=l(6524),I.pipeline=k;const{addAbortSignal:q}=l(4147);I.addAbortSignal=q,I.finished=y,I.destroy=E,I.compose=_,I.setDefaultHighWaterMark=R,I.getDefaultHighWaterMark=A,f(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>S}),f(k,m,{__proto__:null,enumerable:!0,get:()=>S.pipeline}),f(y,m,{__proto__:null,enumerable:!0,get:()=>S.finished}),I.Stream=I,I._isUint8Array=function(z){return z instanceof Uint8Array},I._uint8ArrayToBuffer=function(z){return h.from(z.buffer,z.byteOffset,z.byteLength)}},5568:o=>{const{AbortController:a,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;o.exports=a,o.exports.AbortSignal=l,o.exports.default=a},5606:o=>{var a,l,h=o.exports={};function f(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function g(E){if(a===setTimeout)return setTimeout(E,0);if((a===f||!a)&&setTimeout)return a=setTimeout,setTimeout(E,0);try{return a(E,0)}catch{try{return a.call(null,E,0)}catch{return a.call(this,E,0)}}}(function(){try{a=typeof setTimeout=="function"?setTimeout:f}catch{a=f}try{l=typeof clearTimeout=="function"?clearTimeout:c}catch{l=c}})();var m,u=[],p=!1,w=-1;function _(){p&&m&&(p=!1,m.length?u=m.concat(u):w=-1,u.length&&R())}function R(){if(!p){var E=g(_);p=!0;for(var y=u.length;y;){for(m=u,u=[];++w<y;)m&&m[w].run();w=-1,y=u.length}m=null,p=!1,function(S){if(l===clearTimeout)return clearTimeout(S);if((l===c||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(S);try{return l(S)}catch{try{return l.call(null,S)}catch{return l.call(this,S)}}}(E)}}function A(E,y){this.fun=E,this.array=y}function k(){}h.nextTick=function(E){var y=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)y[S-1]=arguments[S];u.push(new A(E,y)),u.length!==1||p||g(R)},A.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=k,h.addListener=k,h.once=k,h.off=k,h.removeListener=k,h.removeAllListeners=k,h.emit=k,h.prependListener=k,h.prependOnceListener=k,h.listeners=function(E){return[]},h.binding=function(E){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(E){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},5896:(o,a,l)=>{const h=l(5606),{aggregateTwoErrors:f,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:g}=l(6371),{Symbol:m}=l(4134),{kIsDestroyed:u,isDestroyed:p,isFinished:w,isServerRequest:_}=l(6115),R=m("kDestroy"),A=m("kConstruct");function k(W,C,K){W&&(W.stack,C&&!C.errored&&(C.errored=W),K&&!K.errored&&(K.errored=W))}function E(W,C,K){let H=!1;function G(lt){if(H)return;H=!0;const T=W._readableState,U=W._writableState;k(lt,U,T),U&&(U.closed=!0),T&&(T.closed=!0),typeof K=="function"&&K(lt),lt?h.nextTick(y,W,lt):h.nextTick(S,W)}try{W._destroy(C||null,G)}catch(lt){G(lt)}}function y(W,C){M(W,C),S(W)}function S(W){const C=W._readableState,K=W._writableState;K&&(K.closeEmitted=!0),C&&(C.closeEmitted=!0),(K!=null&&K.emitClose||C!=null&&C.emitClose)&&W.emit("close")}function M(W,C){const K=W._readableState,H=W._writableState;H!=null&&H.errorEmitted||K!=null&&K.errorEmitted||(H&&(H.errorEmitted=!0),K&&(K.errorEmitted=!0),W.emit("error",C))}function I(W,C,K){const H=W._readableState,G=W._writableState;if(G!=null&&G.destroyed||H!=null&&H.destroyed)return this;H!=null&&H.autoDestroy||G!=null&&G.autoDestroy?W.destroy(C):C&&(C.stack,G&&!G.errored&&(G.errored=C),H&&!H.errored&&(H.errored=C),K?h.nextTick(M,W,C):M(W,C))}function q(W){let C=!1;function K(H){if(C)return void I(W,H??new c);C=!0;const G=W._readableState,lt=W._writableState,T=lt||G;G&&(G.constructed=!0),lt&&(lt.constructed=!0),T.destroyed?W.emit(R,H):H?I(W,H,!0):h.nextTick(z,W)}try{W._construct(H=>{h.nextTick(K,H)})}catch(H){h.nextTick(K,H)}}function z(W){W.emit(A)}function N(W){return W?.setHeader&&typeof W.abort=="function"}function J(W){W.emit("close")}function P(W,C){W.emit("error",C),h.nextTick(J,W)}o.exports={construct:function(W,C){if(typeof W._construct!="function")return;const K=W._readableState,H=W._writableState;K&&(K.constructed=!1),H&&(H.constructed=!1),W.once(A,C),W.listenerCount(A)>1||h.nextTick(q,W)},destroyer:function(W,C){W&&!p(W)&&(C||w(W)||(C=new g),_(W)?(W.socket=null,W.destroy(C)):N(W)?W.abort():N(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(C):typeof W.close=="function"?W.close():C?h.nextTick(P,W,C):h.nextTick(J,W),W.destroyed||(W[u]=!0))},destroy:function(W,C){const K=this._readableState,H=this._writableState,G=H||K;return H!=null&&H.destroyed||K!=null&&K.destroyed?(typeof C=="function"&&C(),this):(k(W,H,K),H&&(H.destroyed=!0),K&&(K.destroyed=!0),G.constructed?E(this,W,C):this.once(R,function(lt){E(this,f(lt,W),C)}),this)},undestroy:function(){const W=this._readableState,C=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),C&&(C.constructed=!0,C.destroyed=!1,C.closed=!1,C.closeEmitted=!1,C.errored=null,C.errorEmitted=!1,C.finalCalled=!1,C.prefinished=!1,C.ended=C.writable===!1,C.ending=C.writable===!1,C.finished=C.writable===!1)},errorOrDestroy:I}},6115:(o,a,l)=>{const{SymbolAsyncIterator:h,SymbolIterator:f,SymbolFor:c}=l(4134),g=c("nodejs.stream.destroyed"),m=c("nodejs.stream.errored"),u=c("nodejs.stream.readable"),p=c("nodejs.stream.writable"),w=c("nodejs.stream.disturbed"),_=c("nodejs.webstream.isClosedPromise"),R=c("nodejs.webstream.controllerErrorFunction");function A(C,K=!1){var H;return!(!C||typeof C.pipe!="function"||typeof C.on!="function"||K&&(typeof C.pause!="function"||typeof C.resume!="function")||C._writableState&&((H=C._readableState)===null||H===void 0?void 0:H.readable)===!1||C._writableState&&!C._readableState)}function k(C){var K;return!(!C||typeof C.write!="function"||typeof C.on!="function"||C._readableState&&((K=C._writableState)===null||K===void 0?void 0:K.writable)===!1)}function E(C){return C&&(C._readableState||C._writableState||typeof C.write=="function"&&typeof C.on=="function"||typeof C.pipe=="function"&&typeof C.on=="function")}function y(C){return!(!C||E(C)||typeof C.pipeThrough!="function"||typeof C.getReader!="function"||typeof C.cancel!="function")}function S(C){return!(!C||E(C)||typeof C.getWriter!="function"||typeof C.abort!="function")}function M(C){return!(!C||E(C)||typeof C.readable!="object"||typeof C.writable!="object")}function I(C){if(!E(C))return null;const K=C._writableState,H=C._readableState,G=K||H;return!!(C.destroyed||C[g]||G!=null&&G.destroyed)}function q(C){if(!k(C))return null;if(C.writableEnded===!0)return!0;const K=C._writableState;return(K==null||!K.errored)&&(typeof K?.ended!="boolean"?null:K.ended)}function z(C,K){if(!A(C))return null;const H=C._readableState;return(H==null||!H.errored)&&(typeof H?.endEmitted!="boolean"?null:!!(H.endEmitted||K===!1&&H.ended===!0&&H.length===0))}function N(C){return C&&C[u]!=null?C[u]:typeof C?.readable!="boolean"?null:!I(C)&&A(C)&&C.readable&&!z(C)}function J(C){return C&&C[p]!=null?C[p]:typeof C?.writable!="boolean"?null:!I(C)&&k(C)&&C.writable&&!q(C)}function P(C){return typeof C._closed=="boolean"&&typeof C._defaultKeepAlive=="boolean"&&typeof C._removedConnection=="boolean"&&typeof C._removedContLen=="boolean"}function W(C){return typeof C._sent100=="boolean"&&P(C)}o.exports={isDestroyed:I,kIsDestroyed:g,isDisturbed:function(C){var K;return!(!C||!((K=C[w])!==null&&K!==void 0?K:C.readableDidRead||C.readableAborted))},kIsDisturbed:w,isErrored:function(C){var K,H,G,lt,T,U,Z,j,X,at;return!(!C||!((K=(H=(G=(lt=(T=(U=C[m])!==null&&U!==void 0?U:C.readableErrored)!==null&&T!==void 0?T:C.writableErrored)!==null&&lt!==void 0?lt:(Z=C._readableState)===null||Z===void 0?void 0:Z.errorEmitted)!==null&&G!==void 0?G:(j=C._writableState)===null||j===void 0?void 0:j.errorEmitted)!==null&&H!==void 0?H:(X=C._readableState)===null||X===void 0?void 0:X.errored)!==null&&K!==void 0?K:!((at=C._writableState)===null||at===void 0)&&at.errored))},kIsErrored:m,isReadable:N,kIsReadable:u,kIsClosedPromise:_,kControllerErrorFunction:R,kIsWritable:p,isClosed:function(C){if(!E(C))return null;if(typeof C.closed=="boolean")return C.closed;const K=C._writableState,H=C._readableState;return typeof K?.closed=="boolean"||typeof H?.closed=="boolean"?K?.closed||H?.closed:typeof C._closed=="boolean"&&P(C)?C._closed:null},isDuplexNodeStream:function(C){return!(!C||typeof C.pipe!="function"||!C._readableState||typeof C.on!="function"||typeof C.write!="function")},isFinished:function(C,K){return E(C)?!(!I(C)&&(K?.readable!==!1&&N(C)||K?.writable!==!1&&J(C))):null},isIterable:function(C,K){return C!=null&&(K===!0?typeof C[h]=="function":K===!1?typeof C[f]=="function":typeof C[h]=="function"||typeof C[f]=="function")},isReadableNodeStream:A,isReadableStream:y,isReadableEnded:function(C){if(!A(C))return null;if(C.readableEnded===!0)return!0;const K=C._readableState;return!(!K||K.errored)&&(typeof K?.ended!="boolean"?null:K.ended)},isReadableFinished:z,isReadableErrored:function(C){var K,H;return E(C)?C.readableErrored?C.readableErrored:(K=(H=C._readableState)===null||H===void 0?void 0:H.errored)!==null&&K!==void 0?K:null:null},isNodeStream:E,isWebStream:function(C){return y(C)||S(C)||M(C)},isWritable:J,isWritableNodeStream:k,isWritableStream:S,isWritableEnded:q,isWritableFinished:function(C,K){if(!k(C))return null;if(C.writableFinished===!0)return!0;const H=C._writableState;return(H==null||!H.errored)&&(typeof H?.finished!="boolean"?null:!!(H.finished||K===!1&&H.ended===!0&&H.length===0))},isWritableErrored:function(C){var K,H;return E(C)?C.writableErrored?C.writableErrored:(K=(H=C._writableState)===null||H===void 0?void 0:H.errored)!==null&&K!==void 0?K:null:null},isServerRequest:function(C){var K;return typeof C._consuming=="boolean"&&typeof C._dumped=="boolean"&&((K=C.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0},isServerResponse:W,willEmitClose:function(C){if(!E(C))return null;const K=C._writableState,H=C._readableState,G=K||H;return!G&&W(C)||!!(G&&G.autoDestroy&&G.emitClose&&G.closed===!1)},isTransformStream:M}},6238:(o,a,l)=>{const h=l(5606),{AbortError:f,codes:c}=l(6371),{ERR_INVALID_ARG_TYPE:g,ERR_STREAM_PREMATURE_CLOSE:m}=c,{kEmptyObject:u,once:p}=l(7760),{validateAbortSignal:w,validateFunction:_,validateObject:R,validateBoolean:A}=l(277),{Promise:k,PromisePrototypeThen:E,SymbolDispose:y}=l(4134),{isClosed:S,isReadable:M,isReadableNodeStream:I,isReadableStream:q,isReadableFinished:z,isReadableErrored:N,isWritable:J,isWritableNodeStream:P,isWritableStream:W,isWritableFinished:C,isWritableErrored:K,isNodeStream:H,willEmitClose:G,kIsClosedPromise:lt}=l(6115);let T;const U=()=>{};function Z(j,X,at){var tt,st;if(arguments.length===2?(at=X,X=u):X==null?X=u:R(X,"options"),_(at,"callback"),w(X.signal,"options.signal"),at=p(at),q(j)||W(j))return function(b,x,L){let D=!1,$=U;if(x.signal)if($=()=>{D=!0,L.call(b,new f(void 0,{cause:x.signal.reason}))},x.signal.aborted)h.nextTick($);else{T=T||l(7760).addAbortListener;const vt=T(x.signal,$),_t=L;L=p((...Ct)=>{vt[y](),_t.apply(b,Ct)})}const nt=(...vt)=>{D||h.nextTick(()=>L.apply(b,vt))};return E(b[lt].promise,nt,nt),U}(j,X,at);if(!H(j))throw new g("stream",["ReadableStream","WritableStream","Stream"],j);const Q=(tt=X.readable)!==null&&tt!==void 0?tt:I(j),ft=(st=X.writable)!==null&&st!==void 0?st:P(j),ot=j._writableState,At=j._readableState,yt=()=>{j.writable||rt()};let St=G(j)&&I(j)===Q&&P(j)===ft,F=C(j,!1);const rt=()=>{F=!0,j.destroyed&&(St=!1),(!St||j.readable&&!Q)&&(Q&&!et||at.call(j))};let et=z(j,!1);const mt=()=>{et=!0,j.destroyed&&(St=!1),(!St||j.writable&&!ft)&&(ft&&!F||at.call(j))},V=b=>{at.call(j,b)};let it=S(j);const Y=()=>{it=!0;const b=K(j)||N(j);return b&&typeof b!="boolean"?at.call(j,b):Q&&!et&&I(j,!0)&&!z(j,!1)?at.call(j,new m):!ft||F||C(j,!1)?void at.call(j):at.call(j,new m)},ht=()=>{it=!0;const b=K(j)||N(j);if(b&&typeof b!="boolean")return at.call(j,b);at.call(j)},dt=()=>{j.req.on("finish",rt)};(function(b){return b.setHeader&&typeof b.abort=="function"})(j)?(j.on("complete",rt),St||j.on("abort",Y),j.req?dt():j.on("request",dt)):ft&&!ot&&(j.on("end",yt),j.on("close",yt)),St||typeof j.aborted!="boolean"||j.on("aborted",Y),j.on("end",mt),j.on("finish",rt),X.error!==!1&&j.on("error",V),j.on("close",Y),it?h.nextTick(Y):ot!=null&&ot.errorEmitted||At!=null&&At.errorEmitted?St||h.nextTick(ht):(Q||St&&!M(j)||!F&&J(j)!==!1)&&(ft||St&&!J(j)||!et&&M(j)!==!1)?At&&j.req&&j.aborted&&h.nextTick(ht):h.nextTick(ht);const d=()=>{at=U,j.removeListener("aborted",Y),j.removeListener("complete",rt),j.removeListener("abort",Y),j.removeListener("request",dt),j.req&&j.req.removeListener("finish",rt),j.removeListener("end",yt),j.removeListener("close",yt),j.removeListener("finish",rt),j.removeListener("end",mt),j.removeListener("error",V),j.removeListener("close",Y)};if(X.signal&&!it){const b=()=>{const x=at;d(),x.call(j,new f(void 0,{cause:X.signal.reason}))};if(X.signal.aborted)h.nextTick(b);else{T=T||l(7760).addAbortListener;const x=T(X.signal,b),L=at;at=p((...D)=>{x[y](),L.apply(j,D)})}}return d}o.exports=Z,o.exports.finished=function(j,X){var at;let tt=!1;return X===null&&(X=u),(at=X)!==null&&at!==void 0&&at.cleanup&&(A(X.cleanup,"cleanup"),tt=X.cleanup),new k((st,Q)=>{const ft=Z(j,X,ot=>{tt&&ft(),ot?Q(ot):st()})})}},6371:(o,a,l)=>{const{format:h,inspect:f}=l(9231),{AggregateError:c}=l(4134),g=globalThis.AggregateError||c,m=Symbol("kIsNodeError"),u=["string","function","number","object","Function","Object","boolean","bigint","symbol"],p=/^([A-Z][a-z0-9]*)+$/,w={};function _(y,S){if(!y)throw new w.ERR_INTERNAL_ASSERTION(S)}function R(y){let S="",M=y.length;const I=y[0]==="-"?1:0;for(;M>=I+4;M-=3)S=`_${y.slice(M-3,M)}${S}`;return`${y.slice(0,M)}${S}`}function A(y,S,M){M||(M=Error);class I extends M{constructor(...z){super(function(N,J,P){if(typeof J=="function")return _(J.length<=P.length,`Code: ${N}; The provided arguments length (${P.length}) does not match the required ones (${J.length}).`),J(...P);const W=(J.match(/%[dfijoOs]/g)||[]).length;return _(W===P.length,`Code: ${N}; The provided arguments length (${P.length}) does not match the required ones (${W}).`),P.length===0?J:h(J,...P)}(y,S,z))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(I.prototype,{name:{value:M.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),I.prototype.code=y,I.prototype[m]=!0,w[y]=I}function k(y){const S="__node_internal_"+y.name;return Object.defineProperty(y,"name",{value:S}),y}class E extends Error{constructor(S="The operation was aborted",M=void 0){if(M!==void 0&&typeof M!="object")throw new w.ERR_INVALID_ARG_TYPE("options","Object",M);super(S,M),this.code="ABORT_ERR",this.name="AbortError"}}A("ERR_ASSERTION","%s",Error),A("ERR_INVALID_ARG_TYPE",(y,S,M)=>{_(typeof y=="string","'name' must be a string"),Array.isArray(S)||(S=[S]);let I="The ";y.endsWith(" argument")?I+=`${y} `:I+=`"${y}" ${y.includes(".")?"property":"argument"} `,I+="must be ";const q=[],z=[],N=[];for(const P of S)_(typeof P=="string","All expected entries have to be of type string"),u.includes(P)?q.push(P.toLowerCase()):p.test(P)?z.push(P):(_(P!=="object",'The value "object" should be written as "Object"'),N.push(P));if(z.length>0){const P=q.indexOf("object");P!==-1&&(q.splice(q,P,1),z.push("Object"))}if(q.length>0){switch(q.length){case 1:I+=`of type ${q[0]}`;break;case 2:I+=`one of type ${q[0]} or ${q[1]}`;break;default:{const P=q.pop();I+=`one of type ${q.join(", ")}, or ${P}`}}(z.length>0||N.length>0)&&(I+=" or ")}if(z.length>0){switch(z.length){case 1:I+=`an instance of ${z[0]}`;break;case 2:I+=`an instance of ${z[0]} or ${z[1]}`;break;default:{const P=z.pop();I+=`an instance of ${z.join(", ")}, or ${P}`}}N.length>0&&(I+=" or ")}switch(N.length){case 0:break;case 1:N[0].toLowerCase()!==N[0]&&(I+="an "),I+=`${N[0]}`;break;case 2:I+=`one of ${N[0]} or ${N[1]}`;break;default:{const P=N.pop();I+=`one of ${N.join(", ")}, or ${P}`}}if(M==null)I+=`. Received ${M}`;else if(typeof M=="function"&&M.name)I+=`. Received function ${M.name}`;else if(typeof M=="object"){var J;(J=M.constructor)!==null&&J!==void 0&&J.name?I+=`. Received an instance of ${M.constructor.name}`:I+=`. Received ${f(M,{depth:-1})}`}else{let P=f(M,{colors:!1});P.length>25&&(P=`${P.slice(0,25)}...`),I+=`. Received type ${typeof M} (${P})`}return I},TypeError),A("ERR_INVALID_ARG_VALUE",(y,S,M="is invalid")=>{let I=f(S);return I.length>128&&(I=I.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${M}. Received ${I}`},TypeError),A("ERR_INVALID_RETURN_VALUE",(y,S,M)=>{var I;return`Expected ${y} to be returned from the "${S}" function but got ${M!=null&&(I=M.constructor)!==null&&I!==void 0&&I.name?`instance of ${M.constructor.name}`:"type "+typeof M}.`},TypeError),A("ERR_MISSING_ARGS",(...y)=>{let S;_(y.length>0,"At least one arg needs to be specified");const M=y.length;switch(y=(Array.isArray(y)?y:[y]).map(I=>`"${I}"`).join(" or "),M){case 1:S+=`The ${y[0]} argument`;break;case 2:S+=`The ${y[0]} and ${y[1]} arguments`;break;default:{const I=y.pop();S+=`The ${y.join(", ")}, and ${I} arguments`}}return`${S} must be specified`},TypeError),A("ERR_OUT_OF_RANGE",(y,S,M)=>{let I;if(_(S,'Missing "range" argument'),Number.isInteger(M)&&Math.abs(M)>4294967296)I=R(String(M));else if(typeof M=="bigint"){I=String(M);const q=BigInt(2)**BigInt(32);(M>q||M<-q)&&(I=R(I)),I+="n"}else I=f(M);return`The value of "${y}" is out of range. It must be ${S}. Received ${I}`},RangeError),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),A("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),A("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),A("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),A("ERR_STREAM_WRITE_AFTER_END","write after end",Error),A("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),o.exports={AbortError:E,aggregateTwoErrors:k(function(y,S){if(y&&S&&y!==S){if(Array.isArray(S.errors))return S.errors.push(y),S;const M=new g([S,y],S.message);return M.code=S.code,M}return y||S}),hideStackFrames:k,codes:w}},6524:(o,a,l)=>{const{ObjectSetPrototypeOf:h}=l(4134);o.exports=c;const f=l(7382);function c(g){if(!(this instanceof c))return new c(g);f.call(this,g)}h(c.prototype,f.prototype),h(c,f),c.prototype._transform=function(g,m,u){u(null,g)}},6532:(o,a,l)=>{const h=l(5606),{PromisePrototypeThen:f,SymbolAsyncIterator:c,SymbolIterator:g}=l(4134),{Buffer:m}=l(8287),{ERR_INVALID_ARG_TYPE:u,ERR_STREAM_NULL_VALUES:p}=l(6371).codes;o.exports=function(w,_,R){let A,k;if(typeof _=="string"||_ instanceof m)return new w({objectMode:!0,...R,read(){this.push(_),this.push(null)}});if(_&&_[c])k=!0,A=_[c]();else{if(!_||!_[g])throw new u("iterable",["Iterable"],_);k=!1,A=_[g]()}const E=new w({objectMode:!0,highWaterMark:1,...R});let y=!1;return E._read=function(){y||(y=!0,async function(){for(;;){try{const{value:S,done:M}=k?await A.next():A.next();if(M)E.push(null);else{const I=S&&typeof S.then=="function"?await S:S;if(I===null)throw y=!1,new p;if(E.push(I))continue;y=!1}}catch(S){E.destroy(S)}break}}())},E._destroy=function(S,M){f(async function(I){const q=I!=null,z=typeof A.throw=="function";if(q&&z){const{value:N,done:J}=await A.throw(I);if(await N,J)return}if(typeof A.return=="function"){const{value:N}=await A.return();await N}}(S),()=>h.nextTick(M,S),I=>h.nextTick(M,I||S))},E}},6698:o=>{typeof Object.create=="function"?o.exports=function(a,l){l&&(a.super_=l,a.prototype=Object.create(l.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(a,l){if(l){a.super_=l;var h=function(){};h.prototype=l.prototype,a.prototype=new h,a.prototype.constructor=a}}},6706:(o,a,l)=>{const h=l(5606),f=l(8287),{isReadable:c,isWritable:g,isIterable:m,isNodeStream:u,isReadableNodeStream:p,isWritableNodeStream:w,isDuplexNodeStream:_,isReadableStream:R,isWritableStream:A}=l(6115),k=l(6238),{AbortError:E,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:S}}=l(6371),{destroyer:M}=l(5896),I=l(3370),q=l(7576),z=l(8584),{createDeferredPromise:N}=l(7760),J=l(6532),P=globalThis.Blob||f.Blob,W=P!==void 0?function(lt){return lt instanceof P}:function(lt){return!1},C=globalThis.AbortController||l(5568).AbortController,{FunctionPrototypeCall:K}=l(4134);class H extends I{constructor(T){super(T),T?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),T?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function G(lt){const T=lt.readable&&typeof lt.readable.read!="function"?q.wrap(lt.readable):lt.readable,U=lt.writable;let Z,j,X,at,tt,st=!!c(T),Q=!!g(U);function ft(ot){const At=at;at=null,At?At(ot):ot&&tt.destroy(ot)}return tt=new H({readableObjectMode:!(T==null||!T.readableObjectMode),writableObjectMode:!(U==null||!U.writableObjectMode),readable:st,writable:Q}),Q&&(k(U,ot=>{Q=!1,ot&&M(T,ot),ft(ot)}),tt._write=function(ot,At,yt){U.write(ot,At)?yt():Z=yt},tt._final=function(ot){U.end(),j=ot},U.on("drain",function(){if(Z){const ot=Z;Z=null,ot()}}),U.on("finish",function(){if(j){const ot=j;j=null,ot()}})),st&&(k(T,ot=>{st=!1,ot&&M(T,ot),ft(ot)}),T.on("readable",function(){if(X){const ot=X;X=null,ot()}}),T.on("end",function(){tt.push(null)}),tt._read=function(){for(;;){const ot=T.read();if(ot===null)return void(X=tt._read);if(!tt.push(ot))return}}),tt._destroy=function(ot,At){ot||at===null||(ot=new E),X=null,Z=null,j=null,at===null?At(ot):(at=At,M(U,ot),M(T,ot))},tt}o.exports=function lt(T,U){if(_(T))return T;if(p(T))return G({readable:T});if(w(T))return G({writable:T});if(u(T))return G({writable:!1,readable:!1});if(R(T))return G({readable:q.fromWeb(T)});if(A(T))return G({writable:z.fromWeb(T)});if(typeof T=="function"){const{value:j,write:X,final:at,destroy:tt}=function(Q){let{promise:ft,resolve:ot}=N();const At=new C,yt=At.signal;return{value:Q(async function*(){for(;;){const St=ft;ft=null;const{chunk:F,done:rt,cb:et}=await St;if(h.nextTick(et),rt)return;if(yt.aborted)throw new E(void 0,{cause:yt.reason});({promise:ft,resolve:ot}=N()),yield F}}(),{signal:yt}),write(St,F,rt){const et=ot;ot=null,et({chunk:St,done:!1,cb:rt})},final(St){const F=ot;ot=null,F({done:!0,cb:St})},destroy(St,F){At.abort(),F(St)}}}(T);if(m(j))return J(H,j,{objectMode:!0,write:X,final:at,destroy:tt});const st=j?.then;if(typeof st=="function"){let Q;const ft=K(st,j,ot=>{if(ot!=null)throw new S("nully","body",ot)},ot=>{M(Q,ot)});return Q=new H({objectMode:!0,readable:!1,write:X,final(ot){at(async()=>{try{await ft,h.nextTick(ot,null)}catch(At){h.nextTick(ot,At)}})},destroy:tt})}throw new S("Iterable, AsyncIterable or AsyncFunction",U,j)}if(W(T))return lt(T.arrayBuffer());if(m(T))return J(H,T,{objectMode:!0,writable:!1});if(R(T?.readable)&&A(T?.writable))return H.fromWeb(T);if(typeof T?.writable=="object"||typeof T?.readable=="object")return G({readable:T!=null&&T.readable?p(T?.readable)?T?.readable:lt(T.readable):void 0,writable:T!=null&&T.writable?w(T?.writable)?T?.writable:lt(T.writable):void 0});const Z=T?.then;if(typeof Z=="function"){let j;return K(Z,T,X=>{X!=null&&j.push(X),j.push(null)},X=>{M(j,X)}),j=new H({objectMode:!0,writable:!1,read(){}})}throw new y(U,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],T)}},6708:(o,a,l)=>{o.exports=l(5506).Writable},7007:o=>{var a,l=typeof Reflect=="object"?Reflect:null,h=l&&typeof l.apply=="function"?l.apply:function(y,S,M){return Function.prototype.apply.call(y,S,M)};a=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:function(y){return Object.getOwnPropertyNames(y)};var f=Number.isNaN||function(y){return y!=y};function c(){c.init.call(this)}o.exports=c,o.exports.once=function(y,S){return new Promise(function(M,I){function q(N){y.removeListener(S,z),I(N)}function z(){typeof y.removeListener=="function"&&y.removeListener("error",q),M([].slice.call(arguments))}E(y,S,z,{once:!0}),S!=="error"&&function(N,J){typeof N.on=="function"&&E(N,"error",J,{once:!0})}(y,q)})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var g=10;function m(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}function u(y){return y._maxListeners===void 0?c.defaultMaxListeners:y._maxListeners}function p(y,S,M,I){var q,z,N,J;if(m(M),(z=y._events)===void 0?(z=y._events=Object.create(null),y._eventsCount=0):(z.newListener!==void 0&&(y.emit("newListener",S,M.listener?M.listener:M),z=y._events),N=z[S]),N===void 0)N=z[S]=M,++y._eventsCount;else if(typeof N=="function"?N=z[S]=I?[M,N]:[N,M]:I?N.unshift(M):N.push(M),(q=u(y))>0&&N.length>q&&!N.warned){N.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=y,P.type=S,P.count=N.length,J=P,console&&console.warn&&console.warn(J)}return y}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(y,S,M){var I={fired:!1,wrapFn:void 0,target:y,type:S,listener:M},q=w.bind(I);return q.listener=M,I.wrapFn=q,q}function R(y,S,M){var I=y._events;if(I===void 0)return[];var q=I[S];return q===void 0?[]:typeof q=="function"?M?[q.listener||q]:[q]:M?function(z){for(var N=new Array(z.length),J=0;J<N.length;++J)N[J]=z[J].listener||z[J];return N}(q):k(q,q.length)}function A(y){var S=this._events;if(S!==void 0){var M=S[y];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}function k(y,S){for(var M=new Array(S),I=0;I<S;++I)M[I]=y[I];return M}function E(y,S,M,I){if(typeof y.on=="function")I.once?y.once(S,M):y.on(S,M);else{if(typeof y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y);y.addEventListener(S,function q(z){I.once&&y.removeEventListener(S,q),M(z)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(y){if(typeof y!="number"||y<0||f(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");g=y}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||f(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(y){for(var S=[],M=1;M<arguments.length;M++)S.push(arguments[M]);var I=y==="error",q=this._events;if(q!==void 0)I=I&&q.error===void 0;else if(!I)return!1;if(I){var z;if(S.length>0&&(z=S[0]),z instanceof Error)throw z;var N=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw N.context=z,N}var J=q[y];if(J===void 0)return!1;if(typeof J=="function")h(J,this,S);else{var P=J.length,W=k(J,P);for(M=0;M<P;++M)h(W[M],this,S)}return!0},c.prototype.addListener=function(y,S){return p(this,y,S,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(y,S){return p(this,y,S,!0)},c.prototype.once=function(y,S){return m(S),this.on(y,_(this,y,S)),this},c.prototype.prependOnceListener=function(y,S){return m(S),this.prependListener(y,_(this,y,S)),this},c.prototype.removeListener=function(y,S){var M,I,q,z,N;if(m(S),(I=this._events)===void 0)return this;if((M=I[y])===void 0)return this;if(M===S||M.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete I[y],I.removeListener&&this.emit("removeListener",y,M.listener||S));else if(typeof M!="function"){for(q=-1,z=M.length-1;z>=0;z--)if(M[z]===S||M[z].listener===S){N=M[z].listener,q=z;break}if(q<0)return this;q===0?M.shift():function(J,P){for(;P+1<J.length;P++)J[P]=J[P+1];J.pop()}(M,q),M.length===1&&(I[y]=M[0]),I.removeListener!==void 0&&this.emit("removeListener",y,N||S)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(y){var S,M,I;if((M=this._events)===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[y]),this;if(arguments.length===0){var q,z=Object.keys(M);for(I=0;I<z.length;++I)(q=z[I])!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(S=M[y])=="function")this.removeListener(y,S);else if(S!==void 0)for(I=S.length-1;I>=0;I--)this.removeListener(y,S[I]);return this},c.prototype.listeners=function(y){return R(this,y,!0)},c.prototype.rawListeners=function(y){return R(this,y,!1)},c.listenerCount=function(y,S){return typeof y.listenerCount=="function"?y.listenerCount(S):A.call(y,S)},c.prototype.listenerCount=A,c.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},7328:(o,a,l)=>{const{Buffer:h}=l(8287),f=l(672),c=l(8310),g=l(9452),{NUMBYTES:m,SHIFT32:u,BI:p,SYMS:w}=g,_=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});a.utf8=A=>_.decode(A),a.utf8.checksUTF8=!0,a.isBufferish=function(A){return A&&typeof A=="object"&&(h.isBuffer(A)||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof ArrayBuffer||A instanceof DataView)},a.bufferishToBuffer=function(A){return h.isBuffer(A)?A:ArrayBuffer.isView(A)?h.from(A.buffer,A.byteOffset,A.byteLength):A instanceof ArrayBuffer?h.from(A):null},a.parseCBORint=function(A,k){switch(A){case m.ONE:return k.readUInt8(0);case m.TWO:return k.readUInt16BE(0);case m.FOUR:return k.readUInt32BE(0);case m.EIGHT:{const E=k.readUInt32BE(0),y=k.readUInt32BE(4);return E>2097151?BigInt(E)*p.SHIFT32+BigInt(y):E*u+y}default:throw new Error(`Invalid additional info for int: ${A}`)}},a.writeHalf=function(A,k){const E=h.allocUnsafe(4);E.writeFloatBE(k,0);const y=E.readUInt32BE(0);if(8191&y)return!1;let S=y>>16&32768;const M=y>>23&255,I=8388607&y;if(M>=113&&M<=142)S+=(M-112<<10)+(I>>13);else{if(!(M>=103&&M<113)||I&(1<<126-M)-1)return!1;S+=I+8388608>>126-M}return A.writeUInt16BE(S),!0},a.parseHalf=function(A){const k=128&A[0]?-1:1,E=(124&A[0])>>2,y=(3&A[0])<<8|A[1];return E?E===31?k*(y?NaN:1/0):k*2**(E-25)*(1024+y):5960464477539063e-23*k*y},a.parseCBORfloat=function(A){switch(A.length){case 2:return a.parseHalf(A);case 4:return A.readFloatBE(0);case 8:return A.readDoubleBE(0);default:throw new Error(`Invalid float size: ${A.length}`)}},a.hex=function(A){return h.from(A.replace(/^0x/,""),"hex")},a.bin=function(A){let k=0,E=(A=A.replace(/\s/g,"")).length%8||8;const y=[];for(;E<=A.length;)y.push(parseInt(A.slice(k,E),2)),k=E,E+=8;return h.from(y)},a.arrayEqual=function(A,k){return A==null&&k==null||A!=null&&k!=null&&A.length===k.length&&A.every((E,y)=>E===k[y])},a.bufferToBigInt=function(A){return BigInt(`0x${A.toString("hex")}`)},a.cborValueToString=function(A,k=-1){switch(typeof A){case"symbol":{switch(A){case w.NULL:return"null";case w.UNDEFINED:return"undefined";case w.BREAK:return"BREAK"}if(A.description)return A.description;const E=A.toString().match(/^Symbol\((?<name>.*)\)/);return E&&E.groups.name?E.groups.name:"Symbol"}case"string":return JSON.stringify(A);case"bigint":return A.toString();case"number":{const E=Object.is(A,-0)?"-0":String(A);return k>0?`${E}_${k}`:E}case"object":{if(!A)return"null";const E=a.bufferishToBuffer(A);if(E){const y=E.toString("hex");return k===-1/0?y:`h'${y}'`}return A&&typeof A[Symbol.for("nodejs.util.inspect.custom")]=="function"?A[Symbol.for("nodejs.util.inspect.custom")]():Array.isArray(A)?"[]":"{}"}}return String(A)},a.guessEncoding=function(A,k){if(typeof A=="string")return new f(A,k??"hex");const E=a.bufferishToBuffer(A);if(E)return new f(E);if((y=A)instanceof c.Readable||["read","on","pipe"].every(S=>typeof y[S]=="function"))return A;var y;throw new Error("Unknown input type")};const R={"=":"","+":"-","/":"_"};a.base64url=function(A){return a.bufferishToBuffer(A).toString("base64").replace(/[=+/]/g,k=>R[k])},a.base64=function(A){return a.bufferishToBuffer(A).toString("base64")},a.isBigEndian=function(){const A=new Uint8Array(4);return!((new Uint32Array(A.buffer)[0]=1)&A[0])}},7382:(o,a,l)=>{const{ObjectSetPrototypeOf:h,Symbol:f}=l(4134);o.exports=p;const{ERR_METHOD_NOT_IMPLEMENTED:c}=l(6371).codes,g=l(3370),{getHighWaterMark:m}=l(5291);h(p.prototype,g.prototype),h(p,g);const u=f("kCallback");function p(R){if(!(this instanceof p))return new p(R);const A=R?m(this,R,"readableHighWaterMark",!0):null;A===0&&(R={...R,highWaterMark:null,readableHighWaterMark:A,writableHighWaterMark:R.writableHighWaterMark||0}),g.call(this,R),this._readableState.sync=!1,this[u]=null,R&&(typeof R.transform=="function"&&(this._transform=R.transform),typeof R.flush=="function"&&(this._flush=R.flush)),this.on("prefinish",_)}function w(R){typeof this._flush!="function"||this.destroyed?(this.push(null),R&&R()):this._flush((A,k)=>{A?R?R(A):this.destroy(A):(k!=null&&this.push(k),this.push(null),R&&R())})}function _(){this._final!==w&&w.call(this)}p.prototype._final=w,p.prototype._transform=function(R,A,k){throw new c("_transform()")},p.prototype._write=function(R,A,k){const E=this._readableState,y=this._writableState,S=E.length;this._transform(R,A,(M,I)=>{M?k(M):(I!=null&&this.push(I),y.ended||S===E.length||E.length<E.highWaterMark?k():this[u]=k)})},p.prototype._read=function(){if(this[u]){const R=this[u];this[u]=null,R()}}},7526:(o,a)=>{a.byteLength=function(w){var _=m(w),R=_[0],A=_[1];return 3*(R+A)/4-A},a.toByteArray=function(w){var _,R,A=m(w),k=A[0],E=A[1],y=new f(function(I,q,z){return 3*(q+z)/4-z}(0,k,E)),S=0,M=E>0?k-4:k;for(R=0;R<M;R+=4)_=h[w.charCodeAt(R)]<<18|h[w.charCodeAt(R+1)]<<12|h[w.charCodeAt(R+2)]<<6|h[w.charCodeAt(R+3)],y[S++]=_>>16&255,y[S++]=_>>8&255,y[S++]=255&_;return E===2&&(_=h[w.charCodeAt(R)]<<2|h[w.charCodeAt(R+1)]>>4,y[S++]=255&_),E===1&&(_=h[w.charCodeAt(R)]<<10|h[w.charCodeAt(R+1)]<<4|h[w.charCodeAt(R+2)]>>2,y[S++]=_>>8&255,y[S++]=255&_),y},a.fromByteArray=function(w){for(var _,R=w.length,A=R%3,k=[],E=16383,y=0,S=R-A;y<S;y+=E)k.push(p(w,y,y+E>S?S:y+E));return A===1?(_=w[R-1],k.push(l[_>>2]+l[_<<4&63]+"==")):A===2&&(_=(w[R-2]<<8)+w[R-1],k.push(l[_>>10]+l[_>>4&63]+l[_<<2&63]+"=")),k.join("")};for(var l=[],h=[],f=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0;g<64;++g)l[g]=c[g],h[c.charCodeAt(g)]=g;function m(w){var _=w.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=w.indexOf("=");return R===-1&&(R=_),[R,R===_?0:4-R%4]}function u(w){return l[w>>18&63]+l[w>>12&63]+l[w>>6&63]+l[63&w]}function p(w,_,R){for(var A,k=[],E=_;E<R;E+=3)A=(w[E]<<16&16711680)+(w[E+1]<<8&65280)+(255&w[E+2]),k.push(u(A));return k.join("")}h[45]=62,h[95]=63},7576:(o,a,l)=>{const h=l(5606),{ArrayPrototypeIndexOf:f,NumberIsInteger:c,NumberIsNaN:g,NumberParseInt:m,ObjectDefineProperties:u,ObjectKeys:p,ObjectSetPrototypeOf:w,Promise:_,SafeSet:R,SymbolAsyncDispose:A,SymbolAsyncIterator:k,Symbol:E}=l(4134);o.exports=et,et.ReadableState=rt;const{EventEmitter:y}=l(7007),{Stream:S,prependListener:M}=l(4259),{Buffer:I}=l(8287),{addAbortSignal:q}=l(4147),z=l(6238);let N=l(7760).debuglog("stream",B=>{N=B});const J=l(345),P=l(5896),{getHighWaterMark:W,getDefaultHighWaterMark:C}=l(5291),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:H,ERR_METHOD_NOT_IMPLEMENTED:G,ERR_OUT_OF_RANGE:lt,ERR_STREAM_PUSH_AFTER_EOF:T,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:Z}=l(6371),{validateObject:j}=l(277),X=E("kPaused"),{StringDecoder:at}=l(3141),tt=l(6532);w(et.prototype,S.prototype),w(et,S);const st=()=>{},{errorOrDestroy:Q}=P,ft=1,ot=16,At=32,yt=2048,St=4096;function F(B){return{enumerable:!1,get(){return(this.state&B)!==0},set(O){O?this.state|=B:this.state&=~B}}}function rt(B,O,pt){typeof pt!="boolean"&&(pt=O instanceof l(3370)),this.state=yt|St|ot|At,B&&B.objectMode&&(this.state|=ft),pt&&B&&B.readableObjectMode&&(this.state|=ft),this.highWaterMark=B?W(this,B,"readableHighWaterMark",pt):C(!1),this.buffer=new J,this.length=0,this.pipes=[],this.flowing=null,this[X]=null,B&&B.emitClose===!1&&(this.state&=~yt),B&&B.autoDestroy===!1&&(this.state&=~St),this.errored=null,this.defaultEncoding=B&&B.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,B&&B.encoding&&(this.decoder=new at(B.encoding),this.encoding=B.encoding)}function et(B){if(!(this instanceof et))return new et(B);const O=this instanceof l(3370);this._readableState=new rt(B,this,O),B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.construct=="function"&&(this._construct=B.construct),B.signal&&!O&&q(B.signal,this)),S.call(this,B),P.construct(this,()=>{this._readableState.needReadable&&dt(this,this._readableState)})}function mt(B,O,pt,ct){N("readableAddChunk",O);const xt=B._readableState;let Rt;if(!(xt.state&ft)&&(typeof O=="string"?(pt=pt||xt.defaultEncoding,xt.encoding!==pt&&(ct&&xt.encoding?O=I.from(O,pt).toString(xt.encoding):(O=I.from(O,pt),pt=""))):O instanceof I?pt="":S._isUint8Array(O)?(O=S._uint8ArrayToBuffer(O),pt=""):O!=null&&(Rt=new H("chunk",["string","Buffer","Uint8Array"],O))),Rt)Q(B,Rt);else if(O===null)xt.state&=-9,function(ee,Yt){if(N("onEofChunk"),!Yt.ended){if(Yt.decoder){const Ke=Yt.decoder.end();Ke&&Ke.length&&(Yt.buffer.push(Ke),Yt.length+=Yt.objectMode?1:Ke.length)}Yt.ended=!0,Yt.sync?Y(ee):(Yt.needReadable=!1,Yt.emittedReadable=!0,ht(ee))}}(B,xt);else if(xt.state&ft||O&&O.length>0)if(ct)if(4&xt.state)Q(B,new U);else{if(xt.destroyed||xt.errored)return!1;V(B,xt,O,!0)}else if(xt.ended)Q(B,new T);else{if(xt.destroyed||xt.errored)return!1;xt.state&=-9,xt.decoder&&!pt?(O=xt.decoder.write(O),xt.objectMode||O.length!==0?V(B,xt,O,!1):dt(B,xt)):V(B,xt,O,!1)}else ct||(xt.state&=-9,dt(B,xt));return!xt.ended&&(xt.length<xt.highWaterMark||xt.length===0)}function V(B,O,pt,ct){O.flowing&&O.length===0&&!O.sync&&B.listenerCount("data")>0?(65536&O.state?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,B.emit("data",pt)):(O.length+=O.objectMode?1:pt.length,ct?O.buffer.unshift(pt):O.buffer.push(pt),64&O.state&&Y(B)),dt(B,O)}function it(B,O){return B<=0||O.length===0&&O.ended?0:O.state&ft?1:g(B)?O.flowing&&O.length?O.buffer.first().length:O.length:B<=O.length?B:O.ended?O.length:0}function Y(B){const O=B._readableState;N("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(N("emitReadable",O.flowing),O.emittedReadable=!0,h.nextTick(ht,B))}function ht(B){const O=B._readableState;N("emitReadable_",O.destroyed,O.length,O.ended),O.destroyed||O.errored||!O.length&&!O.ended||(B.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,D(B)}function dt(B,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,h.nextTick(d,B,O))}function d(B,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const pt=O.length;if(N("maybeReadMore read 0"),B.read(0),pt===O.length)break}O.readingMore=!1}function b(B){const O=B._readableState;O.readableListening=B.listenerCount("readable")>0,O.resumeScheduled&&O[X]===!1?O.flowing=!0:B.listenerCount("data")>0?B.resume():O.readableListening||(O.flowing=null)}function x(B){N("readable nexttick read 0"),B.read(0)}function L(B,O){N("resume",O.reading),O.reading||B.read(0),O.resumeScheduled=!1,B.emit("resume"),D(B),O.flowing&&!O.reading&&B.read(0)}function D(B){const O=B._readableState;for(N("flow",O.flowing);O.flowing&&B.read()!==null;);}function $(B,O){typeof B.read!="function"&&(B=et.wrap(B,{objectMode:!0}));const pt=async function*(ct,xt){let Rt,ee=st;function Yt(ye){this===ct?(ee(),ee=st):ee=ye}ct.on("readable",Yt);const Ke=z(ct,{writable:!1},ye=>{Rt=ye?K(Rt,ye):null,ee(),ee=st});try{for(;;){const ye=ct.destroyed?null:ct.read();if(ye!==null)yield ye;else{if(Rt)throw Rt;if(Rt===null)return;await new _(Yt)}}}catch(ye){throw Rt=K(Rt,ye),Rt}finally{!Rt&&xt?.destroyOnReturn===!1||Rt!==void 0&&!ct._readableState.autoDestroy?(ct.off("readable",Yt),Ke()):P.destroyer(ct,null)}}(B,O);return pt.stream=B,pt}function nt(B,O){if(O.length===0)return null;let pt;return O.objectMode?pt=O.buffer.shift():!B||B>=O.length?(pt=O.decoder?O.buffer.join(""):O.buffer.length===1?O.buffer.first():O.buffer.concat(O.length),O.buffer.clear()):pt=O.buffer.consume(B,O.decoder),pt}function vt(B){const O=B._readableState;N("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,h.nextTick(_t,O,B))}function _t(B,O){if(N("endReadableNT",B.endEmitted,B.length),!B.errored&&!B.closeEmitted&&!B.endEmitted&&B.length===0){if(B.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)h.nextTick(Ct,O);else if(B.autoDestroy){const pt=O._writableState;(!pt||pt.autoDestroy&&(pt.finished||pt.writable===!1))&&O.destroy()}}}function Ct(B){B.writable&&!B.writableEnded&&!B.destroyed&&B.end()}let kt;function Dt(){return kt===void 0&&(kt={}),kt}u(rt.prototype,{objectMode:F(ft),ended:F(2),endEmitted:F(4),reading:F(8),constructed:F(ot),sync:F(At),needReadable:F(64),emittedReadable:F(128),readableListening:F(256),resumeScheduled:F(512),errorEmitted:F(1024),emitClose:F(yt),autoDestroy:F(St),destroyed:F(8192),closed:F(16384),closeEmitted:F(32768),multiAwaitDrain:F(65536),readingMore:F(131072),dataEmitted:F(262144)}),et.prototype.destroy=P.destroy,et.prototype._undestroy=P.undestroy,et.prototype._destroy=function(B,O){O(B)},et.prototype[y.captureRejectionSymbol]=function(B){this.destroy(B)},et.prototype[A]=function(){let B;return this.destroyed||(B=this.readableEnded?null:new Z,this.destroy(B)),new _((O,pt)=>z(this,ct=>ct&&ct!==B?pt(ct):O(null)))},et.prototype.push=function(B,O){return mt(this,B,O,!1)},et.prototype.unshift=function(B,O){return mt(this,B,O,!0)},et.prototype.isPaused=function(){const B=this._readableState;return B[X]===!0||B.flowing===!1},et.prototype.setEncoding=function(B){const O=new at(B);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const pt=this._readableState.buffer;let ct="";for(const xt of pt)ct+=O.write(xt);return pt.clear(),ct!==""&&pt.push(ct),this._readableState.length=ct.length,this},et.prototype.read=function(B){N("read",B),B===void 0?B=NaN:c(B)||(B=m(B,10));const O=this._readableState,pt=B;if(B>O.highWaterMark&&(O.highWaterMark=function(Rt){if(Rt>1073741824)throw new lt("size","<= 1GiB",Rt);return Rt--,Rt|=Rt>>>1,Rt|=Rt>>>2,Rt|=Rt>>>4,Rt|=Rt>>>8,Rt|=Rt>>>16,++Rt}(B)),B!==0&&(O.state&=-129),B===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return N("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?vt(this):Y(this),null;if((B=it(B,O))===0&&O.ended)return O.length===0&&vt(this),null;let ct,xt=!!(64&O.state);if(N("need readable",xt),(O.length===0||O.length-B<O.highWaterMark)&&(xt=!0,N("length less than watermark",xt)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)xt=!1,N("reading, ended or constructing",xt);else if(xt){N("do read"),O.state|=8|At,O.length===0&&(O.state|=64);try{this._read(O.highWaterMark)}catch(Rt){Q(this,Rt)}O.state&=~At,O.reading||(B=it(pt,O))}return ct=B>0?nt(B,O):null,ct===null?(O.needReadable=O.length<=O.highWaterMark,B=0):(O.length-=B,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),pt!==B&&O.ended&&vt(this)),ct===null||O.errorEmitted||O.closeEmitted||(O.dataEmitted=!0,this.emit("data",ct)),ct},et.prototype._read=function(B){throw new G("_read()")},et.prototype.pipe=function(B,O){const pt=this,ct=this._readableState;ct.pipes.length===1&&(ct.multiAwaitDrain||(ct.multiAwaitDrain=!0,ct.awaitDrainWriters=new R(ct.awaitDrainWriters?[ct.awaitDrainWriters]:[]))),ct.pipes.push(B),N("pipe count=%d opts=%j",ct.pipes.length,O);const xt=O&&O.end===!1||B===h.stdout||B===h.stderr?en:Rt;function Rt(){N("onend"),B.end()}let ee;ct.endEmitted?h.nextTick(xt):pt.once("end",xt),B.on("unpipe",function ke(Be,_e){N("onunpipe"),Be===pt&&_e&&_e.hasUnpiped===!1&&(_e.hasUnpiped=!0,N("cleanup"),B.removeListener("close",es),B.removeListener("finish",is),ee&&B.removeListener("drain",ee),B.removeListener("error",ts),B.removeListener("unpipe",ke),pt.removeListener("end",Rt),pt.removeListener("end",en),pt.removeListener("data",ye),Yt=!0,ee&&ct.awaitDrainWriters&&(!B._writableState||B._writableState.needDrain)&&ee())});let Yt=!1;function Ke(){Yt||(ct.pipes.length===1&&ct.pipes[0]===B?(N("false write response, pause",0),ct.awaitDrainWriters=B,ct.multiAwaitDrain=!1):ct.pipes.length>1&&ct.pipes.includes(B)&&(N("false write response, pause",ct.awaitDrainWriters.size),ct.awaitDrainWriters.add(B)),pt.pause()),ee||(ee=function(ke,Be){return function(){const _e=ke._readableState;_e.awaitDrainWriters===Be?(N("pipeOnDrain",1),_e.awaitDrainWriters=null):_e.multiAwaitDrain&&(N("pipeOnDrain",_e.awaitDrainWriters.size),_e.awaitDrainWriters.delete(Be)),_e.awaitDrainWriters&&_e.awaitDrainWriters.size!==0||!ke.listenerCount("data")||ke.resume()}}(pt,B),B.on("drain",ee))}function ye(ke){N("ondata");const Be=B.write(ke);N("dest.write",Be),Be===!1&&Ke()}function ts(ke){if(N("onerror",ke),en(),B.removeListener("error",ts),B.listenerCount("error")===0){const Be=B._writableState||B._readableState;Be&&!Be.errorEmitted?Q(B,ke):B.emit("error",ke)}}function es(){B.removeListener("finish",is),en()}function is(){N("onfinish"),B.removeListener("close",es),en()}function en(){N("unpipe"),pt.unpipe(B)}return pt.on("data",ye),M(B,"error",ts),B.once("close",es),B.once("finish",is),B.emit("pipe",pt),B.writableNeedDrain===!0?Ke():ct.flowing||(N("pipe resume"),pt.resume()),B},et.prototype.unpipe=function(B){const O=this._readableState;if(O.pipes.length===0)return this;if(!B){const ct=O.pipes;O.pipes=[],this.pause();for(let xt=0;xt<ct.length;xt++)ct[xt].emit("unpipe",this,{hasUnpiped:!1});return this}const pt=f(O.pipes,B);return pt===-1||(O.pipes.splice(pt,1),O.pipes.length===0&&this.pause(),B.emit("unpipe",this,{hasUnpiped:!1})),this},et.prototype.on=function(B,O){const pt=S.prototype.on.call(this,B,O),ct=this._readableState;return B==="data"?(ct.readableListening=this.listenerCount("readable")>0,ct.flowing!==!1&&this.resume()):B==="readable"&&(ct.endEmitted||ct.readableListening||(ct.readableListening=ct.needReadable=!0,ct.flowing=!1,ct.emittedReadable=!1,N("on readable",ct.length,ct.reading),ct.length?Y(this):ct.reading||h.nextTick(x,this))),pt},et.prototype.addListener=et.prototype.on,et.prototype.removeListener=function(B,O){const pt=S.prototype.removeListener.call(this,B,O);return B==="readable"&&h.nextTick(b,this),pt},et.prototype.off=et.prototype.removeListener,et.prototype.removeAllListeners=function(B){const O=S.prototype.removeAllListeners.apply(this,arguments);return B!=="readable"&&B!==void 0||h.nextTick(b,this),O},et.prototype.resume=function(){const B=this._readableState;return B.flowing||(N("resume"),B.flowing=!B.readableListening,function(O,pt){pt.resumeScheduled||(pt.resumeScheduled=!0,h.nextTick(L,O,pt))}(this,B)),B[X]=!1,this},et.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[X]=!0,this},et.prototype.wrap=function(B){let O=!1;B.on("data",ct=>{!this.push(ct)&&B.pause&&(O=!0,B.pause())}),B.on("end",()=>{this.push(null)}),B.on("error",ct=>{Q(this,ct)}),B.on("close",()=>{this.destroy()}),B.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&B.resume&&(O=!1,B.resume())};const pt=p(B);for(let ct=1;ct<pt.length;ct++){const xt=pt[ct];this[xt]===void 0&&typeof B[xt]=="function"&&(this[xt]=B[xt].bind(B))}return this},et.prototype[k]=function(){return $(this)},et.prototype.iterator=function(B){return B!==void 0&&j(B,"options"),$(this,B)},u(et.prototype,{readable:{__proto__:null,get(){const B=this._readableState;return!(!B||B.readable===!1||B.destroyed||B.errorEmitted||B.endEmitted)},set(B){this._readableState&&(this._readableState.readable=!!B)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._readableState.readable===!1||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(B){this._readableState&&(this._readableState.destroyed=B)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),u(rt.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[X]!==!1},set(B){this[X]=!!B}}}),et._fromList=nt,et.from=function(B,O){return tt(et,B,O)},et.fromWeb=function(B,O){return Dt().newStreamReadableFromReadableStream(B,O)},et.toWeb=function(B,O){return Dt().newReadableStreamFromStreamReadable(B,O)},et.wrap=function(B,O){var pt,ct;return new et({objectMode:(pt=(ct=B.readableObjectMode)!==null&&ct!==void 0?ct:B.objectMode)===null||pt===void 0||pt,...O,destroy(xt,Rt){P.destroyer(B,xt),Rt(xt)}}).wrap(B)}},7758:(o,a,l)=>{const h=l(5606),{ArrayIsArray:f,Promise:c,SymbolAsyncIterator:g,SymbolDispose:m}=l(4134),u=l(6238),{once:p}=l(7760),w=l(5896),_=l(3370),{aggregateTwoErrors:R,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:k,ERR_MISSING_ARGS:E,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:S},AbortError:M}=l(6371),{validateFunction:I,validateAbortSignal:q}=l(277),{isIterable:z,isReadable:N,isReadableNodeStream:J,isNodeStream:P,isTransformStream:W,isWebStream:C,isReadableStream:K,isReadableFinished:H}=l(6115),G=globalThis.AbortController||l(5568).AbortController;let lt,T,U;function Z(Q,ft,ot){let At=!1;return Q.on("close",()=>{At=!0}),{destroy:yt=>{At||(At=!0,w.destroyer(Q,yt||new y("pipe")))},cleanup:u(Q,{readable:ft,writable:ot},yt=>{At=!yt})}}function j(Q){if(z(Q))return Q;if(J(Q))return async function*(ft){T||(T=l(7576)),yield*T.prototype[g].call(ft)}(Q);throw new A("val",["Readable","Iterable","AsyncIterable"],Q)}async function X(Q,ft,ot,{end:At}){let yt,St=null;const F=mt=>{if(mt&&(yt=mt),St){const V=St;St=null,V()}},rt=()=>new c((mt,V)=>{yt?V(yt):St=()=>{yt?V(yt):mt()}});ft.on("drain",F);const et=u(ft,{readable:!1},F);try{ft.writableNeedDrain&&await rt();for await(const mt of Q)ft.write(mt)||await rt();At&&(ft.end(),await rt()),ot()}catch(mt){ot(yt!==mt?R(yt,mt):mt)}finally{et(),ft.off("drain",F)}}async function at(Q,ft,ot,{end:At}){W(ft)&&(ft=ft.writable);const yt=ft.getWriter();try{for await(const St of Q)await yt.ready,yt.write(St).catch(()=>{});await yt.ready,At&&await yt.close(),ot()}catch(St){try{await yt.abort(St),ot(St)}catch(F){ot(F)}}}function tt(Q,ft,ot){if(Q.length===1&&f(Q[0])&&(Q=Q[0]),Q.length<2)throw new E("streams");const At=new G,yt=At.signal,St=ot?.signal,F=[];function rt(){d(new M)}let et,mt,V;q(St,"options.signal"),U=U||l(7760).addAbortListener,St&&(et=U(St,rt));const it=[];let Y,ht=0;function dt(L){d(L,--ht===0)}function d(L,D){var $;if(!L||mt&&mt.code!=="ERR_STREAM_PREMATURE_CLOSE"||(mt=L),mt||D){for(;it.length;)it.shift()(mt);($=et)===null||$===void 0||$[m](),At.abort(),D&&(mt||F.forEach(nt=>nt()),h.nextTick(ft,mt,V))}}for(let L=0;L<Q.length;L++){const D=Q[L],$=L<Q.length-1,nt=L>0,vt=$||ot?.end!==!1,_t=L===Q.length-1;if(P(D)){let Ct=function(kt){kt&&kt.name!=="AbortError"&&kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&dt(kt)};if(vt){const{destroy:kt,cleanup:Dt}=Z(D,$,nt);it.push(kt),N(D)&&_t&&F.push(Dt)}D.on("error",Ct),N(D)&&_t&&F.push(()=>{D.removeListener("error",Ct)})}if(L===0)if(typeof D=="function"){if(Y=D({signal:yt}),!z(Y))throw new k("Iterable, AsyncIterable or Stream","source",Y)}else Y=z(D)||J(D)||W(D)?D:_.from(D);else if(typeof D=="function"){var b;if(Y=W(Y)?j((b=Y)===null||b===void 0?void 0:b.readable):j(Y),Y=D(Y,{signal:yt}),$){if(!z(Y,!0))throw new k("AsyncIterable",`transform[${L-1}]`,Y)}else{var x;lt||(lt=l(6524));const Ct=new lt({objectMode:!0}),kt=(x=Y)===null||x===void 0?void 0:x.then;if(typeof kt=="function")ht++,kt.call(Y,O=>{V=O,O!=null&&Ct.write(O),vt&&Ct.end(),h.nextTick(dt)},O=>{Ct.destroy(O),h.nextTick(dt,O)});else if(z(Y,!0))ht++,X(Y,Ct,dt,{end:vt});else{if(!K(Y)&&!W(Y))throw new k("AsyncIterable or Promise","destination",Y);{const O=Y.readable||Y;ht++,X(O,Ct,dt,{end:vt})}}Y=Ct;const{destroy:Dt,cleanup:B}=Z(Y,!1,!0);it.push(Dt),_t&&F.push(B)}}else if(P(D)){if(J(Y)){ht+=2;const Ct=st(Y,D,dt,{end:vt});N(D)&&_t&&F.push(Ct)}else if(W(Y)||K(Y)){const Ct=Y.readable||Y;ht++,X(Ct,D,dt,{end:vt})}else{if(!z(Y))throw new A("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);ht++,X(Y,D,dt,{end:vt})}Y=D}else if(C(D)){if(J(Y))ht++,at(j(Y),D,dt,{end:vt});else if(K(Y)||z(Y))ht++,at(Y,D,dt,{end:vt});else{if(!W(Y))throw new A("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Y);ht++,at(Y.readable,D,dt,{end:vt})}Y=D}else Y=_.from(D)}return(yt!=null&&yt.aborted||St!=null&&St.aborted)&&h.nextTick(rt),Y}function st(Q,ft,ot,{end:At}){let yt=!1;if(ft.on("close",()=>{yt||ot(new S)}),Q.pipe(ft,{end:!1}),At){let St=function(){yt=!0,ft.end()};H(Q)?h.nextTick(St):Q.once("end",St)}else ot();return u(Q,{readable:!0,writable:!1},St=>{const F=Q._readableState;St&&St.code==="ERR_STREAM_PREMATURE_CLOSE"&&F&&F.ended&&!F.errored&&!F.errorEmitted?Q.once("end",ot).once("error",ot):ot(St)}),u(ft,{readable:!1,writable:!0},ot)}o.exports={pipelineImpl:tt,pipeline:function(...Q){return tt(Q,p(function(ft){return I(ft[ft.length-1],"streams[stream.length - 1]"),ft.pop()}(Q)))}}},7760:(o,a,l)=>{const h=l(8287),{format:f,inspect:c}=l(9231),{codes:{ERR_INVALID_ARG_TYPE:g}}=l(6371),{kResistStopPropagation:m,AggregateError:u,SymbolDispose:p}=l(4134),w=globalThis.AbortSignal||l(5568).AbortSignal,_=globalThis.AbortController||l(5568).AbortController,R=Object.getPrototypeOf(async function(){}).constructor,A=globalThis.Blob||h.Blob,k=A!==void 0?function(y){return y instanceof A}:function(y){return!1},E=(y,S)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new g(S,"AbortSignal",y)};o.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(y){let S=!1;return function(...M){S||(S=!0,y.apply(this,M))}},createDeferredPromise:function(){let y,S;return{promise:new Promise((M,I)=>{y=M,S=I}),resolve:y,reject:S}},promisify:y=>new Promise((S,M)=>{y((I,...q)=>I?M(I):S(...q))}),debuglog:()=>function(){},format:f,inspect:c,types:{isAsyncFunction:y=>y instanceof R,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:k,deprecate:(y,S)=>y,addAbortListener:l(7007).addAbortListener||function(y,S){if(y===void 0)throw new g("signal","AbortSignal",y);let M;return E(y,"signal"),(I=>{if(typeof I!="function")throw new g("listener","Function",I)})(S),y.aborted?queueMicrotask(()=>S()):(y.addEventListener("abort",S,{__proto__:null,once:!0,[m]:!0}),M=()=>{y.removeEventListener("abort",S)}),{__proto__:null,[p](){var I;(I=M)===null||I===void 0||I()}}},AbortSignalAny:w.any||function(y){if(y.length===1)return y[0];const S=new _,M=()=>S.abort();return y.forEach(I=>{E(I,"signals"),I.addEventListener("abort",M,{once:!0})}),S.signal.addEventListener("abort",()=>{y.forEach(I=>I.removeEventListener("abort",M))},{once:!0}),S.signal}},o.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7830:(o,a,l)=>{const{pipeline:h}=l(7758),f=l(3370),{destroyer:c}=l(5896),{isNodeStream:g,isReadable:m,isWritable:u,isWebStream:p,isTransformStream:w,isWritableStream:_,isReadableStream:R}=l(6115),{AbortError:A,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:E}}=l(6371),y=l(6238);o.exports=function(...S){if(S.length===0)throw new E("streams");if(S.length===1)return f.from(S[0]);const M=[...S];if(typeof S[0]=="function"&&(S[0]=f.from(S[0])),typeof S[S.length-1]=="function"){const H=S.length-1;S[H]=f.from(S[H])}for(let H=0;H<S.length;++H)if(g(S[H])||p(S[H])){if(H<S.length-1&&!(m(S[H])||R(S[H])||w(S[H])))throw new k(`streams[${H}]`,M[H],"must be readable");if(H>0&&!(u(S[H])||_(S[H])||w(S[H])))throw new k(`streams[${H}]`,M[H],"must be writable")}let I,q,z,N,J;const P=S[0],W=h(S,function(H){const G=N;N=null,G?G(H):H?J.destroy(H):K||C||J.destroy()}),C=!!(u(P)||_(P)||w(P)),K=!!(m(W)||R(W)||w(W));if(J=new f({writableObjectMode:!(P==null||!P.writableObjectMode),readableObjectMode:!(W==null||!W.readableObjectMode),writable:C,readable:K}),C){if(g(P))J._write=function(G,lt,T){P.write(G,lt)?T():I=T},J._final=function(G){P.end(),q=G},P.on("drain",function(){if(I){const G=I;I=null,G()}});else if(p(P)){const G=(w(P)?P.writable:P).getWriter();J._write=async function(lt,T,U){try{await G.ready,G.write(lt).catch(()=>{}),U()}catch(Z){U(Z)}},J._final=async function(lt){try{await G.ready,G.close().catch(()=>{}),q=lt}catch(T){lt(T)}}}const H=w(W)?W.readable:W;y(H,()=>{if(q){const G=q;q=null,G()}})}if(K){if(g(W))W.on("readable",function(){if(z){const H=z;z=null,H()}}),W.on("end",function(){J.push(null)}),J._read=function(){for(;;){const H=W.read();if(H===null)return void(z=J._read);if(!J.push(H))return}};else if(p(W)){const H=(w(W)?W.readable:W).getReader();J._read=async function(){for(;;)try{const{value:G,done:lt}=await H.read();if(!J.push(G))return;if(lt)return void J.push(null)}catch{return}}}}return J._destroy=function(H,G){H||N===null||(H=new A),z=null,I=null,q=null,N===null?G(H):(N=G,g(W)&&c(W,H))},J}},8287:(o,a,l)=>{const h=l(7526),f=l(251),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=u,a.SlowBuffer=function(d){return+d!=d&&(d=0),u.alloc(+d)},a.INSPECT_MAX_BYTES=50;const g=2147483647;function m(d){if(d>g)throw new RangeError('The value "'+d+'" is invalid for option "size"');const b=new Uint8Array(d);return Object.setPrototypeOf(b,u.prototype),b}function u(d,b,x){if(typeof d=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(d)}return p(d,b,x)}function p(d,b,x){if(typeof d=="string")return function($,nt){if(typeof nt=="string"&&nt!==""||(nt="utf8"),!u.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);const vt=0|E($,nt);let _t=m(vt);const Ct=_t.write($,nt);return Ct!==vt&&(_t=_t.slice(0,Ct)),_t}(d,b);if(ArrayBuffer.isView(d))return function($){if(V($,Uint8Array)){const nt=new Uint8Array($);return A(nt.buffer,nt.byteOffset,nt.byteLength)}return R($)}(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(V(d,ArrayBuffer)||d&&V(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(d,SharedArrayBuffer)||d&&V(d.buffer,SharedArrayBuffer)))return A(d,b,x);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=d.valueOf&&d.valueOf();if(L!=null&&L!==d)return u.from(L,b,x);const D=function($){if(u.isBuffer($)){const nt=0|k($.length),vt=m(nt);return vt.length===0||$.copy(vt,0,0,nt),vt}return $.length!==void 0?typeof $.length!="number"||it($.length)?m(0):R($):$.type==="Buffer"&&Array.isArray($.data)?R($.data):void 0}(d);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return u.from(d[Symbol.toPrimitive]("string"),b,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}function w(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function _(d){return w(d),m(d<0?0:0|k(d))}function R(d){const b=d.length<0?0:0|k(d.length),x=m(b);for(let L=0;L<b;L+=1)x[L]=255&d[L];return x}function A(d,b,x){if(b<0||d.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<b+(x||0))throw new RangeError('"length" is outside of buffer bounds');let L;return L=b===void 0&&x===void 0?new Uint8Array(d):x===void 0?new Uint8Array(d,b):new Uint8Array(d,b,x),Object.setPrototypeOf(L,u.prototype),L}function k(d){if(d>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|d}function E(d,b){if(u.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||V(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const x=d.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&x===0)return 0;let D=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return rt(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return et(d).length;default:if(D)return L?-1:rt(d).length;b=(""+b).toLowerCase(),D=!0}}function y(d,b,x){let L=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0)<=(b>>>=0))return"";for(d||(d="utf8");;)switch(d){case"hex":return lt(this,b,x);case"utf8":case"utf-8":return C(this,b,x);case"ascii":return H(this,b,x);case"latin1":case"binary":return G(this,b,x);case"base64":return W(this,b,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,b,x);default:if(L)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),L=!0}}function S(d,b,x){const L=d[b];d[b]=d[x],d[x]=L}function M(d,b,x,L,D){if(d.length===0)return-1;if(typeof x=="string"?(L=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),it(x=+x)&&(x=D?0:d.length-1),x<0&&(x=d.length+x),x>=d.length){if(D)return-1;x=d.length-1}else if(x<0){if(!D)return-1;x=0}if(typeof b=="string"&&(b=u.from(b,L)),u.isBuffer(b))return b.length===0?-1:I(d,b,x,L,D);if(typeof b=="number")return b&=255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(d,b,x):Uint8Array.prototype.lastIndexOf.call(d,b,x):I(d,[b],x,L,D);throw new TypeError("val must be string, number or Buffer")}function I(d,b,x,L,D){let $,nt=1,vt=d.length,_t=b.length;if(L!==void 0&&((L=String(L).toLowerCase())==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(d.length<2||b.length<2)return-1;nt=2,vt/=2,_t/=2,x/=2}function Ct(kt,Dt){return nt===1?kt[Dt]:kt.readUInt16BE(Dt*nt)}if(D){let kt=-1;for($=x;$<vt;$++)if(Ct(d,$)===Ct(b,kt===-1?0:$-kt)){if(kt===-1&&(kt=$),$-kt+1===_t)return kt*nt}else kt!==-1&&($-=$-kt),kt=-1}else for(x+_t>vt&&(x=vt-_t),$=x;$>=0;$--){let kt=!0;for(let Dt=0;Dt<_t;Dt++)if(Ct(d,$+Dt)!==Ct(b,Dt)){kt=!1;break}if(kt)return $}return-1}function q(d,b,x,L){x=Number(x)||0;const D=d.length-x;L?(L=Number(L))>D&&(L=D):L=D;const $=b.length;let nt;for(L>$/2&&(L=$/2),nt=0;nt<L;++nt){const vt=parseInt(b.substr(2*nt,2),16);if(it(vt))return nt;d[x+nt]=vt}return nt}function z(d,b,x,L){return mt(rt(b,d.length-x),d,x,L)}function N(d,b,x,L){return mt(function(D){const $=[];for(let nt=0;nt<D.length;++nt)$.push(255&D.charCodeAt(nt));return $}(b),d,x,L)}function J(d,b,x,L){return mt(et(b),d,x,L)}function P(d,b,x,L){return mt(function(D,$){let nt,vt,_t;const Ct=[];for(let kt=0;kt<D.length&&!(($-=2)<0);++kt)nt=D.charCodeAt(kt),vt=nt>>8,_t=nt%256,Ct.push(_t),Ct.push(vt);return Ct}(b,d.length-x),d,x,L)}function W(d,b,x){return b===0&&x===d.length?h.fromByteArray(d):h.fromByteArray(d.slice(b,x))}function C(d,b,x){x=Math.min(d.length,x);const L=[];let D=b;for(;D<x;){const $=d[D];let nt=null,vt=$>239?4:$>223?3:$>191?2:1;if(D+vt<=x){let _t,Ct,kt,Dt;switch(vt){case 1:$<128&&(nt=$);break;case 2:_t=d[D+1],(192&_t)==128&&(Dt=(31&$)<<6|63&_t,Dt>127&&(nt=Dt));break;case 3:_t=d[D+1],Ct=d[D+2],(192&_t)==128&&(192&Ct)==128&&(Dt=(15&$)<<12|(63&_t)<<6|63&Ct,Dt>2047&&(Dt<55296||Dt>57343)&&(nt=Dt));break;case 4:_t=d[D+1],Ct=d[D+2],kt=d[D+3],(192&_t)==128&&(192&Ct)==128&&(192&kt)==128&&(Dt=(15&$)<<18|(63&_t)<<12|(63&Ct)<<6|63&kt,Dt>65535&&Dt<1114112&&(nt=Dt))}}nt===null?(nt=65533,vt=1):nt>65535&&(nt-=65536,L.push(nt>>>10&1023|55296),nt=56320|1023&nt),L.push(nt),D+=vt}return function($){const nt=$.length;if(nt<=K)return String.fromCharCode.apply(String,$);let vt="",_t=0;for(;_t<nt;)vt+=String.fromCharCode.apply(String,$.slice(_t,_t+=K));return vt}(L)}a.kMaxLength=g,u.TYPED_ARRAY_SUPPORT=function(){try{const d=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(d,b),d.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(d,b,x){return p(d,b,x)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(d,b,x){return function(L,D,$){return w(L),L<=0?m(L):D!==void 0?typeof $=="string"?m(L).fill(D,$):m(L).fill(D):m(L)}(d,b,x)},u.allocUnsafe=function(d){return _(d)},u.allocUnsafeSlow=function(d){return _(d)},u.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==u.prototype},u.compare=function(d,b){if(V(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),V(b,Uint8Array)&&(b=u.from(b,b.offset,b.byteLength)),!u.isBuffer(d)||!u.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===b)return 0;let x=d.length,L=b.length;for(let D=0,$=Math.min(x,L);D<$;++D)if(d[D]!==b[D]){x=d[D],L=b[D];break}return x<L?-1:L<x?1:0},u.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(d,b){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return u.alloc(0);let x;if(b===void 0)for(b=0,x=0;x<d.length;++x)b+=d[x].length;const L=u.allocUnsafe(b);let D=0;for(x=0;x<d.length;++x){let $=d[x];if(V($,Uint8Array))D+$.length>L.length?(u.isBuffer($)||($=u.from($)),$.copy(L,D)):Uint8Array.prototype.set.call(L,$,D);else{if(!u.isBuffer($))throw new TypeError('"list" argument must be an Array of Buffers');$.copy(L,D)}D+=$.length}return L},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<d;b+=2)S(this,b,b+1);return this},u.prototype.swap32=function(){const d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<d;b+=4)S(this,b,b+3),S(this,b+1,b+2);return this},u.prototype.swap64=function(){const d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<d;b+=8)S(this,b,b+7),S(this,b+1,b+6),S(this,b+2,b+5),S(this,b+3,b+4);return this},u.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?C(this,0,d):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(d){if(!u.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||u.compare(this,d)===0},u.prototype.inspect=function(){let d="";const b=a.INSPECT_MAX_BYTES;return d=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(d+=" ... "),"<Buffer "+d+">"},c&&(u.prototype[c]=u.prototype.inspect),u.prototype.compare=function(d,b,x,L,D){if(V(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(b===void 0&&(b=0),x===void 0&&(x=d?d.length:0),L===void 0&&(L=0),D===void 0&&(D=this.length),b<0||x>d.length||L<0||D>this.length)throw new RangeError("out of range index");if(L>=D&&b>=x)return 0;if(L>=D)return-1;if(b>=x)return 1;if(this===d)return 0;let $=(D>>>=0)-(L>>>=0),nt=(x>>>=0)-(b>>>=0);const vt=Math.min($,nt),_t=this.slice(L,D),Ct=d.slice(b,x);for(let kt=0;kt<vt;++kt)if(_t[kt]!==Ct[kt]){$=_t[kt],nt=Ct[kt];break}return $<nt?-1:nt<$?1:0},u.prototype.includes=function(d,b,x){return this.indexOf(d,b,x)!==-1},u.prototype.indexOf=function(d,b,x){return M(this,d,b,x,!0)},u.prototype.lastIndexOf=function(d,b,x){return M(this,d,b,x,!1)},u.prototype.write=function(d,b,x,L){if(b===void 0)L="utf8",x=this.length,b=0;else if(x===void 0&&typeof b=="string")L=b,x=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(x)?(x>>>=0,L===void 0&&(L="utf8")):(L=x,x=void 0)}const D=this.length-b;if((x===void 0||x>D)&&(x=D),d.length>0&&(x<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let $=!1;for(;;)switch(L){case"hex":return q(this,d,b,x);case"utf8":case"utf-8":return z(this,d,b,x);case"ascii":case"latin1":case"binary":return N(this,d,b,x);case"base64":return J(this,d,b,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,d,b,x);default:if($)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),$=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const K=4096;function H(d,b,x){let L="";x=Math.min(d.length,x);for(let D=b;D<x;++D)L+=String.fromCharCode(127&d[D]);return L}function G(d,b,x){let L="";x=Math.min(d.length,x);for(let D=b;D<x;++D)L+=String.fromCharCode(d[D]);return L}function lt(d,b,x){const L=d.length;(!b||b<0)&&(b=0),(!x||x<0||x>L)&&(x=L);let D="";for(let $=b;$<x;++$)D+=Y[d[$]];return D}function T(d,b,x){const L=d.slice(b,x);let D="";for(let $=0;$<L.length-1;$+=2)D+=String.fromCharCode(L[$]+256*L[$+1]);return D}function U(d,b,x){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(d+b>x)throw new RangeError("Trying to access beyond buffer length")}function Z(d,b,x,L,D,$){if(!u.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>D||b<$)throw new RangeError('"value" argument is out of bounds');if(x+L>d.length)throw new RangeError("Index out of range")}function j(d,b,x,L,D){At(b,L,D,d,x,7);let $=Number(b&BigInt(4294967295));d[x++]=$,$>>=8,d[x++]=$,$>>=8,d[x++]=$,$>>=8,d[x++]=$;let nt=Number(b>>BigInt(32)&BigInt(4294967295));return d[x++]=nt,nt>>=8,d[x++]=nt,nt>>=8,d[x++]=nt,nt>>=8,d[x++]=nt,x}function X(d,b,x,L,D){At(b,L,D,d,x,7);let $=Number(b&BigInt(4294967295));d[x+7]=$,$>>=8,d[x+6]=$,$>>=8,d[x+5]=$,$>>=8,d[x+4]=$;let nt=Number(b>>BigInt(32)&BigInt(4294967295));return d[x+3]=nt,nt>>=8,d[x+2]=nt,nt>>=8,d[x+1]=nt,nt>>=8,d[x]=nt,x+8}function at(d,b,x,L,D,$){if(x+L>d.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function tt(d,b,x,L,D){return b=+b,x>>>=0,D||at(d,0,x,4),f.write(d,b,x,L,23,4),x+4}function st(d,b,x,L,D){return b=+b,x>>>=0,D||at(d,0,x,8),f.write(d,b,x,L,52,8),x+8}u.prototype.slice=function(d,b){const x=this.length;(d=~~d)<0?(d+=x)<0&&(d=0):d>x&&(d=x),(b=b===void 0?x:~~b)<0?(b+=x)<0&&(b=0):b>x&&(b=x),b<d&&(b=d);const L=this.subarray(d,b);return Object.setPrototypeOf(L,u.prototype),L},u.prototype.readUintLE=u.prototype.readUIntLE=function(d,b,x){d>>>=0,b>>>=0,x||U(d,b,this.length);let L=this[d],D=1,$=0;for(;++$<b&&(D*=256);)L+=this[d+$]*D;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(d,b,x){d>>>=0,b>>>=0,x||U(d,b,this.length);let L=this[d+--b],D=1;for(;b>0&&(D*=256);)L+=this[d+--b]*D;return L},u.prototype.readUint8=u.prototype.readUInt8=function(d,b){return d>>>=0,b||U(d,1,this.length),this[d]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(d,b){return d>>>=0,b||U(d,2,this.length),this[d]|this[d+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(d,b){return d>>>=0,b||U(d,2,this.length),this[d]<<8|this[d+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(d,b){return d>>>=0,b||U(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(d,b){return d>>>=0,b||U(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},u.prototype.readBigUInt64LE=ht(function(d){yt(d>>>=0,"offset");const b=this[d],x=this[d+7];b!==void 0&&x!==void 0||St(d,this.length-8);const L=b+256*this[++d]+65536*this[++d]+this[++d]*2**24,D=this[++d]+256*this[++d]+65536*this[++d]+x*2**24;return BigInt(L)+(BigInt(D)<<BigInt(32))}),u.prototype.readBigUInt64BE=ht(function(d){yt(d>>>=0,"offset");const b=this[d],x=this[d+7];b!==void 0&&x!==void 0||St(d,this.length-8);const L=b*2**24+65536*this[++d]+256*this[++d]+this[++d],D=this[++d]*2**24+65536*this[++d]+256*this[++d]+x;return(BigInt(L)<<BigInt(32))+BigInt(D)}),u.prototype.readIntLE=function(d,b,x){d>>>=0,b>>>=0,x||U(d,b,this.length);let L=this[d],D=1,$=0;for(;++$<b&&(D*=256);)L+=this[d+$]*D;return D*=128,L>=D&&(L-=Math.pow(2,8*b)),L},u.prototype.readIntBE=function(d,b,x){d>>>=0,b>>>=0,x||U(d,b,this.length);let L=b,D=1,$=this[d+--L];for(;L>0&&(D*=256);)$+=this[d+--L]*D;return D*=128,$>=D&&($-=Math.pow(2,8*b)),$},u.prototype.readInt8=function(d,b){return d>>>=0,b||U(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},u.prototype.readInt16LE=function(d,b){d>>>=0,b||U(d,2,this.length);const x=this[d]|this[d+1]<<8;return 32768&x?4294901760|x:x},u.prototype.readInt16BE=function(d,b){d>>>=0,b||U(d,2,this.length);const x=this[d+1]|this[d]<<8;return 32768&x?4294901760|x:x},u.prototype.readInt32LE=function(d,b){return d>>>=0,b||U(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},u.prototype.readInt32BE=function(d,b){return d>>>=0,b||U(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},u.prototype.readBigInt64LE=ht(function(d){yt(d>>>=0,"offset");const b=this[d],x=this[d+7];b!==void 0&&x!==void 0||St(d,this.length-8);const L=this[d+4]+256*this[d+5]+65536*this[d+6]+(x<<24);return(BigInt(L)<<BigInt(32))+BigInt(b+256*this[++d]+65536*this[++d]+this[++d]*16777216)}),u.prototype.readBigInt64BE=ht(function(d){yt(d>>>=0,"offset");const b=this[d],x=this[d+7];b!==void 0&&x!==void 0||St(d,this.length-8);const L=(b<<24)+65536*this[++d]+256*this[++d]+this[++d];return(BigInt(L)<<BigInt(32))+BigInt(this[++d]*16777216+65536*this[++d]+256*this[++d]+x)}),u.prototype.readFloatLE=function(d,b){return d>>>=0,b||U(d,4,this.length),f.read(this,d,!0,23,4)},u.prototype.readFloatBE=function(d,b){return d>>>=0,b||U(d,4,this.length),f.read(this,d,!1,23,4)},u.prototype.readDoubleLE=function(d,b){return d>>>=0,b||U(d,8,this.length),f.read(this,d,!0,52,8)},u.prototype.readDoubleBE=function(d,b){return d>>>=0,b||U(d,8,this.length),f.read(this,d,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(d,b,x,L){d=+d,b>>>=0,x>>>=0,L||Z(this,d,b,x,Math.pow(2,8*x)-1,0);let D=1,$=0;for(this[b]=255&d;++$<x&&(D*=256);)this[b+$]=d/D&255;return b+x},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(d,b,x,L){d=+d,b>>>=0,x>>>=0,L||Z(this,d,b,x,Math.pow(2,8*x)-1,0);let D=x-1,$=1;for(this[b+D]=255&d;--D>=0&&($*=256);)this[b+D]=d/$&255;return b+x},u.prototype.writeUint8=u.prototype.writeUInt8=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,1,255,0),this[b]=255&d,b+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,2,65535,0),this[b]=255&d,this[b+1]=d>>>8,b+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,2,65535,0),this[b]=d>>>8,this[b+1]=255&d,b+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,4,4294967295,0),this[b+3]=d>>>24,this[b+2]=d>>>16,this[b+1]=d>>>8,this[b]=255&d,b+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,4,4294967295,0),this[b]=d>>>24,this[b+1]=d>>>16,this[b+2]=d>>>8,this[b+3]=255&d,b+4},u.prototype.writeBigUInt64LE=ht(function(d,b=0){return j(this,d,b,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ht(function(d,b=0){return X(this,d,b,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(d,b,x,L){if(d=+d,b>>>=0,!L){const vt=Math.pow(2,8*x-1);Z(this,d,b,x,vt-1,-vt)}let D=0,$=1,nt=0;for(this[b]=255&d;++D<x&&($*=256);)d<0&&nt===0&&this[b+D-1]!==0&&(nt=1),this[b+D]=(d/$|0)-nt&255;return b+x},u.prototype.writeIntBE=function(d,b,x,L){if(d=+d,b>>>=0,!L){const vt=Math.pow(2,8*x-1);Z(this,d,b,x,vt-1,-vt)}let D=x-1,$=1,nt=0;for(this[b+D]=255&d;--D>=0&&($*=256);)d<0&&nt===0&&this[b+D+1]!==0&&(nt=1),this[b+D]=(d/$|0)-nt&255;return b+x},u.prototype.writeInt8=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,1,127,-128),d<0&&(d=255+d+1),this[b]=255&d,b+1},u.prototype.writeInt16LE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,2,32767,-32768),this[b]=255&d,this[b+1]=d>>>8,b+2},u.prototype.writeInt16BE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,2,32767,-32768),this[b]=d>>>8,this[b+1]=255&d,b+2},u.prototype.writeInt32LE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,4,2147483647,-2147483648),this[b]=255&d,this[b+1]=d>>>8,this[b+2]=d>>>16,this[b+3]=d>>>24,b+4},u.prototype.writeInt32BE=function(d,b,x){return d=+d,b>>>=0,x||Z(this,d,b,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[b]=d>>>24,this[b+1]=d>>>16,this[b+2]=d>>>8,this[b+3]=255&d,b+4},u.prototype.writeBigInt64LE=ht(function(d,b=0){return j(this,d,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ht(function(d,b=0){return X(this,d,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(d,b,x){return tt(this,d,b,!0,x)},u.prototype.writeFloatBE=function(d,b,x){return tt(this,d,b,!1,x)},u.prototype.writeDoubleLE=function(d,b,x){return st(this,d,b,!0,x)},u.prototype.writeDoubleBE=function(d,b,x){return st(this,d,b,!1,x)},u.prototype.copy=function(d,b,x,L){if(!u.isBuffer(d))throw new TypeError("argument should be a Buffer");if(x||(x=0),L||L===0||(L=this.length),b>=d.length&&(b=d.length),b||(b=0),L>0&&L<x&&(L=x),L===x||d.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),d.length-b<L-x&&(L=d.length-b+x);const D=L-x;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,x,L):Uint8Array.prototype.set.call(d,this.subarray(x,L),b),D},u.prototype.fill=function(d,b,x,L){if(typeof d=="string"){if(typeof b=="string"?(L=b,b=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(d.length===1){const $=d.charCodeAt(0);(L==="utf8"&&$<128||L==="latin1")&&(d=$)}}else typeof d=="number"?d&=255:typeof d=="boolean"&&(d=Number(d));if(b<0||this.length<b||this.length<x)throw new RangeError("Out of range index");if(x<=b)return this;let D;if(b>>>=0,x=x===void 0?this.length:x>>>0,d||(d=0),typeof d=="number")for(D=b;D<x;++D)this[D]=d;else{const $=u.isBuffer(d)?d:u.from(d,L),nt=$.length;if(nt===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(D=0;D<x-b;++D)this[D+b]=$[D%nt]}return this};const Q={};function ft(d,b,x){Q[d]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}function ot(d){let b="",x=d.length;const L=d[0]==="-"?1:0;for(;x>=L+4;x-=3)b=`_${d.slice(x-3,x)}${b}`;return`${d.slice(0,x)}${b}`}function At(d,b,x,L,D,$){if(d>x||d<b){const nt=typeof b=="bigint"?"n":"";let vt;throw vt=b===0||b===BigInt(0)?`>= 0${nt} and < 2${nt} ** ${8*($+1)}${nt}`:`>= -(2${nt} ** ${8*($+1)-1}${nt}) and < 2 ** ${8*($+1)-1}${nt}`,new Q.ERR_OUT_OF_RANGE("value",vt,d)}(function(nt,vt,_t){yt(vt,"offset"),nt[vt]!==void 0&&nt[vt+_t]!==void 0||St(vt,nt.length-(_t+1))})(L,D,$)}function yt(d,b){if(typeof d!="number")throw new Q.ERR_INVALID_ARG_TYPE(b,"number",d)}function St(d,b,x){throw Math.floor(d)!==d?(yt(d,x),new Q.ERR_OUT_OF_RANGE("offset","an integer",d)):b<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,d)}ft("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ft("ERR_INVALID_ARG_TYPE",function(d,b){return`The "${d}" argument must be of type number. Received type ${typeof b}`},TypeError),ft("ERR_OUT_OF_RANGE",function(d,b,x){let L=`The value of "${d}" is out of range.`,D=x;return Number.isInteger(x)&&Math.abs(x)>4294967296?D=ot(String(x)):typeof x=="bigint"&&(D=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(D=ot(D)),D+="n"),L+=` It must be ${b}. Received ${D}`,L},RangeError);const F=/[^+/0-9A-Za-z-_]/g;function rt(d,b){let x;b=b||1/0;const L=d.length;let D=null;const $=[];for(let nt=0;nt<L;++nt){if(x=d.charCodeAt(nt),x>55295&&x<57344){if(!D){if(x>56319){(b-=3)>-1&&$.push(239,191,189);continue}if(nt+1===L){(b-=3)>-1&&$.push(239,191,189);continue}D=x;continue}if(x<56320){(b-=3)>-1&&$.push(239,191,189),D=x;continue}x=65536+(D-55296<<10|x-56320)}else D&&(b-=3)>-1&&$.push(239,191,189);if(D=null,x<128){if((b-=1)<0)break;$.push(x)}else if(x<2048){if((b-=2)<0)break;$.push(x>>6|192,63&x|128)}else if(x<65536){if((b-=3)<0)break;$.push(x>>12|224,x>>6&63|128,63&x|128)}else{if(!(x<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;$.push(x>>18|240,x>>12&63|128,x>>6&63|128,63&x|128)}}return $}function et(d){return h.toByteArray(function(b){if((b=(b=b.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;b.length%4!=0;)b+="=";return b}(d))}function mt(d,b,x,L){let D;for(D=0;D<L&&!(D+x>=b.length||D>=d.length);++D)b[D+x]=d[D];return D}function V(d,b){return d instanceof b||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===b.name}function it(d){return d!=d}const Y=function(){const d="0123456789abcdef",b=new Array(256);for(let x=0;x<16;++x){const L=16*x;for(let D=0;D<16;++D)b[L+D]=d[x]+d[D]}return b}();function ht(d){return typeof BigInt>"u"?dt:d}function dt(){throw new Error("BigInt not supported")}},8310:(o,a,l)=>{o.exports=f;var h=l(7007).EventEmitter;function f(){h.call(this)}l(6698)(f,h),f.Readable=l(5412),f.Writable=l(6708),f.Duplex=l(5382),f.Transform=l(4610),f.PassThrough=l(3600),f.finished=l(6238),f.pipeline=l(7758),f.Stream=f,f.prototype.pipe=function(c,g){var m=this;function u(E){c.writable&&c.write(E)===!1&&m.pause&&m.pause()}function p(){m.readable&&m.resume&&m.resume()}m.on("data",u),c.on("drain",p),c._isStdio||g&&g.end===!1||(m.on("end",_),m.on("close",R));var w=!1;function _(){w||(w=!0,c.end())}function R(){w||(w=!0,typeof c.destroy=="function"&&c.destroy())}function A(E){if(k(),h.listenerCount(this,"error")===0)throw E}function k(){m.removeListener("data",u),c.removeListener("drain",p),m.removeListener("end",_),m.removeListener("close",R),m.removeListener("error",A),c.removeListener("error",A),m.removeListener("end",k),m.removeListener("close",k),c.removeListener("close",k)}return m.on("error",A),c.on("error",A),m.on("end",k),m.on("close",k),c.on("close",k),c.emit("pipe",m),c}},8584:(o,a,l)=>{const h=l(5606),{ArrayPrototypeSlice:f,Error:c,FunctionPrototypeSymbolHasInstance:g,ObjectDefineProperty:m,ObjectDefineProperties:u,ObjectSetPrototypeOf:p,StringPrototypeToLowerCase:w,Symbol:_,SymbolHasInstance:R}=l(4134);o.exports=j,j.WritableState=U;const{EventEmitter:A}=l(7007),k=l(4259).Stream,{Buffer:E}=l(8287),y=l(5896),{addAbortSignal:S}=l(4147),{getHighWaterMark:M,getDefaultHighWaterMark:I}=l(5291),{ERR_INVALID_ARG_TYPE:q,ERR_METHOD_NOT_IMPLEMENTED:z,ERR_MULTIPLE_CALLBACK:N,ERR_STREAM_CANNOT_PIPE:J,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:W,ERR_STREAM_NULL_VALUES:C,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:H}=l(6371).codes,{errorOrDestroy:G}=y;function lt(){}p(j.prototype,k.prototype),p(j,k);const T=_("kOnFinished");function U(V,it,Y){typeof Y!="boolean"&&(Y=it instanceof l(3370)),this.objectMode=!(!V||!V.objectMode),Y&&(this.objectMode=this.objectMode||!(!V||!V.writableObjectMode)),this.highWaterMark=V?M(this,V,"writableHighWaterMark",Y):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ht=!(!V||V.decodeStrings!==!1);this.decodeStrings=!ht,this.defaultEncoding=V&&V.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=st.bind(void 0,it),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Z(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!V||V.emitClose!==!1,this.autoDestroy=!V||V.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[T]=[]}function Z(V){V.buffered=[],V.bufferedIndex=0,V.allBuffers=!0,V.allNoop=!0}function j(V){const it=this instanceof l(3370);if(!it&&!g(j,this))return new j(V);this._writableState=new U(V,this,it),V&&(typeof V.write=="function"&&(this._write=V.write),typeof V.writev=="function"&&(this._writev=V.writev),typeof V.destroy=="function"&&(this._destroy=V.destroy),typeof V.final=="function"&&(this._final=V.final),typeof V.construct=="function"&&(this._construct=V.construct),V.signal&&S(V.signal,this)),k.call(this,V),y.construct(this,()=>{const Y=this._writableState;Y.writing||At(this,Y),St(this,Y)})}function X(V,it,Y,ht){const dt=V._writableState;if(typeof Y=="function")ht=Y,Y=dt.defaultEncoding;else{if(Y){if(Y!=="buffer"&&!E.isEncoding(Y))throw new H(Y)}else Y=dt.defaultEncoding;typeof ht!="function"&&(ht=lt)}if(it===null)throw new C;if(!dt.objectMode)if(typeof it=="string")dt.decodeStrings!==!1&&(it=E.from(it,Y),Y="buffer");else if(it instanceof E)Y="buffer";else{if(!k._isUint8Array(it))throw new q("chunk",["string","Buffer","Uint8Array"],it);it=k._uint8ArrayToBuffer(it),Y="buffer"}let d;return dt.ending?d=new K:dt.destroyed&&(d=new P("write")),d?(h.nextTick(ht,d),G(V,d,!0),d):(dt.pendingcb++,function(b,x,L,D,$){const nt=x.objectMode?1:L.length;x.length+=nt;const vt=x.length<x.highWaterMark;return vt||(x.needDrain=!0),x.writing||x.corked||x.errored||!x.constructed?(x.buffered.push({chunk:L,encoding:D,callback:$}),x.allBuffers&&D!=="buffer"&&(x.allBuffers=!1),x.allNoop&&$!==lt&&(x.allNoop=!1)):(x.writelen=nt,x.writecb=$,x.writing=!0,x.sync=!0,b._write(L,D,x.onwrite),x.sync=!1),vt&&!x.errored&&!x.destroyed}(V,dt,it,Y,ht))}function at(V,it,Y,ht,dt,d,b){it.writelen=ht,it.writecb=b,it.writing=!0,it.sync=!0,it.destroyed?it.onwrite(new P("write")):Y?V._writev(dt,it.onwrite):V._write(dt,d,it.onwrite),it.sync=!1}function tt(V,it,Y,ht){--it.pendingcb,ht(Y),ot(it),G(V,Y)}function st(V,it){const Y=V._writableState,ht=Y.sync,dt=Y.writecb;typeof dt=="function"?(Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0,it?(it.stack,Y.errored||(Y.errored=it),V._readableState&&!V._readableState.errored&&(V._readableState.errored=it),ht?h.nextTick(tt,V,Y,it,dt):tt(V,Y,it,dt)):(Y.buffered.length>Y.bufferedIndex&&At(V,Y),ht?Y.afterWriteTickInfo!==null&&Y.afterWriteTickInfo.cb===dt?Y.afterWriteTickInfo.count++:(Y.afterWriteTickInfo={count:1,cb:dt,stream:V,state:Y},h.nextTick(Q,Y.afterWriteTickInfo)):ft(V,Y,1,dt))):G(V,new N)}function Q({stream:V,state:it,count:Y,cb:ht}){return it.afterWriteTickInfo=null,ft(V,it,Y,ht)}function ft(V,it,Y,ht){for(!it.ending&&!V.destroyed&&it.length===0&&it.needDrain&&(it.needDrain=!1,V.emit("drain"));Y-- >0;)it.pendingcb--,ht();it.destroyed&&ot(it),St(V,it)}function ot(V){if(V.writing)return;for(let dt=V.bufferedIndex;dt<V.buffered.length;++dt){var it;const{chunk:d,callback:b}=V.buffered[dt],x=V.objectMode?1:d.length;V.length-=x,b((it=V.errored)!==null&&it!==void 0?it:new P("write"))}const Y=V[T].splice(0);for(let dt=0;dt<Y.length;dt++){var ht;Y[dt]((ht=V.errored)!==null&&ht!==void 0?ht:new P("end"))}Z(V)}function At(V,it){if(it.corked||it.bufferProcessing||it.destroyed||!it.constructed)return;const{buffered:Y,bufferedIndex:ht,objectMode:dt}=it,d=Y.length-ht;if(!d)return;let b=ht;if(it.bufferProcessing=!0,d>1&&V._writev){it.pendingcb-=d-1;const x=it.allNoop?lt:D=>{for(let $=b;$<Y.length;++$)Y[$].callback(D)},L=it.allNoop&&b===0?Y:f(Y,b);L.allBuffers=it.allBuffers,at(V,it,!0,it.length,L,"",x),Z(it)}else{do{const{chunk:x,encoding:L,callback:D}=Y[b];Y[b++]=null,at(V,it,!1,dt?1:x.length,x,L,D)}while(b<Y.length&&!it.writing);b===Y.length?Z(it):b>256?(Y.splice(0,b),it.bufferedIndex=0):it.bufferedIndex=b}it.bufferProcessing=!1}function yt(V){return V.ending&&!V.destroyed&&V.constructed&&V.length===0&&!V.errored&&V.buffered.length===0&&!V.finished&&!V.writing&&!V.errorEmitted&&!V.closeEmitted}function St(V,it,Y){yt(it)&&(function(ht,dt){dt.prefinished||dt.finalCalled||(typeof ht._final!="function"||dt.destroyed?(dt.prefinished=!0,ht.emit("prefinish")):(dt.finalCalled=!0,function(d,b){let x=!1;function L(D){if(x)G(d,D??N());else if(x=!0,b.pendingcb--,D){const $=b[T].splice(0);for(let nt=0;nt<$.length;nt++)$[nt](D);G(d,D,b.sync)}else yt(b)&&(b.prefinished=!0,d.emit("prefinish"),b.pendingcb++,h.nextTick(F,d,b))}b.sync=!0,b.pendingcb++;try{d._final(L)}catch(D){L(D)}b.sync=!1}(ht,dt)))}(V,it),it.pendingcb===0&&(Y?(it.pendingcb++,h.nextTick((ht,dt)=>{yt(dt)?F(ht,dt):dt.pendingcb--},V,it)):yt(it)&&(it.pendingcb++,F(V,it))))}function F(V,it){it.pendingcb--,it.finished=!0;const Y=it[T].splice(0);for(let ht=0;ht<Y.length;ht++)Y[ht]();if(V.emit("finish"),it.autoDestroy){const ht=V._readableState;(!ht||ht.autoDestroy&&(ht.endEmitted||ht.readable===!1))&&V.destroy()}}U.prototype.getBuffer=function(){return f(this.buffered,this.bufferedIndex)},m(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),m(j,R,{__proto__:null,value:function(V){return!!g(this,V)||this===j&&V&&V._writableState instanceof U}}),j.prototype.pipe=function(){G(this,new J)},j.prototype.write=function(V,it,Y){return X(this,V,it,Y)===!0},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const V=this._writableState;V.corked&&(V.corked--,V.writing||At(this,V))},j.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=w(V)),!E.isEncoding(V))throw new H(V);return this._writableState.defaultEncoding=V,this},j.prototype._write=function(V,it,Y){if(!this._writev)throw new z("_write()");this._writev([{chunk:V,encoding:it}],Y)},j.prototype._writev=null,j.prototype.end=function(V,it,Y){const ht=this._writableState;let dt;if(typeof V=="function"?(Y=V,V=null,it=null):typeof it=="function"&&(Y=it,it=null),V!=null){const d=X(this,V,it);d instanceof c&&(dt=d)}return ht.corked&&(ht.corked=1,this.uncork()),dt||(ht.errored||ht.ending?ht.finished?dt=new W("end"):ht.destroyed&&(dt=new P("end")):(ht.ending=!0,St(this,ht,!0),ht.ended=!0)),typeof Y=="function"&&(dt||ht.finished?h.nextTick(Y,dt):ht[T].push(Y)),this},u(j.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(V){this._writableState&&(this._writableState.destroyed=V)}},writable:{__proto__:null,get(){const V=this._writableState;return!(!V||V.writable===!1||V.destroyed||V.errored||V.ending||V.ended)},set(V){this._writableState&&(this._writableState.writable=!!V)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const V=this._writableState;return!!V&&!V.destroyed&&!V.ending&&V.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._writableState.writable===!1||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const rt=y.destroy;let et;function mt(){return et===void 0&&(et={}),et}j.prototype.destroy=function(V,it){const Y=this._writableState;return!Y.destroyed&&(Y.bufferedIndex<Y.buffered.length||Y[T].length)&&h.nextTick(ot,Y),rt.call(this,V,it),this},j.prototype._undestroy=y.undestroy,j.prototype._destroy=function(V,it){it(V)},j.prototype[A.captureRejectionSymbol]=function(V){this.destroy(V)},j.fromWeb=function(V,it){return mt().newStreamWritableFromWritableStream(V,it)},j.toWeb=function(V){return mt().newWritableStreamFromStreamWritable(V)}},9231:o=>{o.exports={format:(a,...l)=>a.replace(/%([sdifj])/g,function(...[h,f]){const c=l.shift();return f==="f"?c.toFixed(6):f==="j"?JSON.stringify(c):f==="s"&&typeof c=="object"?`${c.constructor!==Object?c.constructor.name:""} {}`.trim():c.toString()}),inspect(a){switch(typeof a){case"string":if(a.includes("'")){if(!a.includes('"'))return`"${a}"`;if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}},9452:(o,a)=>{a.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},a.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36,SET:258},a.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},a.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},a.SYMS={NULL:Symbol.for("github.com/hildjj/node-cbor/null"),UNDEFINED:Symbol.for("github.com/hildjj/node-cbor/undef"),PARENT:Symbol.for("github.com/hildjj/node-cbor/parent"),BREAK:Symbol.for("github.com/hildjj/node-cbor/break"),STREAM:Symbol.for("github.com/hildjj/node-cbor/stream")},a.SHIFT32=4294967296,a.BI={MINUS_ONE:BigInt(-1),NEG_MAX:BigInt(-1)-BigInt(Number.MAX_SAFE_INTEGER),MAXINT32:BigInt("0xffffffff"),MAXINT64:BigInt("0xffffffffffffffff"),SHIFT32:BigInt(a.SHIFT32)}},9744:o=>{class a{constructor(){this.clear()}clear(){this.map=new WeakMap,this.count=0,this.recording=!0}stop(){this.recording=!1}check(h){const f=this.map.get(h);if(f)return f.length>1?f[0]||this.recording?f[1]:(f[0]=!0,a.FIRST):this.recording?(f.push(this.count++),f[1]):a.NEVER;if(!this.recording)throw new Error("New object detected when not recording");return this.map.set(h,[!1]),a.NEVER}}a.NEVER=-1,a.FIRST=-2,o.exports=a},9777:(o,a,l)=>{const h=l(8310),f=l(3737),c=l(7328),g=l(672),{MT:m,SYMS:u}=l(9452);class p extends h.Transform{constructor(_={}){const{separator:R=`
`,stream_errors:A=!1,tags:k,max_depth:E,preferWeb:y,encoding:S,...M}=_;super({...M,readableObjectMode:!1,writableObjectMode:!1}),this.float_bytes=-1,this.separator=R,this.stream_errors=A,this.parser=new f({tags:k,max_depth:E,preferWeb:y,encoding:S}),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.on("error",this._on_error.bind(this))}_transform(_,R,A){this.parser.write(_,R,A)}_flush(_){this.parser._flush(R=>this.stream_errors?(R&&this._on_error(R),_()):_(R))}static diagnose(_,R={},A=null){if(_==null)throw new TypeError("input required");({options:R,cb:A}=function(I,q){switch(typeof I){case"function":return{options:{},cb:I};case"string":return{options:{encoding:I},cb:q};case"object":return{options:I||{},cb:q};default:throw new TypeError("Unknown option type")}}(R,A));const{encoding:k="hex",...E}=R,y=new g,S=new p(E);let M=null;return typeof A=="function"?(S.on("end",()=>A(null,y.toString("utf8"))),S.on("error",A)):M=new Promise((I,q)=>{S.on("end",()=>I(y.toString("utf8"))),S.on("error",q)}),S.pipe(y),c.guessEncoding(_,k).pipe(S),M}_on_error(_){this.stream_errors?this.push(_.toString()):this.emit("error",_)}_on_more(_,R,A,k){_===m.SIMPLE_FLOAT&&(this.float_bytes={2:1,4:2,8:3}[R])}_fore(_,R){switch(_){case m.BYTE_STRING:case m.UTF8_STRING:case m.ARRAY:R>0&&this.push(", ");break;case m.MAP:R>0&&(R%2?this.push(": "):this.push(", "))}}_on_value(_,R,A){if(_===u.BREAK)return;this._fore(R,A);const k=this.float_bytes;this.float_bytes=-1,this.push(c.cborValueToString(_,k))}_on_start(_,R,A,k){switch(this._fore(A,k),_){case m.TAG:this.push(`${R}(`);break;case m.ARRAY:this.push("[");break;case m.MAP:this.push("{");break;case m.BYTE_STRING:case m.UTF8_STRING:this.push("(")}R===u.STREAM&&this.push("_ ")}_on_stop(_){switch(_){case m.TAG:this.push(")");break;case m.ARRAY:this.push("]");break;case m.MAP:this.push("}");break;case m.BYTE_STRING:case m.UTF8_STRING:this.push(")")}}_on_data(){this.push(this.separator)}}o.exports=p},9881:(o,a,l)=>{const h=l(893),f=l(9777),c=l(3737),g=l(2893),m=l(5059),u=l(3557),p=l(2903),w=l(207);o.exports={Commented:h,Diagnose:f,Decoder:c,Encoder:g,Simple:m,Tagged:u,Map:p,SharedValueEncoder:w,comment:h.comment,decodeAll:c.decodeAll,decodeFirst:c.decodeFirst,decodeAllSync:c.decodeAllSync,decodeFirstSync:c.decodeFirstSync,diagnose:f.diagnose,encode:g.encode,encodeCanonical:g.encodeCanonical,encodeOne:g.encodeOne,encodeAsync:g.encodeAsync,decode:c.decodeFirstSync,leveldb:{decode:c.decodeFirstSync,encode:g.encode,buffer:!0,name:"cbor"},reset(){g.reset(),u.reset()}}}},i={};function r(o){var a=i[o];if(a!==void 0)return a.exports;var l=i[o]={exports:{}};return e[o](l,l.exports,r),l.exports}r.n=o=>{var a=o&&o.__esModule?()=>o.default:()=>o;return r.d(a,{a}),a},r.d=(o,a)=>{for(var l in a)r.o(a,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})},r.o=(o,a)=>Object.prototype.hasOwnProperty.call(o,a),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var s={};return(()=>{r.r(s);var o=r(9881),a={};for(const l in o)l!=="default"&&(a[l]=()=>o[l]);r.d(s,a)})(),s})())})(Ya);var Xa=Ya.exports;const md=Wn(Xa),gb=bu({__proto__:null,default:md},[Xa]);var Ja={exports:{}};(function(n,t){(function(e,i){i()})(Fe,function(){function e(h,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,f,c){var g=new XMLHttpRequest;g.open("GET",h),g.responseType="blob",g.onload=function(){l(g.response,f,c)},g.onerror=function(){console.error("could not download file")},g.send()}function r(h){var f=new XMLHttpRequest;f.open("HEAD",h,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Fe=="object"&&Fe.global===Fe?Fe:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,f,c){var g=o.URL||o.webkitURL,m=document.createElement("a");f=f||h.name||"download",m.download=f,m.rel="noopener",typeof h=="string"?(m.href=h,m.origin===location.origin?s(m):r(m.href)?i(h,f,c):s(m,m.target="_blank")):(m.href=g.createObjectURL(h),setTimeout(function(){g.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(h,f,c){if(f=f||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(e(h,c),f);else if(r(h))i(h,f,c);else{var g=document.createElement("a");g.href=h,g.target="_blank",setTimeout(function(){s(g)})}}:function(h,f,c,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof h=="string")return i(h,f,c);var m=h.type==="application/octet-stream",u=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||m&&u||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var A=w.result;A=p?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=A:location=A,g=null},w.readAsDataURL(h)}else{var _=o.URL||o.webkitURL,R=_.createObjectURL(h);g?g.location=R:location.href=R,g=null,setTimeout(function(){_.revokeObjectURL(R)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})})(Ja);var mb=Ja.exports;let Os=[],Qa=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,e=0;t<n.length;t++)(t%2?Qa:Os).push(e=e+n[t])})();function bd(n){if(n<768)return!1;for(let t=0,e=Os.length;;){let i=t+e>>1;if(n<Os[i])e=i;else if(n>=Qa[i])t=i+1;else return!0;if(t==e)return!1}}function El(n){return n>=127462&&n<=127487}const kl=8205;function yd(n,t,e=!0,i=!0){return(e?Za:wd)(n,t,i)}function Za(n,t,e){if(t==n.length)return t;t&&th(n.charCodeAt(t))&&eh(n.charCodeAt(t-1))&&t--;let i=hs(n,t);for(t+=_l(i);t<n.length;){let r=hs(n,t);if(i==kl||r==kl||e&&bd(r))t+=_l(r),i=r;else if(El(r)){let s=0,o=t-2;for(;o>=0&&El(hs(n,o));)s++,o-=2;if(s%2==0)break;t+=2}else break}return t}function wd(n,t,e){for(;t>0;){let i=Za(n,t-2,e);if(i<t)return i;t--}return 0}function hs(n,t){let e=n.charCodeAt(t);if(!eh(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return th(i)?(e-55296<<10)+(i-56320)+65536:e}function th(n){return n>=56320&&n<57344}function eh(n){return n>=55296&&n<56320}function _l(n){return n<65536?1:2}class Ot{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,i){[t,e]=Hi(this,t,e);let r=[];return this.decompose(0,t,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(e,this.length,r,1),We.from(r,this.length-(e-t)+i.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Hi(this,t,e);let i=[];return this.decompose(t,e,i,0),We.from(i,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),i=this.length-this.scanIdentical(t,-1),r=new bn(this),s=new bn(t);for(let o=e,a=e;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(t=1){return new bn(this,t)}iterRange(t,e=this.length){return new ih(this,t,e)}iterLines(t,e){let i;if(t==null)i=this.iter();else{e==null&&(e=this.lines+1);let r=this.line(t).from;i=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new nh(i)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Ot.empty:t.length<=32?new Ht(t):We.from(Ht.split(t,[]))}}class Ht extends Ot{constructor(t,e=vd(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((e?i:a)>=t)return new rh(r,a,i,o);r=a+1,i++}}decompose(t,e,i,r){let s=t<=0&&e>=this.length?this:new Ht(Tl(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(r&1){let o=i.pop(),a=gr(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Ht(a,o.length+s.length));else{let l=a.length>>1;i.push(new Ht(a.slice(0,l)),new Ht(a.slice(l)))}}else i.push(s)}replace(t,e,i){if(!(i instanceof Ht))return super.replace(t,e,i);[t,e]=Hi(this,t,e);let r=gr(this.text,gr(i.text,Tl(this.text,0,t)),e),s=this.length+i.length-(e-t);return r.length<=32?new Ht(r,s):We.from(Ht.split(r,[]),s)}sliceString(t,e=this.length,i=`
`){[t,e]=Hi(this,t,e);let r="";for(let s=0,o=0;s<=e&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>t&&o&&(r+=i),t<l&&e>s&&(r+=a.slice(Math.max(0,t-s),e-s)),s=l+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let i=[],r=-1;for(let s of t)i.push(s),r+=s.length+1,i.length==32&&(e.push(new Ht(i,r)),i=[],r=-1);return r>-1&&e.push(new Ht(i,r)),e}}class We extends Ot{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let i of t)this.lines+=i.lines}lineInner(t,e,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((e?l:a)>=t)return o.lineInner(t,e,i,r);r=a+1,i=l+1}}decompose(t,e,i,r){for(let s=0,o=0;o<=e&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(t<=l&&e>=o){let h=r&((o<=t?1:0)|(l>=e?2:0));o>=t&&l<=e&&!h?i.push(a):a.decompose(t-o,e-o,i,h)}o=l+1}}replace(t,e,i){if([t,e]=Hi(this,t,e),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(t>=s&&e<=a){let l=o.replace(t-s,e-s,i),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let f=this.children.slice();return f[r]=l,new We(f,this.length-(e-t)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(t,e,i)}sliceString(t,e=this.length,i=`
`){[t,e]=Hi(this,t,e);let r="";for(let s=0,o=0;s<this.children.length&&o<=e;s++){let a=this.children[s],l=o+a.length;o>t&&s&&(r+=i),t<l&&e>o&&(r+=a.sliceString(t-o,e-o,i)),o=l+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof We))return 0;let i=0,[r,s,o,a]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,s+=e){if(r==o||s==a)return i;let l=this.children[r],h=t.children[s];if(l!=h)return i+l.scanIdentical(h,e);i+=l.length+1}}static from(t,e=t.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let m of t)i+=m.lines;if(i<32){let m=[];for(let u of t)u.flatten(m);return new Ht(m,e)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,h=-1,f=[];function c(m){let u;if(m.lines>s&&m instanceof We)for(let p of m.children)c(p);else m.lines>o&&(l>o||!l)?(g(),a.push(m)):m instanceof Ht&&l&&(u=f[f.length-1])instanceof Ht&&m.lines+u.lines<=32?(l+=m.lines,h+=m.length+1,f[f.length-1]=new Ht(u.text.concat(m.text),u.length+1+m.length)):(l+m.lines>r&&g(),l+=m.lines,h+=m.length+1,f.push(m))}function g(){l!=0&&(a.push(f.length==1?f[0]:We.from(f,h)),h=-1,l=f.length=0)}for(let m of t)c(m);return g(),a.length==1?a[0]:new We(a,e)}}Ot.empty=new Ht([""],0);function vd(n){let t=-1;for(let e of n)t+=e.length+1;return t}function gr(n,t,e=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let a=n[s],l=r+a.length;l>=e&&(l>i&&(a=a.slice(0,i-r)),r<e&&(a=a.slice(e-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=l+1}return t}function Tl(n,t,e){return gr(n,[""],t,e)}class bn{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Ht?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Ht?r.text.length:r.children.length;if(o==(e>0?a:0)){if(i==0)return this.done=!0,this.value="",this;e>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(e>0?0:1)){if(this.offsets[i]+=e,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof Ht){let l=r.text[o+(e<0?-1:0)];if(this.offsets[i]+=e,l.length>Math.max(0,t))return this.value=t==0?l:e>0?l.slice(t):l.slice(0,l.length-t),this;t-=l.length}else{let l=r.children[o+(e<0?-1:0)];t>l.length?(t-=l.length,this.offsets[i]+=e):(e<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(e>0?1:(l instanceof Ht?l.text.length:l.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class ih{constructor(t,e,i){this.value="",this.done=!1,this.cursor=new bn(t,e>i?-1:1),this.pos=e>i?t.length:0,this.from=Math.min(e,i),this.to=Math.max(e,i)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let i=e<0?this.pos-this.from:this.to-this.pos;t>i&&(t=i),i-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=i?r:e<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class nh{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:i,value:r}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ot.prototype[Symbol.iterator]=function(){return this.iter()},bn.prototype[Symbol.iterator]=ih.prototype[Symbol.iterator]=nh.prototype[Symbol.iterator]=function(){return this});class rh{constructor(t,e,i,r){this.from=t,this.to=e,this.number=i,this.text=r}get length(){return this.to-this.from}}function Hi(n,t,e){return t=Math.max(0,Math.min(n.length,t)),[t,Math.max(t,Math.min(n.length,e))]}function pe(n,t,e=!0,i=!0){return yd(n,t,e,i)}function Sd(n){return n>=56320&&n<57344}function xd(n){return n>=55296&&n<56320}function To(n,t){let e=n.charCodeAt(t);if(!xd(e)||t+1==n.length)return e;let i=n.charCodeAt(t+1);return Sd(i)?(e-55296<<10)+(i-56320)+65536:e}function Ad(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function sh(n){return n<65536?1:2}const Ls=/\r\n?|\n/;var se=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(se||(se={}));class qe{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e+1];t+=i<0?this.sections[e]:i}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,i=0,r=0;e<this.sections.length;){let s=this.sections[e++],o=this.sections[e++];o<0?(t(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(t,e=!1){Ns(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];r<0?t.push(i,r):t.push(r,i)}return new qe(t)}composeDesc(t){return this.empty?t:t.empty?this:oh(this,t)}mapDesc(t,e=!1){return t.empty?this:Ds(this,t,e)}mapPos(t,e=-1,i=se.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],h=r+a;if(l<0){if(h>t)return s+(t-r);s+=a}else{if(i!=se.Simple&&h>=t&&(i==se.TrackDel&&r<t&&h>t||i==se.TrackBefore&&r<t||i==se.TrackAfter&&h>t))return null;if(h>t||h==t&&e<0&&!a)return t==r||e<0?s:s+l;s+=l}r=h}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return s}touchesRange(t,e=t){for(let i=0,r=0;i<this.sections.length&&r<=e;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=e&&a>=t)return r<t&&a>e?"cover":!0;r=a}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+i+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qe(t)}static create(t){return new qe(t)}}class zt extends qe{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Ns(this,(e,i,r,s,o)=>t=t.replace(r,r+(i-e),o),!1),t}mapDesc(t,e=!1){return Ds(this,t,e,!0)}invert(t){let e=this.sections.slice(),i=[];for(let r=0,s=0;r<e.length;r+=2){let o=e[r],a=e[r+1];if(a>=0){e[r]=a,e[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(Ot.empty);i.push(o?t.slice(s,s+o):Ot.empty)}s+=o}return new zt(e,i)}compose(t){return this.empty?t:t.empty?this:oh(this,t,!0)}map(t,e=!1){return t.empty?this:Ds(this,t,e,!0)}iterChanges(t,e=!1){Ns(this,t,e)}get desc(){return qe.create(this.sections)}filter(t){let e=[],i=[],r=[],s=new Tn(this);t:for(let o=0,a=0;;){let l=o==t.length?1e9:t[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break t;let f=Math.min(s.len,l-a);ie(r,f,-1);let c=s.ins==-1?-1:s.off==0?s.ins:0;ie(e,f,c),c>0&&si(i,e,s.text),s.forward(f),a+=f}let h=t[o++];for(;a<h;){if(s.done)break t;let f=Math.min(s.len,h-a);ie(e,f,-1),ie(r,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),a+=f}}return{changes:new zt(e,i),filtered:qe.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let i=this.sections[e],r=this.sections[e+1];r<0?t.push(i):r==0?t.push([i]):t.push([i].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,i){let r=[],s=[],o=0,a=null;function l(f=!1){if(!f&&!r.length)return;o<e&&ie(r,e-o,-1);let c=new zt(r,s);a=a?a.compose(c.map(a)):c,r=[],s=[],o=0}function h(f){if(Array.isArray(f))for(let c of f)h(c);else if(f instanceof zt){if(f.length!=e)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${e})`);l(),a=a?a.compose(f.map(a)):f}else{let{from:c,to:g=c,insert:m}=f;if(c>g||c<0||g>e)throw new RangeError(`Invalid change range ${c} to ${g} (in doc of length ${e})`);let u=m?typeof m=="string"?Ot.of(m.split(i||Ls)):m:Ot.empty,p=u.length;if(c==g&&p==0)return;c<o&&l(),c>o&&ie(r,c-o,-1),ie(r,g-c,p),si(s,r,u),o=g}}return h(t),l(!a),a}static empty(t){return new zt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],i=[];for(let r=0;r<t.length;r++){let s=t[r];if(typeof s=="number")e.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)e.push(s[0],0);else{for(;i.length<r;)i.push(Ot.empty);i[r]=Ot.of(s.slice(1)),e.push(s[0],i[r].length)}}}return new zt(e,i)}static createSet(t,e){return new zt(t,e)}}function ie(n,t,e,i=!1){if(t==0&&e<=0)return;let r=n.length-2;r>=0&&e<=0&&e==n[r+1]?n[r]+=t:r>=0&&t==0&&n[r]==0?n[r+1]+=e:i?(n[r]+=t,n[r+1]+=e):n.push(t,e)}function si(n,t,e){if(e.length==0)return;let i=t.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(e);else{for(;n.length<i;)n.push(Ot.empty);n.push(e)}}function Ns(n,t,e){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)r+=a,s+=a;else{let h=r,f=s,c=Ot.empty;for(;h+=a,f+=l,l&&i&&(c=c.append(i[o-2>>1])),!(e||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];t(r,h,s,f,c),r=h,s=f}}}function Ds(n,t,e,i=!1){let r=[],s=i?[]:null,o=new Tn(n),a=new Tn(t);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);ie(r,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!e))){let h=a.len;for(ie(r,a.ins,-1);h;){let f=Math.min(o.len,h);o.ins>=0&&l<o.i&&o.len<=f&&(ie(r,0,o.ins),s&&si(s,r,o.text),l=o.i),o.forward(f),h-=f}a.next()}else if(o.ins>=0){let h=0,f=o.len;for(;f;)if(a.ins==-1){let c=Math.min(f,a.len);h+=c,f-=c,a.forward(c)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;ie(r,h,l<o.i?o.ins:0),s&&l<o.i&&si(s,r,o.text),l=o.i,o.forward(o.len-f)}else{if(o.done&&a.done)return s?zt.createSet(r,s):qe.create(r);throw new Error("Mismatched change set lengths")}}}function oh(n,t,e=!1){let i=[],r=e?[]:null,s=new Tn(n),o=new Tn(t);for(let a=!1;;){if(s.done&&o.done)return r?zt.createSet(i,r):qe.create(i);if(s.ins==0)ie(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)ie(i,0,o.ins,a),r&&si(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;ie(i,l,f,a),r&&f&&si(r,i,o.text)}else o.ins==-1?(ie(i,s.off?0:s.len,l,a),r&&si(r,i,s.textBit(l))):(ie(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&si(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>h),s.forward2(l),o.forward(l)}}}}class Tn{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Ot.empty:t[e]}textBit(t){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length&&!t?Ot.empty:e[i].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class oi{constructor(t,e,i){this.from=t,this.to=e,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let i,r;return this.empty?i=r=t.mapPos(this.from,e):(i=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new oi(i,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return bt.range(t,e);let i=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return bt.range(this.anchor,i)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&this.goalColumn==t.goalColumn&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return bt.range(t.anchor,t.head)}static create(t,e,i){return new oi(t,e,i)}}class bt{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:bt.create(this.ranges.map(i=>i.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new bt([this.main],0)}addRange(t,e=!0){return bt.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let i=this.ranges.slice();return i[e]=t,bt.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new bt(t.ranges.map(e=>oi.fromJSON(e)),t.main)}static single(t,e=t){return new bt([bt.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<t.length;r++){let s=t[r];if(s.empty?s.from<=i:s.from<i)return bt.normalized(t.slice(),e);i=s.to}return new bt(t,e)}static cursor(t,e=0,i,r){return oi.create(t,t,(e==0?0:e<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(t,e,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return e<t?oi.create(e,t,48|s):oi.create(t,e,(e>t?8:0)|s)}static normalized(t,e=0){let i=t[e];t.sort((r,s)=>r.from-s.from),e=t.indexOf(i);for(let r=1;r<t.length;r++){let s=t[r],o=t[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=e&&e--,t.splice(--r,2,s.anchor>s.head?bt.range(l,a):bt.range(a,l))}}return new bt(t,e)}}function lh(n,t){for(let e of n.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}let Co=0;class wt{constructor(t,e,i,r,s){this.combine=t,this.compareInput=e,this.compare=i,this.isStatic=r,this.id=Co++,this.default=t([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(t={}){return new wt(t.combine||(e=>e),t.compareInput||((e,i)=>e===i),t.compare||(t.combine?(e,i)=>e===i:Mo),!!t.static,t.enables)}of(t){return new mr([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new mr(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new mr(t,this,2,e)}from(t,e){return e||(e=i=>i),this.compute([t],i=>e(i.field(t)))}}function Mo(n,t){return n==t||n.length==t.length&&n.every((e,i)=>e===t[i])}class mr{constructor(t,e,i,r){this.dependencies=t,this.facet=e,this.type=i,this.value=r,this.id=Co++}dynamicSlot(t){var e;let i=this.value,r=this.facet.compareInput,s=this.id,o=t[s]>>1,a=this.type==2,l=!1,h=!1,f=[];for(let c of this.dependencies)c=="doc"?l=!0:c=="selection"?h=!0:((e=t[c.id])!==null&&e!==void 0?e:1)&1||f.push(t[c.id]);return{create(c){return c.values[o]=i(c),1},update(c,g){if(l&&g.docChanged||h&&(g.docChanged||g.selection)||Ps(c,f)){let m=i(c);if(a?!Cl(m,c.values[o],r):!r(m,c.values[o]))return c.values[o]=m,1}return 0},reconfigure:(c,g)=>{let m,u=g.config.address[s];if(u!=null){let p=_r(g,u);if(this.dependencies.every(w=>w instanceof wt?g.facet(w)===c.facet(w):w instanceof be?g.field(w,!1)==c.field(w,!1):!0)||(a?Cl(m=i(c),p,r):r(m=i(c),p)))return c.values[o]=p,0}else m=i(c);return c.values[o]=m,1}}}}function Cl(n,t,e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!e(n[i],t[i]))return!1;return!0}function Ps(n,t){let e=!1;for(let i of t)yn(n,i)&1&&(e=!0);return e}function Ed(n,t,e){let i=e.map(l=>n[l.id]),r=e.map(l=>l.type),s=i.filter(l=>!(l&1)),o=n[t.id]>>1;function a(l){let h=[];for(let f=0;f<i.length;f++){let c=_r(l,i[f]);if(r[f]==2)for(let g of c)h.push(g);else h.push(c)}return t.combine(h)}return{create(l){for(let h of i)yn(l,h);return l.values[o]=a(l),1},update(l,h){if(!Ps(l,s))return 0;let f=a(l);return t.compare(f,l.values[o])?0:(l.values[o]=f,1)},reconfigure(l,h){let f=Ps(l,i),c=h.config.facets[t.id],g=h.facet(t);if(c&&!f&&Mo(e,c))return l.values[o]=g,0;let m=a(l);return t.compare(m,g)?(l.values[o]=g,0):(l.values[o]=m,1)}}}const Yn=wt.define({static:!0});class be{constructor(t,e,i,r,s){this.id=t,this.createF=e,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(t){let e=new be(Co++,t.create,t.update,t.compare||((i,r)=>i===r),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Yn).find(i=>i.field==this);return(e?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:i=>(i.values[e]=this.create(i),1),update:(i,r)=>{let s=i.values[e],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[e]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Yn),o=r.facet(Yn),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[e]=a.create(i),1):r.config.address[this.id]!=null?(i.values[e]=r.field(this),0):(i.values[e]=this.create(i),1)}}}init(t){return[this,Yn.of({field:this,create:t})]}get extension(){return this}}const yi={lowest:4,low:3,default:2,high:1,highest:0};function rn(n){return t=>new ah(t,n)}const Xi={highest:rn(yi.highest),high:rn(yi.high),default:rn(yi.default),low:rn(yi.low),lowest:rn(yi.lowest)};class ah{constructor(t,e){this.inner=t,this.prec=e}}class Un{of(t){return new Fs(this,t)}reconfigure(t){return Un.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Fs{constructor(t,e){this.compartment=t,this.inner=e}}class kr{constructor(t,e,i,r,s,o){for(this.base=t,this.compartments=e,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,i){let r=[],s=Object.create(null),o=new Map;for(let g of kd(t,e,o))g instanceof be?r.push(g):(s[g.facet.id]||(s[g.facet.id]=[])).push(g);let a=Object.create(null),l=[],h=[];for(let g of r)a[g.id]=h.length<<1,h.push(m=>g.slot(m));let f=i?.config.facets;for(let g in s){let m=s[g],u=m[0].facet,p=f&&f[g]||[];if(m.every(w=>w.type==0))if(a[u.id]=l.length<<1|1,Mo(p,m))l.push(i.facet(u));else{let w=u.combine(m.map(_=>_.value));l.push(i&&u.compare(w,i.facet(u))?i.facet(u):w)}else{for(let w of m)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=h.length<<1,h.push(_=>w.dynamicSlot(_)));a[u.id]=h.length<<1,h.push(w=>Ed(w,u,m))}}let c=h.map(g=>g(a));return new kr(t,o,c,a,l,s)}}function kd(n,t,e){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let h=i[l].indexOf(o);h>-1&&i[l].splice(h,1),o instanceof Fs&&e.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof Fs){if(e.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=t.get(o.compartment)||o.inner;e.set(o.compartment,h),s(h,a)}else if(o instanceof ah)s(o.inner,o.prec);else if(o instanceof be)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof mr)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,yi.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(n,yi.default),i.reduce((o,a)=>o.concat(a))}function yn(n,t){if(t&1)return 2;let e=t>>1,i=n.status[e];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[e]=4;let r=n.computeSlot(n,n.config.dynamicSlots[e]);return n.status[e]=2|r}function _r(n,t){return t&1?n.config.staticValues[t>>1]:n.values[t>>1]}const hh=wt.define(),Ws=wt.define({combine:n=>n.some(t=>t),static:!0}),fh=wt.define({combine:n=>n.length?n[0]:void 0,static:!0}),uh=wt.define(),ch=wt.define(),dh=wt.define(),ph=wt.define({combine:n=>n.length?n[0]:!1});class Ti{constructor(t,e){this.type=t,this.value=e}static define(){return new gh}}class gh{of(t){return new Ti(this,t)}}class mh{constructor(t){this.map=t}of(t){return new Lt(this,t)}}class Lt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new Lt(this.type,e)}is(t){return this.type==t}static define(t={}){return new mh(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let i=[];for(let r of t){let s=r.map(e);s&&i.push(s)}return i}}Lt.reconfigure=Lt.define();Lt.appendConfig=Lt.define();class Zt{constructor(t,e,i,r,s,o){this.startState=t,this.changes=e,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&lh(i,e.newLength),s.some(a=>a.type==Zt.time)||(this.annotations=s.concat(Zt.time.of(Date.now())))}static create(t,e,i,r,s,o){return new Zt(t,e,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Zt.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}}Zt.time=Ti.define();Zt.userEvent=Ti.define();Zt.addToHistory=Ti.define();Zt.remote=Ti.define();function _d(n,t){let e=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==t.length||t[r]>=n[i]))s=n[i++],o=n[i++];else if(r<t.length)s=t[r++],o=t[r++];else return e;!e.length||e[e.length-1]<s?e.push(s,o):e[e.length-1]<o&&(e[e.length-1]=o)}}function bh(n,t,e){var i;let r,s,o;return e?(r=t.changes,s=zt.empty(t.changes.length),o=n.changes.compose(t.changes)):(r=t.changes.map(n.changes),s=n.changes.mapDesc(t.changes,!0),o=n.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:Lt.mapEffects(n.effects,r).concat(Lt.mapEffects(t.effects,s)),annotations:n.annotations.length?n.annotations.concat(t.annotations):t.annotations,scrollIntoView:n.scrollIntoView||t.scrollIntoView}}function Us(n,t,e){let i=t.selection,r=Di(t.annotations);return t.userEvent&&(r=r.concat(Zt.userEvent.of(t.userEvent))),{changes:t.changes instanceof zt?t.changes:zt.of(t.changes||[],e,n.facet(fh)),selection:i&&(i instanceof bt?i:bt.single(i.anchor,i.head)),effects:Di(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function yh(n,t,e){let i=Us(n,t.length?t[0]:{},n.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let s=1;s<t.length;s++){t[s].filter===!1&&(e=!1);let o=!!t[s].sequential;i=bh(i,Us(n,t[s],o?i.changes.newLength:n.doc.length),o)}let r=Zt.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Cd(e?Td(r):r)}function Td(n){let t=n.startState,e=!0;for(let r of t.facet(uh)){let s=r(n);if(s===!1){e=!1;break}Array.isArray(s)&&(e=e===!0?s:_d(e,s))}if(e!==!0){let r,s;if(e===!1)s=n.changes.invertedDesc,r=zt.empty(t.doc.length);else{let o=n.changes.filter(e);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Zt.create(t,r,n.selection&&n.selection.map(s),Lt.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=t.facet(ch);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof Zt?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Zt?n=s[0]:n=yh(t,Di(s),!1)}return n}function Cd(n){let t=n.startState,e=t.facet(dh),i=n;for(let r=e.length-1;r>=0;r--){let s=e[r](n);s&&Object.keys(s).length&&(i=bh(i,Us(t,s,n.changes.newLength),!0))}return i==n?n:Zt.create(t,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const Md=[];function Di(n){return n==null?Md:Array.isArray(n)?n:[n]}var je=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(je||(je={}));const Rd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let js;try{js=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Id(n){if(js)return js.test(n);for(let t=0;t<n.length;t++){let e=n[t];if(/\w/.test(e)||e>"Â"&&(e.toUpperCase()!=e.toLowerCase()||Rd.test(e)))return!0}return!1}function Bd(n){return t=>{if(!/\S/.test(t))return je.Space;if(Id(t))return je.Word;for(let e=0;e<n.length;e++)if(t.indexOf(n[e])>-1)return je.Word;return je.Other}}class Bt{constructor(t,e,i,r,s,o){this.config=t,this.doc=e,this.selection=i,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)yn(this,a<<1);this.computeSlot=null}field(t,e=!0){let i=this.config.address[t.id];if(i==null){if(e)throw new RangeError("Field is not present in this state");return}return yn(this,i),_r(this,i)}update(...t){return yh(this,t,!0)}applyTransaction(t){let e=this.config,{base:i,compartments:r}=e;for(let a of t.effects)a.is(Un.reconfigure)?(e&&(r=new Map,e.compartments.forEach((l,h)=>r.set(h,l)),e=null),r.set(a.value.compartment,a.value.extension)):a.is(Lt.reconfigure)?(e=null,i=a.value):a.is(Lt.appendConfig)&&(e=null,i=Di(i).concat(a.value));let s;e?s=t.startState.values.slice():(e=kr.resolve(i,r,this),s=new Bt(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values);let o=t.startState.facet(Ws)?t.newSelection:t.newSelection.asSingle();new Bt(e,t.newDoc,o,s,(a,l)=>l.update(a,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:bt.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,i=t(e.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Di(i.effects);for(let a=1;a<e.ranges.length;a++){let l=t(e.ranges[a]),h=this.changes(l.changes),f=h.map(r);for(let g=0;g<a;g++)s[g]=s[g].map(f);let c=r.mapDesc(h,!0);s.push(l.range.map(c)),r=r.compose(f),o=Lt.mapEffects(o,f).concat(Lt.mapEffects(Di(l.effects),c))}return{changes:r,selection:bt.create(s,e.mainIndex),effects:o}}changes(t=[]){return t instanceof zt?t:zt.of(t,this.doc.length,this.facet(Bt.lineSeparator))}toText(t){return Ot.of(t.split(this.facet(Bt.lineSeparator)||Ls))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(yn(this,e),_r(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let r=t[i];r instanceof be&&this.config.address[r.id]!=null&&(e[i]=r.spec.toJSON(this.field(t[i]),this))}return e}static fromJSON(t,e={},i){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(t,s)){let o=i[s],a=t[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Bt.create({doc:t.doc,selection:bt.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=kr.resolve(t.extensions||[],new Map),i=t.doc instanceof Ot?t.doc:Ot.of((t.doc||"").split(e.staticFacet(Bt.lineSeparator)||Ls)),r=t.selection?t.selection instanceof bt?t.selection:bt.single(t.selection.anchor,t.selection.head):bt.single(0);return lh(r,i.length),e.staticFacet(Ws)||(r=r.asSingle()),new Bt(e,i,r,e.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Bt.tabSize)}get lineBreak(){return this.facet(Bt.lineSeparator)||`
`}get readOnly(){return this.facet(ph)}phrase(t,...e){for(let i of this.facet(Bt.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>e.length?i:e[s-1]})),t}languageDataAt(t,e,i=-1){let r=[];for(let s of this.facet(hh))for(let o of s(this,e,i))Object.prototype.hasOwnProperty.call(o,t)&&r.push(o[t]);return r}charCategorizer(t){let e=this.languageDataAt("wordChars",t);return Bd(e.length?e[0]:"")}wordAt(t){let{text:e,from:i,length:r}=this.doc.lineAt(t),s=this.charCategorizer(t),o=t-i,a=t-i;for(;o>0;){let l=pe(e,o,!1);if(s(e.slice(l,o))!=je.Word)break;o=l}for(;a<r;){let l=pe(e,a);if(s(e.slice(a,l))!=je.Word)break;a=l}return o==a?null:bt.range(o+i,a+i)}}Bt.allowMultipleSelections=Ws;Bt.tabSize=wt.define({combine:n=>n.length?n[0]:4});Bt.lineSeparator=fh;Bt.readOnly=ph;Bt.phrases=wt.define({compare(n,t){let e=Object.keys(n),i=Object.keys(t);return e.length==i.length&&e.every(r=>n[r]==t[r])}});Bt.languageData=hh;Bt.changeFilter=uh;Bt.transactionFilter=ch;Bt.transactionExtender=dh;Un.reconfigure=Lt.define();function Ji(n,t,e={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(e,s))i[s]=e[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in t)i[r]===void 0&&(i[r]=t[r]);return i}class hi{eq(t){return this==t}range(t,e=t){return Tr.create(t,e,this)}}hi.prototype.startSide=hi.prototype.endSide=0;hi.prototype.point=!1;hi.prototype.mapMode=se.TrackDel;function Ro(n,t){return n==t||n.constructor==t.constructor&&n.eq(t)}let Tr=class wh{constructor(t,e,i){this.from=t,this.to=e,this.value=i}static create(t,e,i){return new wh(t,e,i)}};function Hs(n,t){return n.from-t.from||n.value.startSide-t.value.startSide}class Io{constructor(t,e,i,r){this.from=t,this.to=e,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,h=s[l]-t||(i?this.value[l].endSide:this.value[l].startSide)-e;if(l==o)return h>=0?o:a;h>=0?a=l:o=l+1}}between(t,e,i,r){for(let s=this.findIndex(e,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+t,this.to[s]+t,this.value[s])===!1)return!1}map(t,e){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],f=this.from[l]+t,c=this.to[l]+t,g,m;if(f==c){let u=e.mapPos(f,h.startSide,h.mapMode);if(u==null||(g=m=u,h.startSide!=h.endSide&&(m=e.mapPos(f,h.endSide),m<g)))continue}else if(g=e.mapPos(f,h.startSide),m=e.mapPos(c,h.endSide),g>m||g==m&&h.startSide>0&&h.endSide<=0)continue;(m-g||h.endSide-h.startSide)<0||(o<0&&(o=g),h.point&&(a=Math.max(a,m-g)),i.push(h),r.push(g-o),s.push(m-o))}return{mapped:i.length?new Io(r,s,i,a):null,pos:o}}}class Mt{constructor(t,e,i,r){this.chunkPos=t,this.chunk=e,this.nextLayer=i,this.maxPoint=r}static create(t,e,i,r){return new Mt(t,e,i,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=t,o=t.filter;if(e.length==0&&!o)return this;if(i&&(e=e.slice().sort(Hs)),this.isEmpty)return e.length?Mt.of(e):this;let a=new vh(this,null,-1).goto(0),l=0,h=[],f=new Je;for(;a.value||l<e.length;)if(l<e.length&&(a.from-e[l].from||a.startSide-e[l].value.startSide)>=0){let c=e[l++];f.addInner(c.from,c.to,c.value)||h.push(c)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==e.length||this.chunkEnd(a.chunkIndex)<e[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||h.push(Tr.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?Mt.empty:this.nextLayer.update({add:h,filter:o,filterFrom:r,filterTo:s}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],h=t.touchesRange(a,a+l.length);if(h===!1)r=Math.max(r,l.maxPoint),e.push(l),i.push(t.mapPos(a));else if(h===!0){let{mapped:f,pos:c}=l.map(a,t);f&&(r=Math.max(r,f.maxPoint),e.push(f),i.push(c))}}let s=this.nextLayer.map(t);return e.length==0?s:new Mt(i,e,s||Mt.empty,r)}between(t,e,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(e>=s&&t<=s+o.length&&o.between(s,t-s,e-s,i)===!1)return}this.nextLayer.between(t,e,i)}}iter(t=0){return Cn.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Cn.from(t).goto(e)}static compare(t,e,i,r,s=-1){let o=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),a=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=s),l=Ml(o,a,i),h=new sn(o,l,s),f=new sn(a,l,s);i.iterGaps((c,g,m)=>Rl(h,c,f,g,m,r)),i.empty&&i.length==0&&Rl(h,0,f,0,0,r)}static eq(t,e,i=0,r){r==null&&(r=999999999);let s=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0),o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Ml(s,o),l=new sn(s,a,0).goto(i),h=new sn(o,a,0).goto(i);for(;;){if(l.to!=h.to||!Vs(l.active,h.active)||l.point&&(!h.point||!Ro(l.point,h.point)))return!1;if(l.to>r)return!0;l.next(),h.next()}}static spans(t,e,i,r,s=-1){let o=new sn(t,null,s).goto(e),a=e,l=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let f=o.activeForPoint(o.to),c=o.pointFrom<e?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,l);r.point(a,h,o.point,f,c,o.pointRank),l=Math.min(o.openEnd(h),f.length)}else h>a&&(r.span(a,h,o.active,l),l=o.openEnd(h));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(t,e=!1){let i=new Je;for(let r of t instanceof Tr?[t]:e?Od(t):t)i.add(r.from,r.to,r.value);return i.finish()}static join(t){if(!t.length)return Mt.empty;let e=t[t.length-1];for(let i=t.length-2;i>=0;i--)for(let r=t[i];r!=Mt.empty;r=r.nextLayer)e=new Mt(r.chunkPos,r.chunk,e,Math.max(r.maxPoint,e.maxPoint));return e}}Mt.empty=new Mt([],[],null,-1);function Od(n){if(n.length>1)for(let t=n[0],e=1;e<n.length;e++){let i=n[e];if(Hs(t,i)>0)return n.slice().sort(Hs);t=i}return n}Mt.empty.nextLayer=Mt.empty;class Je{finishChunk(t){this.chunks.push(new Io(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,i){this.addInner(t,e,i)||(this.nextLayer||(this.nextLayer=new Je)).add(t,e,i)}addInner(t,e,i){let r=t-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=i,this.lastFrom=t,this.lastTo=e,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let i=e.value.length-1;return this.last=e.value[i],this.lastFrom=e.from[i]+t,this.lastTo=e.to[i]+t,!0}finish(){return this.finishInner(Mt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=Mt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Ml(n,t,e){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of t)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(e?e.mapPos(a):a)==s.chunkPos[o]&&!e?.touchesRange(a,a+s.chunk[o].length)&&r.add(s.chunk[o])}return r}class vh{constructor(t,e,i,r=0){this.layer=t,this.skip=e,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],i=t+e.from[this.rangeIndex];if(this.from=i,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Cn{constructor(t){this.heap=t}static from(t,e=null,i=-1){let r=[];for(let s=0;s<t.length;s++)for(let o=t[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new vh(o,e,i,s));return r.length==1?r[0]:new Cn(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let i of this.heap)i.goto(t,e);for(let i=this.heap.length>>1;i>=0;i--)fs(this.heap,i);return this.next(),this}forward(t,e){for(let i of this.heap)i.forward(t,e);for(let i=this.heap.length>>1;i>=0;i--)fs(this.heap,i);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),fs(this.heap,0)}}}function fs(n,t){for(let e=n[t];;){let i=(t<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),e.compare(r)<0)break;n[i]=e,n[t]=r,t=i}}class sn{constructor(t,e,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Cn.from(t,e,i)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Xn(this.active,t),Xn(this.activeTo,t),Xn(this.activeRank,t),this.minActive=Il(this.active,this.activeTo)}addActive(t){let e=0,{value:i,to:r,rank:s}=this.cursor;for(;e<this.activeRank.length&&(s-this.activeRank[e]||r-this.activeTo[e])>0;)e++;Jn(this.active,e,i),Jn(this.activeTo,e,r),Jn(this.activeRank,e,s),t&&Jn(t,e,this.cursor.from),this.minActive=Il(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Xn(i,r)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<t;r--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>t||this.activeTo[i]==t&&this.active[i].endSide>=this.point.endSide)&&e.push(this.active[i]);return e.reverse()}openEnd(t){let e=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>t;i--)e++;return e}}function Rl(n,t,e,i,r,s){n.goto(t),e.goto(i);let o=i+r,a=i,l=i-t,h=!!s.boundChange;for(let f=!1;;){let c=n.to+l-e.to,g=c||n.endSide-e.endSide,m=g<0?n.to+l:e.to,u=Math.min(m,o);if(n.point||e.point?(n.point&&e.point&&Ro(n.point,e.point)&&Vs(n.activeForPoint(n.to),e.activeForPoint(e.to))||s.comparePoint(a,u,n.point,e.point),f=!1):(f&&s.boundChange(a),u>a&&!Vs(n.active,e.active)&&s.compareRange(a,u,n.active,e.active),h&&u<o&&(c||n.openEnd(m)!=e.openEnd(m))&&(f=!0)),m>o)break;a=m,g<=0&&n.next(),g>=0&&e.next()}}function Vs(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!=t[e]&&!Ro(n[e],t[e]))return!1;return!0}function Xn(n,t){for(let e=t,i=n.length-1;e<i;e++)n[e]=n[e+1];n.pop()}function Jn(n,t,e){for(let i=n.length-1;i>=t;i--)n[i+1]=n[i];n[t]=e}function Il(n,t){let e=-1,i=1e9;for(let r=0;r<t.length;r++)(t[r]-i||n[r].endSide-n[e].endSide)<0&&(e=r,i=t[r]);return e}function Hr(n,t,e=n.length){let i=0;for(let r=0;r<e&&r<n.length;)n.charCodeAt(r)==9?(i+=t-i%t,r++):(i++,r=pe(n,r));return i}function Cr(n,t,e,i){for(let r=0,s=0;;){if(s>=t)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?e-s%e:1,r=pe(n,r)}return i===!0?-1:n.length}const bb=Object.freeze(Object.defineProperty({__proto__:null,Annotation:Ti,AnnotationType:gh,ChangeDesc:qe,ChangeSet:zt,get CharCategory(){return je},Compartment:Un,EditorSelection:bt,EditorState:Bt,Facet:wt,Line:rh,get MapMode(){return se},Prec:Xi,Range:Tr,RangeSet:Mt,RangeSetBuilder:Je,RangeValue:hi,SelectionRange:oi,StateEffect:Lt,StateEffectType:mh,StateField:be,Text:Ot,Transaction:Zt,codePointAt:To,codePointSize:sh,combineConfig:Ji,countColumn:Hr,findClusterBreak:pe,findColumn:Cr,fromCodePoint:Ad},Symbol.toStringTag,{value:"Module"})),$s="Í¼",Bl=typeof Symbol>"u"?"__"+$s:Symbol.for($s),qs=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class fi{constructor(t,e){this.rules=[];let{finish:i}=e||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,h){let f=[],c=/^@(\w+)\b/.exec(o[0]),g=c&&c[1]=="keyframes";if(c&&a==null)return l.push(o[0]+";");for(let m in a){let u=a[m];if(/&/.test(m))s(m.split(/,\s*/).map(p=>o.map(w=>p.replace(/&/,w))).reduce((p,w)=>p.concat(w)),u,l);else if(u&&typeof u=="object"){if(!c)throw new RangeError("The value of a property ("+m+") should be a primitive value.");s(r(m),u,f,g)}else u!=null&&f.push(m.replace(/_.*/,"").replace(/[A-Z]/g,p=>"-"+p.toLowerCase())+": "+u+";")}(f.length||g)&&l.push((i&&!c&&!h?o.map(i):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in t)s(r(o),t[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Ol[Bl]||1;return Ol[Bl]=t+1,$s+t.toString(36)}static mount(t,e,i){let r=t[qs],s=i&&i.nonce;r?s&&r.setNonce(s):r=new Ld(t,s),r.mount(Array.isArray(e)?e:[e],t)}}let Ll=new Map;class Ld{constructor(t,e){let i=t.ownerDocument||t,r=i.defaultView;if(!t.head&&t.adoptedStyleSheets&&r.CSSStyleSheet){let s=Ll.get(i);if(s)return t[qs]=s;this.sheet=new r.CSSStyleSheet,Ll.set(i,this)}else this.styleTag=i.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[qs]=this}mount(t,e){let i=this.sheet,r=0,s=0;for(let o=0;o<t.length;o++){let a=t[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=e.head||e;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}var ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Nd=typeof navigator<"u"&&/Mac/.test(navigator.platform),Dd=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jt=0;Jt<10;Jt++)ui[48+Jt]=ui[96+Jt]=String(Jt);for(var Jt=1;Jt<=24;Jt++)ui[Jt+111]="F"+Jt;for(var Jt=65;Jt<=90;Jt++)ui[Jt]=String.fromCharCode(Jt+32),Mn[Jt]=String.fromCharCode(Jt);for(var us in ui)Mn.hasOwnProperty(us)||(Mn[us]=ui[us]);function Pd(n){var t=Nd&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Dd&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Mn:ui)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}function Ii(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var t=1,e=arguments[1];if(e&&typeof e=="object"&&e.nodeType==null&&!Array.isArray(e)){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}t++}for(;t<arguments.length;t++)Sh(n,arguments[t]);return n}function Sh(n,t){if(typeof t=="string")n.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)n.appendChild(t);else if(Array.isArray(t))for(var e=0;e<t.length;e++)Sh(n,t[e]);else throw new RangeError("Unsupported child node: "+t)}let re=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},zs=typeof document<"u"?document:{documentElement:{style:{}}};const Gs=/Edge\/(\d+)/.exec(re.userAgent),xh=/MSIE \d/.test(re.userAgent),Ks=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(re.userAgent),Vr=!!(xh||Ks||Gs),Nl=!Vr&&/gecko\/(\d+)/i.test(re.userAgent),cs=!Vr&&/Chrome\/(\d+)/.exec(re.userAgent),Fd="webkitFontSmoothing"in zs.documentElement.style,Ys=!Vr&&/Apple Computer/.test(re.vendor),Dl=Ys&&(/Mobile\/\w+/.test(re.userAgent)||re.maxTouchPoints>2);var gt={mac:Dl||/Mac/.test(re.platform),windows:/Win/.test(re.platform),linux:/Linux|X11/.test(re.platform),ie:Vr,ie_version:xh?zs.documentMode||6:Ks?+Ks[1]:Gs?+Gs[1]:0,gecko:Nl,gecko_version:Nl?+(/Firefox\/(\d+)/.exec(re.userAgent)||[0,0])[1]:0,chrome:!!cs,chrome_version:cs?+cs[1]:0,ios:Dl,android:/Android\b/.test(re.userAgent),webkit_version:Fd?+(/\bAppleWebKit\/(\d+)/.exec(re.userAgent)||[0,0])[1]:0,safari:Ys,safari_version:Ys?+(/\bVersion\/(\d+(\.\d+)?)/.exec(re.userAgent)||[0,0])[1]:0,tabSize:zs.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Bo(n,t){for(let e in n)e=="class"&&t.class?t.class+=" "+n.class:e=="style"&&t.style?t.style+=";"+n.style:t[e]=n[e];return t}const Mr=Object.create(null);function Oo(n,t,e){if(n==t)return!0;n||(n=Mr),t||(t=Mr);let i=Object.keys(n),r=Object.keys(t);if(i.length-0!=r.length-0)return!1;for(let s of i)if(s!=e&&(r.indexOf(s)==-1||n[s]!==t[s]))return!1;return!0}function Wd(n,t){for(let e=n.attributes.length-1;e>=0;e--){let i=n.attributes[e].name;t[i]==null&&n.removeAttribute(i)}for(let e in t){let i=t[e];e=="style"?n.style.cssText=i:n.getAttribute(e)!=i&&n.setAttribute(e,i)}}function Pl(n,t,e){let i=!1;if(t)for(let r in t)e&&r in e||(i=!0,r=="style"?n.style.cssText="":n.removeAttribute(r));if(e)for(let r in e)t&&t[r]==e[r]||(i=!0,r=="style"?n.style.cssText=e[r]:n.setAttribute(r,e[r]));return i}function Ud(n){let t=Object.create(null);for(let e=0;e<n.attributes.length;e++){let i=n.attributes[e];t[i.name]=i.value}return t}class Ge{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var Kt=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Kt||(Kt={}));class Tt extends hi{constructor(t,e,i,r){super(),this.startSide=t,this.endSide=e,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(t){return new jn(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),i=!!t.block;return e+=i&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new xi(t,e,e,i,t.widget||null,!1)}static replace(t){let e=!!t.block,i,r;if(t.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Ah(t,e);i=(s?e?-3e8:-1:5e8)-1,r=(o?e?2e8:1:-6e8)+1}return new xi(t,i,r,e,t.widget||null,!0)}static line(t){return new Hn(t)}static set(t,e=!1){return Mt.of(t,e)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Tt.none=Mt.empty;class jn extends Tt{constructor(t){let{start:e,end:i}=Ah(t);super(e?-1:5e8,i?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?Bo(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||Mr}eq(t){return this==t||t instanceof jn&&this.tagName==t.tagName&&Oo(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}jn.prototype.point=!1;class Hn extends Tt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Hn&&this.spec.class==t.spec.class&&Oo(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Hn.prototype.mapMode=se.TrackBefore;Hn.prototype.point=!0;class xi extends Tt{constructor(t,e,i,r,s,o){super(e,i,s,t),this.block=r,this.isReplace=o,this.mapMode=r?e<=0?se.TrackBefore:se.TrackAfter:se.TrackDel}get type(){return this.startSide!=this.endSide?Kt.WidgetRange:this.startSide<=0?Kt.WidgetBefore:Kt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof xi&&jd(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}xi.prototype.point=!0;function Ah(n,t=!1){let{inclusiveStart:e,inclusiveEnd:i}=n;return e==null&&(e=n.inclusive),i==null&&(i=n.inclusive),{start:e??t,end:i??t}}function jd(n,t){return n==t||!!(n&&t&&n.compare(t))}function Pi(n,t,e,i=0){let r=e.length-1;r>=0&&e[r]+i>=n?e[r]=Math.max(e[r],t):e.push(n,t)}class Vi extends hi{constructor(t,e){super(),this.tagName=t,this.attributes=e}eq(t){return t==this||t instanceof Vi&&this.tagName==t.tagName&&Oo(this.attributes,t.attributes)}static create(t){return new Vi(t.tagName,t.attributes||Mr)}static set(t,e=!1){return Mt.of(t,e)}}Vi.prototype.startSide=Vi.prototype.endSide=-1;function $i(n){let t;return n.nodeType==11?t=n.getSelection?n:n.ownerDocument:t=n,t.getSelection()}function Xs(n,t){return t?n==t||n.contains(t.nodeType!=1?t.parentNode:t):!1}function wn(n,t){if(!t.anchorNode)return!1;try{return Xs(n,t.anchorNode)}catch{return!1}}function vn(n){return n.nodeType==3?In(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Sn(n,t,e,i){return e?Fl(n,t,e,i,-1)||Fl(n,t,e,i,1):!1}function ci(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t}function Rr(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function Fl(n,t,e,i,r){for(;;){if(n==e&&t==i)return!0;if(t==(r<0?0:Qe(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;t=ci(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[t+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;t=r<0?Qe(n):0}else return!1}}function Qe(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Rn(n,t){let e=t?n.left:n.right;return{left:e,right:e,top:n.top,bottom:n.bottom}}function Hd(n){let t=n.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Eh(n,t){let e=t.width/n.offsetWidth,i=t.height/n.offsetHeight;return(e>.995&&e<1.005||!isFinite(e)||Math.abs(t.width-n.offsetWidth)<1)&&(e=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.height-n.offsetHeight)<1)&&(i=1),{scaleX:e,scaleY:i}}function Vd(n,t,e,i,r,s,o,a){let l=n.ownerDocument,h=l.defaultView||window;for(let f=n,c=!1;f&&!c;)if(f.nodeType==1){let g,m=f==l.body,u=1,p=1;if(m)g=Hd(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(c=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let R=f.getBoundingClientRect();({scaleX:u,scaleY:p}=Eh(f,R)),g={left:R.left,right:R.left+f.clientWidth*u,top:R.top,bottom:R.top+f.clientHeight*p}}let w=0,_=0;if(r=="nearest")t.top<g.top?(_=t.top-(g.top+o),e>0&&t.bottom>g.bottom+_&&(_=t.bottom-g.bottom+o)):t.bottom>g.bottom&&(_=t.bottom-g.bottom+o,e<0&&t.top-_<g.top&&(_=t.top-(g.top+o)));else{let R=t.bottom-t.top,A=g.bottom-g.top;_=(r=="center"&&R<=A?t.top+R/2-A/2:r=="start"||r=="center"&&e<0?t.top-o:t.bottom-A+o)-g.top}if(i=="nearest"?t.left<g.left?(w=t.left-(g.left+s),e>0&&t.right>g.right+w&&(w=t.right-g.right+s)):t.right>g.right&&(w=t.right-g.right+s,e<0&&t.left<g.left+w&&(w=t.left-(g.left+s))):w=(i=="center"?t.left+(t.right-t.left)/2-(g.right-g.left)/2:i=="start"==a?t.left-s:t.right-(g.right-g.left)+s)-g.left,w||_)if(m)h.scrollBy(w,_);else{let R=0,A=0;if(_){let k=f.scrollTop;f.scrollTop+=_/p,A=(f.scrollTop-k)*p}if(w){let k=f.scrollLeft;f.scrollLeft+=w/u,R=(f.scrollLeft-k)*u}t={left:t.left-R,top:t.top-A,right:t.right-R,bottom:t.bottom-A},R&&Math.abs(R-w)<1&&(i="nearest"),A&&Math.abs(A-_)<1&&(r="nearest")}if(m)break;(t.top<g.top||t.bottom>g.bottom||t.left<g.left||t.right>g.right)&&(t={left:Math.max(t.left,g.left),right:Math.min(t.right,g.right),top:Math.max(t.top,g.top),bottom:Math.min(t.bottom,g.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function $d(n){let t=n.ownerDocument,e,i;for(let r=n.parentNode;r&&!(r==t.body||e&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:e,y:i}}class qd{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:i}=t;this.set(e,Math.min(t.anchorOffset,e?Qe(e):0),i,Math.min(t.focusOffset,i?Qe(i):0))}set(t,e,i,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=i,this.focusOffset=r}}let bi=null;gt.safari&&gt.safari_version>=26&&(bi=!1);function kh(n){if(n.setActive)return n.setActive();if(bi)return n.focus(bi);let t=[];for(let e=n;e&&(t.push(e,e.scrollTop,e.scrollLeft),e!=e.ownerDocument);e=e.parentNode);if(n.focus(bi==null?{get preventScroll(){return bi={preventScroll:!0},!0}}:void 0),!bi){bi=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],s=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Wl;function In(n,t,e=t){let i=Wl||(Wl=document.createRange());return i.setEnd(n,e),i.setStart(n,t),i}function Fi(n,t,e,i){let r={key:t,code:t,keyCode:e,which:e,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function zd(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Gd(n,t){let e=t.focusNode,i=t.focusOffset;if(!e||t.anchorNode!=e||t.anchorOffset!=i)return!1;for(i=Math.min(i,Qe(e));;)if(i){if(e.nodeType!=1)return!1;let r=e.childNodes[i-1];r.contentEditable=="false"?i--:(e=r,i=Qe(e))}else{if(e==n)return!0;i=ci(e),e=e.parentNode}}function _h(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Th(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i>0)return{node:e,offset:i};if(e.nodeType==1&&i>0){if(e.contentEditable=="false")return null;e=e.childNodes[i-1],i=Qe(e)}else if(e.parentNode&&!Rr(e))i=ci(e),e=e.parentNode;else return null}}function Ch(n,t){for(let e=n,i=t;;){if(e.nodeType==3&&i<e.nodeValue.length)return{node:e,offset:i};if(e.nodeType==1&&i<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[i],i=0}else if(e.parentNode&&!Rr(e))i=ci(e)+1,e=e.parentNode;else return null}}class Ce{constructor(t,e,i=!0){this.node=t,this.offset=e,this.precise=i}static before(t,e){return new Ce(t.parentNode,ci(t),e)}static after(t,e){return new Ce(t.parentNode,ci(t)+1,e)}}var Nt=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Nt||(Nt={}));const Ai=Nt.LTR,Lo=Nt.RTL;function Mh(n){let t=[];for(let e=0;e<n.length;e++)t.push(1<<+n[e]);return t}const Kd=Mh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Yd=Mh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Js=Object.create(null),Le=[];for(let n of["()","[]","{}"]){let t=n.charCodeAt(0),e=n.charCodeAt(1);Js[t]=e,Js[e]=-t}function Rh(n){return n<=247?Kd[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Yd[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Xd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class He{get dir(){return this.level%2?Lo:Ai}constructor(t,e,i){this.from=t,this.to=e,this.level=i}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,i,r){let s=-1;for(let o=0;o<t.length;o++){let a=t[o];if(a.from<=e&&a.to>=e){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<e:a.to>e:t[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Ih(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++){let i=n[e],r=t[e];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Ih(i.inner,r.inner))return!1}return!0}const Ft=[];function Jd(n,t,e,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:t,a=s<i.length?i[s].from:e,l=s?256:r;for(let h=o,f=l,c=l;h<a;h++){let g=Rh(n.charCodeAt(h));g==512?g=f:g==8&&c==4&&(g=16),Ft[h]=g==4?2:g,g&7&&(c=g),f=g}for(let h=o,f=l,c=l;h<a;h++){let g=Ft[h];if(g==128)h<a-1&&f==Ft[h+1]&&f&24?g=Ft[h]=f:Ft[h]=256;else if(g==64){let m=h+1;for(;m<a&&Ft[m]==64;)m++;let u=h&&f==8||m<e&&Ft[m]==8?c==1?1:8:256;for(let p=h;p<m;p++)Ft[p]=u;h=m-1}else g==8&&c==1&&(Ft[h]=1);f=g,g&7&&(c=g)}}}function Qd(n,t,e,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let h=o?i[o-1].to:t,f=o<i.length?i[o].from:e;for(let c=h,g,m,u;c<f;c++)if(m=Js[g=n.charCodeAt(c)])if(m<0){for(let p=a-3;p>=0;p-=3)if(Le[p+1]==-m){let w=Le[p+2],_=w&2?r:w&4?w&1?s:r:0;_&&(Ft[c]=Ft[Le[p]]=_),a=p;break}}else{if(Le.length==189)break;Le[a++]=c,Le[a++]=g,Le[a++]=l}else if((u=Ft[c])==2||u==1){let p=u==r;l=p?0:1;for(let w=a-3;w>=0;w-=3){let _=Le[w+2];if(_&2)break;if(p)Le[w+2]|=2;else{if(_&4)break;Le[w+2]|=4}}}}}function Zd(n,t,e,i){for(let r=0,s=i;r<=e.length;r++){let o=r?e[r-1].to:n,a=r<e.length?e[r].from:t;for(let l=o;l<a;){let h=Ft[l];if(h==256){let f=l+1;for(;;)if(f==a){if(r==e.length)break;f=e[r++].to,a=r<e.length?e[r].from:t}else if(Ft[f]==256)f++;else break;let c=s==1,g=(f<t?Ft[f]:i)==1,m=c==g?c?1:2:i;for(let u=f,p=r,w=p?e[p-1].to:n;u>l;)u==w&&(u=e[--p].from,w=p?e[p-1].to:n),Ft[--u]=m;l=f}else s=h,l++}}}function Qs(n,t,e,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=t,h=0;l<e;){let f=!0,c=!1;if(h==s.length||l<s[h].from){let p=Ft[l];p!=a&&(f=!1,c=p==16)}let g=!f&&a==1?[]:null,m=f?i:i+1,u=l;t:for(;;)if(h<s.length&&u==s[h].from){if(c)break t;let p=s[h];if(!f)for(let w=p.to,_=h+1;;){if(w==e)break t;if(_<s.length&&s[_].from==w)w=s[_++].to;else{if(Ft[w]==a)break t;break}}if(h++,g)g.push(p);else{p.from>l&&o.push(new He(l,p.from,m));let w=p.direction==Ai!=!(m%2);Zs(n,w?i+1:i,r,p.inner,p.from,p.to,o),l=p.to}u=p.to}else{if(u==e||(f?Ft[u]!=a:Ft[u]==a))break;u++}g?Qs(n,l,u,i+1,r,g,o):l<u&&o.push(new He(l,u,m)),l=u}else for(let l=e,h=s.length;l>t;){let f=!0,c=!1;if(!h||l>s[h-1].to){let p=Ft[l-1];p!=a&&(f=!1,c=p==16)}let g=!f&&a==1?[]:null,m=f?i:i+1,u=l;t:for(;;)if(h&&u==s[h-1].to){if(c)break t;let p=s[--h];if(!f)for(let w=p.from,_=h;;){if(w==t)break t;if(_&&s[_-1].to==w)w=s[--_].from;else{if(Ft[w-1]==a)break t;break}}if(g)g.push(p);else{p.to<l&&o.push(new He(p.to,l,m));let w=p.direction==Ai!=!(m%2);Zs(n,w?i+1:i,r,p.inner,p.from,p.to,o),l=p.from}u=p.from}else{if(u==t||(f?Ft[u-1]!=a:Ft[u-1]==a))break;u--}g?Qs(n,u,l,i+1,r,g,o):u<l&&o.push(new He(u,l,m)),l=u}}function Zs(n,t,e,i,r,s,o){let a=t%2?2:1;Jd(n,r,s,i,a),Qd(n,r,s,i,a),Zd(r,s,i,a),Qs(n,r,s,t,e,i,o)}function Bh(n,t,e){if(!n)return[new He(0,0,t==Lo?1:0)];if(t==Ai&&!e.length&&!Xd.test(n))return Oh(n.length);if(e.length)for(;n.length>Ft.length;)Ft[Ft.length]=256;let i=[],r=t==Ai?0:1;return Zs(n,r,r,e,0,n.length,i),i}function Oh(n){return[new He(0,n,0)]}let Lh="";function Nh(n,t,e,i,r){var s;let o=i.head-n.from,a=He.find(t,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=t[a],h=l.side(r,e);if(o==h){let g=a+=r?1:-1;if(g<0||g>=t.length)return null;l=t[a=g],o=l.side(!r,e),h=l.side(r,e)}let f=pe(n.text,o,l.forward(r,e));(f<l.from||f>l.to)&&(f=h),Lh=n.text.slice(Math.min(o,f),Math.max(o,f));let c=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return c&&f==h&&c.level+(r?0:1)<l.level?bt.cursor(c.side(!r,e)+n.from,c.forward(r,e)?1:-1,c.level):bt.cursor(f+n.from,l.forward(r,e)?-1:1,l.level)}function tp(n,t,e){for(let i=t;i<e;i++){let r=Rh(n.charCodeAt(i));if(r==1)return Ai;if(r==2||r==4)return Lo}return Ai}const Dh=wt.define(),Ph=wt.define(),Fh=wt.define(),Wh=wt.define(),to=wt.define(),Uh=wt.define(),jh=wt.define(),No=wt.define(),Do=wt.define(),Hh=wt.define({combine:n=>n.some(t=>t)}),Vh=wt.define({combine:n=>n.some(t=>t)}),$h=wt.define();class Wi{constructor(t,e="nearest",i="nearest",r=5,s=5,o=!1){this.range=t,this.y=e,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(t){return t.empty?this:new Wi(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Wi(bt.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Qn=Lt.define({map:(n,t)=>n.map(t)}),qh=Lt.define();function Se(n,t,e){let i=n.facet(Wh);i.length?i[0](t):window.onerror&&window.onerror(String(t),e,void 0,void 0,t)||(e?console.error(e+":",t):console.error(t))}const Ye=wt.define({combine:n=>n.length?n[0]:!0});let ep=0;const Li=wt.define({combine(n){return n.filter((t,e)=>{for(let i=0;i<e;i++)if(n[i].plugin==t.plugin)return!1;return!0})}});class jt{constructor(t,e,i,r,s){this.id=t,this.create=e,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Li.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(Li.of({plugin:this,arg:t}))}static define(t,e){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=e||{};return new jt(ep++,t,i,r,a=>{let l=[];return o&&l.push(qr.of(h=>{let f=h.plugin(a);return f?o(f):Tt.none})),s&&l.push(s(a)),l})}static fromClass(t,e){return jt.define((i,r)=>new t(i,r),e)}}class ds{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(i){if(Se(e.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(e){Se(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(!((e=this.value)===null||e===void 0)&&e.destroy)try{this.value.destroy()}catch(i){Se(t.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const zh=wt.define(),$r=wt.define(),qr=wt.define(),Gh=wt.define(),Po=wt.define(),Vn=wt.define(),Kh=wt.define();function Ul(n,t){let e=n.state.facet(Kh);if(!e.length)return e;let i=e.map(s=>s instanceof Function?s(n):s),r=[];return Mt.spans(i,t.from,t.to,{point(){},span(s,o,a,l){let h=s-t.from,f=o-t.from,c=r;for(let g=a.length-1;g>=0;g--,l--){let m=a[g].spec.bidiIsolate,u;if(m==null&&(m=tp(t.text,h,f)),l>0&&c.length&&(u=c[c.length-1]).to==h&&u.direction==m)u.to=f,c=u.inner;else{let p={from:h,to:f,direction:m,inner:[]};c.push(p),c=p.inner}}}}),r}const Yh=wt.define();function Fo(n){let t=0,e=0,i=0,r=0;for(let s of n.state.facet(Yh)){let o=s(n);o&&(o.left!=null&&(t=Math.max(t,o.left)),o.right!=null&&(e=Math.max(e,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:t,right:e,top:i,bottom:r}}const un=wt.define();class ge{constructor(t,e,i,r){this.fromA=t,this.toA=e,this.fromB=i,this.toB=r}join(t){return new ge(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,i=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),t.splice(e-1,1)}}return t.splice(e,0,i),t}static extendWithRanges(t,e){if(e.length==0)return t;let i=[];for(let r=0,s=0,o=0;;){let a=r<t.length?t[r].fromB:1e9,l=s<e.length?e[s]:1e9,h=Math.min(a,l);if(h==1e9)break;let f=h+o,c=h,g=f;for(;;)if(s<e.length&&e[s]<=c){let m=e[s+1];s+=2,c=Math.max(c,m);for(let u=r;u<t.length&&t[u].fromB<=c;u++)o=t[u].toA-t[u].toB;g=Math.max(g,m+o)}else if(r<t.length&&t[r].fromB<=c){let m=t[r++];c=Math.max(c,m.toB),g=Math.max(g,m.toA),o=m.toA-m.toB}else break;i.push(new ge(f,g,h,c))}return i}}class Bn{constructor(t,e,i){this.view=t,this.state=e,this.transactions=i,this.flags=0,this.startState=t.state,this.changes=zt.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new ge(s,o,a,l))),this.changedRanges=r}static create(t,e,i){return new Bn(t,e,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const ip=[];class qt{constructor(t,e,i=0){this.dom=t,this.length=e,this.flags=i,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return ip}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let e=this.domAttrs;e&&Wd(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,e=this.posAtStart){let i=e;for(let r of this.children){if(r==t)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,e){return null}domPosFor(t,e){let i=ci(this.dom),r=this.length?t>0:e>0;return new Ce(this.parent.dom,i+(r?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Gr)return t;return null}static get(t){return t.cmTile}}class zr extends qt{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let e=this.dom,i=null,r,s=t?.node==e?t:null,o=0;for(let a of this.children){if(a.sync(t),o+=a.length+a.breakAfter,r=i?i.nextSibling:e.firstChild,s&&r!=a.dom&&(s.written=!0),a.dom.parentNode==e)for(;r&&r!=a.dom;)r=jl(r);else e.insertBefore(a.dom,r);i=a.dom}for(r=i?i.nextSibling:e.firstChild,s&&r&&(s.written=!0);r;)r=jl(r);this.length=o}}function jl(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class Gr extends zr{constructor(t,e){super(e),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let e=qt.get(t);if(e&&this.owns(e))return e;t=t.parentNode}}blockTiles(t){for(let e=[],i=this,r=0,s=0;;)if(r==i.children.length){if(!e.length)return;i=i.parent,i.breakAfter&&s++,r=e.pop()}else{let o=i.children[r++];if(o instanceof ai)e.push(r),i=o,r=0;else{let a=s+o.length,l=t(o,s);if(l!==void 0)return l;s=a+o.breakAfter}}}resolveBlock(t,e){let i,r=-1,s,o=-1;if(this.blockTiles((a,l)=>{let h=l+a.length;if(t>=l&&t<=h){if(a.isWidget()&&e>=-1&&e<=1){if(a.flags&32)return!0;a.flags&16&&(i=void 0)}(l<t||t==h&&(e<-1?a.length:a.covers(1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,r=t-l),(h>t||t==l&&(e>1?a.length:a.covers(-1)))&&(!s||!a.isWidget()&&s.isWidget())&&(s=a,o=t-l)}}),!i&&!s)throw new Error("No tile at position "+t);return i&&e<0||!s?{tile:i,offset:r}:{tile:s,offset:o}}}class ai extends zr{constructor(t,e){super(t),this.wrapper=e}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,e){let i=new ai(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}}class qi extends zr{constructor(t,e){super(t),this.attrs=e}isLine(){return!0}static start(t,e,i){let r=new qi(e||document.createElement("div"),t);return(!e||!i)&&(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(t,e,i){let r=null,s=-1,o=null,a=-1;function l(f,c){for(let g=0,m=0;g<f.children.length&&m<=c;g++){let u=f.children[g],p=m+u.length;p>=c&&(u.isComposite()?l(u,c-m):(!o||o.isHidden&&(e>0||i&&rp(o,u)))&&(p>c||u.flags&32)?(o=u,a=c-m):(m<c||u.flags&16&&!u.isHidden)&&(r=u,s=c-m)),m=p}}l(this,t);let h=(e<0?r:o)||r||o;return h?{tile:h,offset:h==r?s:a}:null}coordsIn(t,e){let i=this.resolveInline(t,e,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),e):np(this)}domIn(t,e){let i=this.resolveInline(t,e);if(i){let{tile:r,offset:s}=i;if(this.dom.contains(r.dom))return r.isText()?new Ce(r.dom,Math.min(r.dom.nodeValue.length,s)):r.domPosFor(s,r.flags&16?1:r.flags&32?-1:e);let o=i.tile.parent,a=!1;for(let l of o.children){if(a)return new Ce(l.dom,0);l==i.tile&&(a=!0)}}return new Ce(this.dom,0)}}function np(n){let t=n.dom.lastChild;if(!t)return n.dom.getBoundingClientRect();let e=vn(t);return e[e.length-1]||null}function rp(n,t){let e=n.coordsIn(0,1),i=t.coordsIn(0,1);return e&&i&&i.top<e.bottom}class ae extends zr{constructor(t,e){super(t),this.mark=e}get domAttrs(){return this.mark.attrs}static of(t,e){let i=new ae(e||document.createElement(t.tagName),t);return e||(i.flags|=4),i}}class wi extends qt{constructor(t,e){super(t,e.length),this.text=e}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,e){let i=this.dom.nodeValue.length;t>i&&(t=i);let r=t,s=t,o=0;t==0&&e<0||t==i&&e>=0?gt.chrome||gt.gecko||(t?(r--,o=1):s<i&&(s++,o=-1)):e<0?r--:s<i&&s++;let a=In(this.dom,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:e>=0)?0:a.length-1];return gt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,h=>h.width)||l),o?Rn(l,o<0):l||null}static of(t,e){let i=new wi(e||document.createTextNode(t),t);return e||(i.flags|=2),i}}class Ei extends qt{constructor(t,e,i,r){super(t,e,r),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,e){return this.coordsInWidget(t,e,!1)}coordsInWidget(t,e,i){let r=this.widget.coordsAt(this.dom,t,e);if(r)return r;if(i)return Rn(this.dom.getBoundingClientRect(),this.length?t==0:e<=0);{let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.flags&16?!0:this.flags&32?!1:t>0;for(let l=a?s.length-1:0;o=s[l],!(t>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return Rn(o,!a)}}get overrideDOMText(){if(!this.length)return Ot.empty;let{root:t}=this;if(!t)return Ot.empty;let e=this.posAtStart;return t.view.state.doc.slice(e,e+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,e,i,r,s){return s||(s=t.toDOM(e),t.editable||(s.contentEditable="false")),new Ei(s,i,t,r)}}class Ir extends qt{constructor(t){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),super(e,0,t)}get isHidden(){return!0}get overrideDOMText(){return Ot.empty}coordsIn(t){return this.dom.getBoundingClientRect()}}class sp{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,e,i){let{tile:r,index:s,beforeBreak:o,parents:a}=this;for(;t||e>0;)if(r.isComposite())if(o){if(!t)break;i&&i.break(),t--,o=!1}else if(s==r.children.length){if(!t&&!a.length)break;i&&i.leave(r),o=!!r.breakAfter,{tile:r,index:s}=a.pop(),s++}else{let l=r.children[s],h=l.breakAfter;(e>0?l.length<=t:l.length<t)&&(!i||i.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!h,s++,t-=l.length):(a.push({tile:r,index:s}),r=l,s=0,i&&l.isComposite()&&i.enter(l))}else if(s==r.length)o=!!r.breakAfter,{tile:r,index:s}=a.pop(),s++;else if(t){let l=Math.min(t,r.length-s);i&&i.skip(r,s,s+l),t-=l,s+=l}else break;return this.tile=r,this.index=s,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class op{constructor(t,e,i,r){this.from=t,this.to=e,this.wrapper=i,this.rank=r}}class lp{constructor(t,e,i){this.cache=t,this.root=e,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,e,i,r){var s;this.flushBuffer();let o=this.ensureMarks(e,i),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new wi(a.dom,a.text+t);l.parent=o}else o.append(r||wi.of(t,(s=this.cache.find(wi))===null||s===void 0?void 0:s.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,e){let i=this.curLine;i.dom!=e.line.dom&&(i.setDOM(this.cache.reused.has(e.line)?ps(e.line.dom):e.line.dom),this.cache.reused.set(e.line,2));let r=i;for(let a=e.marks.length-1;a>=0;a--){let l=e.marks[a],h=r.lastChild;if(h instanceof ae&&h.mark.eq(l.mark))h.dom!=l.dom&&h.setDOM(ps(l.dom)),r=h;else{if(this.cache.reused.get(l)){let c=qt.get(l.dom);c&&c.setDOM(ps(l.dom))}let f=ae.of(l.mark,l.dom);r.append(f),r=f}this.cache.reused.set(l,2)}let s=qt.get(t.text);s&&this.cache.reused.set(s,2);let o=new wi(t.text,t.text.nodeValue);o.flags|=8,r.append(o)}addInlineWidget(t,e,i){let r=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);r||this.flushBuffer();let s=this.ensureMarks(e,i);!r&&!(t.flags&16)&&s.append(this.getBuffer(1)),s.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,e,i){this.flushBuffer(),this.ensureMarks(e,i).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let e=this.afterWidget||this.lastBlock;e.length+=t,this.pos+=t}addLineStart(t,e){var i;t||(t=Xh);let r=qi.start(t,e||((i=this.cache.find(qi))===null||i===void 0?void 0:i.dom),!!e);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,e){var i;let r=this.curLine;for(let s=t.length-1;s>=0;s--){let o=t[s],a;if(e>0&&(a=r.lastChild)&&a instanceof ae&&a.mark.eq(o))r=a,e--;else{let l=ae.of(o,(i=this.cache.find(ae,h=>h.mark.eq(o)))===null||i===void 0?void 0:i.dom);r.append(l),r=l,e=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!Hl(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(gt.ios&&Hl(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(gs,0,32)||new Ei(gs.toDOM(),0,gs,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let e=new op(t.from,t.to,t.value,t.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-e.rank||this.wrappers[i-1].to-e.to)<0;)i--;this.wrappers.splice(i,0,e)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let e=this.root;for(let i of this.wrappers){let r=e.lastChild;if(i.from<this.pos&&r instanceof ai&&r.wrapper.eq(i.wrapper))e=r;else{let s=ai.of(i.wrapper,(t=this.cache.find(ai,o=>o.wrapper.eq(i.wrapper)))===null||t===void 0?void 0:t.dom);e.append(s),e=s}}return e}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let e=2|(t<0?16:32),i=this.cache.find(Ir,void 0,1);return i&&(i.flags=e),i||new Ir(e)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class ap{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:r,lineBreak:s,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=r;let a=this.textOff=Math.min(t,r.length);return s?null:r.slice(0,a)}let e=Math.min(this.text.length,this.textOff+t),i=this.text.slice(this.textOff,e);return this.textOff=e,i}}const Br=[Ei,qi,wi,ae,Ir,ai,Gr];for(let n=0;n<Br.length;n++)Br[n].bucket=n;class hp{constructor(t){this.view=t,this.buckets=Br.map(()=>[]),this.index=Br.map(()=>0),this.reused=new Map}add(t){let e=t.constructor.bucket,i=this.buckets[e];i.length<6?i.push(t):i[this.index[e]=(this.index[e]+1)%6]=t}find(t,e,i=2){let r=t.bucket,s=this.buckets[r],o=this.index[r];for(let a=s.length-1;a>=0;a--){let l=(a+o)%s.length,h=s[l];if((!e||e(h))&&!this.reused.has(h))return s.splice(l,1),l<o&&this.index[r]--,this.reused.set(h,i),h}return null}findWidget(t,e,i){let r=this.buckets[0];if(r.length)for(let s=0,o=0;;s++){if(s==r.length){if(o)return null;o=1,s=0}let a=r[s];if(!this.reused.has(a)&&(o==0?a.widget.compare(t):a.widget.constructor==t.constructor&&t.updateDOM(a.dom,this.view)))return r.splice(s,1),s<this.index[0]&&this.index[0]--,a.widget==t&&a.length==e&&(a.flags&497)==i?(this.reused.set(a,1),a):(this.reused.set(a,2),new Ei(a.dom,e,t,a.flags&-498|i))}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,e=2){if(!this.reused.has(t))return this.reused.set(t,e),t.dom}clear(){for(let t=0;t<this.buckets.length;t++)this.buckets[t].length=this.index[t]=0}}class fp{constructor(t,e,i,r,s){this.view=t,this.decorations=r,this.disallowBlockEffectsFor=s,this.openWidget=!1,this.openMarks=0,this.cache=new hp(t),this.text=new ap(t.state.doc),this.builder=new lp(this.cache,new Gr(t,t.contentDOM),Mt.iter(i)),this.cache.reused.set(e,2),this.old=new sp(e),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(t,e){let i=e&&this.getCompositionContext(e.text);for(let r=0,s=0,o=0;;){let a=o<t.length?t[o++]:null,l=a?a.fromA:this.old.root.length;if(l>r){let h=l-r;this.preserve(h,!o,!a),r=l,s+=h}if(!a)break;e&&a.fromA<=e.range.fromA&&a.toA>=e.range.toA?(this.forward(a.fromA,e.range.fromA,e.range.fromA<e.range.toA?1:-1),this.emit(s,e.range.fromB),this.cache.clear(),this.builder.addComposition(e,i),this.text.skip(e.range.toB-e.range.fromB),this.forward(e.range.fromA,a.toA),this.emit(e.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(s,a.toB)),s=a.toB,r=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,e,i){let r=dp(this.old),s=this.openMarks;this.old.advance(t,i?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let h=l>0||a<o.length?Ei.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,r,s),s=r.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,r,s,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),r,s)),s=r.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof Ir)this.cache.add(o);else if(o instanceof ae)this.builder.ensureLine(null),this.builder.addMark(o,r,s),this.cache.reused.set(o,1),s=r.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof ae&&r.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?r.length&&(r.length=s=0):o instanceof ae&&(r.shift(),s=Math.min(s,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,e){let i=null,r=this.builder,s=0,o=Mt.spans(this.decorations,t,e,{point:(a,l,h,f,c,g)=>{if(h instanceof xi){if(this.disallowBlockEffectsFor[g]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(s=f.length,c>f.length)r.continueWidget(l-a);else{let m=h.widget||(h.block?zi.block:zi.inline),u=up(h),p=this.cache.findWidget(m,l-a,u)||Ei.of(m,this.view,l-a,u);h.block?(h.startSide>0&&r.addLineStartIfNotCovered(i),r.addBlockWidget(p)):(r.ensureLine(i),r.addInlineWidget(p,f,c))}i=null}else i=cp(i,h);l>a&&this.text.skip(l-a)},span:(a,l,h,f)=>{for(let c=a;c<l;){let g=this.text.next(Math.min(512,l-c));g==null?(r.addLineStartIfNotCovered(i),r.addBreak(),c++):(r.ensureLine(i),r.addText(g,h,f),c+=g.length),i=null}}});r.addLineStartIfNotCovered(i),this.openWidget=o>s,this.openMarks=o}forward(t,e,i=1){e-t<=10?this.old.advance(e-t,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(e-t-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(t){let e=[],i=null;for(let r=t.parentNode;;r=r.parentNode){let s=qt.get(r);if(r==this.view.contentDOM)break;s instanceof ae?e.push(s):s?.isLine()?i=s:r.nodeName=="DIV"&&!i&&r!=this.view.contentDOM?i=new qi(r,Xh):e.push(ae.of(new jn({tagName:r.nodeName.toLowerCase(),attributes:Ud(r)}),r))}return{line:i,marks:e}}}function Hl(n,t){let e=i=>{for(let r of i.children)if((t?r.isText():r.length)||e(r))return!0;return!1};return e(n)}function up(n){let t=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(t|=256),t}const Xh={class:"cm-line"};function cp(n,t){let e=t.spec.attributes,i=t.spec.class;return!e&&!i||(n||(n={class:"cm-line"}),e&&Bo(e,n),i&&(n.class+=" "+i)),n}function dp(n){let t=[];for(let e=n.parents.length;e>1;e--){let i=e==n.parents.length?n.tile:n.parents[e].tile;i instanceof ae&&t.push(i.mark)}return t}function ps(n){let t=qt.get(n);return t&&t.setDOM(n.cloneNode()),n}class zi extends Ge{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}zi.inline=new zi("span");zi.block=new zi("div");const gs=new class extends Ge{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class Vl{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Tt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Gr(t,t.contentDOM),this.updateInner([new ge(0,0,0,t.state.doc.length)],null)}update(t){var e;let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:f,toA:c})=>c<this.minWidthFrom||f>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((e=this.domChanged)===null||e===void 0)&&e.newSel?r=this.domChanged.newSel.head:!xp(t.changes,this.hasComposition)&&!t.selectionSet&&(r=t.state.selection.main.head));let s=r>-1?gp(this.view,t.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:f,to:c}=this.hasComposition;i=new ge(f,c,t.changes.mapPos(f,-1),t.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(gt.ie||gt.chrome)&&!s&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=yp(o,this.decorations,t.changes);l.length&&(i=ge.extendWithRanges(i,l));let h=vp(a,this.blockWrappers,t.changes);return h.length&&(i=ge.extendWithRanges(i,h)),s&&!i.some(f=>f.fromA<=s.range.fromA&&f.toA>=s.range.toA)&&(i=s.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,s),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(e||t.length){let o=this.tile,a=new fp(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(t,e),eo(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=gt.chrome||gt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(s),s&&(s.written||i.selectionRange.focusNode!=s.node||!this.tile.dom.contains(s.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.tile.children)s.isWidget()&&s.widget instanceof ms&&r.push(s.dom);i.updateGaps(r)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let i of e.effects)i.is(qh)&&(this.editContextFormatting=i.value)}updateSelection(t=!1,e=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,r=this.view.root.activeElement,s=r==i,o=!s&&!(this.view.state.facet(Ye)||i.tabIndex>-1)&&wn(i,this.view.observer.selectionRange)&&!(r&&i.contains(r));if(!(s||e||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h,f;if(l.empty?f=h=this.inlineDOMNearPos(l.anchor,l.assoc||1):(f=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),h=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),gt.gecko&&l.empty&&!this.hasComposition&&pp(h)){let g=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(g,h.node.childNodes[h.offset]||null)),h=f=new Ce(g,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||(!Sn(h.node,h.offset,c.anchorNode,c.anchorOffset)||!Sn(f.node,f.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{gt.android&&gt.chrome&&i.contains(c.focusNode)&&Sp(c.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let g=$i(this.view.root);if(g)if(l.empty){if(gt.gecko){let m=mp(h.node,h.offset);if(m&&m!=3){let u=(m==1?Th:Ch)(h.node,h.offset);u&&(h=new Ce(u.node,u.offset))}}g.collapse(h.node,h.offset),l.bidiLevel!=null&&g.caretBidiLevel!==void 0&&(g.caretBidiLevel=l.bidiLevel)}else if(g.extend){g.collapse(h.node,h.offset);try{g.extend(f.node,f.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([h,f]=[f,h]),m.setEnd(f.node,f.offset),m.setStart(h.node,h.offset),g.removeAllRanges(),g.addRange(m)}o&&this.view.root.activeElement==i&&(i.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,f)),this.impreciseAnchor=h.precise?null:new Ce(c.anchorNode,c.anchorOffset),this.impreciseHead=f.precise?null:new Ce(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Sn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,i=$i(t.root),{anchorNode:r,anchorOffset:s}=t.observer.selectionRange;if(!i||!e.empty||!e.assoc||!i.modify)return;let o=this.lineAt(e.head,e.assoc);if(!o)return;let a=o.posAtStart;if(e.head==a||e.head==a+o.length)return;let l=this.coordsAt(e.head,-1),h=this.coordsAt(e.head,1);if(!l||!h||l.bottom>h.top)return;let f=this.domAtPos(e.head+e.assoc,e.assoc);i.collapse(f.node,f.offset),i.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let c=t.observer.selectionRange;t.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=e.from&&i.collapse(r,s)}posFromDOM(t,e){let i=this.tile.nearest(t);if(!i)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let r=i.posAtStart;if(i.isComposite()){let s;if(t==i.dom)s=i.dom.childNodes[e];else{let o=Qe(t)==0?0:e==0?-1:1;for(;;){let a=t.parentNode;if(a==i.dom)break;o==0&&a.firstChild!=a.lastChild&&(t==a.firstChild?o=-1:o=1),t=a}o<0?s=t:s=t.nextSibling}if(s==i.dom.firstChild)return r;for(;s&&!qt.get(s);)s=s.nextSibling;if(!s)return r+i.length;for(let o=0,a=r;;o++){let l=i.children[o];if(l.dom==s)return a;a+=l.length+l.breakAfter}}else return i.isText()?t==i.dom?r+e:r+(e?i.length:0):r}domAtPos(t,e){let{tile:i,offset:r}=this.tile.resolveBlock(t,e);return i.isWidget()?i.domPosFor(t,e):i.domIn(r,e)}inlineDOMNearPos(t,e){let i,r=-1,s=!1,o,a=-1,l=!1;return this.tile.blockTiles((h,f)=>{if(h.isWidget()){if(h.flags&32&&f>=t)return!0;h.flags&16&&(s=!0)}else{let c=f+h.length;if(f<=t&&(i=h,r=t-f,s=c<t),c>=t&&!o&&(o=h,a=t-f,l=f>t),f>t&&o)return!0}}),!i&&!o?this.domAtPos(t,e):(s&&o?i=null:l&&i&&(o=null),i&&e<0||!o?i.domIn(r,e):o.domIn(a,e))}coordsAt(t,e){let{tile:i,offset:r}=this.tile.resolveBlock(t,e);return i.isWidget()?i.widget instanceof ms?null:i.coordsInWidget(r,e,!0):i.coordsIn(r,e)}lineAt(t,e){let{tile:i}=this.tile.resolveBlock(t,e);return i.isLine()?i:null}coordsForChar(t){let{tile:e,offset:i}=this.tile.resolveBlock(t,1);if(!e.isLine())return null;function r(s,o){if(s.isComposite())for(let a of s.children){if(a.length>=o){let l=r(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(s.isText()&&o<s.length){let a=pe(s.text,o);if(a==o)return null;let l=In(s.dom,o,a).getClientRects();for(let h=0;h<l.length;h++){let f=l[h];if(h==l.length-1||f.top<f.bottom&&f.left<f.right)return f}}return null}return r(e,i)}measureVisibleLineHeights(t){let e=[],{from:i,to:r}=t,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Nt.LTR,h=0,f=(c,g,m)=>{for(let u=0;u<c.children.length&&!(g>r);u++){let p=c.children[u],w=g+p.length,_=p.dom.getBoundingClientRect(),{height:R}=_;if(m&&!u&&(h+=_.top-m.top),p instanceof ai)w>i&&f(p,g,_);else if(g>=i&&(h>0&&e.push(-h),e.push(R+h),h=0,o)){let A=p.dom.lastChild,k=A?vn(A):[];if(k.length){let E=k[k.length-1],y=l?E.right-_.left:_.right-E.left;y>a&&(a=y,this.minWidth=s,this.minWidthFrom=g,this.minWidthTo=w)}}m&&u==c.children.length-1&&(h+=m.bottom-_.bottom),g=w+p.breakAfter}};return f(this.tile,0,null),e}textDirectionAt(t){let{tile:e}=this.tile.resolveBlock(t,1);return getComputedStyle(e.dom).direction=="rtl"?Nt.RTL:Nt.LTR}measureTextSize(){let t=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let h of o.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let f=vn(h.dom);if(f.length!=1)return;a+=f[0].width,l=f[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(t)return t;let e=document.createElement("div"),i,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(e);let o=vn(e.firstChild)[0];i=e.getBoundingClientRect().height,r=o&&o.width?o.width/27:7,s=o&&o.height?o.height:i,e.remove()}),{lineHeight:i,charWidth:r,textHeight:s}}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let i=0,r=0;;r++){let s=r==e.viewports.length?null:e.viewports[r],o=s?s.from-1:this.view.state.doc.length;if(o>i){let a=(e.lineBlockAt(o).bottom-e.lineBlockAt(i).top)/this.view.scaleY;t.push(Tt.replace({widget:new ms(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Tt.set(t)}updateDeco(){let t=1,e=this.view.state.facet(qr).map(s=>(this.dynamicDecorationMap[t++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Po).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[t++]=i,e.push(Mt.join(r))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(Gh).map(s=>typeof s=="function"?s(this.view):s)}scrollIntoView(t){if(t.isSnapshot){let h=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=h.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let h of this.view.state.facet($h))try{if(h(this.view,t.range,t))return!0}catch(f){Se(this.view.state,f,"scroll handler")}let{range:e}=t,i=this.coordsAt(e.head,e.empty?e.assoc:e.head>e.anchor?-1:1),r;if(!i)return;!e.empty&&(r=this.coordsAt(e.anchor,e.anchor>e.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Fo(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Vd(this.view.scrollDOM,o,e.head<e.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,a),-a),Math.max(Math.min(t.yMargin,l),-l),this.view.textDirection==Nt.LTR)}lineHasWidget(t){let e=i=>i.isWidget()||i.children.some(e);return e(this.tile.resolveBlock(t,1).tile)}destroy(){eo(this.tile)}}function eo(n,t){let e=t?.get(n);if(e!=1){e==null&&n.destroy();for(let i of n.children)eo(i,t)}}function pp(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Jh(n,t){let e=n.observer.selectionRange;if(!e.focusNode)return null;let i=Th(e.focusNode,e.focusOffset),r=Ch(e.focusNode,e.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=qt.get(r.node);if(!a||a.isText()&&a.text!=r.node.nodeValue)s=r;else if(n.docView.lastCompositionAfterCursor){let l=qt.get(i.node);!l||l.isText()&&l.text!=i.node.nodeValue||(s=r)}}if(n.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function gp(n,t,e){let i=Jh(n,e);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(i.from,i.to)!=a)return null;let l=t.invertedDesc;return{range:new ge(l.mapPos(s),l.mapPos(o),s,o),text:r}}function mp(n,t){return n.nodeType!=1?0:(t&&n.childNodes[t-1].contentEditable=="false"?1:0)|(t<n.childNodes.length&&n.childNodes[t].contentEditable=="false"?2:0)}let bp=class{constructor(){this.changes=[]}compareRange(t,e){Pi(t,e,this.changes)}comparePoint(t,e){Pi(t,e,this.changes)}boundChange(t){Pi(t,t,this.changes)}};function yp(n,t,e){let i=new bp;return Mt.compare(n,t,e,i),i.changes}class wp{constructor(){this.changes=[]}compareRange(t,e){Pi(t,e,this.changes)}comparePoint(){}boundChange(t){Pi(t,t,this.changes)}}function vp(n,t,e){let i=new wp;return Mt.compare(n,t,e,i),i.changes}function Sp(n,t){for(let e=n;e&&e!=t;e=e.assignedSlot||e.parentNode)if(e.nodeType==1&&e.contentEditable=="false")return!0;return!1}function xp(n,t){let e=!1;return t&&n.iterChangedRanges((i,r)=>{i<t.to&&r>t.from&&(e=!0)}),e}class ms extends Ge{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Ap(n,t,e=1){let i=n.charCategorizer(t),r=n.doc.lineAt(t),s=t-r.from;if(r.length==0)return bt.cursor(t);s==0?e=1:s==r.length&&(e=-1);let o=s,a=s;e<0?o=pe(r.text,s,!1):a=pe(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let h=pe(r.text,o,!1);if(i(r.text.slice(h,o))!=l)break;o=h}for(;a<r.length;){let h=pe(r.text,a);if(i(r.text.slice(a,h))!=l)break;a=h}return bt.range(o+r.from,a+r.from)}function Ep(n,t,e,i,r){let s=Math.round((i-t.left)*n.defaultCharacterWidth);if(n.lineWrapping&&e.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((r-e.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(e.from,e.to);return e.from+Cr(o,s,n.state.tabSize)}function io(n,t,e){let i=n.lineBlockAt(t);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>t)break;if(!(s.to<t)){if(s.from<t&&s.to>t)return s;(!r||s.type==Kt.Text&&(r.type!=s.type||(e<0?s.from<t:s.to>t)))&&(r=s)}}return r||i}return i}function kp(n,t,e,i){let r=io(n,t.head,t.assoc||-1),s=!i||r.type!=Kt.Text||!(n.lineWrapping||r.widgetLineBreaks)?null:n.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(r.from),l=n.posAtCoords({x:e==(a==Nt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return bt.cursor(l,e?-1:1)}return bt.cursor(e?r.to:r.from,e?-1:1)}function $l(n,t,e,i){let r=n.state.doc.lineAt(t.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let a=t,l=null;;){let h=Nh(r,s,o,a,e),f=Lh;if(!h){if(r.number==(e?n.state.doc.lines:1))return a;f=`
`,r=n.state.doc.line(r.number+(e?1:-1)),s=n.bidiSpans(r),h=n.visualLineSide(r,!e)}if(l){if(!l(f))return a}else{if(!i)return h;l=i(f)}a=h}}function _p(n,t,e){let i=n.state.charCategorizer(t),r=i(e);return s=>{let o=i(s);return r==je.Space&&(r=o),r==o}}function Tp(n,t,e,i){let r=t.head,s=e?1:-1;if(r==(e?n.state.doc.length:0))return bt.cursor(r,t.assoc);let o=t.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(r,t.assoc||-1),f=n.documentTop;if(h)o==null&&(o=h.left-l.left),a=s<0?h.top:h.bottom;else{let u=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(r-u.from))),a=(s<0?u.top:u.bottom)+f}let c=l.left+o,g=i??n.viewState.heightOracle.textHeight>>1,m=no(n,{x:c,y:a+g*s},!1,s);return bt.cursor(m.pos,m.assoc,void 0,o)}function xn(n,t,e){for(;;){let i=0;for(let r of n)r.between(t-1,t+1,(s,o,a)=>{if(t>s&&t<o){let l=i||e||(t-s<o-t?-1:1);t=l<0?s:o,i=l}});if(!i)return t}}function Qh(n,t){let e=null;for(let i=0;i<t.ranges.length;i++){let r=t.ranges[i],s=null;if(r.empty){let o=xn(n,r.from,0);o!=r.from&&(s=bt.cursor(o,-1))}else{let o=xn(n,r.from,-1),a=xn(n,r.to,1);(o!=r.from||a!=r.to)&&(s=bt.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(e||(e=t.ranges.slice()),e[i]=s)}return e?bt.create(e,t.mainIndex):t}function bs(n,t,e){let i=xn(n.state.facet(Vn).map(r=>r(n)),e.from,t.head>e.from?-1:1);return i==e.from?e:bt.cursor(i,i<e.from?1:-1)}class Ue{constructor(t,e){this.pos=t,this.assoc=e}}function no(n,t,e,i){let r=n.contentDOM.getBoundingClientRect(),s=r.top+n.viewState.paddingTop,{x:o,y:a}=t,l=a-s,h;for(;;){if(l<0)return new Ue(0,1);if(l>n.viewState.docHeight)return new Ue(n.state.doc.length,-1);if(h=n.elementAtHeight(l),i==null)break;if(h.type==Kt.Text){let g=n.docView.coordsAt(i<0?h.from:h.to,i);if(g&&(i<0?g.top<=l+s:g.bottom>=l+s))break}let c=n.viewState.heightOracle.textHeight/2;l=i>0?h.bottom+c:h.top-c}if(n.viewport.from>=h.to||n.viewport.to<=h.from){if(e)return null;if(h.type==Kt.Text){let c=Ep(n,r,h,o,a);return new Ue(c,c==h.from?1:-1)}}if(h.type!=Kt.Text)return l<(h.top+h.bottom)/2?new Ue(h.from,1):new Ue(h.to,-1);let f=n.docView.lineAt(h.from,2);return(!f||f.length!=h.length)&&(f=n.docView.lineAt(h.from,-2)),Zh(n,f,h.from,o,a)}function Zh(n,t,e,i,r){let s=-1,o=null,a=1e9,l=1e9,h=r,f=r,c=(g,m)=>{for(let u=0;u<g.length;u++){let p=g[u];if(p.top==p.bottom)continue;let w=p.left>i?p.left-i:p.right<i?i-p.right:0,_=p.top>r?p.top-r:p.bottom<r?r-p.bottom:0;p.top<=f&&p.bottom>=h&&(h=Math.min(p.top,h),f=Math.max(p.bottom,f),_=0),(s<0||(_-l||w-a)<0)&&(s>=0&&l&&a<w&&o.top<=f-2&&o.bottom>=h+2?l=0:(s=m,a=w,l=_,o=p))}};if(t.isText()){for(let m=0;m<t.length;){let u=pe(t.text,m);if(c(In(t.dom,m,u).getClientRects(),m),!a&&!l)break;m=u}return i>(o.left+o.right)/2==(ql(n,s+e)==Nt.LTR)?new Ue(e+pe(t.text,s),-1):new Ue(e+s,1)}else{if(!t.length)return new Ue(e,1);for(let p=0;p<t.children.length;p++){let w=t.children[p];if(w.flags&48)continue;let _=(w.dom.nodeType==1?w.dom:In(w.dom,0,w.length)).getClientRects();if(c(_,p),!a&&!l)break}let g=t.children[s],m=t.posBefore(g,e);return g.isComposite()||g.isText()?Zh(n,g,m,Math.max(o.left,Math.min(o.right,i)),r):i>(o.left+o.right)/2==(ql(n,s+e)==Nt.LTR)?new Ue(m+g.length,-1):new Ue(m,1)}}function ql(n,t){let e=n.state.doc.lineAt(t);return n.bidiSpans(e)[He.find(n.bidiSpans(e),t-e.from,-1,1)].dir}const cn="ï¿¿";class Cp{constructor(t,e){this.points=t,this.view=e,this.text="",this.lineSeparator=e.state.facet(Bt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=cn}readRange(t,e){if(!t)return this;let i=t.parentNode;for(let r=t;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=qt.get(r),a=r.nextSibling;if(a==e){o?.breakAfter&&!a&&i!=this.view.contentDOM&&this.lineBreak();break}let l=qt.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:Rr(r))||Rr(a)&&(r.nodeName!="BR"||o?.isWidget())&&this.text.length>s)&&!Rp(a,e)&&this.lineBreak(),r=a}return this.findPointBefore(i,e),this}readTextNode(t){let e=t.nodeValue;for(let i of this.points)i.node==t&&(i.pos=this.text.length+Math.min(i.offset,e.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=e.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(e))&&(s=a.index,o=a[0].length),this.append(e.slice(i,s<0?e.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==t&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(t){let e=qt.get(t),i=e&&e.overrideDOMText;if(i!=null){this.findPointInside(t,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let i of this.points)i.node==t&&t.childNodes[i.offset]==e&&(i.pos=this.text.length)}findPointInside(t,e){for(let i of this.points)(t.nodeType==3?i.node==t:t.contains(i.node))&&(i.pos=this.text.length+(Mp(t,i.node,i.offset)?e:0))}}function Mp(n,t,e){for(;;){if(!t||e<Qe(t))return!1;if(t==n)return!0;e=ci(t)+1,t=t.parentNode}}function Rp(n,t){let e;for(;!(n==t||!n);n=n.nextSibling){let i=qt.get(n);if(!i?.isWidget())return!1;i&&(e||(e=[])).push(i)}if(e)for(let i of e){let r=i.overrideDOMText;if(r?.length)return!1}return!0}class zl{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class Ip{constructor(t,e,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:s,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=tf(t.docView.tile,e,i,0))){let a=s||o?[]:Op(t),l=new Cp(a,t);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Lp(a,this.bounds.from)}else{let a=t.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Xs(t.contentDOM,a.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Xs(t.contentDOM,a.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(a.anchorNode,a.anchorOffset),f=t.viewport;if((gt.ios||gt.chrome)&&t.state.selection.main.empty&&l!=h&&(f.from>0||f.to<t.state.doc.length)){let c=Math.min(l,h),g=Math.max(l,h),m=f.from-c,u=f.to-g;(m==0||m==1||c==0)&&(u==0||u==-1||g==t.state.doc.length)&&(l=0,h=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(bt.range(h,l)):this.newSel=bt.single(h,l)}}}function tf(n,t,e,i){if(n.isComposite()){let r=-1,s=-1,o=-1,a=-1;for(let l=0,h=i,f=i;l<n.children.length;l++){let c=n.children[l],g=h+c.length;if(h<t&&g>e)return tf(c,t,e,h);if(g>=t&&r==-1&&(r=l,s=h),h>e&&c.dom.parentNode==n.dom){o=l,a=f;break}f=g,h=g+c.breakAfter}return{from:s,to:a<0?i+n.length:a,startDOM:(r?n.children[r-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:o<n.children.length&&o>=0?n.children[o].dom:null}}else return n.isText()?{from:i,to:i+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function ef(n,t){let e,{newSel:i}=t,r=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:a}=t.bounds,l=r.from,h=null;(s===8||gt.android&&t.text.length<a-o)&&(l=r.to,h="end");let f=nf(n.state.doc.sliceString(o,a,cn),t.text,l-o,h);f&&(gt.chrome&&s==13&&f.toB==f.from+2&&t.text.slice(f.from,f.toB)==cn+cn&&f.toB--,e={from:o+f.from,to:o+f.toA,insert:Ot.of(t.text.slice(f.from,f.toB).split(cn))})}else i&&(!n.hasFocus&&n.state.facet(Ye)||Or(i,r))&&(i=null);if(!e&&!i)return!1;if(!e&&t.typeOver&&!r.empty&&i&&i.main.empty?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:(gt.mac||gt.android)&&e&&e.from==e.to&&e.from==r.head-1&&/^\. ?$/.test(e.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&e.insert.length==2&&(i=bt.single(i.main.anchor-1,i.main.head-1)),e={from:e.from,to:e.to,insert:Ot.of([e.insert.toString().replace("."," ")])}):e&&e.from>=r.from&&e.to<=r.to&&(e.from!=r.from||e.to!=r.to)&&r.to-r.from-(e.to-e.from)<=4?e={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,e.from).append(e.insert).append(n.state.doc.slice(e.to,r.to))}:n.state.doc.lineAt(r.from).to<r.to&&n.docView.lineHasWidget(r.to)&&n.inputState.insertingTextAt>Date.now()-50?e={from:r.from,to:r.to,insert:n.state.toText(n.inputState.insertingText)}:gt.chrome&&e&&e.from==e.to&&e.from==r.head&&e.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=bt.single(i.main.anchor-1,i.main.head-1)),e={from:r.from,to:r.to,insert:Ot.of([" "])}),e)return Wo(n,e,i,s);if(i&&!Or(i,r)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=Qh(n.state.facet(Vn).map(l=>l(n)),i))),n.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function Wo(n,t,e,i=-1){if(gt.ios&&n.inputState.flushIOSKey(t))return!0;let r=n.state.selection.main;if(gt.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&n.state.sliceDoc(t.from,r.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Fi(n.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&t.insert.length==0||i==8&&t.insert.length<t.to-t.from&&t.to>r.head)&&Fi(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&Fi(n.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=Bp(n,t,e));return n.state.facet(Uh).some(l=>l(n,t.from,t.to,s,a))||n.dispatch(a()),!0}function Bp(n,t,e){let i,r=n.state,s=r.selection.main,o=-1;if(t.from==t.to&&t.from<s.from||t.from>s.to){let l=t.from<s.from?-1:1,h=l<0?s.from:s.to,f=xn(r.facet(Vn).map(c=>c(n)),h,l);t.from==f&&(o=f)}if(o>-1)i={changes:t,selection:bt.cursor(t.from+t.insert.length,-1)};else if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!e||e.main.empty&&e.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let l=s.from<t.from?r.sliceDoc(s.from,t.from):"",h=s.to>t.to?r.sliceDoc(t.to,s.to):"";i=r.replaceSelection(n.state.toText(l+t.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let l=r.changes(t),h=e&&e.main.to<=l.newLength?e.main:void 0;if(r.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&t.to<=s.to+10&&t.to>=s.to-10){let f=n.state.sliceDoc(t.from,t.to),c,g=e&&Jh(n,e.main.head);if(g){let u=t.insert.length-(t.to-t.from);c={from:g.from,to:g.to-u}}else c=n.state.doc.lineAt(s.head);let m=s.to-t.to;i=r.changeByRange(u=>{if(u.from==s.from&&u.to==s.to)return{changes:l,range:h||u.map(l)};let p=u.to-m,w=p-f.length;if(n.state.sliceDoc(w,p)!=f||p>=c.from&&w<=c.to)return{range:u};let _=r.changes({from:w,to:p,insert:t.insert}),R=u.to-s.to;return{changes:_,range:h?bt.range(Math.max(0,h.anchor+R),Math.max(0,h.head+R)):u.map(_)}})}else i={changes:l,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:a,scrollIntoView:!0})}function nf(n,t,e,i){let r=Math.min(n.length,t.length),s=0;for(;s<r&&n.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&n.length==t.length)return null;let o=n.length,a=t.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));e-=o+l-s}if(o<s&&n.length<t.length){let l=e<=s&&e>=o?s-e:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=e<=s&&e>=a?s-e:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Op(n){let t=[];if(n.root.activeElement!=n.contentDOM)return t;let{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return e&&(t.push(new zl(e,i)),(r!=e||s!=i)&&t.push(new zl(r,s))),t}function Lp(n,t){if(n.length==0)return null;let e=n[0].pos,i=n.length==2?n[1].pos:e;return e>-1&&i>-1?bt.single(e+t,i+t):null}function Or(n,t){return t.head==n.main.head&&t.anchor==n.main.anchor}class Np{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,gt.safari&&t.contentDOM.addEventListener("input",()=>null),gt.gecko&&Xp(t.contentDOM.ownerDocument)}handleEvent(t){!Vp(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,e){let i=this.handlers[t];if(i){for(let r of i.observers)r(this.view,e);for(let r of i.handlers){if(e.defaultPrevented)break;if(r(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Dp(t),i=this.handlers,r=this.view.contentDOM;for(let s in e)if(s!="scroll"){let o=!e[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!e[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&sf.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),gt.android&&gt.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return gt.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((e=rf.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||Pp.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=e||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let e=this.pendingIOSKey;return!e||e.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,Fi(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:gt.safari&&!gt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Gl(n,t){return(e,i)=>{try{return t.call(n,i,e)}catch(r){Se(e.state,r)}}}function Dp(n){let t=Object.create(null);function e(i){return t[i]||(t[i]={observers:[],handlers:[]})}for(let i of n){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&e(a).handlers.push(Gl(i.value,l))}if(o)for(let a in o){let l=o[a];l&&e(a).observers.push(Gl(i.value,l))}}for(let i in Ie)e(i).handlers.push(Ie[i]);for(let i in Ae)e(i).observers.push(Ae[i]);return t}const rf=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Pp="dthko",sf=[16,17,18,20,91,92,224,225],Zn=6;function tr(n){return Math.max(0,n)*.7+8}function Fp(n,t){return Math.max(Math.abs(n.clientX-t.clientX),Math.abs(n.clientY-t.clientY))}class Wp{constructor(t,e,i,r){this.view=t,this.startEvent=e,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=$d(t.contentDOM),this.atoms=t.state.facet(Vn).map(o=>o(t));let s=t.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Bt.allowMultipleSelections)&&Up(t,e),this.dragging=Hp(t,e)&&af(e)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Fp(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let e=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Fo(this.view);t.clientX-l.left<=r+Zn?e=-tr(r-t.clientX):t.clientX+l.right>=o-Zn&&(e=tr(t.clientX-o)),t.clientY-l.top<=s+Zn?i=-tr(s-t.clientY):t.clientY+l.bottom>=a-Zn&&(i=tr(t.clientY-a)),this.setScrollSpeed(e,i)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:e}=this,i=Qh(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!i.eq(e.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Up(n,t){let e=n.state.facet(Dh);return e.length?e[0](t):gt.mac?t.metaKey:t.ctrlKey}function jp(n,t){let e=n.state.facet(Ph);return e.length?e[0](t):gt.mac?!t.altKey:!t.ctrlKey}function Hp(n,t){let{main:e}=n.state.selection;if(e.empty)return!1;let i=$i(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=t.clientX&&o.right>=t.clientX&&o.top<=t.clientY&&o.bottom>=t.clientY)return!0}return!1}function Vp(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target,i;e!=n.contentDOM;e=e.parentNode)if(!e||e.nodeType==11||(i=qt.get(e))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(t))return!1;return!0}const Ie=Object.create(null),Ae=Object.create(null),of=gt.ie&&gt.ie_version<15||gt.ios&&gt.webkit_version<604;function $p(n){let t=n.dom.parentNode;if(!t)return;let e=t.appendChild(document.createElement("textarea"));e.style.cssText="position: fixed; left: -10000px; top: 10px",e.focus(),setTimeout(()=>{n.focus(),e.remove(),lf(n,e.value)},50)}function Kr(n,t,e){for(let i of n.facet(t))e=i(e,n);return e}function lf(n,t){t=Kr(n.state,No,t);let{state:e}=n,i,r=1,s=e.toText(t),o=s.lines==e.selection.ranges.length;if(ro!=null&&e.selection.ranges.every(l=>l.empty)&&ro==s.toString()){let l=-1;i=e.changeByRange(h=>{let f=e.doc.lineAt(h.from);if(f.from==l)return{range:h};l=f.from;let c=e.toText((o?s.line(r++).text:t)+e.lineBreak);return{changes:{from:f.from,insert:c},range:bt.cursor(h.from+c.length)}})}else o?i=e.changeByRange(l=>{let h=s.line(r++);return{changes:{from:l.from,to:l.to,insert:h.text},range:bt.cursor(l.from+h.length)}}):i=e.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ae.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ie.keydown=(n,t)=>(n.inputState.setSelectionOrigin("select"),t.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ae.touchstart=(n,t)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ae.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ie.mousedown=(n,t)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let e=null;for(let i of n.state.facet(Fh))if(e=i(n,t),e)break;if(!e&&t.button==0&&(e=zp(n,t)),e){let i=!n.hasFocus;n.inputState.startMouseSelection(new Wp(n,t,e,i)),i&&n.observer.ignore(()=>{kh(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let r=n.inputState.mouseSelection;if(r)return r.start(t),r.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function Kl(n,t,e,i){if(i==1)return bt.cursor(t,e);if(i==2)return Ap(n.state,t,e);{let r=n.docView.lineAt(t,e),s=n.state.doc.lineAt(r?r.posAtEnd:t),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,bt.range(o,a)}}const qp=gt.ie&&gt.ie_version<=11;let Yl=null,Xl=0,Jl=0;function af(n){if(!qp)return n.detail;let t=Yl,e=Jl;return Yl=n,Jl=Date.now(),Xl=!t||e>Date.now()-400&&Math.abs(t.clientX-n.clientX)<2&&Math.abs(t.clientY-n.clientY)<2?(Xl+1)%3:1}function zp(n,t){let e=n.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),i=af(t),r=n.state.selection;return{update(s){s.docChanged&&(e.pos=s.changes.mapPos(e.pos),r=r.map(s.changes))},get(s,o,a){let l=n.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),h,f=Kl(n,l.pos,l.assoc,i);if(e.pos!=l.pos&&!o){let c=Kl(n,e.pos,e.assoc,i),g=Math.min(c.from,f.from),m=Math.max(c.to,f.to);f=g<f.from?bt.range(g,m):bt.range(m,g)}return o?r.replaceRange(r.main.extend(f.from,f.to)):a&&i==1&&r.ranges.length>1&&(h=Gp(r,l.pos))?h:a?r.addRange(f):bt.create([f])}}}function Gp(n,t){for(let e=0;e<n.ranges.length;e++){let{from:i,to:r}=n.ranges[e];if(i<=t&&r>=t)return bt.create(n.ranges.slice(0,e).concat(n.ranges.slice(e+1)),n.mainIndex==e?0:n.mainIndex-(n.mainIndex>e?1:0))}return null}Ie.dragstart=(n,t)=>{let{selection:{main:e}}=n.state;if(t.target.draggable){let r=n.docView.tile.nearest(t.target);if(r&&r.isWidget()){let s=r.posAtStart,o=s+r.length;(s>=e.to||o<=e.from)&&(e=bt.range(s,o))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=e,t.dataTransfer&&(t.dataTransfer.setData("Text",Kr(n.state,Do,n.state.sliceDoc(e.from,e.to))),t.dataTransfer.effectAllowed="copyMove"),!1};Ie.dragend=n=>(n.inputState.draggedContent=null,!1);function Ql(n,t,e,i){if(e=Kr(n.state,No,e),!e)return;let r=n.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=n.inputState,o=i&&s&&jp(n,t)?{from:s.from,to:s.to}:null,a={from:r,insert:e},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ie.drop=(n,t)=>{if(!t.dataTransfer)return!1;if(n.state.readOnly)return!0;let e=t.dataTransfer.files;if(e&&e.length){let i=Array(e.length),r=0,s=()=>{++r==e.length&&Ql(n,t,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<e.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(e[o])}return!0}else{let i=t.dataTransfer.getData("Text");if(i)return Ql(n,t,i,!0),!0}return!1};Ie.paste=(n,t)=>{if(n.state.readOnly)return!0;n.observer.flush();let e=of?null:t.clipboardData;return e?(lf(n,e.getData("text/plain")||e.getData("text/uri-list")),!0):($p(n),!1)};function Kp(n,t){let e=n.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function Yp(n){let t=[],e=[],i=!1;for(let r of n.selection.ranges)r.empty||(t.push(n.sliceDoc(r.from,r.to)),e.push(r));if(!t.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(t.push(o.text),e.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Kr(n,Do,t.join(n.lineBreak)),ranges:e,linewise:i}}let ro=null;Ie.copy=Ie.cut=(n,t)=>{let e=$i(n.root);if(e&&!wn(n.contentDOM,e))return!1;let{text:i,ranges:r,linewise:s}=Yp(n.state);if(!i&&!s)return!1;ro=s?i:null,t.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=of?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",i),!0):(Kp(n,i),!1)};const hf=Ti.define();function ff(n,t){let e=[];for(let i of n.facet(jh)){let r=i(n,t);r&&e.push(r)}return e.length?n.update({effects:e,annotations:hf.of(!0)}):null}function uf(n){setTimeout(()=>{let t=n.hasFocus;if(t!=n.inputState.notifiedFocused){let e=ff(n.state,t);e?n.dispatch(e):n.update([])}},10)}Ae.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),uf(n)};Ae.blur=n=>{n.observer.clearSelectionRange(),uf(n)};Ae.compositionstart=Ae.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ae.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,gt.chrome&&gt.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ae.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ie.beforeinput=(n,t)=>{var e,i;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(n.inputState.insertingText=t.data,n.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&n.observer.editContext){let s=(e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"),o=t.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),h=n.posAtDOM(a.endContainer,a.endOffset);return Wo(n,{from:l,to:h,insert:n.state.toText(s)},null),!0}}let r;if(gt.chrome&&gt.android&&(r=rf.find(s=>s.inputType==t.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return gt.ios&&t.inputType=="deleteContentForward"&&n.observer.flushSoon(),gt.safari&&t.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ae.compositionend(n,t),20),!1};const Zl=new Set;function Xp(n){Zl.has(n)||(Zl.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const ta=["pre-wrap","normal","pre-line","break-spaces"];let ki=!1;function so(){ki=!1}class cf{constructor(t){this.lineWrapping=t,this.doc=Ot.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let i=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((e-t-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return ta.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let i=0;i<t.length;i++){let r=t[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(e=!0,this.heightSamples[Math.floor(r*10)]=!0)}return e}refresh(t,e,i,r,s,o){let a=ta.indexOf(t)>-1,l=Math.abs(e-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=e,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let h=0;h<o.length;h++){let f=o[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return l}}class df{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class ve{constructor(t,e,i,r,s){this.from=t,this.length=e,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Kt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof xi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new ve(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Pt=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Pt||(Pt={}));const br=.001;class ne{constructor(t,e,i=2){this.length=t,this.height=e,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>br&&(ki=!0),this.height=t)}replace(t,e,i){return ne.of(i)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:f,toB:c}=r[a],g=s.lineAt(l,Pt.ByPosNoHeight,i.setDoc(e),0,0),m=g.to>=h?g:s.lineAt(h,Pt.ByPosNoHeight,i,0,0);for(c+=m.to-h,h=m.to;a>0&&g.from<=r[a-1].toA;)l=r[a-1].fromA,f=r[a-1].fromB,a--,l<g.from&&(g=s.lineAt(l,Pt.ByPosNoHeight,i,0,0));f+=g.from-l,l=g.from;let u=Uo.build(i.setDoc(o),t,f,c);s=Lr(s,s.replace(l,h,u))}return s.updateHeight(i,0)}static empty(){return new de(0,0,0)}static of(t){if(t.length==1)return t[0];let e=0,i=t.length,r=0,s=0;for(;;)if(e==i)if(r>s*2){let a=t[e-1];a.break?t.splice(--e,1,a.left,null,a.right):t.splice(--e,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=t[i];a.break?t.splice(i,1,a.left,null,a.right):t.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=t[e++];a&&(r+=a.size)}else{let a=t[--i];a&&(s+=a.size)}let o=0;return t[e-1]==null?(o=1,e--):t[e]==null&&(o=1,i++),new Qp(ne.of(t.slice(0,e)),o,ne.of(t.slice(i)))}}function Lr(n,t){return n==t?n:(n.constructor!=t.constructor&&(ki=!0),t)}ne.prototype.size=1;const Jp=Tt.replace({});class pf extends ne{constructor(t,e,i){super(t,e),this.deco=i,this.spaceAbove=0}mainBlock(t,e){return new ve(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,e,i,r){return this.spaceAbove&&t<i+this.spaceAbove?new ve(r,0,i,this.spaceAbove,Jp):this.mainBlock(i,r)}lineAt(t,e,i,r,s){let o=this.mainBlock(r,s);return this.spaceAbove?this.blockAt(0,i,r,s).join(o):o}forEachLine(t,e,i,r,s,o){t<=s+this.length&&e>=s&&o(this.lineAt(0,Pt.ByPos,i,r,s))}setMeasuredHeight(t){let e=t.heights[t.index++];e<0?(this.spaceAbove=-e,e=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(e)}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class de extends pf{constructor(t,e,i){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(t,e){return new ve(e,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,e,i){let r=i[0];return i.length==1&&(r instanceof de||r instanceof Xt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Xt?r=new de(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):ne.of(i)}updateHeight(t,e=0,i=!1,r){return r&&r.from<=e&&r.more?this.setMeasuredHeight(r):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xt extends ne{constructor(t){super(t,0)}heightMetrics(t,e){let i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,s=r-i+1,o,a=0;if(t.lineWrapping){let l=Math.min(this.height,t.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(t,e,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(e,r);if(e.lineWrapping){let h=r+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-i)/this.height))*this.length)),f=e.doc.lineAt(h),c=a+f.length*l,g=Math.max(i,t-c/2);return new ve(f.from,f.length,g,c,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((t-i)/a))),{from:f,length:c}=e.doc.line(s+h);return new ve(f,c,i+a*h,a,0)}}lineAt(t,e,i,r,s){if(e==Pt.ByHeight)return this.blockAt(t,i,r,s);if(e==Pt.ByPosNoHeight){let{from:m,to:u}=i.doc.lineAt(t);return new ve(m,u-m,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),h=i.doc.lineAt(t),f=a+h.length*l,c=h.number-o,g=r+a*c+l*(h.from-s-c);return new ve(h.from,h.length,Math.max(r,Math.min(g,r+this.height-f)),f,0)}forEachLine(t,e,i,r,s,o){t=Math.max(t,s),e=Math.min(e,s+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(i,s);for(let f=t,c=r;f<=e;){let g=i.doc.lineAt(f);if(f==t){let u=g.number-a;c+=l*u+h*(t-s-u)}let m=l+h*g.length;o(new ve(g.from,g.length,c,m,0)),c+=m,f=g.to+1}}replace(t,e,i){let r=this.length-e;if(r>0){let s=i[i.length-1];s instanceof Xt?i[i.length-1]=new Xt(s.length+r):i.push(null,new Xt(r-1))}if(t>0){let s=i[0];s instanceof Xt?i[0]=new Xt(t+s.length):i.unshift(new Xt(t-1),null)}return ne.of(i)}decomposeLeft(t,e){e.push(new Xt(t-1),null)}decomposeRight(t,e){e.push(null,new Xt(this.length-t-1))}updateHeight(t,e=0,i=!1,r){let s=e+this.length;if(r&&r.from<=e+this.length&&r.more){let o=[],a=Math.max(e,r.from),l=-1;for(r.from>e&&o.push(new Xt(r.from-e-1).updateHeight(t,e));a<=s&&r.more;){let f=t.doc.lineAt(a).length;o.length&&o.push(null);let c=r.heights[r.index++],g=0;c<0&&(g=-c,c=r.heights[r.index++]),l==-1?l=c:Math.abs(c-l)>=br&&(l=-2);let m=new de(f,c,g);m.outdated=!1,o.push(m),a+=f+1}a<=s&&o.push(null,new Xt(s-a).updateHeight(t,a));let h=ne.of(o);return(l<0||Math.abs(h.height-this.height)>=br||Math.abs(l-this.heightMetrics(t,e).perLine)>=br)&&(ki=!0),Lr(this,h)}else(i||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Qp extends ne{constructor(t,e,i){super(t.length+e+i.length,t.height+i.height,e|(t.outdated||i.outdated?2:0)),this.left=t,this.right=i,this.size=t.size+i.size}get break(){return this.flags&1}blockAt(t,e,i,r){let s=i+this.left.height;return t<s?this.left.blockAt(t,e,i,r):this.right.blockAt(t,e,s,r+this.left.length+this.break)}lineAt(t,e,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=e==Pt.ByHeight?t<o:t<a,h=l?this.left.lineAt(t,e,i,r,s):this.right.lineAt(t,e,i,o,a);if(this.break||(l?h.to<a:h.from>a))return h;let f=e==Pt.ByPosNoHeight?Pt.ByPosNoHeight:Pt.ByPos;return l?h.join(this.right.lineAt(a,f,i,o,a)):this.left.lineAt(a,f,i,r,s).join(h)}forEachLine(t,e,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,i,r,s,o),e>=l&&this.right.forEachLine(t,e,i,a,l,o);else{let h=this.lineAt(l,Pt.ByPos,i,r,s);t<h.from&&this.left.forEachLine(t,h.from-1,i,r,s,o),h.to>=t&&h.from<=e&&o(h),e>h.to&&this.right.forEachLine(h.to+1,e,i,a,l,o)}}replace(t,e,i){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,i),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,i));let s=[];t>0&&this.decomposeLeft(t,s);let o=s.length;for(let a of i)s.push(a);if(t>0&&ea(s,o-1),e<this.length){let a=s.length;this.decomposeRight(e,s),ea(s,a)}return ne.of(s)}decomposeLeft(t,e){let i=this.left.length;if(t<=i)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(i++,t>=i&&e.push(null)),t>i&&this.right.decomposeLeft(t-i,e)}decomposeRight(t,e){let i=this.left.length,r=i+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<i&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?ne.of(this.break?[t,null,e]:[t,e]):(this.left=Lr(this.left,t),this.right=Lr(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,i=!1,r){let{left:s,right:o}=this,a=e+s.length+this.break,l=null;return r&&r.from<=e+s.length&&r.more?l=s=s.updateHeight(t,e,i,r):s.updateHeight(t,e,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(t,a,i,r):o.updateHeight(t,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ea(n,t){let e,i;n[t]==null&&(e=n[t-1])instanceof Xt&&(i=n[t+1])instanceof Xt&&n.splice(t-1,3,new Xt(e.length+1+i.length))}const Zp=5;class Uo{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let i=Math.min(e,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof de?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new de(i-this.pos,-1,0)),this.writtenTo=i,e>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,i){if(t<e||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=e-t;i.block?this.addBlock(new pf(o,r,i)):(o||s||r>=Zp)&&this.addLineDeco(r,s,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new de(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,e){let i=new Xt(e-t);return this.oracle.doc.lineAt(t).to==e&&(i.flags|=4),i}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof de)return t;let e=new de(0,-1,0);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,t),r.breaks+=e,this.writtenTo=this.pos=this.pos+i}finish(t){let e=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(e instanceof de)&&!this.isCovered?this.nodes.push(new de(0,-1,0)):(this.writtenTo<this.pos||e==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=t;for(let r of this.nodes)r instanceof de&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(t,e,i,r){let s=new Uo(i,t);return Mt.spans(e,i,r,s,0),s.finish(i)}}function tg(n,t,e){let i=new eg;return Mt.compare(n,t,e,i,0),i.changes}class eg{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,i,r){(t<e||i&&i.heightRelevant||r&&r.heightRelevant)&&Pi(t,e,this.changes,5)}}function ig(n,t){let e=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,e.left),o=Math.min(r.innerWidth,e.right),a=Math.max(0,e.top),l=Math.min(r.innerHeight,e.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let f=h,c=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&c.overflow!="visible"){let g=f.getBoundingClientRect();s=Math.max(s,g.left),o=Math.min(o,g.right),a=Math.max(a,g.top),l=Math.min(h==n.parentNode?r.innerHeight:l,g.bottom)}h=c.position=="absolute"||c.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-e.left,right:Math.max(s,o)-e.left,top:a-(e.top+t),bottom:Math.max(a,l)-(e.top+t)}}function ng(n){let t=n.getBoundingClientRect(),e=n.ownerDocument.defaultView||window;return t.left<e.innerWidth&&t.right>0&&t.top<e.innerHeight&&t.bottom>0}function rg(n,t){let e=n.getBoundingClientRect();return{left:0,right:e.right-e.left,top:t,bottom:e.bottom-(e.top+t)}}class ys{constructor(t,e,i,r){this.from=t,this.to=e,this.size=i,this.displaySize=r}static same(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(t,e){return Tt.replace({widget:new sg(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class sg extends Ge{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class ia{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=na,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Nt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet($r).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new cf(e),this.stateDeco=ra(t),this.heightMap=ne.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle.setDoc(t.doc),[new ge(0,0,0,t.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Tt.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let i=0;i<=1;i++){let r=i?e.head:e.anchor;if(!t.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);t.push(new er(s,o))}}return this.viewports=t.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?na:new jo(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(dn(t,this.scaler))})}update(t,e=null){this.state=t.state;let i=this.stateDeco;this.stateDeco=ra(this.state);let r=t.changedRanges,s=ge.extendWithRanges(r,tg(i,this.stateDeco,t?t.changes:zt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);so(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||ki)&&(t.flags|=2),a?(this.scrollAnchorPos=t.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<l.from||e.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,e));let h=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,t.flags|=this.updateForViewport(),(h||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&(t.selectionSet||t.focusChanged)&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Vh)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,i=window.getComputedStyle(e),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Nt.RTL:Nt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s)||this.mustMeasureContent,a=e.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,f=0;if(a.width&&a.height){let{scaleX:k,scaleY:E}=Eh(e,a);(k>.005&&Math.abs(this.scaleX-k)>.005||E>.005&&Math.abs(this.scaleY-E)>.005)&&(this.scaleX=k,this.scaleY=E,h|=16,o=l=!0)}let c=(parseInt(i.paddingTop)||0)*this.scaleY,g=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=g)&&(this.paddingTop=c,this.paddingBottom=g,h|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=16);let m=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=_h(t.scrollDOM);let u=(this.printing?rg:ig)(e,this.paddingTop),p=u.top-this.pixelViewport.top,w=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(l=!0)),!this.inView&&!this.scrollTarget&&!ng(t.dom))return 0;let R=a.width;if((this.contentDOMWidth!=R||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=t.scrollDOM.clientHeight,h|=16),l){let k=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(R-this.contentDOMWidth)>r.charWidth){let{lineHeight:E,charWidth:y,textHeight:S}=t.docView.measureTextSize();o=E>0&&r.refresh(s,E,y,S,Math.max(5,R/y),k),o&&(t.docView.minWidth=0,h|=16)}p>0&&w>0?f=Math.max(p,w):p<0&&w<0&&(f=Math.min(p,w)),so();for(let E of this.viewports){let y=E.from==this.viewport.from?k:t.docView.measureVisibleLineHeights(E);this.heightMap=(o?ne.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle,[new ge(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new df(E.from,y))}ki&&(h|=2)}let A=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let i=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new er(r.lineAt(o-i*1e3,Pt.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,Pt.ByHeight,s,0,0).to);if(e){let{head:h}=e.range;if(h<l.from||h>l.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=r.lineAt(h,Pt.ByPos,s,0,0),g;e.y=="center"?g=(c.top+c.bottom)/2-f/2:e.y=="start"||e.y=="nearest"&&h<l.from?g=c.top:g=c.bottom-f,l=new er(r.lineAt(g-1e3/2,Pt.ByHeight,s,0,0).from,r.lineAt(g+f+1e3/2,Pt.ByHeight,s,0,0).to)}}return l}mapViewport(t,e){let i=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new er(this.heightMap.lineAt(i,Pt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Pt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,Pt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(e,Pt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(t==0||r<=o-Math.max(10,Math.min(-i,250)))&&(e==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let i=[];for(let r of t)e.touchesRange(r.from,r.to)||i.push(new ys(e.mapPos(r.from),e.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(t,e){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Nt.LTR&&!i)return[];let a=[],l=(f,c,g,m)=>{if(c-f<s)return;let u=this.state.selection.main,p=[u.from];u.empty||p.push(u.to);for(let _ of p)if(_>f&&_<c){l(f,_-10,g,m),l(_+10,c,g,m);return}let w=lg(t,_=>_.from>=g.from&&_.to<=g.to&&Math.abs(_.from-f)<s&&Math.abs(_.to-c)<s&&!p.some(R=>_.from<R&&_.to>R));if(!w){if(c<g.to&&e&&i&&e.visibleRanges.some(A=>A.from<=c&&A.to>=c)){let A=e.moveToLineBoundary(bt.cursor(c),!1,!0).head;A>f&&(c=A)}let _=this.gapSize(g,f,c,m),R=i||_<2e6?_:2e6;w=new ys(f,c,_,R)}a.push(w)},h=f=>{if(f.length<o||f.type!=Kt.Text)return;let c=og(f.from,f.to,this.stateDeco);if(c.total<o)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,m,u;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,_;if(g!=null){let R=nr(c,g),A=((this.visibleBottom-this.visibleTop)/2+p)/f.height;w=R-A,_=R+A}else w=(this.visibleTop-f.top-p)/f.height,_=(this.visibleBottom-f.top+p)/f.height;m=ir(c,w),u=ir(c,_)}else{let p=c.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,_=0;if(p>2e6)for(let y of t)y.from>=f.from&&y.from<f.to&&y.size!=y.displaySize&&y.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=y.size-y.displaySize);let R=this.pixelViewport.left+_,A=this.pixelViewport.right+_,k,E;if(g!=null){let y=nr(c,g),S=((A-R)/2+w)/p;k=y-S,E=y+S}else k=(R-w)/p,E=(A+w)/p;m=ir(c,k),u=ir(c,E)}m>f.from&&l(f.from,m,f,c),u<f.to&&l(u,f.to,f,c)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return a}gapSize(t,e,i,r){let s=nr(r,i)-nr(r,e);return this.heightOracle.lineWrapping?t.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(t){ys.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Tt.set(t.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];Mt.spans(e,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,t&&t.mapPos(o.from,-1)==a.from&&t.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||dn(this.heightMap.lineAt(t,Pt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(e=>e.top<=t&&e.bottom>=t)||dn(this.heightMap.lineAt(this.scaler.fromDOM(t),Pt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return dn(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class er{constructor(t,e){this.from=t,this.to=e}}function og(n,t,e){let i=[],r=n,s=0;return Mt.spans(e,n,t,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<t&&(i.push({from:r,to:t}),s+=t-r),{total:s,ranges:i}}function ir({total:n,ranges:t},e){if(e<=0)return t[0].from;if(e>=1)return t[t.length-1].to;let i=Math.floor(n*e);for(let r=0;;r++){let{from:s,to:o}=t[r],a=o-s;if(i<=a)return s+i;i-=a}}function nr(n,t){let e=0;for(let{from:i,to:r}of n.ranges){if(t<=r){e+=t-i;break}e+=r-i}return e/n.total}function lg(n,t){for(let e of n)if(t(e))return e}const na={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function ra(n){let t=n.facet(qr).filter(i=>typeof i!="function"),e=n.facet(Po).filter(i=>typeof i!="function");return e.length&&t.push(Mt.join(e)),t}class jo{constructor(t,e,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let h=e.lineAt(a,Pt.ByPos,t,0,0).top,f=e.lineAt(l,Pt.ByPos,t,0,0).bottom;return r+=f-h,{from:a,to:l,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(e.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(t){for(let e=0,i=0,r=0;;e++){let s=e<this.viewports.length?this.viewports[e]:null;if(!s||t<s.top)return r+(t-i)*this.scale;if(t<=s.bottom)return s.domTop+(t-s.top);i=s.bottom,r=s.domBottom}}fromDOM(t){for(let e=0,i=0,r=0;;e++){let s=e<this.viewports.length?this.viewports[e]:null;if(!s||t<s.domTop)return i+(t-r)/this.scale;if(t<=s.domBottom)return s.top+(t-s.domTop);i=s.bottom,r=s.domBottom}}eq(t){return t instanceof jo?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((e,i)=>e.from==t.viewports[i].from&&e.to==t.viewports[i].to):!1}}function dn(n,t){if(t.scale==1)return n;let e=t.toDOM(n.top),i=t.toDOM(n.bottom);return new ve(n.from,n.length,e,i-e,Array.isArray(n._content)?n._content.map(r=>dn(r,t)):n._content)}const rr=wt.define({combine:n=>n.join(" ")}),oo=wt.define({combine:n=>n.indexOf(!0)>-1}),lo=fi.newName(),gf=fi.newName(),mf=fi.newName(),bf={"&light":"."+gf,"&dark":"."+mf};function ao(n,t,e){return new fi(t,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!e||!e[r])throw new RangeError(`Unsupported selector: ${r}`);return e[r]}):n+" "+i}})}const ag=ao("."+lo,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bf),hg={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ws=gt.ie&&gt.ie_version<=11;class fg{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new qd,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let i of e)this.queue.push(i);(gt.ie&&gt.ie_version<=11||gt.ios&&t.composing)&&e.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&gt.android&&t.constructor.EDIT_CONTEXT!==!1&&!(gt.chrome&&gt.chrome_version<126)&&(this.editContext=new cg(t),t.state.facet(Ye)&&(t.contentDOM.editContext=this.editContext.editContext)),ws&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var e;((e=this.view.docView)===null||e===void 0?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,i)=>e!=t[i]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Ye)?i.root.activeElement!=this.dom:!wn(this.dom,r))return;let s=r.anchorNode&&i.docView.tile.nearest(r.anchorNode);if(s&&s.isWidget()&&s.widget.ignoreEvent(t)){e||(this.selectionChanged=!1);return}(gt.ie&&gt.ie_version<=11||gt.android&&gt.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Sn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=$i(t.root);if(!e)return!1;let i=gt.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&ug(this.view,e)||e;if(!i||this.selectionRange.eq(i))return!1;let r=wn(this.dom,i);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Gd(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let i=this.dom;i;)if(i.nodeType==1)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==i?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=e)i.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,hg),ws&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ws&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Fi(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,i=-1,r=!1;for(let s of t){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),e==-1?{from:e,to:i}=o:(e=Math.min(o.from,e),i=Math.max(o.to,i)))}return{from:e,to:i,typeOver:r}}readChange(){let{from:t,to:e,typeOver:i}=this.processRecords(),r=this.selectionChanged&&wn(this.dom,this.selectionRange);if(t<0&&!r)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Ip(this.view,t,e,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let i=this.view.state,r=ef(this.view,e);return this.view.state==i&&(e.domChanged||e.newSel&&!Or(this.view.state.selection,e.newSel.main))&&this.view.update([]),r}readMutation(t){let e=this.view.docView.tile.nearest(t.target);if(!e||e.isWidget())return null;if(e.markDirty(t.type=="attributes"),t.type=="childList"){let i=sa(e,t.previousSibling||t.target.previousSibling,-1),r=sa(e,t.nextSibling||t.target.nextSibling,1);return{from:i?e.posAfter(i):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Ye)!=t.state.facet(Ye)&&(t.view.contentDOM.editContext=t.state.facet(Ye)?this.editContext.editContext:null))}destroy(){var t,e,i;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(e=this.gapIntersection)===null||e===void 0||e.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function sa(n,t,e){for(;t;){let i=qt.get(t);if(i&&i.parent==n)return i;let r=t.parentNode;t=r!=n.dom?r:e>0?t.nextSibling:t.previousSibling}return null}function oa(n,t){let e=t.startContainer,i=t.startOffset,r=t.endContainer,s=t.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor,1);return Sn(o.node,o.offset,r,s)&&([e,i,r,s]=[r,s,e,i]),{anchorNode:e,anchorOffset:i,focusNode:r,focusOffset:s}}function ug(n,t){if(t.getComposedRanges){let r=t.getComposedRanges(n.root)[0];if(r)return oa(n,r)}let e=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),e=r.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),e?oa(n,e):null}class cg{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=i=>{let r=t.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let h=l-a>i.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let f=nf(t.state.sliceDoc(a,l),i.text,(h?r.from:r.to)-a,h?"end":null);if(!f){let g=bt.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));Or(g,r)||t.dispatch({selection:g,userEvent:"select"});return}let c={from:f.from+a,to:f.toA+a,insert:Ot.of(i.text.slice(f.from,f.toB).split(`
`))};if((gt.mac||gt.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Ot.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!t.state.readOnly){let g=this.to-this.from+(c.to-c.from+c.insert.length);Wo(t,c,bt.single(this.toEditorPos(i.selectionStart,g),this.toEditorPos(i.selectionEnd,g)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),c.from<c.to&&!c.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(e.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(e.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=t.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}e.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(l<h){let f=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;r.push(Tt.mark({attributes:{style:f}}).range(l,h))}}}t.dispatch({effects:qh.of(Tt.set(r))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(t.state)}};for(let i in this.handlers)e.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=$i(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,i=!1,r=this.pendingContextChange;return t.changes.iterChanges((s,o,a,l,h)=>{if(i)return;let f=h.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(h)){r=this.pendingContextChange=null,e+=f,this.to+=f;return}else r=null,this.revertPending(t.state);if(s+=e,o+=e,o<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=f}e+=f}),r&&!i&&this.revertPending(t.state),!i}update(t){let e=this.pendingContextChange,i=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(i.from,i.to)&&t.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),r=this.toContextPos(e.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>1e4*3)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let i=this.composing;return i&&i.drifted?i.editorBase+(t-i.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class Et{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:i}=t;this.dispatchTransactions=t.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=t.root||zd(t.parent)||document,this.viewState=new ia(t.state||Bt.create(t)),t.scrollTo&&t.scrollTo.is(Qn)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Li).map(r=>new ds(r));for(let r of this.plugins)r.update(this);this.observer=new fg(this),this.inputState=new Np(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Vl(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((e=document.fonts)===null||e===void 0)&&e.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...t){let e=t.length==1&&t[0]instanceof Zt?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e=!1,i=!1,r,s=this.state;for(let g of t){if(g.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=g.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;t.some(g=>g.annotation(hf))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=ff(s,o),l||(a=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(Bt.phrases)!=this.state.facet(Bt.phrases))return this.setState(s);r=Bn.create(this,s,t),r.flags|=a;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let g of t){if(c&&(c=c.map(g.changes)),g.scrollIntoView){let{main:m}=g.state.selection;c=new Wi(m.empty?m:bt.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of g.effects)m.is(Qn)&&(c=m.value.clip(this.state))}this.viewState.update(r,c),this.bidiCache=Nr.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),e=this.docView.update(r),this.state.facet(un)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(e,t.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(rr)!=r.state.facet(rr)&&(this.viewState.mustMeasureContent=!0),(e||i||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),e&&this.docViewUpdate(),!r.empty)for(let g of this.state.facet(to))try{g(r)}catch(m){Se(this.state,m,"update listener")}(l||f)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),f&&!ef(this,f)&&h.force&&Fi(this.contentDOM,h.key,h.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let e=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ia(t),this.plugins=t.facet(Li).map(i=>new ds(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Vl(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Li),i=t.state.facet(Li);if(e!=i){let r=[];for(let s of i){let o=e.indexOf(s);if(o<0)r.push(new ds(s));else{let a=this.plugins[o];a.mustUpdate=t,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=t&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);e!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(i){Se(this.state,i,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(_h(i))s=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(r);s=m.from,o=m.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];l&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(m=>{try{return m.read(this)}catch(u){return Se(this.state,u),la}}),c=Bn.create(this,this.state,[]),g=!1;c.flags|=l,e?e.flags|=l:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),g=this.docView.update(c),g&&this.docViewUpdate());for(let m=0;m<h.length;m++)if(f[m]!=la)try{let u=h[m];u.write&&u.write(f[m],this)}catch(u){Se(this.state,u)}if(g&&this.docView.updateSelection(!0),!c.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let u=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(u>1||u<-1){r=r+u,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let a of this.state.facet(to))a(e)}get themeClasses(){return lo+" "+(this.state.facet(oo)?mf:gf)+" "+this.state.facet(rr)}updateAttrs(){let t=aa(this,zh,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ye)?"true":"false",class:"cm-content",style:`${gt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),aa(this,$r,e);let i=this.observer.ignore(()=>{let r=Pl(this.contentDOM,this.contentAttrs,e),s=Pl(this.dom,this.editorAttrs,t);return r||s});return this.editorAttrs=t,this.contentAttrs=e,i}showAnnouncements(t){let e=!0;for(let i of t)for(let r of i.effects)if(r.is(Et.announce)){e&&(this.announceDOM.textContent=""),e=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(un);let t=this.state.facet(Et.cspNonce);fi.mount(this.root,this.styleModules.concat(ag).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key){this.measureRequests[e]=t;return}}this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(e===void 0||e&&e.plugin!=t)&&this.pluginMap.set(t,e=this.plugins.find(i=>i.plugin==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,i){return bs(this,t,$l(this,t,e,i))}moveByGroup(t,e){return bs(this,t,$l(this,t,e,i=>_p(this,t.head,i)))}visualLineSide(t,e){let i=this.bidiSpans(t),r=this.textDirectionAt(t.from),s=i[e?i.length-1:0];return bt.cursor(s.side(e,r)+t.from,s.forward(!e,r)?1:-1)}moveToLineBoundary(t,e,i=!0){return kp(this,t,e,i)}moveVertically(t,e,i){return bs(this,t,Tp(this,t,e,i))}domAtPos(t,e=1){return this.docView.domAtPos(t,e)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){this.readMeasured();let i=no(this,t,e);return i&&i.pos}posAndSideAtCoords(t,e=!0){return this.readMeasured(),no(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let i=this.docView.coordsAt(t,e);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(t),s=this.bidiSpans(r),o=s[He.find(s,t-r.from,-1,e)];return Rn(i,o.dir==Nt.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Hh)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>dg)return Oh(t.length);let e=this.textDirectionAt(t.from),i;for(let s of this.bidiCache)if(s.from==t.from&&s.dir==e&&(s.fresh||Ih(s.isolates,i=Ul(this,t))))return s.order;i||(i=Ul(this,t));let r=Bh(t.text,e,i);return this.bidiCache.push(new Nr(t.from,t.to,e,i,!0,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||gt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{kh(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Qn.of(new Wi(typeof t=="number"?bt.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,i=this.viewState.scrollAnchorAt(t);return Qn.of(new Wi(bt.cursor(i.from),"start","start",i.top-t,e,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return jt.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return jt.define(()=>({}),{eventObservers:t})}static theme(t,e){let i=fi.newName(),r=[rr.of(i),un.of(ao(`.${i}`,t))];return e&&e.dark&&r.push(oo.of(!0)),r}static baseTheme(t){return Xi.lowest(un.of(ao("."+lo,t,bf)))}static findFromDOM(t){var e;let i=t.querySelector(".cm-content"),r=i&&qt.get(i)||qt.get(t);return((e=r?.root)===null||e===void 0?void 0:e.view)||null}}Et.styleModule=un;Et.inputHandler=Uh;Et.clipboardInputFilter=No;Et.clipboardOutputFilter=Do;Et.scrollHandler=$h;Et.focusChangeEffect=jh;Et.perLineTextDirection=Hh;Et.exceptionSink=Wh;Et.updateListener=to;Et.editable=Ye;Et.mouseSelectionStyle=Fh;Et.dragMovesSelection=Ph;Et.clickAddsSelectionRange=Dh;Et.decorations=qr;Et.blockWrappers=Gh;Et.outerDecorations=Po;Et.atomicRanges=Vn;Et.bidiIsolatedRanges=Kh;Et.scrollMargins=Yh;Et.darkTheme=oo;Et.cspNonce=wt.define({combine:n=>n.length?n[0]:""});Et.contentAttributes=$r;Et.editorAttributes=zh;Et.lineWrapping=Et.contentAttributes.of({class:"cm-lineWrapping"});Et.announce=Lt.define();const dg=4096,la={};class Nr{constructor(t,e,i,r,s,o){this.from=t,this.to=e,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(t,e){if(e.empty&&!t.some(s=>s.fresh))return t;let i=[],r=t.length?t[t.length-1].dir:Nt.LTR;for(let s=Math.max(0,t.length-10);s<t.length;s++){let o=t[s];o.dir==r&&!e.touchesRange(o.from,o.to)&&i.push(new Nr(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function aa(n,t,e){for(let i=n.state.facet(t),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&Bo(o,e)}return e}const pg=gt.mac?"mac":gt.windows?"win":gt.linux?"linux":"key";function gg(n,t){const e=n.split(/-(?!$)/);let i=e[e.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<e.length-1;++l){const h=e[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))t=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function sr(n,t,e){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e!==!1&&t.shiftKey&&(n="Shift-"+n),n}const mg=Xi.default(Et.domEventHandlers({keydown(n,t){return vf(wf(t.state),n,t,"editor")}})),yf=wt.define({enables:mg}),ha=new WeakMap;function wf(n){let t=n.facet(yf),e=ha.get(t);return e||ha.set(t,e=wg(t.reduce((i,r)=>i.concat(r),[]))),e}function bg(n,t,e){return vf(wf(n.state),t,n,e)}let ri=null;const yg=4e3;function wg(n,t=pg){let e=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,h,f)=>{var c,g;let m=e[o]||(e[o]=Object.create(null)),u=a.split(/ (?!$)/).map(_=>gg(_,t));for(let _=1;_<u.length;_++){let R=u.slice(0,_).join(" ");r(R,!0),m[R]||(m[R]={preventDefault:!0,stopPropagation:!1,run:[A=>{let k=ri={view:A,prefix:R,scope:o};return setTimeout(()=>{ri==k&&(ri=null)},yg),!0}]})}let p=u.join(" ");r(p,!1);let w=m[p]||(m[p]={preventDefault:!1,stopPropagation:!1,run:((g=(c=m._any)===null||c===void 0?void 0:c.run)===null||g===void 0?void 0:g.slice())||[]});l&&w.run.push(l),h&&(w.preventDefault=!0),f&&(w.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let f=e[h]||(e[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:c}=o;for(let g in f)f[g].run.push(m=>c(m,ho))}let l=o[t]||o.key;if(l)for(let h of a)s(h,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return e}let ho=null;function vf(n,t,e,i){ho=t;let r=Pd(t),s=To(r,0),o=sh(s)==r.length&&r!=" ",a="",l=!1,h=!1,f=!1;ri&&ri.view==e&&ri.scope==i&&(a=ri.prefix+" ",sf.indexOf(t.keyCode)<0&&(h=!0,ri=null));let c=new Set,g=w=>{if(w){for(let _ of w.run)if(!c.has(_)&&(c.add(_),_(e)))return w.stopPropagation&&(f=!0),!0;w.preventDefault&&(w.stopPropagation&&(f=!0),h=!0)}return!1},m=n[i],u,p;return m&&(g(m[a+sr(r,t,!o)])?l=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(gt.windows&&t.ctrlKey&&t.altKey)&&!(gt.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(u=ui[t.keyCode])&&u!=r?(g(m[a+sr(u,t,!0)])||t.shiftKey&&(p=Mn[t.keyCode])!=r&&p!=u&&g(m[a+sr(p,t,!1)]))&&(l=!0):o&&t.shiftKey&&g(m[a+sr(r,t,!0)])&&(l=!0),!l&&g(m._any)&&(l=!0)),h&&(l=!0),l&&f&&t.stopPropagation(),ho=null,l}class Qi{constructor(t,e,i,r,s){this.className=t,this.left=e,this.top=i,this.width=r,this.height=s}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,i){if(i.empty){let r=t.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=Sf(t);return[new Qi(e,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return vg(t,e,i)}}function Sf(n){let t=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Nt.LTR?t.left:t.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:t.top-n.scrollDOM.scrollTop*n.scaleY}}function fa(n,t,e,i){let r=n.coordsAtPos(t,e*2);if(!r)return i;let s=n.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=n.posAtCoords({x:s.left+1,y:o}),l=n.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function vg(n,t,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let i=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),s=n.textDirection==Nt.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=Sf(n),h=o.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),c=a.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),g=a.right-(f?parseInt(f.paddingRight):0),m=io(n,i,1),u=io(n,r,-1),p=m.type==Kt.Text?m:null,w=u.type==Kt.Text?u:null;if(p&&(n.lineWrapping||m.widgetLineBreaks)&&(p=fa(n,i,1,p)),w&&(n.lineWrapping||u.widgetLineBreaks)&&(w=fa(n,r,-1,w)),p&&w&&p.from==w.from&&p.to==w.to)return R(A(e.from,e.to,p));{let E=p?A(e.from,null,p):k(m,!1),y=w?A(null,e.to,w):k(u,!0),S=[];return(p||m).to<(w||u).from-(p&&w?1:0)||m.widgetLineBreaks>1&&E.bottom+n.defaultLineHeight/2<y.top?S.push(_(c,E.bottom,g,y.top)):E.bottom<y.top&&n.elementAtHeight((E.bottom+y.top)/2).type==Kt.Text&&(E.bottom=y.top=(E.bottom+y.top)/2),R(E).concat(S).concat(R(y))}function _(E,y,S,M){return new Qi(t,E-l.left,y-l.top,S-E,M-y)}function R({top:E,bottom:y,horizontal:S}){let M=[];for(let I=0;I<S.length;I+=2)M.push(_(S[I],E,S[I+1],y));return M}function A(E,y,S){let M=1e9,I=-1e9,q=[];function z(P,W,C,K,H){let G=n.coordsAtPos(P,P==S.to?-2:2),lt=n.coordsAtPos(C,C==S.from?2:-2);!G||!lt||(M=Math.min(G.top,lt.top,M),I=Math.max(G.bottom,lt.bottom,I),H==Nt.LTR?q.push(s&&W?c:G.left,s&&K?g:lt.right):q.push(!s&&K?c:lt.left,!s&&W?g:G.right))}let N=E??S.from,J=y??S.to;for(let P of n.visibleRanges)if(P.to>N&&P.from<J)for(let W=Math.max(P.from,N),C=Math.min(P.to,J);;){let K=n.state.doc.lineAt(W);for(let H of n.bidiSpans(K)){let G=H.from+K.from,lt=H.to+K.from;if(G>=C)break;lt>W&&z(Math.max(G,W),E==null&&G<=N,Math.min(lt,C),y==null&&lt>=J,H.dir)}if(W=K.to+1,W>=C)break}return q.length==0&&z(N,E==null,J,y==null,n.textDirection),{top:M,bottom:I,horizontal:q}}function k(E,y){let S=a.top+(y?E.top:E.bottom);return{top:S,bottom:S,horizontal:[]}}}function Sg(n,t){return n.constructor==t.constructor&&n.eq(t)}class xg{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(yr)!=t.state.facet(yr)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,i=t.facet(yr);for(;e<i.length&&i[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;(t!=this.scaleX||e!=this.scaleY)&&(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some((e,i)=>!Sg(e,this.drawn[i]))){let e=this.dom.firstChild,i=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[i].constructor&&r.update(e,this.drawn[i])?(e=e.nextSibling,i++):this.dom.insertBefore(r.draw(),e);for(;e;){let r=e.nextSibling;e.remove(),e=r}this.drawn=t,gt.safari&&gt.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const yr=wt.define();function Ho(n){return[jt.define(t=>new xg(t,n)),yr.of(n)]}const Gi=wt.define({combine(n){return Ji(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function Ag(n={}){return[Gi.of(n),kg,_g,Tg,Vh.of(!0)]}function Eg(n){return n.facet(Gi)}function xf(n){return n.startState.facet(Gi)!=n.state.facet(Gi)}const kg=Ho({above:!0,markers(n){let{state:t}=n,e=t.facet(Gi),i=[];for(let r of t.selection.ranges){let s=r==t.selection.main;if(r.empty||e.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:bt.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Qi.forRange(n,o,a))i.push(l)}}return i},update(n,t){n.transactions.some(i=>i.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let e=xf(n);return e&&ua(n.state,t),n.docChanged||n.selectionSet||e},mount(n,t){ua(t.state,n)},class:"cm-cursorLayer"});function ua(n,t){t.style.animationDuration=n.facet(Gi).cursorBlinkRate+"ms"}const _g=Ho({above:!1,markers(n){return n.state.selection.ranges.map(t=>t.empty?[]:Qi.forRange(n,"cm-selectionBackground",t)).reduce((t,e)=>t.concat(e))},update(n,t){return n.docChanged||n.selectionSet||n.viewportChanged||xf(n)},class:"cm-selectionLayer"}),Tg=Xi.highest(Et.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Af=Lt.define({map(n,t){return n==null?null:t.mapPos(n)}}),pn=be.define({create(){return null},update(n,t){return n!=null&&(n=t.changes.mapPos(n)),t.effects.reduce((e,i)=>i.is(Af)?i.value:e,n)}}),Cg=jt.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var t;let e=n.state.field(pn);e==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(pn)!=e||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,t=n.state.field(pn),e=t!=null&&n.coordsAtPos(t);if(!e)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:e.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:e.bottom-e.top}}drawCursor(n){if(this.cursor){let{scaleX:t,scaleY:e}=this.view;n?(this.cursor.style.left=n.left/t+"px",this.cursor.style.top=n.top/e+"px",this.cursor.style.height=n.height/e+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(pn)!=n&&this.view.dispatch({effects:Af.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Mg(){return[pn,Cg]}function ca(n,t,e,i,r){t.lastIndex=0;for(let s=n.iterRange(e,i),o=e,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=t.exec(s.value);)r(o+a.index,a)}function Rg(n,t){let e=n.visibleRanges;if(e.length==1&&e[0].from==n.viewport.from&&e[0].to==n.viewport.to)return e;let i=[];for(let{from:r,to:s}of e)r=Math.max(n.state.doc.lineAt(r).from,r-t),s=Math.min(n.state.doc.lineAt(s).to,s+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class Yr{constructor(t){const{regexp:e,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(a,l,h,f)=>r(f,h,h+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,h,f)=>{let c=i(a,l,h);c&&f(h,h+a[0].length,c)};else if(i)this.addMatch=(a,l,h,f)=>f(h,h+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(t){let e=new Je,i=e.add.bind(e);for(let{from:r,to:s}of Rg(t,this.maxLength))ca(t.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,t,o,i));return e.finish()}updateDeco(t,e){let i=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((s,o,a,l)=>{l>=t.view.viewport.from&&a<=t.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),t.viewportMoved||r-i>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),i,r):e}updateRange(t,e,i,r){for(let s of t.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=t.state.doc.lineAt(o),h=l.to<a?t.state.doc.lineAt(a):l,f=Math.max(s.from,l.from),c=Math.min(s.to,h.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){f=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){c=a;break}}let g=[],m,u=(p,w,_)=>g.push(_.range(p,w));if(l==h)for(this.regexp.lastIndex=f-l.from;(m=this.regexp.exec(l.text))&&m.index<c-l.from;)this.addMatch(m,t,m.index+l.from,u);else ca(t.state.doc,this.regexp,f,c,(p,w)=>this.addMatch(w,t,p,u));e=e.update({filterFrom:f,filterTo:c,filter:(p,w)=>p<f||w>c,add:g})}}return e}}const fo=/x/.unicode!=null?"gu":"g",Ig=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,fo),Bg={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let vs=null;function Og(){var n;if(vs==null&&typeof document<"u"&&document.body){let t=document.body.style;vs=((n=t.tabSize)!==null&&n!==void 0?n:t.MozTabSize)!=null}return vs||!1}const wr=wt.define({combine(n){let t=Ji(n,{render:null,specialChars:Ig,addSpecialChars:null});return(t.replaceTabs=!Og())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,fo)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,fo)),t}});function Lg(n={}){return[wr.of(n),Ng()]}let da=null;function Ng(){return da||(da=jt.fromClass(class{constructor(n){this.view=n,this.decorations=Tt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(wr)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Yr({regexp:n.specialChars,decoration:(t,e,i)=>{let{doc:r}=e.state,s=To(t[0],0);if(s==9){let o=r.lineAt(i),a=e.state.tabSize,l=Hr(o.text,a,i-o.from);return Tt.replace({widget:new Wg((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Tt.replace({widget:new Fg(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let t=n.state.facet(wr);n.startState.facet(wr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Dg="â¢";function Pg(n){return n>=32?Dg:n==10?"â¤":String.fromCharCode(9216+n)}class Fg extends Ge{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=Pg(this.code),i=t.state.phrase("Control character")+" "+(Bg[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,e);if(r)return r;let s=document.createElement("span");return s.textContent=e,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Wg extends Ge{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const pa=jt.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(n){let{view:t}=n,e=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;e>=0&&e!=this.height&&(this.height=e,this.attrs={style:`padding-bottom: ${e}px`})}});function Ug(){return[pa,$r.of(n=>{var t;return((t=n.plugin(pa))===null||t===void 0?void 0:t.attrs)||null})]}function jg(){return Vg}const Hg=Tt.line({class:"cm-activeLine"}),Vg=jt.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let t=-1,e=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>t&&(e.push(Hg.range(r.from)),t=r.from)}return Tt.set(e)}},{decorations:n=>n.decorations});class $g extends Ge{constructor(t){super(),this.content=t}toDOM(t){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(t):this.content.cloneNode(!0)),e.setAttribute("aria-hidden","true"),e}coordsAt(t){let e=t.firstChild?vn(t.firstChild):[];if(!e.length)return null;let i=window.getComputedStyle(t.parentNode),r=Rn(e[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function qg(n){let t=jt.fromClass(class{constructor(e){this.view=e,this.placeholder=n?Tt.set([Tt.widget({widget:new $g(n),side:1}).range(0)]):Tt.none}get decorations(){return this.view.state.doc.length?Tt.none:this.placeholder}},{decorations:e=>e.decorations});return typeof n=="string"?[t,Et.contentAttributes.of({"aria-placeholder":n})]:t}const uo=2e3;function zg(n,t,e){let i=Math.min(t.line,e.line),r=Math.max(t.line,e.line),s=[];if(t.off>uo||e.off>uo||t.col<0||e.col<0){let o=Math.min(t.off,e.off),a=Math.max(t.off,e.off);for(let l=i;l<=r;l++){let h=n.doc.line(l);h.length<=a&&s.push(bt.range(h.from+o,h.to+a))}}else{let o=Math.min(t.col,e.col),a=Math.max(t.col,e.col);for(let l=i;l<=r;l++){let h=n.doc.line(l),f=Cr(h.text,o,n.tabSize,!0);if(f<0)s.push(bt.cursor(h.to));else{let c=Cr(h.text,a,n.tabSize);s.push(bt.range(h.from+f,h.from+c))}}}return s}function Gg(n,t){let e=n.coordsAtPos(n.viewport.from);return e?Math.round(Math.abs((e.left-t)/n.defaultCharacterWidth)):-1}function ga(n,t){let e=n.posAtCoords({x:t.clientX,y:t.clientY},!1),i=n.state.doc.lineAt(e),r=e-i.from,s=r>uo?-1:r==i.length?Gg(n,t.clientX):Hr(i.text,n.state.tabSize,e-i.from);return{line:i.number,col:s,off:r}}function Kg(n,t){let e=ga(n,t),i=n.state.selection;return e?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(e.line).from),o=r.state.doc.lineAt(s);e={line:o.number,col:e.col,off:Math.min(e.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let a=ga(n,r);if(!a)return i;let l=zg(n.state,e,a);return l.length?o?bt.create(l.concat(i.ranges)):bt.create(l):i}}:null}function Yg(n){let t=n?.eventFilter||(e=>e.altKey&&e.button==0);return Et.mouseSelectionStyle.of((e,i)=>t(i)?Kg(e,i):null)}const Xg={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},Jg={style:"cursor: crosshair"};function Qg(n={}){let[t,e]=Xg[n.key||"Alt"],i=jt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==t||e(r))},keyup(r){(r.keyCode==t||!e(r))&&this.set(!1)},mousemove(r){this.set(e(r))}}});return[i,Et.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?Jg:null})]}const or="-10000px";class Ef{constructor(t,e,i,r){this.facet=e,this.createTooltipView=i,this.removeTooltipView=r,this.input=t.state.facet(e),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(t,e){var i;let r=t.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(t);return!1}let o=[],a=e?[]:null;for(let l=0;l<s.length;l++){let h=s[l],f=-1;if(h){for(let c=0;c<this.tooltips.length;c++){let g=this.tooltips[c];g&&g.create==h.create&&(f=c)}if(f<0)o[l]=this.createTooltipView(h,l?o[l-1]:null),a&&(a[l]=!!h.above);else{let c=o[l]=this.tooltipViews[f];a&&(a[l]=e[f]),c.update&&c.update(t)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return e&&(a.forEach((l,h)=>e[h]=l),e.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Zg(n={}){return vr.of(n)}function tm(n){let t=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const vr=wt.define({combine:n=>{var t,e,i;return{position:gt.ios?"absolute":((t=n.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((e=n.find(r=>r.parent))===null||e===void 0?void 0:e.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||tm}}}),ma=new WeakMap,Xr=jt.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(vr);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ef(n,Vo,(e,i)=>this.createTooltip(e,i),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(n,this.above);t&&this.observeIntersection();let e=t||n.geometryChanged,i=n.state.facet(vr);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;e=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);e=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);e&&this.maybeMeasure()}createTooltip(n,t){let e=n.create(this.view),i=t?t.dom:null;if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",e.dom.appendChild(r)}return e.dom.style.position=this.position,e.dom.style.top=or,e.dom.style.left="0px",this.container.insertBefore(e.dom,i),e.mount&&e.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(e.dom),e}destroy(){var n,t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,t=1,e=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(gt.safari){let o=s.getBoundingClientRect();e=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else e=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(e||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:t}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=Fo(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(vr).tooltipSpace(this.view),scaleX:n,scaleY:t,makeAbsolute:e}}writeMeasure(n){var t;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:e,space:i,scaleX:r,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:f}=h,c=n.pos[a],g=n.size[a];if(!c||l.clip!==!1&&(c.bottom<=Math.max(e.top,i.top)||c.top>=Math.min(e.bottom,i.bottom)||c.right<Math.max(e.left,i.left)-.1||c.left>Math.min(e.right,i.right)+.1)){f.style.top=or;continue}let m=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,u=m?7:0,p=g.right-g.left,w=(t=ma.get(h))!==null&&t!==void 0?t:g.bottom-g.top,_=h.offset||im,R=this.view.textDirection==Nt.LTR,A=g.width>i.right-i.left?R?i.left:i.right-g.width:R?Math.max(i.left,Math.min(c.left-(m?14:0)+_.x,i.right-p)):Math.min(Math.max(i.left,c.left-p+(m?14:0)-_.x),i.right-p),k=this.above[a];!l.strictSide&&(k?c.top-w-u-_.y<i.top:c.bottom+w+u+_.y>i.bottom)&&k==i.bottom-c.bottom>c.top-i.top&&(k=this.above[a]=!k);let E=(k?c.top-i.top:i.bottom-c.bottom)-u;if(E<w&&h.resize!==!1){if(E<this.view.defaultLineHeight){f.style.top=or;continue}ma.set(h,w),f.style.height=(w=E)/s+"px"}else f.style.height&&(f.style.height="");let y=k?c.top-w-u-_.y:c.bottom+u+_.y,S=A+p;if(h.overlap!==!0)for(let M of o)M.left<S&&M.right>A&&M.top<y+w&&M.bottom>y&&(y=k?M.top-w-2-u:M.bottom+u+2);if(this.position=="absolute"?(f.style.top=(y-n.parent.top)/s+"px",ba(f,(A-n.parent.left)/r)):(f.style.top=y/s+"px",ba(f,A/r)),m){let M=c.left+(R?_.x:-_.x)-(A+14-7);m.style.left=M/r+"px"}h.overlap!==!0&&o.push({left:A,top:y,right:S,bottom:y+w}),f.classList.toggle("cm-tooltip-above",k),f.classList.toggle("cm-tooltip-below",!k),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=or}},{eventObservers:{scroll(){this.maybeMeasure()}}});function ba(n,t){let e=parseInt(n.style.left,10);(isNaN(e)||Math.abs(t-e)>1)&&(n.style.left=t+"px")}const em=Et.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),im={x:0,y:0},Vo=wt.define({enables:[Xr,em]}),On=wt.define({combine:n=>n.reduce((t,e)=>t.concat(e),[])});class Jr{static create(t){return new Jr(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ef(t,On,(e,i)=>this.createHostedView(e,i),e=>e.dom.remove())}createHostedView(t,e){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)(t=e.destroy)===null||t===void 0||t.call(e)}passProp(t){let e;for(let i of this.manager.tooltipViews){let r=i[t];if(r!==void 0){if(e===void 0)e=r;else if(e!==r)return}}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const nm=Vo.compute([On],n=>{let t=n.facet(On);return t.length===0?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var i;return(i=e.end)!==null&&i!==void 0?i:e.pos})),create:Jr.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class rm{constructor(t,e,i,r,s){this.view=t,this.source=e,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,i=t.docView.tile.nearest(e.target);if(!i)return;let r,s=1;if(i.isWidget())r=i.posAtStart;else{if(r=t.posAtCoords(e),r==null)return;let a=t.coordsAtPos(r);if(!a||e.y<a.top||e.y>a.bottom||e.x<a.left-t.defaultCharacterWidth||e.x>a.right+t.defaultCharacterWidth)return;let l=t.bidiSpans(t.state.doc.lineAt(r)).find(f=>f.from<=r&&f.to>=r),h=l&&l.dir==Nt.RTL?-1:1;s=e.x<a.left?-h:h}let o=this.source(t,r,s);if(o?.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Se(t.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(Xr),e=t?t.manager.tooltips.findIndex(i=>i.create==Jr.create):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!sm(s.dom,t)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(e=r[0])===null||e===void 0?void 0:e.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!om(this.view,o,a,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:i}=this;i&&i.dom.contains(t.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=i=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const lr=4;function sm(n,t){let{left:e,right:i,top:r,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return t.clientX>=e-lr&&t.clientX<=i+lr&&t.clientY>=r-lr&&t.clientY<=s+lr}function om(n,t,e,i,r,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=n.posAtCoords({x:i,y:r},!1);return l>=t&&l<=e}function lm(n,t={}){let e=Lt.define(),i=be.define({create(){return[]},update(r,s){if(r.length&&(t.hideOnChange&&(s.docChanged||s.selection)?r=[]:t.hideOn&&(r=r.filter(o=>!t.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,se.TrackDel);if(l!=null){let h=Object.assign(Object.create(null),a);h.pos=l,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}r=o}for(let o of s.effects)o.is(e)&&(r=o.value),o.is(kf)&&(r=[]);return r},provide:r=>On.from(r)});return{active:i,extension:[i,jt.define(r=>new rm(r,n,i,e,t.hoverTime||300)),nm]}}function am(n,t){let e=n.plugin(Xr);if(!e)return null;let i=e.manager.tooltips.indexOf(t);return i<0?null:e.manager.tooltipViews[i]}function hm(n){return n.facet(On).some(t=>t)}const kf=Lt.define(),fm=kf.of(null);function um(n){let t=n.plugin(Xr);t&&t.maybeMeasure()}const co=wt.define({combine(n){let t,e;for(let i of n)t=t||i.topContainer,e=e||i.bottomContainer;return{topContainer:t,bottomContainer:e}}});function cm(n){return n?[co.of(n)]:[]}function _f(n,t){let e=n.plugin(Tf),i=e?e.specs.indexOf(t):-1;return i>-1?e.panels[i]:null}const Tf=jt.fromClass(class{constructor(n){this.input=n.state.facet(Dr),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(e=>e(n));let t=n.state.facet(co);this.top=new ar(n,!0,t.topContainer),this.bottom=new ar(n,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(n){let t=n.state.facet(co);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new ar(n.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new ar(n.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let e=n.state.facet(Dr);if(e!=this.input){let i=e.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let h=this.specs.indexOf(l),f;h<0?(f=l(n.view),a.push(f)):(f=this.panels[h],f.update&&f.update(n)),r.push(f),(f.top?s:o).push(f)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Et.scrollMargins.of(t=>{let e=t.plugin(n);return e&&{top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()}})});class ar{constructor(t,e,i){this.view=t,this.top=e,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=ya(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=ya(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function ya(n){let t=n.nextSibling;return n.remove(),t}const Dr=wt.define({enables:Tf});function dm(n,t){let e,i=new Promise(o=>e=o),r=o=>gm(o,t,e);n.state.field(Sr,!1)?n.dispatch({effects:Cf.of(r)}):n.dispatch({effects:Lt.appendConfig.of(Sr.init(()=>[r]))});let s=Mf.of(r);return{close:s,result:i.then(o=>((n.win.queueMicrotask||(l=>n.win.setTimeout(l,10)))(()=>{n.state.field(Sr).indexOf(r)>-1&&n.dispatch({effects:s})}),o))}}function pm(n,t){let e=n.state.field(Sr,!1)||[];for(let i of e){let r=_f(n,i);if(r&&r.dom.classList.contains(t))return r}return null}const Sr=be.define({create(){return[]},update(n,t){for(let e of t.effects)e.is(Cf)?n=[e.value].concat(n):e.is(Mf)&&(n=n.filter(i=>i!=e.value));return n},provide:n=>Dr.computeN([n],t=>t.field(n))}),Cf=Lt.define(),Mf=Lt.define();function gm(n,t,e){let i=t.content?t.content(n,()=>o(null)):null;if(!i){if(i=Ii("form"),t.input){let a=Ii("input",t.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),i.appendChild(Ii("label",(t.label||"")+": ",a))}else i.appendChild(document.createTextNode(t.label||""));i.appendChild(document.createTextNode(" ")),i.appendChild(Ii("button",{class:"cm-button",type:"submit"},t.submitLabel||"OK"))}let r=i.nodeName=="FORM"?[i]:i.querySelectorAll("form");for(let a=0;a<r.length;a++){let l=r[a];l.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),o(null)):h.keyCode==13&&(h.preventDefault(),o(l))}),l.addEventListener("submit",h=>{h.preventDefault(),o(l)})}let s=Ii("div",i,Ii("button",{onclick:()=>o(null),"aria-label":n.state.phrase("close"),class:"cm-dialog-close",type:"button"},["Ã"]));t.class&&(s.className=t.class),s.classList.add("cm-dialog");function o(a){s.contains(s.ownerDocument.activeElement)&&n.focus(),e(a)}return{dom:s,top:t.top,mount:()=>{if(t.focus){let a;typeof t.focus=="string"?a=i.querySelector(t.focus):a=i.querySelector("input")||i.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class ze extends hi{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}ze.prototype.elementClass="";ze.prototype.toDOM=void 0;ze.prototype.mapMode=se.TrackBefore;ze.prototype.startSide=ze.prototype.endSide=-1;ze.prototype.point=!0;const An=wt.define(),Rf=wt.define(),mm={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Mt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},En=wt.define();function If(n){return[$o(),En.of({...mm,...n})]}const po=wt.define({combine:n=>n.some(t=>t)});function $o(n){let t=[bm];return n&&n.fixed===!1&&t.push(po.of(!0)),t}const bm=jt.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(En).map(t=>new va(n,t)),this.fixed=!n.state.facet(po);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let t=this.prevViewport,e=n.view.viewport,i=Math.min(t.to,e.to)-Math.max(t.from,e.from);this.syncGutters(i<(e.to-e.from)*.8)}if(n.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(po)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let t=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let e=Mt.iter(this.view.state.facet(An),this.view.viewport.from),i=[],r=this.gutters.map(s=>new ym(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Kt.Text&&o){go(e,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Kt.Text){go(e,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let t=n.startState.facet(En),e=n.state.facet(En),i=n.docChanged||n.heightChanged||n.viewportChanged||!Mt.eq(n.startState.facet(An),n.state.facet(An),n.view.viewport.from,n.view.viewport.to);if(t==e)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of e){let o=t.indexOf(s);o<0?r.push(new va(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Et.scrollMargins.of(t=>{let e=t.plugin(n);if(!e||e.gutters.length==0||!e.fixed)return null;let i=e.dom.offsetWidth*t.scaleX,r=e.domAfter?e.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Nt.LTR?{left:i,right:r}:{right:i,left:r}})});function wa(n){return Array.isArray(n)?n:[n]}function go(n,t,e){for(;n.value&&n.from<=e;)n.from==e&&t.push(n.value),n.next()}class ym{constructor(t,e,i){this.gutter=t,this.height=i,this.i=0,this.cursor=Mt.iter(t.markers,e.from)}addElement(t,e,i){let{gutter:r}=this,s=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==r.elements.length){let a=new Bf(t,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(t,o,s,i);this.height=e.bottom,this.i++}line(t,e,i){let r=[];go(this.cursor,r,e.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(t,e,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(t,e,r)}widget(t,e){let i=this.gutter.config.widgetMarker(t,e.widget,e),r=i?[i]:null;for(let s of t.state.facet(Rf)){let o=s(t,e.widget,e);o&&(r||(r=[])).push(o)}r&&this.addElement(t,e,r)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class va{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in e.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=t.lineBlockAtHeight(o-t.documentTop);e.domEventHandlers[i](t,a,r)&&r.preventDefault()});this.markers=wa(e.markers(t)),e.initialSpacer&&(this.spacer=new Bf(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=wa(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let i=t.view.viewport;return!Mt.eq(this.markers,e,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Bf{constructor(t,e,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,i,r)}update(t,e,i,r){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),wm(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<e.length?e[s++]:null,h=!1;if(l){let f=l.elementClass;f&&(i+=" "+f);for(let c=o;c<this.markers.length;c++)if(this.markers[c].compare(l)){a=c,h=!0;break}}else a=this.markers.length;for(;o<a;){let f=this.markers[o++];if(f.toDOM){f.destroy(r);let c=r.nextSibling;r.remove(),r=c}}if(!l)break;l.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(l.toDOM(t),r)),h&&o++}this.dom.className=i,this.markers=e}destroy(){this.setMarkers(null,[])}}function wm(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].compare(t[e]))return!1;return!0}const Of=wt.define(),Lf=wt.define(),Ni=wt.define({combine(n){return Ji(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let i=Object.assign({},t);for(let r in e){let s=i[r],o=e[r];i[r]=s?(a,l,h)=>s(a,l,h)||o(a,l,h):o}return i}})}});class Ss extends ze{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function xs(n,t){return n.state.facet(Ni).formatNumber(t,n.state)}const vm=En.compute([Ni],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(Of)},lineMarker(t,e,i){return i.some(r=>r.toDOM)?null:new Ss(xs(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,i)=>{for(let r of t.state.facet(Lf)){let s=r(t,e,i);if(s)return s}return null},lineMarkerChange:t=>t.startState.facet(Ni)!=t.state.facet(Ni),initialSpacer(t){return new Ss(xs(t,Sa(t.state.doc.lines)))},updateSpacer(t,e){let i=xs(e.view,Sa(e.view.state.doc.lines));return i==t.number?t:new Ss(i)},domEventHandlers:n.facet(Ni).domEventHandlers,side:"before"}));function Sm(n={}){return[Ni.of(n),$o(),vm]}function Sa(n){let t=9;for(;t<n;)t=t*10+9;return t}const xm=new class extends ze{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Am=An.compute(["selection"],n=>{let t=[],e=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>e&&(e=r,t.push(xm.range(r)))}return Mt.of(t)});function Em(){return Am}function Nf(n){return jt.define(t=>({decorations:n.createDeco(t),update(e){this.decorations=n.updateDeco(e,this.decorations)}}),{decorations:t=>t.decorations})}const km=Tt.mark({class:"cm-highlightTab"}),_m=Tt.mark({class:"cm-highlightSpace"}),Tm=Nf(new Yr({regexp:/\t| /g,decoration:n=>n[0]=="	"?km:_m,boundary:/\S/}));function Cm(){return Tm}const Mm=Nf(new Yr({regexp:/\s+$/g,decoration:Tt.mark({class:"cm-trailingSpace"})}));function Rm(){return Mm}const Im={HeightMap:ne,HeightOracle:cf,MeasuredHeights:df,QueryType:Pt,ChangedRange:ge,computeOrder:Bh,moveVisually:Nh,clearHeightChangeFlag:so,getHeightChangeFlag:()=>ki},wb=Object.freeze(Object.defineProperty({__proto__:null,BidiSpan:He,BlockInfo:ve,get BlockType(){return Kt},BlockWrapper:Vi,Decoration:Tt,get Direction(){return Nt},EditorView:Et,GutterMarker:ze,MatchDecorator:Yr,RectangleMarker:Qi,ViewPlugin:jt,ViewUpdate:Bn,WidgetType:Ge,__test:Im,closeHoverTooltips:fm,crosshairCursor:Qg,drawSelection:Ag,dropCursor:Mg,getDialog:pm,getDrawSelectionConfig:Eg,getPanel:_f,getTooltip:am,gutter:If,gutterLineClass:An,gutterWidgetClass:Rf,gutters:$o,hasHoverTooltips:hm,highlightActiveLine:jg,highlightActiveLineGutter:Em,highlightSpecialChars:Lg,highlightTrailingWhitespace:Rm,highlightWhitespace:Cm,hoverTooltip:lm,keymap:yf,layer:Ho,lineNumberMarkers:Of,lineNumberWidgetMarker:Lf,lineNumbers:Sm,logException:Se,panels:cm,placeholder:qg,rectangularSelection:Yg,repositionTooltips:um,runScopeHandlers:bg,scrollPastEnd:Ug,showDialog:dm,showPanel:Dr,showTooltip:Vo,tooltips:Zg},Symbol.toStringTag,{value:"Module"})),Bm=1024;let Om=0;class As{constructor(t,e){this.from=t,this.to=e}}class It{constructor(t={}){this.id=Om++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=ue.match(t)),e=>{let i=t(e);return i===void 0?null:[this,i]}}}It.closedBy=new It({deserialize:n=>n.split(" ")});It.openedBy=new It({deserialize:n=>n.split(" ")});It.group=new It({deserialize:n=>n.split(" ")});It.isolate=new It({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});It.contextHash=new It({perNode:!0});It.lookAhead=new It({perNode:!0});It.mounted=new It({perNode:!0});class kn{constructor(t,e,i,r=!1){this.tree=t,this.overlay=e,this.parser=i,this.bracketed=r}static get(t){return t&&t.props&&t.props[It.mounted.id]}}const Lm=Object.create(null);class ue{constructor(t,e,i,r=0){this.name=t,this.props=e,this.id=i,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):Lm,i=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new ue(t.name||"",e,t.id,i);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[s[0].id]=s[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let e=this.prop(It.group);return e?e.indexOf(t)>-1:!1}return this.id==t}static match(t){let e=Object.create(null);for(let i in t)for(let r of i.split(" "))e[r]=t[i];return i=>{for(let r=i.prop(It.group),s=-1;s<(r?r.length:0);s++){let o=e[s<0?i.name:r[s]];if(o)return o}}}}ue.none=new ue("",Object.create(null),0,8);class qo{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let i of this.types){let r=null;for(let s of t){let o=s(i);if(o){r||(r=Object.assign({},i.props));let a=o[1],l=o[0];l.combine&&l.id in r&&(a=l.combine(r[l.id],a)),r[l.id]=a}}e.push(r?new ue(i.name,r,i.id,i.flags):i)}return new qo(e)}}const hr=new WeakMap,xa=new WeakMap;var Vt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(Vt||(Vt={}));class Wt{constructor(t,e,i,r,s){if(this.type=t,this.children=e,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let t=kn.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let i of this.children){let r=i.toString();r&&(e&&(e+=","),e+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new bo(this.topNode,t)}cursorAt(t,e=0,i=0){let r=hr.get(this)||this.topNode,s=new bo(r);return s.moveTo(t,e),hr.set(this,s._tree),s}get topNode(){return new he(this,0,0,null)}resolve(t,e=0){let i=Ln(hr.get(this)||this.topNode,t,e,!1);return hr.set(this,i),i}resolveInner(t,e=0){let i=Ln(xa.get(this)||this.topNode,t,e,!0);return xa.set(this,i),i}resolveStack(t,e=0){return Pm(this,t,e)}iterate(t){let{enter:e,leave:i,from:r=0,to:s=this.length}=t,o=t.mode||0,a=(o&Vt.IncludeAnonymous)>0;for(let l=this.cursor(o|Vt.IncludeAnonymous);;){let h=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||e(l)!==!1)){if(l.firstChild())continue;h=!0}for(;h&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;h=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Ko(ue.none,this.children,this.positions,0,this.children.length,0,this.length,(e,i,r)=>new Wt(this.type,e,i,r,this.propValues),t.makeTree||((e,i,r)=>new Wt(ue.none,e,i,r)))}static build(t){return Fm(t)}}Wt.empty=new Wt(ue.none,[],[],0);class zo{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new zo(this.buffer,this.index)}}class di{constructor(t,e,i){this.buffer=t,this.length=e,this.set=i}get type(){return ue.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],i=this.buffer[t+3],r=this.set.types[e],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),t+=4,i==t)return s;let o=[];for(;t<i;)o.push(this.childString(t)),t=this.buffer[t+3];return s+"("+o.join(",")+")"}findChild(t,e,i,r,s){let{buffer:o}=this,a=-1;for(let l=t;l!=e&&!(Df(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(t,e,i){let r=this.buffer,s=new Uint16Array(e-t),o=0;for(let a=t,l=0;a<e;){s[l++]=r[a++],s[l++]=r[a++]-i;let h=s[l++]=r[a++]-i;s[l++]=r[a++]-t,o=Math.max(o,h)}return new di(s,o,this.set)}}function Df(n,t,e,i){switch(n){case-2:return e<t;case-1:return i>=t&&e<t;case 0:return e<t&&i>t;case 1:return e<=t&&i>t;case 2:return i>t;case 4:return!0}}function Ln(n,t,e,i){for(var r;n.from==n.to||(e<1?n.from>=t:n.from>t)||(e>-1?n.to<=t:n.to<t);){let o=!i&&n instanceof he&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:Vt.IgnoreOverlays;if(i)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof he&&o.index<0&&((r=a.enter(t,e,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=a);for(;;){let o=n.enter(t,e,s);if(!o)return n;n=o}}class Pf{cursor(t=0){return new bo(this,t)}getChild(t,e=null,i=null){let r=Aa(this,t,e,i);return r.length?r[0]:null}getChildren(t,e=null,i=null){return Aa(this,t,e,i)}resolve(t,e=0){return Ln(this,t,e,!1)}resolveInner(t,e=0){return Ln(this,t,e,!0)}matchContext(t){return mo(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),i=this;for(;e;){let r=e.lastChild;if(!r||r.to!=e.to)break;r.type.isError&&r.from==r.to?(i=e,e=r.prevSibling):e=r}return i}get node(){return this}get next(){return this.parent}}class he extends Pf{constructor(t,e,i,r){super(),this._tree=t,this.from=e,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,i,r,s=0){var o;for(let a=this;;){for(let{children:l,positions:h}=a._tree,f=e>0?l.length:-1;t!=f;t+=e){let c=l[t],g=h[t]+a.from;if(!(!(s&Vt.EnterBracketed&&c instanceof Wt&&((o=kn.get(c))===null||o===void 0?void 0:o.overlay)===null&&(g>=i||g+c.length<=i))&&!Df(r,i,g,g+c.length))){if(c instanceof di){if(s&Vt.ExcludeBuffers)continue;let m=c.findChild(0,c.buffer.length,e,i-g,r);if(m>-1)return new Ve(new Nm(a,c,t,g),null,m)}else if(s&Vt.IncludeAnonymous||!c.type.isAnonymous||Go(c)){let m;if(!(s&Vt.IgnoreMounts)&&(m=kn.get(c))&&!m.overlay)return new he(m.tree,g,t,a);let u=new he(c,g,t,a);return s&Vt.IncludeAnonymous||!u.type.isAnonymous?u:u.nextChild(e<0?c.children.length-1:0,e,i,r,s)}}}if(s&Vt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?t=a.index+e:t=e<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,e,i=0){let r;if(!(i&Vt.IgnoreOverlays)&&(r=kn.get(this._tree))&&r.overlay){let s=t-this.from,o=i&Vt.EnterBracketed&&r.bracketed;for(let{from:a,to:l}of r.overlay)if((e>0||o?a<=s:a<s)&&(e<0||o?l>=s:l>s))return new he(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,i)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Aa(n,t,e,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(e!=null){for(let o=!1;!o;)if(o=r.type.is(e),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function mo(n,t,e=t.length-1){for(let i=n;e>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(t[e]&&t[e]!=i.name)return!1;e--}}return!0}class Nm{constructor(t,e,i,r){this.parent=t,this.buffer=e,this.index=i,this.start=r}}class Ve extends Pf{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,i){super(),this.context=t,this._parent=e,this.index=i,this.type=t.buffer.set.types[t.buffer.buffer[i]]}child(t,e,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,i);return s<0?null:new Ve(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,e,i=0){if(i&Vt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return s<0?null:new Ve(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Ve(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Ve(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];t.push(i.slice(r,s,o)),e.push(0)}return new Wt(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Ff(n){if(!n.length)return null;let t=0,e=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>e.from||o.to<e.to)&&(e=o,t=s)}let i=e instanceof he&&e.index<0?null:e.parent,r=n.slice();return i?r[t]=i:r.splice(t,1),new Dm(r,e)}class Dm{constructor(t,e){this.heads=t,this.node=e}get next(){return Ff(this.heads)}}function Pm(n,t,e){let i=n.resolveInner(t,e),r=null;for(let s=i instanceof he?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(t,e)),s=o}else{let o=kn.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let a=new he(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Ln(a,t,e,!1))}}return r?Ff(r):i}class bo{get name(){return this.type.name}constructor(t,e=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=e&~Vt.EnterBracketed,t instanceof he)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let i=t._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,e){this.index=t;let{start:i,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=i+r.buffer[t+1],this.to=i+r.buffer[t+2],!0}yield(t){return t?t instanceof he?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,i){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,i=this.mode){return this.buffer?i&Vt.ExcludeBuffers?!1:this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Vt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Vt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:e}=this.buffer,i=this.stack.length-1;if(t<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(e.findChild(r,this.index,-1,0,4))}else{let r=e.buffer[this.index+3];if(r<(i<0?e.buffer.length:e.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,i,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:e,parent:i}=r)}else({index:e,_parent:i}=this._tree);for(;i;{index:e,_parent:i}=i)if(e>-1)for(let s=e+t,o=t<0?-1:i._tree.children.length;s!=o;s+=t){let a=i._tree.children[s];if(this.mode&Vt.IncludeAnonymous||a instanceof di||!a.type.isAnonymous||Go(a))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,i=0;if(t&&t.context==this.buffer)t:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,i=s+1;break t}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)e=new Ve(this.buffer,e,this.stack[r]);return this.bufferNode=new Ve(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let i=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&e&&e(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(t){if(!this.buffer)return mo(this.node.parent,t);let{buffer:e}=this.buffer,{types:i}=e.set;for(let r=t.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return mo(this._tree,t,r);let o=i[e.buffer[this.stack[s]]];if(!o.isAnonymous){if(t[r]&&t[r]!=o.name)return!1;r--}}return!0}}function Go(n){return n.children.some(t=>t instanceof di||!t.type.isAnonymous||Go(t))}function Fm(n){var t;let{buffer:e,nodeSet:i,maxBufferLength:r=Bm,reused:s=[],minRepeatType:o=i.types.length}=n,a=Array.isArray(e)?new zo(e,e.length):e,l=i.types,h=0,f=0;function c(E,y,S,M,I,q){let{id:z,start:N,end:J,size:P}=a,W=f,C=h;if(P<0)if(a.next(),P==-1){let T=s[z];S.push(T),M.push(N-E);return}else if(P==-3){h=z;return}else if(P==-4){f=z;return}else throw new RangeError(`Unrecognized record size: ${P}`);let K=l[z],H,G,lt=N-E;if(J-N<=r&&(G=w(a.pos-y,I))){let T=new Uint16Array(G.size-G.skip),U=a.pos-G.size,Z=T.length;for(;a.pos>U;)Z=_(G.start,T,Z);H=new di(T,J-G.start,i),lt=G.start-E}else{let T=a.pos-P;a.next();let U=[],Z=[],j=z>=o?z:-1,X=0,at=J;for(;a.pos>T;)j>=0&&a.id==j&&a.size>=0?(a.end<=at-r&&(u(U,Z,N,X,a.end,at,j,W,C),X=U.length,at=a.end),a.next()):q>2500?g(N,T,U,Z):c(N,T,U,Z,j,q+1);if(j>=0&&X>0&&X<U.length&&u(U,Z,N,X,N,at,j,W,C),U.reverse(),Z.reverse(),j>-1&&X>0){let tt=m(K,C);H=Ko(K,U,Z,0,U.length,0,J-N,tt,tt)}else H=p(K,U,Z,J-N,W-J,C)}S.push(H),M.push(lt)}function g(E,y,S,M){let I=[],q=0,z=-1;for(;a.pos>y;){let{id:N,start:J,end:P,size:W}=a;if(W>4)a.next();else{if(z>-1&&J<z)break;z<0&&(z=P-r),I.push(N,J,P),q++,a.next()}}if(q){let N=new Uint16Array(q*4),J=I[I.length-2];for(let P=I.length-3,W=0;P>=0;P-=3)N[W++]=I[P],N[W++]=I[P+1]-J,N[W++]=I[P+2]-J,N[W++]=W;S.push(new di(N,I[2]-J,i)),M.push(J-E)}}function m(E,y){return(S,M,I)=>{let q=0,z=S.length-1,N,J;if(z>=0&&(N=S[z])instanceof Wt){if(!z&&N.type==E&&N.length==I)return N;(J=N.prop(It.lookAhead))&&(q=M[z]+N.length+J)}return p(E,S,M,I,q,y)}}function u(E,y,S,M,I,q,z,N,J){let P=[],W=[];for(;E.length>M;)P.push(E.pop()),W.push(y.pop()+S-I);E.push(p(i.types[z],P,W,q-I,N-q,J)),y.push(I-S)}function p(E,y,S,M,I,q,z){if(q){let N=[It.contextHash,q];z=z?[N].concat(z):[N]}if(I>25){let N=[It.lookAhead,I];z=z?[N].concat(z):[N]}return new Wt(E,y,S,M,z)}function w(E,y){let S=a.fork(),M=0,I=0,q=0,z=S.end-r,N={size:0,start:0,skip:0};t:for(let J=S.pos-E;S.pos>J;){let P=S.size;if(S.id==y&&P>=0){N.size=M,N.start=I,N.skip=q,q+=4,M+=4,S.next();continue}let W=S.pos-P;if(P<0||W<J||S.start<z)break;let C=S.id>=o?4:0,K=S.start;for(S.next();S.pos>W;){if(S.size<0)if(S.size==-3||S.size==-4)C+=4;else break t;else S.id>=o&&(C+=4);S.next()}I=K,M+=P,q+=C}return(y<0||M==E)&&(N.size=M,N.start=I,N.skip=q),N.size>4?N:void 0}function _(E,y,S){let{id:M,start:I,end:q,size:z}=a;if(a.next(),z>=0&&M<o){let N=S;if(z>4){let J=a.pos-(z-4);for(;a.pos>J;)S=_(E,y,S)}y[--S]=N,y[--S]=q-E,y[--S]=I-E,y[--S]=M}else z==-3?h=M:z==-4&&(f=M);return S}let R=[],A=[];for(;a.pos>0;)c(n.start||0,n.bufferStart||0,R,A,-1,0);let k=(t=n.length)!==null&&t!==void 0?t:R.length?A[0]+R[0].length:0;return new Wt(l[n.topID],R.reverse(),A.reverse(),k)}const Ea=new WeakMap;function xr(n,t){if(!n.isAnonymous||t instanceof di||t.type!=n)return 1;let e=Ea.get(t);if(e==null){e=1;for(let i of t.children){if(i.type!=n||!(i instanceof Wt)){e=1;break}e+=xr(n,i)}Ea.set(t,e)}return e}function Ko(n,t,e,i,r,s,o,a,l){let h=0;for(let u=i;u<r;u++)h+=xr(n,t[u]);let f=Math.ceil(h*1.5/8),c=[],g=[];function m(u,p,w,_,R){for(let A=w;A<_;){let k=A,E=p[A],y=xr(n,u[A]);for(A++;A<_;A++){let S=xr(n,u[A]);if(y+S>=f)break;y+=S}if(A==k+1){if(y>f){let S=u[k];m(S.children,S.positions,0,S.children.length,p[k]+R);continue}c.push(u[k])}else{let S=p[A-1]+u[A-1].length-E;c.push(Ko(n,u,p,k,A,E,S,null,l))}g.push(E+R-s)}}return m(t,e,i,r,0),(a||l)(c,g,o)}class vb{constructor(){this.map=new WeakMap}setBuffer(t,e,i){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(e,i)}getBuffer(t,e){let i=this.map.get(t);return i&&i.get(e)}set(t,e){t instanceof Ve?this.setBuffer(t.context.buffer,t.index,e):t instanceof he&&this.map.set(t.tree,e)}get(t){return t instanceof Ve?this.getBuffer(t.context.buffer,t.index):t instanceof he?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class vi{constructor(t,e,i,r,s=!1,o=!1){this.from=t,this.to=e,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,e=[],i=!1){let r=[new vi(0,t.length,t,0,!1,i)];for(let s of e)s.to>t.length&&r.push(s);return r}static applyChanges(t,e,i=128){if(!e.length)return t;let r=[],s=1,o=t.length?t[0]:null;for(let a=0,l=0,h=0;;a++){let f=a<e.length?e[a]:null,c=f?f.fromA:1e9;if(c-l>=i)for(;o&&o.from<c;){let g=o;if(l>=g.from||c<=g.to||h){let m=Math.max(g.from,l)-h,u=Math.min(g.to,c)-h;g=m>=u?null:new vi(m,u,g.tree,g.offset+h,a>0,!!f)}if(g&&r.push(g),o.to>c)break;o=s<t.length?t[s++]:null}if(!f)break;l=f.toA,h=f.toA-f.toB}return r}}class Wf{startParse(t,e,i){return typeof t=="string"&&(t=new Wm(t)),i=i?i.length?i.map(r=>new As(r.from,r.to)):[new As(0,0)]:[new As(0,t.length)],this.createParse(t,e||[],i)}parse(t,e,i){let r=this.startParse(t,e,i);for(;;){let s=r.advance();if(s)return s}}}class Wm{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new It({perNode:!0});let Um=0;class we{constructor(t,e,i,r){this.name=t,this.set=e,this.base=i,this.modified=r,this.id=Um++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let i=typeof t=="string"?t:"?";if(t instanceof we&&(e=t),e?.base)throw new Error("Can not derive from a modified tag");let r=new we(i,[],null,[]);if(r.set.push(r),e)for(let s of e.set)r.set.push(s);return r}static defineModifier(t){let e=new Pr(t);return i=>i.modified.indexOf(e)>-1?i:Pr.get(i.base||i,i.modified.concat(e).sort((r,s)=>r.id-s.id))}}let jm=0;class Pr{constructor(t){this.name=t,this.instances=[],this.id=jm++}static get(t,e){if(!e.length)return t;let i=e[0].instances.find(a=>a.base==t&&Hm(e,a.modified));if(i)return i;let r=[],s=new we(t.name,r,t,e);for(let a of e)a.instances.push(s);let o=Vm(e);for(let a of t.set)if(!a.modified.length)for(let l of o)r.push(Pr.get(a,l));return s}}function Hm(n,t){return n.length==t.length&&n.every((e,i)=>e==t[i])}function Vm(n){let t=[[]];for(let e=0;e<n.length;e++)for(let i=0,r=t.length;i<r;i++)t.push(t[i].concat(n[e]));return t.sort((e,i)=>i.length-e.length)}function $m(n){let t=Object.create(null);for(let e in n){let i=n[e];Array.isArray(i)||(i=[i]);for(let r of e.split(" "))if(r){let s=[],o=2,a=r;for(let c=0;;){if(a=="..."&&c>0&&c+3==r.length){o=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!g)throw new RangeError("Invalid path: "+r);if(s.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),c+=g[0].length,c==r.length)break;let m=r[c++];if(c==r.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+r);a=r.slice(c)}let l=s.length-1,h=s[l];if(!h)throw new RangeError("Invalid path: "+r);let f=new Nn(i,o,l>0?s.slice(0,l):null);t[h]=f.sort(t[h])}}return Uf.add(t)}const Uf=new It({combine(n,t){let e,i,r;for(;n||t;){if(!n||t&&n.depth>=t.depth?(r=t,t=t.next):(r=n,n=n.next),e&&e.mode==r.mode&&!r.context&&!e.context)continue;let s=new Nn(r.tags,r.mode,r.context);e?e.next=s:i=s,e=s}return i}});class Nn{constructor(t,e,i,r){this.tags=t,this.mode=e,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Nn.empty=new Nn([],2,null);function jf(n,t){let e=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))e[s.tag.id]=s.class;else for(let o of s.tag)e[o.id]=s.class;let{scope:i,all:r=null}=t||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let h=e[l.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function qm(n,t){let e=null;for(let i of n){let r=i.style(t);r&&(e=e?e+" "+r:r)}return e}function zm(n,t,e,i=0,r=n.length){let s=new Gm(i,Array.isArray(t)?t:[t],e);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class Gm{constructor(t,e,i){this.at=t,this.highlighters=e,this.span=i,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,i,r,s){let{type:o,from:a,to:l}=t;if(a>=i||l<=e)return;o.isTop&&(s=this.highlighters.filter(m=>!m.scope||m.scope(o)));let h=r,f=Km(t)||Nn.empty,c=qm(s,f.tags);if(c&&(h&&(h+=" "),h+=c,f.mode==1&&(r+=(r?" ":"")+c)),this.startSpan(Math.max(e,a),h),f.opaque)return;let g=t.tree&&t.tree.prop(It.mounted);if(g&&g.overlay){let m=t.node.enter(g.overlay[0].from+a,1),u=this.highlighters.filter(w=>!w.scope||w.scope(g.tree.type)),p=t.firstChild();for(let w=0,_=a;;w++){let R=w<g.overlay.length?g.overlay[w]:null,A=R?R.from+a:l,k=Math.max(e,_),E=Math.min(i,A);if(k<E&&p)for(;t.from<E&&(this.highlightRange(t,k,E,r,s),this.startSpan(Math.min(E,t.to),h),!(t.to>=A||!t.nextSibling())););if(!R||A>i)break;_=R.to+a,_>e&&(this.highlightRange(m.cursor(),Math.max(e,R.from+a),Math.min(i,_),"",u),this.startSpan(Math.min(i,_),h))}p&&t.parent()}else if(t.firstChild()){g&&(r="");do if(!(t.to<=e)){if(t.from>=i)break;this.highlightRange(t,e,i,r,s),this.startSpan(Math.min(i,t.to),h)}while(t.nextSibling());t.parent()}}}function Km(n){let t=n.type.prop(Uf);for(;t&&t.context&&!n.matchContext(t.context);)t=t.next;return t||null}const ut=we.define,fr=ut(),ii=ut(),ka=ut(ii),_a=ut(ii),ni=ut(),ur=ut(ni),Es=ut(ni),Pe=ut(),mi=ut(Pe),Ne=ut(),De=ut(),yo=ut(),on=ut(yo),cr=ut(),v={comment:fr,lineComment:ut(fr),blockComment:ut(fr),docComment:ut(fr),name:ii,variableName:ut(ii),typeName:ka,tagName:ut(ka),propertyName:_a,attributeName:ut(_a),className:ut(ii),labelName:ut(ii),namespace:ut(ii),macroName:ut(ii),literal:ni,string:ur,docString:ut(ur),character:ut(ur),attributeValue:ut(ur),number:Es,integer:ut(Es),float:ut(Es),bool:ut(ni),regexp:ut(ni),escape:ut(ni),color:ut(ni),url:ut(ni),keyword:Ne,self:ut(Ne),null:ut(Ne),atom:ut(Ne),unit:ut(Ne),modifier:ut(Ne),operatorKeyword:ut(Ne),controlKeyword:ut(Ne),definitionKeyword:ut(Ne),moduleKeyword:ut(Ne),operator:De,derefOperator:ut(De),arithmeticOperator:ut(De),logicOperator:ut(De),bitwiseOperator:ut(De),compareOperator:ut(De),updateOperator:ut(De),definitionOperator:ut(De),typeOperator:ut(De),controlOperator:ut(De),punctuation:yo,separator:ut(yo),bracket:on,angleBracket:ut(on),squareBracket:ut(on),paren:ut(on),brace:ut(on),content:Pe,heading:mi,heading1:ut(mi),heading2:ut(mi),heading3:ut(mi),heading4:ut(mi),heading5:ut(mi),heading6:ut(mi),contentSeparator:ut(Pe),list:ut(Pe),quote:ut(Pe),emphasis:ut(Pe),strong:ut(Pe),link:ut(Pe),monospace:ut(Pe),strikethrough:ut(Pe),inserted:ut(),deleted:ut(),changed:ut(),invalid:ut(),meta:cr,documentMeta:ut(cr),annotation:ut(cr),processingInstruction:ut(cr),definition:we.defineModifier("definition"),constant:we.defineModifier("constant"),function:we.defineModifier("function"),standard:we.defineModifier("standard"),local:we.defineModifier("local"),special:we.defineModifier("special")};for(let n in v){let t=v[n];t instanceof we&&(t.name=n)}jf([{tag:v.link,class:"tok-link"},{tag:v.heading,class:"tok-heading"},{tag:v.emphasis,class:"tok-emphasis"},{tag:v.strong,class:"tok-strong"},{tag:v.keyword,class:"tok-keyword"},{tag:v.atom,class:"tok-atom"},{tag:v.bool,class:"tok-bool"},{tag:v.url,class:"tok-url"},{tag:v.labelName,class:"tok-labelName"},{tag:v.inserted,class:"tok-inserted"},{tag:v.deleted,class:"tok-deleted"},{tag:v.literal,class:"tok-literal"},{tag:v.string,class:"tok-string"},{tag:v.number,class:"tok-number"},{tag:[v.regexp,v.escape,v.special(v.string)],class:"tok-string2"},{tag:v.variableName,class:"tok-variableName"},{tag:v.local(v.variableName),class:"tok-variableName tok-local"},{tag:v.definition(v.variableName),class:"tok-variableName tok-definition"},{tag:v.special(v.variableName),class:"tok-variableName2"},{tag:v.definition(v.propertyName),class:"tok-propertyName tok-definition"},{tag:v.typeName,class:"tok-typeName"},{tag:v.namespace,class:"tok-namespace"},{tag:v.className,class:"tok-className"},{tag:v.macroName,class:"tok-macroName"},{tag:v.propertyName,class:"tok-propertyName"},{tag:v.operator,class:"tok-operator"},{tag:v.comment,class:"tok-comment"},{tag:v.meta,class:"tok-meta"},{tag:v.invalid,class:"tok-invalid"},{tag:v.punctuation,class:"tok-punctuation"}]);var ks;const li=new It;function Yo(n){return wt.define({combine:n?t=>t.concat(n):void 0})}const Hf=new It;class oe{constructor(t,e,i=[],r=""){this.data=t,this.name=r,Bt.prototype.hasOwnProperty("tree")||Object.defineProperty(Bt.prototype,"tree",{get(){return ce(this)}}),this.parser=e,this.extension=[Ze.of(this),Bt.languageData.of((s,o,a)=>{let l=Ta(s,o,a),h=l.type.prop(li);if(!h)return[];let f=s.facet(h),c=l.type.prop(Hf);if(c){let g=l.resolve(o-l.from,a);for(let m of c)if(m.test(g,s)){let u=s.facet(m.facet);return m.type=="replace"?u:u.concat(f)}}return f})].concat(i)}isActiveAt(t,e,i=-1){return Ta(t,e,i).type.prop(li)==this.data}findRegions(t){let e=t.facet(Ze);if(e?.data==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(li)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(It.mounted);if(a){if(a.tree.prop(li)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let h=s.children[l];h instanceof Wt&&r(h,s.positions[l]+o)}};return r(ce(t),0),i}get allowsNesting(){return!0}}oe.setState=Lt.define();function Ta(n,t,e){let i=n.facet(Ze),r=ce(n).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(t,e,Vt.ExcludeBuffers|Vt.EnterBracketed))s.type.isTop&&(r=s);return r}class Fr extends oe{constructor(t,e,i){super(t,e,[],i),this.parser=e}static define(t){let e=Yo(t.languageData);return new Fr(e,t.parser.configure({props:[li.add(i=>i.isTop?e:void 0)]}),t.name)}configure(t,e){return new Fr(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ce(n){let t=n.field(oe.state,!1);return t?t.tree:Wt.empty}function Vf(n,t,e=50){var i;let r=(i=n.field(oe.state,!1))===null||i===void 0?void 0:i.context;if(!r)return null;let s=r.viewport;r.updateViewport({from:0,to:t});let o=r.isDone(t)||r.work(e,t)?r.tree:null;return r.updateViewport(s),o}function Ym(n,t=n.doc.length){var e;return((e=n.field(oe.state,!1))===null||e===void 0?void 0:e.context.isDone(t))||!1}function Xm(n,t=n.viewport.to,e=100){let i=Vf(n.state,t,e);return i!=ce(n.state)&&n.dispatch({}),!!i}function Jm(n){var t;return((t=n.plugin(zf))===null||t===void 0?void 0:t.isWorking())||!1}class $f{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let i=this.cursorPos-this.string.length;return t<i||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-i,e-i)}}let ln=null;class _i{constructor(t,e,i=[],r,s,o,a,l){this.parser=t,this.state=e,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,e,i){return new _i(t,e,[],Wt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new $f(this.state.doc),this.fragments)}work(t,e){return e!=null&&e>=this.state.doc.length&&(e=void 0),this.tree!=Wt.empty&&this.isDone(e??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),e!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(vi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(e??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(e=this.parse.advance()););}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(vi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=ln;ln=this;try{return t()}finally{ln=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Ca(t,e.from,e.to);return t}changes(t,e){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((h,f,c,g)=>l.push({fromA:h,toA:f,fromB:c,toB:g})),i=vi.applyChanges(i,l),r=Wt.empty,s=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let f=t.mapPos(h.from,1),c=t.mapPos(h.to,-1);f<c&&a.push({from:f,to:c})}}}return new _i(this.parser,e,i,r,s,o,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<t.to&&s>t.from&&(this.fragments=Ca(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=e?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Wf{createParse(e,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=ln;if(l){for(let h of r)l.tempSkipped.push(h);t&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,t]):t)}return this.parsedPos=o,new Wt(ue.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&e[0].from==0&&e[0].to>=t}static get(){return ln}}function Ca(n,t,e){return vi.applyChanges(n,[{fromA:t,toA:e,fromB:t,toB:e}])}class Ki{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),i=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,i)||e.takeTree(),new Ki(e)}static init(t){let e=Math.min(3e3,t.doc.length),i=_i.create(t.facet(Ze).parser,t,{from:0,to:e});return i.work(20,e)||i.takeTree(),new Ki(i)}}oe.state=be.define({create:Ki.init,update(n,t){for(let e of t.effects)if(e.is(oe.setState))return e.value;return t.startState.facet(Ze)!=t.state.facet(Ze)?Ki.init(t.state):n.apply(t)}});let qf=n=>{let t=setTimeout(()=>n(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(qf=n=>{let t=-1,e=setTimeout(()=>{t=requestIdleCallback(n,{timeout:400})},100);return()=>t<0?clearTimeout(e):cancelIdleCallback(t)});const _s=typeof navigator<"u"&&(!((ks=navigator.scheduling)===null||ks===void 0)&&ks.isInputPending)?()=>navigator.scheduling.isInputPending():null,zf=jt.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(oe.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(oe.state);(e.tree!=e.context.tree||!e.context.isDone(t.doc.length))&&(this.working=qf(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(oe.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!_s?Math.max(25,t.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>_s&&_s()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:oe.setState.of(new Ki(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Se(this.view.state,e)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ze=wt.define({combine(n){return n.length?n[0]:null},enables:n=>[oe.state,zf,Et.contentAttributes.compute([n],t=>{let e=t.facet(n);return e&&e.name?{"data-language":e.name}:{}})]});class Qm{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}class Xo{constructor(t,e,i,r,s,o=void 0){this.name=t,this.alias=e,this.extensions=i,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(t=>this.support=t,t=>{throw this.loading=null,t}))}static of(t){let{load:e,support:i}=t;if(!e){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");e=()=>Promise.resolve(i)}return new Xo(t.name,(t.alias||[]).concat(t.name).map(r=>r.toLowerCase()),t.extensions||[],t.filename,e,i)}static matchFilename(t,e){for(let r of t)if(r.filename&&r.filename.test(e))return r;let i=/\.([^.]+)$/.exec(e);if(i){for(let r of t)if(r.extensions.indexOf(i[1])>-1)return r}return null}static matchLanguageName(t,e,i=!0){e=e.toLowerCase();for(let r of t)if(r.alias.some(s=>s==e))return r;if(i)for(let r of t)for(let s of r.alias){let o=e.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(e[o-1])&&!/\w/.test(e[o+s.length])))return r}return null}}const Gf=wt.define(),Jo=wt.define({combine:n=>{if(!n.length)return"  ";let t=n[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return t}});function Dn(n){let t=n.facet(Jo);return t.charCodeAt(0)==9?n.tabSize*t.length:t.length}function Qo(n,t){let e="",i=n.tabSize,r=n.facet(Jo)[0];if(r=="	"){for(;t>=i;)e+="	",t-=i;r=" "}for(let s=0;s<t;s++)e+=r;return e}function Zo(n,t){n instanceof Bt&&(n=new Qr(n));for(let i of n.state.facet(Gf)){let r=i(n,t);if(r!==void 0)return r}let e=ce(n.state);return e.length>=t?t0(n,e,t):null}function Zm(n,t,e){let i=Object.create(null),r=new Qr(n,{overrideIndentation:o=>{var a;return(a=i[o])!==null&&a!==void 0?a:-1}}),s=[];for(let o=t;o<=e;){let a=n.doc.lineAt(o);o=a.to+1;let l=Zo(r,a.from);if(l==null)continue;/\S/.test(a.text)||(l=0);let h=/^\s*/.exec(a.text)[0],f=Qo(n,l);h!=f&&(i[a.from]=l,s.push({from:a.from,to:a.from+h.length,insert:f}))}return n.changes(s)}class Qr{constructor(t,e={}){this.state=t,this.options=e,this.unit=Dn(t)}lineAt(t,e=1){let i=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(t,e);return i.slice(t-r,Math.min(i.length,t+100-r))}column(t,e=1){let{text:i,from:r}=this.lineAt(t,e),s=this.countColumn(i,t-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(t,e=t.length){return Hr(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:i,from:r}=this.lineAt(t,e),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const tl=new It;function t0(n,t,e){let i=t.resolveStack(e),r=t.resolveInner(e,-1).resolve(e,0).enterUnfinishedNodesBefore(e);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Kf(i,n,e)}function Kf(n,t,e){for(let i=n;i;i=i.next){let r=i0(i.node);if(r)return r(Zr.create(t,e,i))}return 0}function e0(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function i0(n){let t=n.type.prop(tl);if(t)return t;let e=n.firstChild,i;if(e&&(i=e.type.prop(It.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Yf(o,!0,1,void 0,s&&!e0(o)?r.from:void 0)}return n.parent==null?n0:null}function n0(){return 0}class Zr extends Qr{constructor(t,e,i){super(t.state,t.options),this.base=t,this.pos=e,this.context=i}get node(){return this.context.node}static create(t,e,i){return new Zr(t,e,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let i=t.resolve(e.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(r0(i,t))break;e=this.state.doc.lineAt(i.from)}return this.lineIndent(e.from)}continue(){return Kf(this.context.next,this.base,this.pos)}}function r0(n,t){for(let e=t;e;e=e.parent)if(n==e)return!0;return!1}function s0(n){let t=n.node,e=t.childAfter(t.from),i=t.lastChild;if(!e)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(e.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=e.to;;){let l=t.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let h=/^ */.exec(s.text.slice(e.to-s.from))[0].length;return{from:e.from,to:e.to+h}}a=l.to}}function o0({closing:n,align:t=!0,units:e=1}){return i=>Yf(i,t,e,n)}function Yf(n,t,e,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==n.pos+o,l=t?s0(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*e)}const l0=n=>n.baseIndent;function a0({except:n,units:t=1}={}){return e=>{let i=n&&n.test(e.textAfter);return e.baseIndent+(i?0:t*e.unit)}}const h0=200;function f0(){return Bt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let t=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!t.length)return n;let e=n.newDoc,{head:i}=n.newSelection.main,r=e.lineAt(i);if(i>r.from+h0)return n;let s=e.sliceString(r.from,i);if(!t.some(h=>h.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:h}of o.selection.ranges){let f=o.doc.lineAt(h);if(f.from==a)continue;a=f.from;let c=Zo(o,f.from);if(c==null)continue;let g=/^\s*/.exec(f.text)[0],m=Qo(o,c);g!=m&&l.push({from:f.from,to:f.from+g.length,insert:m})}return l.length?[n,{changes:l,sequential:!0}]:n})}const Xf=wt.define(),Jf=new It;function u0(n){let t=n.firstChild,e=n.lastChild;return t&&t.to<e.from?{from:t.to,to:e.type.isError?n.to:e.from}:null}function c0(n,t,e){let i=ce(n);if(i.length<e)return null;let r=i.resolveStack(e,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=e||a.from>e)continue;if(s&&a.from<t)break;let l=a.type.prop(Jf);if(l&&(a.to<i.length-50||i.length==n.doc.length||!d0(a))){let h=l(a,n);h&&h.from<=e&&h.from>=t&&h.to>e&&(s=h)}}return s}function d0(n){let t=n.lastChild;return t&&t.to==n.to&&t.type.isError}function Yi(n,t,e){for(let i of n.facet(Xf)){let r=i(n,t,e);if(r)return r}return c0(n,t,e)}function Qf(n,t){let e=t.mapPos(n.from,1),i=t.mapPos(n.to,-1);return e>=i?void 0:{from:e,to:i}}const Zi=Lt.define({map:Qf}),Ci=Lt.define({map:Qf});function el(n){let t=[];for(let{head:e}of n.state.selection.ranges)t.some(i=>i.from<=e&&i.to>=e)||t.push(n.lineBlockAt(e));return t}const ti=be.define({create(){return Tt.none},update(n,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((e,i)=>n=Ma(n,e,i)),n=n.map(t.changes);for(let e of t.effects)if(e.is(Zi)&&!g0(n,e.value.from,e.value.to)){let{preparePlaceholder:i}=t.state.facet(nl),r=i?Tt.replace({widget:new v0(i(t.state,e.value))}):Ra;n=n.update({add:[r.range(e.value.from,e.value.to)]})}else e.is(Ci)&&(n=n.update({filter:(i,r)=>e.value.from!=i||e.value.to!=r,filterFrom:e.value.from,filterTo:e.value.to}));return t.selection&&(n=Ma(n,t.selection.main.head)),n},provide:n=>Et.decorations.from(n),toJSON(n,t){let e=[];return n.between(0,t.doc.length,(i,r)=>{e.push(i,r)}),e},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let e=0;e<n.length;){let i=n[e++],r=n[e++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(Ra.range(i,r))}return Tt.set(t,!0)}});function Ma(n,t,e=t){let i=!1;return n.between(t,e,(r,s)=>{r<e&&s>t&&(i=!0)}),i?n.update({filterFrom:t,filterTo:e,filter:(r,s)=>r>=e||s<=t}):n}function p0(n){return n.field(ti,!1)||Mt.empty}function Pn(n,t,e){var i;let r=null;return(i=n.field(ti,!1))===null||i===void 0||i.between(t,e,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function g0(n,t,e){let i=!1;return n.between(t,t,(r,s)=>{r==t&&s==e&&(i=!0)}),i}function il(n,t){return n.field(ti,!1)?t:t.concat(Lt.appendConfig.of(rl()))}const Zf=n=>{for(let t of el(n)){let e=Yi(n.state,t.from,t.to);if(e)return n.dispatch({effects:il(n.state,[Zi.of(e),Wr(n,e)])}),!0}return!1},tu=n=>{if(!n.state.field(ti,!1))return!1;let t=[];for(let e of el(n)){let i=Pn(n.state,e.from,e.to);i&&t.push(Ci.of(i),Wr(n,i,!1))}return t.length&&n.dispatch({effects:t}),t.length>0};function Wr(n,t,e=!0){let i=n.state.doc.lineAt(t.from).number,r=n.state.doc.lineAt(t.to).number;return Et.announce.of(`${n.state.phrase(e?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const eu=n=>{let{state:t}=n,e=[];for(let i=0;i<t.doc.length;){let r=n.lineBlockAt(i),s=Yi(t,r.from,r.to);s&&e.push(Zi.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return e.length&&n.dispatch({effects:il(n.state,e)}),!!e.length},iu=n=>{let t=n.state.field(ti,!1);if(!t||!t.size)return!1;let e=[];return t.between(0,n.state.doc.length,(i,r)=>{e.push(Ci.of({from:i,to:r}))}),n.dispatch({effects:e}),!0};function m0(n,t){for(let e=t;;){let i=Yi(n.state,e.from,e.to);if(i&&i.to>t.from)return i;if(!e.from)return null;e=n.lineBlockAt(e.from-1)}}const b0=n=>{let t=[];for(let e of el(n)){let i=Pn(n.state,e.from,e.to);if(i)t.push(Ci.of(i),Wr(n,i,!1));else{let r=m0(n,e);r&&t.push(Zi.of(r),Wr(n,r))}}return t.length>0&&n.dispatch({effects:il(n.state,t)}),!!t.length},y0=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Zf},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:tu},{key:"Ctrl-Alt-[",run:eu},{key:"Ctrl-Alt-]",run:iu}],w0={placeholderDOM:null,preparePlaceholder:null,placeholderText:"â¦"},nl=wt.define({combine(n){return Ji(n,w0)}});function rl(n){let t=[ti,A0];return n&&t.push(nl.of(n)),t}function nu(n,t){let{state:e}=n,i=e.facet(nl),r=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),l=Pn(n.state,a.from,a.to);l&&n.dispatch({effects:Ci.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,r,t);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const Ra=Tt.replace({widget:new class extends Ge{toDOM(n){return nu(n,null)}}});class v0 extends Ge{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return nu(t,this.value)}}const S0={openText:"â",closedText:"âº",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ts extends ze{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function x0(n={}){let t={...S0,...n},e=new Ts(t,!0),i=new Ts(t,!1),r=jt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ze)!=o.state.facet(Ze)||o.startState.field(ti,!1)!=o.state.field(ti,!1)||ce(o.startState)!=ce(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Je;for(let l of o.viewportLineBlocks){let h=Pn(o.state,l.from,l.to)?i:Yi(o.state,l.from,l.to)?e:null;h&&a.add(l.from,l.from,h)}return a.finish()}}),{domEventHandlers:s}=t;return[r,If({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(r))===null||a===void 0?void 0:a.markers)||Mt.empty},initialSpacer(){return new Ts(t,!1)},domEventHandlers:{...s,click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let h=Pn(o.state,a.from,a.to);if(h)return o.dispatch({effects:Ci.of(h)}),!0;let f=Yi(o.state,a.from,a.to);return f?(o.dispatch({effects:Zi.of(f)}),!0):!1}}}),rl()]}const A0=Et.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class tn{constructor(t,e){this.specs=t;let i;function r(a){let l=fi.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof e.all=="string"?e.all:e.all?r(e.all):void 0,o=e.scope;this.scope=o instanceof oe?a=>a.prop(li)==o.data:o?a=>a==o:void 0,this.style=jf(t.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new fi(i):null,this.themeType=e.themeType}static define(t,e){return new tn(t,e||{})}}const wo=wt.define(),ru=wt.define({combine(n){return n.length?[n[0]]:null}});function Ar(n){let t=n.facet(wo);return t.length?t:n.facet(ru)}function su(n,t){let e=[_0],i;return n instanceof tn&&(n.module&&e.push(Et.styleModule.of(n.module)),i=n.themeType),t?.fallback?e.push(ru.of(n)):i?e.push(wo.computeN([Et.darkTheme],r=>r.facet(Et.darkTheme)==(i=="dark")?[n]:[])):e.push(wo.of(n)),e}function E0(n,t,e){let i=Ar(n),r=null;if(i){for(let s of i)if(!s.scope||e&&s.scope(e)){let o=s.style(t);o&&(r=r?r+" "+o:o)}}return r}class k0{constructor(t){this.markCache=Object.create(null),this.tree=ce(t.state),this.decorations=this.buildDeco(t,Ar(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=ce(t.state),i=Ar(t.state),r=i!=Ar(t.startState),{viewport:s}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<s.to&&!r&&e.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,i),this.decoratedTo=s.to)}buildDeco(t,e){if(!e||!this.tree.length)return Tt.none;let i=new Je;for(let{from:r,to:s}of t.visibleRanges)zm(this.tree,e,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Tt.mark({class:l})))},r,s);return i.finish()}}const _0=Xi.high(jt.fromClass(k0,{decorations:n=>n.decorations})),T0=tn.define([{tag:v.meta,color:"#404740"},{tag:v.link,textDecoration:"underline"},{tag:v.heading,textDecoration:"underline",fontWeight:"bold"},{tag:v.emphasis,fontStyle:"italic"},{tag:v.strong,fontWeight:"bold"},{tag:v.strikethrough,textDecoration:"line-through"},{tag:v.keyword,color:"#708"},{tag:[v.atom,v.bool,v.url,v.contentSeparator,v.labelName],color:"#219"},{tag:[v.literal,v.inserted],color:"#164"},{tag:[v.string,v.deleted],color:"#a11"},{tag:[v.regexp,v.escape,v.special(v.string)],color:"#e40"},{tag:v.definition(v.variableName),color:"#00f"},{tag:v.local(v.variableName),color:"#30a"},{tag:[v.typeName,v.namespace],color:"#085"},{tag:v.className,color:"#167"},{tag:[v.special(v.variableName),v.macroName],color:"#256"},{tag:v.definition(v.propertyName),color:"#00c"},{tag:v.comment,color:"#940"},{tag:v.invalid,color:"#f00"}]),C0=Et.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ou=1e4,lu="()[]{}",au=wt.define({combine(n){return Ji(n,{afterCursor:!0,brackets:lu,maxScanDistance:ou,renderMatch:I0})}}),M0=Tt.mark({class:"cm-matchingBracket"}),R0=Tt.mark({class:"cm-nonmatchingBracket"});function I0(n){let t=[],e=n.matched?M0:R0;return t.push(e.range(n.start.from,n.start.to)),n.end&&t.push(e.range(n.end.from,n.end.to)),t}const B0=be.define({create(){return Tt.none},update(n,t){if(!t.docChanged&&!t.selection)return n;let e=[],i=t.state.facet(au);for(let r of t.state.selection.ranges){if(!r.empty)continue;let s=gn(t.state,r.head,-1,i)||r.head>0&&gn(t.state,r.head-1,1,i)||i.afterCursor&&(gn(t.state,r.head,1,i)||r.head<t.state.doc.length&&gn(t.state,r.head+1,-1,i));s&&(e=e.concat(i.renderMatch(s,t.state)))}return Tt.set(e,!0)},provide:n=>Et.decorations.from(n)}),O0=[B0,C0];function L0(n={}){return[au.of(n),O0]}const hu=new It;function vo(n,t,e){let i=n.prop(t<0?It.openedBy:It.closedBy);if(i)return i;if(n.name.length==1){let r=e.indexOf(n.name);if(r>-1&&r%2==(t<0?1:0))return[e[r+t]]}return null}function So(n){let t=n.type.prop(hu);return t?t(n.node):n}function gn(n,t,e,i={}){let r=i.maxScanDistance||ou,s=i.brackets||lu,o=ce(n),a=o.resolveInner(t,e);for(let l=a;l;l=l.parent){let h=vo(l.type,e,s);if(h&&l.from<l.to){let f=So(l);if(f&&(e>0?t>=f.from&&t<f.to:t>f.from&&t<=f.to))return N0(n,t,e,l,f,h,s)}}return D0(n,t,e,o,a.type,r,s)}function N0(n,t,e,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},h=0,f=a?.cursor();if(f&&(e<0?f.childBefore(i.from):f.childAfter(i.to)))do if(e<0?f.to<=i.from:f.from>=i.to){if(h==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let c=So(f);return{start:l,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(vo(f.type,e,o))h++;else if(vo(f.type,-e,o)){if(h==0){let c=So(f);return{start:l,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}h--}}while(e<0?f.prevSibling():f.nextSibling());return{start:l,matched:!1}}function D0(n,t,e,i,r,s,o){let a=e<0?n.sliceDoc(t-1,t):n.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=e>0)return null;let h={from:e<0?t-1:t,to:e>0?t+1:t},f=n.doc.iterRange(t,e>0?n.doc.length:0),c=0;for(let g=0;!f.next().done&&g<=s;){let m=f.value;e<0&&(g+=m.length);let u=t+g*e;for(let p=e>0?0:m.length-1,w=e>0?m.length:-1;p!=w;p+=e){let _=o.indexOf(m[p]);if(!(_<0||i.resolveInner(u+p,1).type!=r))if(_%2==0==e>0)c++;else{if(c==1)return{start:h,end:{from:u+p,to:u+p+1},matched:_>>1==l>>1};c--}}e>0&&(g+=m.length)}return f.done?{start:h,matched:!1}:null}function Ia(n,t,e,i=0,r=0){t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length));let s=r;for(let o=i;o<t;o++)n.charCodeAt(o)==9?s+=e-s%e:s++;return s}class sl{constructor(t,e,i,r){this.string=t,this.tabSize=e,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let e=this.string.charAt(this.pos),i;if(typeof t=="string"?i=e==t:i=e&&(t instanceof RegExp?t.test(e):t(e)),i)return++this.pos,e}eatWhile(t){let e=this.pos;for(;this.eat(t););return this.pos>e}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ia(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var t;return(t=this.overrideIndent)!==null&&t!==void 0?t:Ia(this.string,null,this.tabSize)}match(t,e,i){if(typeof t=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,t.length);return r(s)==r(t)?(e!==!1&&(this.pos+=t.length),!0):null}else{let r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&e!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function P0(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||F0,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||al,mergeTokens:n.mergeTokens!==!1}}function F0(n){if(typeof n!="object")return n;let t={};for(let e in n){let i=n[e];t[e]=i instanceof Array?i.slice():i}return t}const Ba=new WeakMap;class ol extends oe{constructor(t){let e=Yo(t.languageData),i=P0(t),r,s=new class extends Wf{createParse(o,a,l){return new U0(r,o,a,l)}};super(e,s,[],t.name),this.topNode=V0(e,this),r=this,this.streamParser=i,this.stateAfter=new It({perNode:!0}),this.tokenTable=t.tokenTable?new du(i.tokenTable):H0}static define(t){return new ol(t)}getIndent(t){let e,{overrideIndentation:i}=t.options;i&&(e=Ba.get(t.state),e!=null&&e<t.pos-1e4&&(e=void 0));let r=ll(this,t.node.tree,t.node.from,t.node.from,e??t.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(t.unit),s=t.node.from),t.pos-s>1e4)return null;for(;s<t.pos;){let l=t.state.doc.lineAt(s),h=Math.min(t.pos,l.to);if(l.length){let f=i?i(l.from):-1,c=new sl(l.text,t.state.tabSize,t.unit,f<0?void 0:f);for(;c.pos<h-l.from;)uu(this.streamParser.token,c,o)}else this.streamParser.blankLine(o,t.unit);if(h==t.pos)break;s=l.to+1}let a=t.lineAt(t.pos);return i&&e==null&&Ba.set(t.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],t)}get allowsNesting(){return!1}}function ll(n,t,e,i,r){let s=e>=i&&e+t.length<=r&&t.prop(n.stateAfter);if(s)return{state:n.streamParser.copyState(s),pos:e+t.length};for(let o=t.children.length-1;o>=0;o--){let a=t.children[o],l=e+t.positions[o],h=a instanceof Wt&&l<r&&ll(n,a,l,i,r);if(h)return h}return null}function fu(n,t,e,i,r){if(r&&e<=0&&i>=t.length)return t;!r&&e==0&&t.type==n.topNode&&(r=!0);for(let s=t.children.length-1;s>=0;s--){let o=t.positions[s],a=t.children[s],l;if(o<i&&a instanceof Wt){if(!(l=fu(n,a,e-o,i-o,r)))break;return r?new Wt(t.type,t.children.slice(0,s).concat(l),t.positions.slice(0,s+1),o+l.length):l}}return null}function W0(n,t,e,i,r){for(let s of t){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=e&&a>e&&ll(n,s.tree,0-s.offset,e,a),h;if(l&&l.pos<=i&&(h=fu(n,s.tree,e+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:h}}return{state:n.streamParser.startState(r?Dn(r):4),tree:Wt.empty}}class U0{constructor(t,e,i,r){this.lang=t,this.input=e,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=_i.get(),o=r[0].from,{state:a,tree:l}=W0(t,i,o,this.to,s?.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let h=0;h<l.children.length;h++)this.chunks.push(l.children[h]),this.chunkPos.push(l.positions[h]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(h=>h.from<=s.viewport.from&&h.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Dn(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let t=_i.get(),e=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(e,this.chunkStart+512);for(t&&(i=Math.min(i,t.viewport.to));this.parsedPos<i;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,e),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let e=this.input.chunk(t);if(this.input.lineChunks)e==`
`&&(e="");else{let i=e.indexOf(`
`);i>-1&&(e=e.slice(0,i))}return t+e.length<=this.to?e:e.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,e=this.lineAfter(t),i=t+e.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(e=e.slice(0,s-(i-e.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);e+=a,i=o+a.length}return{line:e,end:i}}skipGapsTo(t,e,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=t+e;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;e+=o-r}return e}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(t,e,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(e,r,1),e+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==t&&this.chunk[o+2]==e?this.chunk[o+2]=i:this.chunk.push(t,e,i,s),r}parseLine(t){let{line:e,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new sl(e,t?t.state.tabSize:4,t?Dn(t.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=uu(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=Wt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:j0,topID:0,maxBufferLength:512,reused:this.chunkReused});t=new Wt(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Wt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function uu(n,t,e){t.start=t.pos;for(let i=0;i<10;i++){let r=n(t,e);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}const al=Object.create(null),Fn=[ue.none],j0=new qo(Fn),Oa=[],La=Object.create(null),cu=Object.create(null);for(let[n,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])cu[n]=pu(al,t);class du{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),cu)}resolve(t){return t?this.table[t]||(this.table[t]=pu(this.extra,t)):0}}const H0=new du(al);function Cs(n,t){Oa.indexOf(n)>-1||(Oa.push(n),console.warn(t))}function pu(n,t){let e=[];for(let a of t.split(" ")){let l=[];for(let h of a.split(".")){let f=n[h]||v[h];f?typeof f=="function"?l.length?l=l.map(f):Cs(h,`Modifier ${h} used at start of tag`):l.length?Cs(h,`Tag ${h} used as modifier`):l=Array.isArray(f)?f:[f]:Cs(h,`Unknown highlighting tag ${h}`)}for(let h of l)e.push(h)}if(!e.length)return 0;let i=t.replace(/ /g,"_"),r=i+" "+e.map(a=>a.id),s=La[r];if(s)return s.id;let o=La[r]=ue.define({id:Fn.length,name:i,props:[$m({[i]:e})]});return Fn.push(o),o.id}function V0(n,t){let e=ue.define({id:Fn.length,name:"Document",props:[li.add(()=>n),tl.add(()=>i=>t.getIndent(i))],top:!0});return Fn.push(e),e}function gu(n){return n.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(n)}function mu(n){for(let t=n.iter();!t.next().done;)if(gu(t.value))return!0;return!1}function $0(n){let t=!1;return n.iterChanges((e,i,r,s,o)=>{!t&&mu(o)&&(t=!0)}),t}const xo=wt.define({combine:n=>n.some(t=>t)});function q0(n={}){let t=[z0];return n.alwaysIsolate&&t.push(xo.of(!0)),t}const z0=jt.fromClass(class{constructor(n){this.always=n.state.facet(xo)||n.textDirection!=Nt.LTR||n.state.facet(Et.perLineTextDirection),this.hasRTL=!this.always&&mu(n.state.doc),this.tree=ce(n.state),this.decorations=this.always||this.hasRTL?Na(n,this.tree,this.always):Tt.none}update(n){let t=n.state.facet(xo)||n.view.textDirection!=Nt.LTR||n.state.facet(Et.perLineTextDirection);if(!t&&!this.hasRTL&&$0(n.changes)&&(this.hasRTL=!0),!t&&!this.hasRTL)return;let e=ce(n.state);(t!=this.always||e!=this.tree||n.docChanged||n.viewportChanged)&&(this.tree=e,this.always=t,this.decorations=Na(n.view,e,t))}},{provide:n=>{function t(e){var i,r;return(r=(i=e.plugin(n))===null||i===void 0?void 0:i.decorations)!==null&&r!==void 0?r:Tt.none}return[Et.outerDecorations.of(t),Xi.lowest(Et.bidiIsolatedRanges.of(t))]}});function Na(n,t,e){let i=new Je,r=n.visibleRanges;e||(r=G0(r,n.state.doc));for(let{from:s,to:o}of r)t.iterate({enter:a=>{let l=a.type.prop(It.isolate);l&&i.add(a.from,a.to,K0[l])},from:s,to:o});return i.finish()}function G0(n,t){let e=t.iter(),i=0,r=[],s=null;for(let{from:o,to:a}of n)if(!(s&&s.to>o&&(o=s.to,o>=a)))for(i+e.value.length<o&&(e.next(o-(i+e.value.length)),i=o);;){let l=i,h=i+e.value.length;if(!e.lineBreak&&gu(e.value)&&(s&&s.to>l-10?s.to=Math.min(a,h):r.push(s={from:l,to:Math.min(a,h)})),h>=a)break;i=h,e.next()}return r}const K0={rtl:Tt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Nt.RTL}),ltr:Tt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Nt.LTR}),auto:Tt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})},xb=Object.freeze(Object.defineProperty({__proto__:null,DocInput:$f,HighlightStyle:tn,IndentContext:Qr,LRLanguage:Fr,Language:oe,LanguageDescription:Xo,LanguageSupport:Qm,ParseContext:_i,StreamLanguage:ol,StringStream:sl,TreeIndentContext:Zr,bidiIsolates:q0,bracketMatching:L0,bracketMatchingHandle:hu,codeFolding:rl,continuedIndent:a0,defaultHighlightStyle:T0,defineLanguageFacet:Yo,delimitedIndent:o0,ensureSyntaxTree:Vf,flatIndent:l0,foldAll:eu,foldCode:Zf,foldEffect:Zi,foldGutter:x0,foldInside:u0,foldKeymap:y0,foldNodeProp:Jf,foldService:Xf,foldState:ti,foldable:Yi,foldedRanges:p0,forceParsing:Xm,getIndentUnit:Dn,getIndentation:Zo,highlightingFor:E0,indentNodeProp:tl,indentOnInput:f0,indentRange:Zm,indentService:Gf,indentString:Qo,indentUnit:Jo,language:Ze,languageDataProp:li,matchBrackets:gn,sublanguageProp:Hf,syntaxHighlighting:su,syntaxParserRunning:Jm,syntaxTree:ce,syntaxTreeAvailable:Ym,toggleFold:b0,unfoldAll:iu,unfoldCode:tu,unfoldEffect:Ci},Symbol.toStringTag,{value:"Module"})),te=({variant:n,settings:t,styles:e})=>{const i=Et.theme({"&":{backgroundColor:t.background,color:t.foreground},".cm-content":{caretColor:t.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:t.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t.selection},".cm-activeLine":{backgroundColor:t.lineHighlight},".cm-gutters":{backgroundColor:t.gutterBackground,color:t.gutterForeground},".cm-activeLineGutter":{backgroundColor:t.lineHighlight}},{dark:n==="dark"}),r=tn.define(e);return[i,su(r)]},Y0=te({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:v.comment,color:"#404080"},{tag:[v.string,v.regexp],color:"#999999"},{tag:v.number,color:"#7090B0"},{tag:[v.bool,v.null],color:"#8080A0"},{tag:[v.punctuation,v.derefOperator],color:"#805080"},{tag:v.keyword,color:"#60B0FF"},{tag:v.definitionKeyword,color:"#B0FFF0"},{tag:v.moduleKeyword,color:"#60B0FF"},{tag:v.operator,color:"#A0A0FF"},{tag:[v.variableName,v.self],color:"#008080"},{tag:v.operatorKeyword,color:"#A0A0FF"},{tag:v.controlKeyword,color:"#80A0FF"},{tag:v.className,color:"#70E080"},{tag:[v.function(v.propertyName),v.propertyName],color:"#50A0A0"},{tag:v.tagName,color:"#009090"},{tag:v.modifier,color:"#B0FFF0"},{tag:[v.squareBracket,v.attributeName],color:"#D0D0FF"}]}),X0=te({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:v.comment,color:"#787b8099"},{tag:v.string,color:"#86b300"},{tag:v.regexp,color:"#4cbf99"},{tag:[v.number,v.bool,v.null],color:"#ffaa33"},{tag:v.variableName,color:"#5c6166"},{tag:[v.definitionKeyword,v.modifier],color:"#fa8d3e"},{tag:[v.keyword,v.special(v.brace)],color:"#fa8d3e"},{tag:v.operator,color:"#ed9366"},{tag:v.separator,color:"#5c6166b3"},{tag:v.punctuation,color:"#5c6166"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#f2ae49"},{tag:[v.className,v.definition(v.typeName)],color:"#22a4e6"},{tag:[v.tagName,v.typeName,v.self,v.labelName],color:"#55b4d4"},{tag:v.angleBracket,color:"#55b4d480"},{tag:v.attributeName,color:"#f2ae49"}]}),J0=te({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:v.comment,color:"#6E6E6E"},{tag:[v.string,v.regexp,v.special(v.brace)],color:"#5C81B3"},{tag:v.number,color:"#C1E1B8"},{tag:v.bool,color:"#53667D"},{tag:[v.definitionKeyword,v.modifier,v.function(v.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[v.keyword,v.moduleKeyword,v.operatorKeyword,v.operator],color:"#697A8E",fontWeight:"bold"},{tag:[v.variableName,v.attributeName],color:"#708E67"},{tag:[v.function(v.variableName),v.definition(v.propertyName),v.derefOperator],color:"#fff"},{tag:v.tagName,color:"#A3D295"}]}),Q0=te({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:v.comment,color:"#666666"},{tag:[v.string,v.special(v.brace)],color:"#54BE0D"},{tag:v.regexp,color:"#E9C062"},{tag:v.number,color:"#CF6A4C"},{tag:[v.keyword,v.operator],color:"#5EA6EA"},{tag:v.variableName,color:"#7587A6"},{tag:[v.definitionKeyword,v.modifier],color:"#F9EE98"},{tag:[v.propertyName,v.function(v.variableName)],color:"#937121"},{tag:[v.typeName,v.angleBracket,v.tagName],color:"#9B859D"}]}),Z0=te({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:v.comment,color:"#6B4E32"},{tag:[v.keyword,v.operator,v.derefOperator],color:"#EF5D32"},{tag:v.className,color:"#EFAC32",fontWeight:"bold"},{tag:[v.typeName,v.propertyName,v.function(v.variableName),v.definition(v.variableName)],color:"#EFAC32"},{tag:v.definition(v.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:v.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[v.number,v.bool],color:"#6C99BB"},{tag:[v.variableName,v.self],color:"#7DAF9C"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#D9D762"},{tag:[v.angleBracket,v.tagName,v.attributeName],color:"#EFCB43"}]}),tb=te({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:v.comment,color:"#404040"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#00D8FF"},{tag:v.number,color:"#E62286"},{tag:[v.variableName,v.attributeName,v.self],color:"#E62286",fontWeight:"bold"},{tag:v.function(v.variableName),color:"#fff",fontWeight:"bold"}]}),eb=te({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:v.comment,color:"#BCC8BA"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#5D90CD"},{tag:[v.number,v.bool,v.null],color:"#46A609"},{tag:v.keyword,color:"#AF956F"},{tag:[v.definitionKeyword,v.modifier],color:"#C52727"},{tag:[v.angleBracket,v.tagName,v.attributeName],color:"#606060"},{tag:v.self,color:"#000"}]}),ib=te({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:v.comment,color:"#0088FF"},{tag:v.string,color:"#3AD900"},{tag:v.regexp,color:"#80FFC2"},{tag:[v.number,v.bool,v.null],color:"#FF628C"},{tag:[v.definitionKeyword,v.modifier],color:"#FFEE80"},{tag:v.variableName,color:"#CCCCCC"},{tag:v.self,color:"#FF80E1"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.definition(v.typeName),v.labelName],color:"#FFDD00"},{tag:[v.keyword,v.operator],color:"#FF9D00"},{tag:[v.propertyName,v.typeName],color:"#80FFBB"},{tag:v.special(v.brace),color:"#EDEF7D"},{tag:v.attributeName,color:"#9EFFFF"},{tag:v.derefOperator,color:"#fff"}]}),nb=te({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:v.comment,color:"#AEAEAE"},{tag:[v.string,v.special(v.brace),v.regexp],color:"#8DFF8E"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.function(v.definition(v.variableName)),v.definition(v.typeName)],color:"#A3EBFF"},{tag:[v.number,v.bool,v.null],color:"#62E9BD"},{tag:[v.keyword,v.operator],color:"#2BF1DC"},{tag:[v.definitionKeyword,v.modifier],color:"#F8FBB1"},{tag:[v.variableName,v.self],color:"#B683CA"},{tag:[v.angleBracket,v.tagName,v.typeName,v.propertyName],color:"#60A4F1"},{tag:v.derefOperator,color:"#E0E0E0"},{tag:v.attributeName,color:"#7BACCA"}]}),rb=te({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:v.comment,color:"#6272a4"},{tag:[v.string,v.special(v.brace)],color:"#f1fa8c"},{tag:[v.number,v.self,v.bool,v.null],color:"#bd93f9"},{tag:[v.keyword,v.operator],color:"#ff79c6"},{tag:[v.definitionKeyword,v.typeName],color:"#8be9fd"},{tag:v.definition(v.typeName),color:"#f8f8f2"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.attributeName],color:"#50fa7b"}]}),sb=te({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:v.comment,color:"#AAAAAA"},{tag:[v.keyword,v.operator,v.typeName,v.tagName,v.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[v.attributeName,v.definition(v.propertyName)],color:"#4F9FD0"},{tag:[v.className,v.string,v.special(v.brace)],color:"#CF4F5F"},{tag:v.number,color:"#CF4F5F",fontWeight:"bold"},{tag:v.variableName,fontWeight:"bold"}]}),ob=te({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:v.comment,color:"#9995b7"},{tag:v.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[v.definitionKeyword,v.modifier],color:"#ff5792"},{tag:[v.className,v.tagName,v.definition(v.typeName)],color:"#0094f0"},{tag:[v.number,v.bool,v.null,v.special(v.brace)],color:"#5842ff"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#0095a8"},{tag:v.typeName,color:"#b3694d"},{tag:[v.propertyName,v.variableName],color:"#fa8900"},{tag:v.operator,color:"#ff5792"},{tag:v.self,color:"#e64100"},{tag:[v.string,v.regexp],color:"#00b368"},{tag:[v.paren,v.bracket],color:"#0431fa"},{tag:v.labelName,color:"#00bdd6"},{tag:v.attributeName,color:"#e64100"},{tag:v.angleBracket,color:"#9995b7"}]}),lb=te({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:v.comment,color:"#9893a5"},{tag:[v.bool,v.null],color:"#286983"},{tag:v.number,color:"#d7827e"},{tag:v.className,color:"#d7827e"},{tag:[v.angleBracket,v.tagName,v.typeName],color:"#56949f"},{tag:v.attributeName,color:"#907aa9"},{tag:v.punctuation,color:"#797593"},{tag:[v.keyword,v.modifier],color:"#286983"},{tag:[v.string,v.regexp],color:"#ea9d34"},{tag:v.variableName,color:"#d7827e"}]}),ab=te({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:v.comment,color:"#CFCFCF"},{tag:[v.number,v.bool,v.null],color:"#E66C29"},{tag:[v.className,v.definition(v.propertyName),v.function(v.variableName),v.labelName,v.definition(v.typeName)],color:"#2EB43B"},{tag:v.keyword,color:"#D8B229"},{tag:v.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[v.definitionKeyword,v.modifier],color:"#925A47"},{tag:v.string,color:"#704D3D"},{tag:v.typeName,color:"#2F8996"},{tag:[v.variableName,v.propertyName],color:"#77ACB0"},{tag:v.self,color:"#77ACB0",fontWeight:"bold"},{tag:v.regexp,color:"#E3965E"},{tag:[v.tagName,v.angleBracket],color:"#BAA827"},{tag:v.attributeName,color:"#B06520"},{tag:v.derefOperator,color:"#000"}]}),hb=te({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:v.comment,color:"#93A1A1"},{tag:v.string,color:"#2AA198"},{tag:v.regexp,color:"#D30102"},{tag:v.number,color:"#D33682"},{tag:v.variableName,color:"#268BD2"},{tag:[v.keyword,v.operator,v.punctuation],color:"#859900"},{tag:[v.definitionKeyword,v.modifier],color:"#073642",fontWeight:"bold"},{tag:[v.className,v.self,v.definition(v.propertyName)],color:"#268BD2"},{tag:v.function(v.variableName),color:"#268BD2"},{tag:[v.bool,v.null],color:"#B58900"},{tag:v.tagName,color:"#268BD2",fontWeight:"bold"},{tag:v.angleBracket,color:"#93A1A1"},{tag:v.attributeName,color:"#93A1A1"},{tag:v.typeName,color:"#859900"}]}),fb=te({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:v.comment,color:"#8E908C"},{tag:[v.variableName,v.self,v.propertyName,v.attributeName,v.regexp],color:"#C82829"},{tag:[v.number,v.bool,v.null],color:"#F5871F"},{tag:[v.className,v.typeName,v.definition(v.typeName)],color:"#C99E00"},{tag:[v.string,v.special(v.brace)],color:"#718C00"},{tag:v.operator,color:"#3E999F"},{tag:[v.definition(v.propertyName),v.function(v.variableName)],color:"#4271AE"},{tag:v.keyword,color:"#8959A8"},{tag:v.derefOperator,color:"#4D4D4C"}]}),Ab=Object.freeze(Object.defineProperty({__proto__:null,amy:Y0,ayuLight:X0,barf:J0,bespin:Q0,birdsOfParadise:Z0,boysAndGirls:tb,clouds:eb,cobalt:ib,coolGlow:nb,createTheme:te,dracula:rb,espresso:sb,noctisLilac:ob,rosePineDawn:lb,smoothy:ab,solarizedLight:hb,tomorrow:fb},Symbol.toStringTag,{value:"Module"}));export{Mt as $,Xi as A,Dr as B,gb as C,Bm as D,Bt as E,mb as F,Ji as G,Tt as H,Vt as I,je as J,Ii as K,Fr as L,bg as M,vb as N,pe as O,Wf as P,Ti as Q,Je as R,Lt as S,Wt as T,am as U,jt as V,Zt as W,Ot as X,Vo as Y,Se as Z,yf as _,pb as a,Jo as a0,Nt as a1,se as a2,hi as a3,Ge as a4,Qr as a5,Zo as a6,Hr as a7,Qo as a8,zt as a9,qe as aa,gn as ab,Dn as ac,id as ad,bb as ae,wb as af,xb as ag,Ab as ah,ub as b,Xa as c,ce as d,Qm as e,Jf as f,o0 as g,cb as h,tl as i,u0 as j,a0 as k,qo as l,ue as m,It as n,To as o,Ad as p,sh as q,db as r,$m as s,v as t,be as u,_f as v,bt as w,wt as x,dm as y,Et as z};
